---
date created: 2021-12-01 22:58
---

#### 6.1 某一单板机，具有用 8 片 2114 构成的 4K RAM

> Intel 2114：1K × 4 位静态 RAM

两片为一组构成 1K × 8位 RAM，图中 $A_{15}A_{14}$ 线为片选，$A_9\sim A_0$ 为片内地址线，基本地址：

- 第一组：0000H ~ 03FFH
- 第二组：4000H ~ 43FFH
- 第三组：8000H ~ 83FFH
- 第四组：C000H ~ C3FFH

有重叠区，每组的地址范围为 000H ~ 3FFH

#### 6.2 若要扩充 1K RAM（用 2114 片子），规定地址为 8000H ~ 83FFH，地址线应该如何连接？

RAM 低 10 位地址线 $A_9\sim A_0$ 分别接 2114 的地址线。高位 $A_{15}$ 为 1，$A_{14}\sim A{10}$ 为 0，即片选信号 $\overline{CS}=A_{15}\,\overline{A_{14}}\,\overline{A_{13}}\,\overline{A_{12}}\,\overline{A_{11}}\,\overline{A_{10}}$

#### 6.3

以 64KB 为例，地址范围为 000H ~ 3FFH，逻辑地址为 `[DS]:0000H` 到 `[DS]:FFFFH`

```asm
DATA_SEG	SEGMENT
		COUNT	DW	0		; 记录数量
DATA_SEG	ENDS

CODE_SEG	SEGMENT
		MOV		AH, 00H		; 初始化寄存器
		MOV		BH, FFH
		MOV		AL, AH
		MOV		BL, BH
		
		; 给该范围的存储器写入00H
AGAIN:	MOV		CX, 0000H	; CX 中存放地址
		MOV		[CX], AL	; 写入数据
		INC		CX			; 地址加一
		JNZ		AGAIN		; 如果CX!=0000H则跳转AGAIN

		; 读出该范围内的数据(此时CX为0)
JUDGE:	MOV		AL, [CX]	; 读出
		CMP		AL, AH		; 判断
		JNZ		OPT			; 如果数值不同,则跳转
		
		MOV		[CX], BL	; 写入FFH
		MOV		BL,	[CX]	; 读出
		CMP		BL, BH		
		JNZ		OPT			; 如果读出的FFH不一致,则跳转
		
BACK:	INC		CX			; 计数器加一
		JNZ		JUDGE		; 继续判断后面的位
		JMP		DONE		; 计数器回到0,结束

		; 数量加一,将地址放入栈中
OPT:	INC		COUNT
		PUSH	CX
		JMP		BACK
DONE:

CODE_SEG	ENDS
```
