---
date created: 2021-12-01 22:58
---

# 实验二 静态存储器

## 1. 实验目的

1. 了解存储器扩展的方法和存储器的读写
2. 掌握 CPU 对 16 位 存储器的访问方法

## 2. 实验原理

存储器中，从偶地址开始存放的字称为规则字，从奇地址开始存放的字称为非规则字。处理器访问 **规则字** 只需要一个时钟周期，`BHE#` 和 `BLE#` 同时有效，从而同时选通存储器奇体和偶体。处理器访问 **非规则字** 却需要两个时钟周期，第一个时钟周期 `BHE#` 有效，访问奇字节；第二个时钟周期  `BLE#` 有效，访问偶字节。处理器访问字节只需要一个时钟周期，视其存放单元为奇或偶，而 `BHE#` 或  `BLE#` 有效，从而选通奇体或偶体。

![[微机原理/实验/src/2-1.png]]

## 3. 实验内容

按照规则字写存储器，编写实验程序，将 `0000H～000FH` 共 16 个数写入 SRAM 的从 `0000H` 起始的一段空间中，然后通过系统命令查看该存储空间，检测写入数据是否正确。

## 4. 实验 2-1 写规则字存储器

### 4.1.  实验步骤

#### 4.1.1. 按表接线

|     |      |     |      |      |
| :-: | :--: | :-: | :--: | :--: |
|     |  XA1 | --- |  A0  |      |
|     |  ... | --- |  ... |      |
|     | XA15 | --- |  A14 |      |
|     |  XD0 | --- |  D0  |      |
|     |  ... | --- |  ... |      |
|  系  |  XD7 | --- |  D7  |      |
|  统  |  XD8 | --- |  D8  | SRAM |
|  总  |  ... | --- |  ... |   单  |
|  线  | XD15 | --- |  D15 |   元  |
|     | BLE# | --- | BLE# |      |
|     | BHE# | --- | BHE# |      |
|     | MWR# | --- |  WR  |      |
|     | MRD# | --- |  RD  |      |
|     |  MY0 | --- |  CS  |      |

#### 4.1.2. 编写实验程序，经编译、链接无误后装入系统

#### 4.1.3. 运行程序，待程序运行停止

#### 4.1.4. 通过 `D` 命令查看写入存储器中的数据

`D8000:0000` 回车，或打开侧边 Memory 视窗，查看地址为 `8000:0000` 开始的单元，即可看到存储器中的数据，应为 `0001,0002,...,000F` 共 16 个字

#### 4.1.5. 实验代码

```c
SSTACK  SEGMENT STACK
        DW 32 DUP(?)
SSTACK  ENDS
CODE    SEGMENT
START   PROC FAR
        ASSUME CS:CODE 
        MOV AX, 8000H ; 存储器扩展空间段地址
        MOV DS, AX
AA0:    MOV SI, 0000H ; 数据首地址
        MOV CX, 0020H
        MOV AX, 0000H
AA1:    MOV [SI], AX
        INC AX
        INC SI
        INC SI
        LOOP AA1
        MOV AX,4C00H
        INT 21H ; 程序终止
START   ENDP
CODE    ENDS
        END START
```

#### 4.1.6. 测试结果

将 `CX` 寄存器的值改为 `20H`，从 `8000:0000` 到 `8000:003F` 单元存放了 `00,01,02,...1f` 这 32 个数。其中，每个字按照小端方式存储，即存储单元内存储的数据为 `00 00 01 00 02 00 03 00` 等等。

![[微机原理/实验/src/2-1-2.png]]

#### 4.1.7. 流程图

![[微机原理/实验/src/Pasted image 20211121131816.png]]

## 5. 实验 2-2 非规则字写存储器

### 5.1.  实验内容

改变 2-1 实验程序，按非规则字写存储器，观察实验结果。给 `SI` 寄存器赋奇地址数，`MOV SI,0001H` 即为非规则字写存储器。

改变实验程序，按字节方式写存储器，观察实验现象。

#### 5.1.1. 实验代码

```c
SSTACK  SEGMENT STACK
        DW 32 DUP(?)
SSTACK  ENDS
CODE    SEGMENT
START   PROC FAR
        ASSUME CS:CODE 
        MOV AX, 8000H ; 存储器扩展空间段地址
        MOV DS, AX
AA0:    MOV SI, 0001H ; 数据首地址，改为奇数
        MOV CX, 0020H
        MOV AX, 0000H
AA1:    MOV [SI], AL
		INC SI
		MOV [SI], AH
        INC SI
		INC AX
        LOOP AA1
        MOV AX,4C00H
        INT 21H ; 程序终止
START ENDP
CODE ENDS
        END START
```

#### 5.1.2. 测试结果

将 `CX` 寄存器的值改为 `20H`，`SI` 的值改为 `0001H`，执行后存储器中的数据向后偏移了一个字节。

![[微机原理/实验/src/2-2-1.png]]

#### 5.1.3. 流程图

![[微机原理/实验/src/2-3_dia.svg]]
