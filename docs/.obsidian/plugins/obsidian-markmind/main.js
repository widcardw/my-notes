"use strict";var t=require("obsidian");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function e(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))}function i(t,e){const i=Object.keys(e).map((i=>function(t,e,i){const n=t[e],r=t.hasOwnProperty(e);let s=i(n);n&&Object.setPrototypeOf(s,n);return Object.setPrototypeOf(o,s),t[e]=o,a;function o(...i){return s===n&&t[e]===o&&a(),s.apply(this,i)}function a(){t[e]===o&&(r?t[e]=n:delete t[e]),s!==n&&(s=n,Object.setPrototypeOf(o,n||Function))}}(t,i,e[i])));return 1===i.length?i[0]:function(){i.forEach((t=>t()))}}var n={"Open as mindmap board":"Open as mindmap","Create new mindmap":"Create new mindmap","New mindmap board":"New mindmap board","Untitled mindmap":"Untitled mindmap","Open as markdown":"Open as markdown","Sub title":"Sub title","Export to opml":"Export to opml","Export to image":"Export to image","Canvas size":"Canvas size","Canvas size desc":"Width and height of the canvas","Canvas background":"Canvas background","Canvas background desc":"Background color of canvas","Max level of node to markdown head":"Max level of node to create a Heading","Max level of node to markdown head desc":"Specify which Node Level creates a seperate Heading instead of a List-Item","Font size":"Font Size","Font size desc":"Specify the Font Size","Mind map layout direct":"Mindmap Layout","Mind map layout direct desc":"Specify the direction the nodes are placed in your Mindmap",Right:"Right",Left:"Left",Centered:"Centered","Open PDF File":"Open PDF file...","Save Image error,Please try again":"Save image error,please try again","Creating Rect Annotate":"Creating rect annotate...","Cancel Create Rect Annotate":"Cancel create rect annotate","File Is Not Exist":"File is not exist","Open File Error":"Open file error","PDF Cannot Open More Instances":"PDF reader cannot open more instances","Create Rect Annotate":"Created rect annotate","Stroke Array":"Stroke Color","Stroke Array Desc":"Node link color base on this value or random color","PDFJs Plugin Path":"PDF reader path","PDFJs Plugin Path Desc":"If you want to use PDF annotation,You need download pdf js plugin and set up this value","Andriod pdfjs Plugin Path":"Andriod pdf reader path","Ios pdfjs Plugin Path":"Ios pdf reader path","Mac pdfjs Plugin Path":"Mac pdfjs Plugin Path","PDF Path":"PDF store path","PDF Annotate Path":"PDF annotate store path","PDF Image Path":"Image store path of PDF rect annotate","Miss PDF Reader Path":"Miss PDF plugin path,you need download Pdf js plugin,and set up value of PDF reader path","Please Use Rich Mode":"Please change yaml mindmap-plugin basic to rich","The probation period has ended":"The probation period has ended or active code has expired",Rect:"Rect",Circle:"Circle",Pointer:"Pointer","Show MindMap":"Show mind map","Hide MindMap":"Hide mind map","Open Protocol":"Support protocol","Open Protocol Desc":"Support protocol like 'obsidian://{protocol name}' for function of jump to pdf annotate",Protocol:"Protocol","Protocol Desc":"Protocol name",Open:"Open",Close:"Close","Open as outline":"Open as outline","Show Annotate":"Show annotate","Annotation save type":"PDF annotation save type","Annotation save type desc":"The type of save pdf annotation,there are two file types:`annos` and `md`，`annos` as default,`annos` is `json` file in fact ","Export annotate pdf":"Export annotate pdf","Export annotate pdf tip":"This is a time-consuming operation. Please wait patiently","Export annotate pdf success":"Export pdf success","Export annotate pdf error":"Export pdf error","Active Code":"Active code","Active Code Desc":"You can active markmind by use this value. Web site:<https://www.markmind.net>","Active error":"Active code error","Active success":"Active success","Annotate PDF":"Annotate PDF","Annotate EPUB":"Annotate EPUB","PDF Viewer Theme":"PDF viewer theme","PDF Viewer Theme desc":"Theme of pdf viewer","Copy as markdown":"Copy as markdown","Copy node text":"Copy node text only","Copy node link":"Copy node link","Export as opml":"Export as opml","Mobile app not support":"File not support mobile app","Not support file type":"The file type is not support,please open pdf file","Not find md file":"This pdf has not annotations in valut","Please select another node":"Please select another node","Change layout to mindmap":"Change layout to mindmap","Change layout to right":"Change layout to right","Change layout to left":"Change layout to left","Change layout to tree":"Change layout to tree","Copy mindmap node":"Copy selected node","Paste to node":"Paste to node","Toggle mardkown/mindmap":"Toggle markdown/mindmap mode","Copy node id":"Copy node ID","Mobile Active Code":"Mobile active code","Mobile Active Code Desc":"You can active mobile markmind by use value , it will create if you input active code","Mindmap mode":"Minmmap mode","Mindmap mode desc":"When create mindmap , it will create mode of this value , `basic` mode as default","Pdf screen short":"Folder to save image","Pdf screen short desc":"Save image to this folder when use pdf rect annotate","Set mindmap to center":"Set mindmap to center",save:"Save",cancel:"Cancel","Remove annotate space":"Remove space of pdf annotate","Remove annotate space desc":"In environment of chinese , open this and it will remove spaces between text automatic","Get path of vault":"Get base path of vault","Smooth movement":"Support smooth movement of mindmap nodes","Smooth movement desc":"Smooth movement of mindmap nodes","Support code block":"Support parse code block of mindmap","Support code block desc":"Support parse code block of mindmap in markdown file",toPng:"Export to PNG","Set pdf js path":"Set up pdf js plugin path of mobile app","Please open a mind map":"Please open a mind map and try this command again","Set up pdf js path success":"Success,please restart obsidian","Create new outline":"Create new outline","Copy node":"Copy","Paste node":"Paste","Fill color":"Fill color","Stroke color":"Stroke color","Text color":"Text color","Text align":"Text align","Stroke width":"Stroke width","Stroke style":"Stroke style",nodeColor:"Setup board color",nodeColorDesc:"Use this to setup node background/stroke/font color","Export to html":"Export to html","Change layout to fishLeft":"Change layout to left fish","Change layout to fishRight":"Change layout to right fish","Open as table":"Open as table","get table html":"Get html code of table","get table markdown":"Get markdown of table","Get pdf annotations":"Import pdf highlight annotations","extract highlight success":"Import pdf highlight success","Change basic mode to rich mode":"Change basic mode to rich mode","Export pdf annotations":"Export pdf annotations","Format of pdf highlight":"Format of pdf highlight","Format of pdf highlight desc":"When export pdf highights , it will generate file in this format","Use new version of pdfjs":"Toggle to new version of pdfjs","Use old version of pdfjs":"Toggle to old version of pdfjs",searchResult:"Find {{nodeNumber}} nodes contains this word","Toggle search box":"Toggle search box","Fine tune height of annotate":"Fine tune height of annotate","Fine tune height of annotate desc":"Fine tune height of annotate , adjust upward (px)","Fine tune height of annotate desc one":"Fine tune height of annotate , adjust downward (px)","Create hand drawn mindmap":"Create hand drawn mindmap from basic mode"};const r={ar:{},cs:{},da:{},de:{"Open as mindmap board":"Öffne als Mindmap","Create new mindmap":"Erstelle neue Mindmap","New mindmap board":"Neue Mindmap","Untitled mindmap":"Unbenannte Mindmap","Open as markdown":"Öffne als Markdown","Sub title":"Untertitel","Export to opml":"Exportiere als opml","Export to image":"Exportiere als Bild","Canvas size":"Leinwandgröße","Canvas size desc":"Breite und Höhe der Leinwand","Canvas background":"Leinwand Hintergrund","Canvas background desc":"Hintergrundfarbe der Leinwand","Max level of node to markdown head":"Maximale Knotenebene welche eine Überschrift erstellt","Max level of node to markdown head desc":"Angeben, welche Knotenebene eine separate Überschrift anstelle eines Listenelements erstellt.","Font size":"Schriftgröße","Font size desc":"Gebe die Schriftgröße ans","Mind map layout direct":"Mindmap Layout","Mind map layout direct desc":"Geben Sie die Richtung an, in der die Knoten in Ihrer Mindmap platziert werden.",Right:"Rechts",Left:"Links",Centered:"Zentriert"},en:n,"en-gb":{},es:{},fr:{},hi:{},id:{},it:{},ja:{},ko:{},nl:{},nn:{},pl:{},pt:{},"pt-br":{},ro:{},ru:{},tr:{},"zh-cn":{"Open as mindmap board":"打开为思维导图","Create new mindmap":"创建新思维导图","New mindmap board":"新建思维导图","Untitled mindmap":"未命名思维导图","Open as markdown":"打开为 Markdown 文件","Sub title":"新节点","Export to opml":"导出至OPML","Export to image":"导出至图片","Canvas size":"画布尺寸","Canvas size desc":"绘制思维导图画布的宽度和高度","Canvas background":"背景颜色","Canvas background desc":"画布的背景颜色","Max level of node to markdown head":"节点文字转为markdown标题的最大层级","Max level of node to markdown head desc":"将小于该层级的节点文字转为markdown标题，最大层级为6，因为HTML标题支持最大为6级","Font size":"文字大小","Font size desc":"思维导图文字默认大小，单位px","Mind map layout direct":"思维导图布局方向","Mind map layout direct desc":"思维导图的布局方向，分为向两侧发散、仅右侧、仅左侧三个方向","Expand node":"展开节点","Collapse node":"收缩节点","Only show this node":"仅显示该节点","Expand all node":"展开所有节点","Collapse all node":"收缩所有节点","Add relate link":"添加联系线","Remove relate link":"删除联系线","Add summary node":"添加归纳","Remove summary node":"删除归纳","Remove node":"删除节点","Only remove this node":"仅删除该节点","Add child node":"添加子节点","Add brother node":"添加兄弟节点","Open PDF File":"正在打开PDF文件...","Save Image error,Please try again":"保存图片失败，请重试","Creating Rect Annotate":"正在创建矩形标注","Cancel Create Rect Annotate":"取消创建矩形标注","File Is Not Exist":"文件不存在","Open File Error":"打开文件失败","PDF Cannot Open More Instances":"不支持多开PDF阅读器","Create Rect Annotate":"创建矩形标注成功","Stroke Array":"颜色组","Stroke Array Desc":"节点连线颜色将按照颜色组生成,否则生成随机颜色","PDFJs Plugin Path":"PDFJs 插件路径","Andriod pdfjs Plugin Path":"安卓 PDFJs 插件路径","Ios pdfjs Plugin Path":"IOS PDFJs 插件路径","Mac pdfjs Plugin Path":"Mac PDFJs 插件路径","PDFJs Plugin Path Desc":"如果您要使用PDF标注功能，您需要下载PDFJS插件，并设置插件路径","PDF Path":"PDF 存储路径","PDF Annotate Path":"PDF 标注存储路径","PDF Image Path":"PDF 矩形标注生成的图片存储路径","Miss PDF Reader Path":"缺少PDF插件，您需要下载PDFJS插件，并在设置中设置PDF插件路径(绝对路径)","Please Use Rich Mode":"目前处于Basic模式或者未激活，无法使用PDF标注功能，请使用Rich模式或者激活软件","The probation period has ended":"免费版本或者激活码已过期，请至markmind.net购买激活码以激活应用",Rect:"矩形",Circle:"圆",Pointer:"点","Show MindMap":"显示思维导图","Hide MindMap":"隐藏思维导图","Open Protocol":"开启协议支持","Open Protocol Desc":"支持类似 obsidian://{Protocol name} 的协议,用于跳转至PDF标注",Protocol:"协议名","Protocol Desc":"协议名称",Open:"开启",Close:"关闭","Open as outline":"打开为大纲","Show Annotate":"展示标注","Annotation save type":"标注保存类型","Annotation save type desc":"当保存PDF标注时保存的文件类型，目前分为保存为annos和markdown两种，默认扩展名为annos(本质是json文件)","Export annotate pdf":"导出标注后的PDF文件","Export annotate pdf tip":"这是一个费时的操作，请耐心等待...","Export annotate pdf success":"导出PDF文件成功","Export annotate pdf error":"导出PDF文件失败","Active Code":"激活码","Active Code Desc":"可以使用该值激活markmind,网站：<https://www.markmind.net/cn>","Active error":"激活失败，请检查激活码","Active success":"已激活","Annotate PDF":"打开注释PDF","Annotate EPUB":"打开注释EPUB","PDF Viewer Theme":"PDF阅读器主题","PDF Viewer Theme desc":"切换PDF阅读器主题皮肤","Copy as markdown":"复制为markdown","Copy node text":"仅复制该节点文本","Copy node link":"复制节点引用链接","Export as opml":"导出为OPML","Mobile app not support":"移动端不支持打开本地PDF文件","Not support file type":"不支持注释该文件类型，只支持pdf文件","Not find md file":"这是一个外部pdf文件，在文件夹中尚不存在批注信息","Please select another node":"请选择另一个节点","Change layout to mindmap":"切换思维导图布局为默认","Change layout to right":"切换思维导图布局为右侧","Change layout to left":"切换思维导图布局为左侧","Change layout to tree":"切换思维导图布局为树向下布局","Copy mindmap node":"复制节点","Paste to node":"粘贴节点","Toggle mardkown/mindmap":"切换为Markdown或思维导图模式","Copy node id":"获取节点ID","Mobile Active Code":"移动端激活码","Mobile Active Code Desc":"用于激活移动端，当你填入激活码时，该值将自动生成","Mindmap mode":"思维导图模式","Mindmap mode desc":"当创建思维导图时，将按照该值创建思维导图的模式，默认是basic模式","Pdf screen short":"PDF 截图文件夹","Pdf screen short desc":"用于保存PDF矩形标注所截的图片","Set mindmap to center":"居中思维导图",save:"保存",cancel:"取消","Remove annotate space":"自动移除标注文字中的空格","Remove annotate space desc":"在中文环境下，某些pdf文字标注时，文字之间存在空格，可以开启该选项，将自动移除文字之间的空格","Get path of vault":"获取库的基础路径","Smooth movement":"开启支持思维导图节点支持平滑过渡效果","Smooth movement desc":"当点击引用节点时,节点跳转到同一思维导图的其他节点时的过渡效果","Support code block":"开启支持图文混排","Support code block desc":"支持在markdown文档中图文混排效果",toPng:"导出为PNG图片","Set pdf js path":"设置移动端 pdfjs 插件路径","Please open a mind map":"请打开一个思维导图并重新执行此命令","Set up pdf js path success":"设置 pdfjs 插件路径成功，请重新启动 obsidian","Create new outline":"创建大纲","Copy node":"复制","Paste node":"粘贴","Fill color":"背景颜色","Stroke color":"外框颜色","Text color":"文字颜色","Text align":"对齐方式","Stroke width":"外框粗细","Stroke style":"外框样式",nodeColor:"节点设置面板颜色组",nodeColorDesc:"用于改变节点设置面板颜色组","Export to html":"导出思维导图为html文件","Change layout to fishLeft":"切换思维导图布局为左侧鱼骨图","Change layout to fishRight":"切换思维导图布局为右侧鱼骨图","Open as table":"打开为表格","get table html":"获取表格的HTML源码","get table markdown":"获取表格的 markdown 文本","Get pdf annotations":"导入PDF高亮标注","extract highlight success":"导入PDF高亮成功","Change basic mode to rich mode":"将 basic 模式转为 rich 模式","Export pdf annotations":"导出 PDF 注释","Format of pdf highlight":"PDF 注释格式设置","Format of pdf highlight desc":"当导出 PDF 注释时，将按照该格式生成文件","Use new version of pdfjs":"切换至新版 pdfjs 插件","Use old version of pdfjs":"切换至旧版 pdfjs 插件",searchResult:"发现到 {{nodeNumber}} 个节点包含该关键字","Toggle search box":"打开或关闭搜索框","Fine tune height of annotate":"微调 PDF 标注高度","Fine tune height of annotate desc":"向上调整的距离 (px)","Fine tune height of annotate desc one":"向下调整的距离 (px)","Create hand drawn mindmap":"生成手绘模式的思维导图"},"zh-tw":{}}[t.moment.locale()];function s(e){return r||console.error("Error: mindmap locale not found",t.moment.locale()),r&&r[e]||n[e]}const o=/^(---)$.+?^(---)$.+?/ims,a=["---","","mindmap-plugin: basic","","---","",""].join("\n"),h=["---","","mindmap-plugin: rich","","---","",""].join("\n"),l=["---","","mindmap-plugin: basic","display-mode: outline","","---","",""].join("\n");function d(t,i,n,r,s,a,h,l,d){var c,u;return e(this,void 0,void 0,(function*(){var e=yield t.vault.adapter.read(i.path),l=n.querySelector(".markdown-embed");if(l){if(e=e.trim().replace(o,"")){const{root:t}=Hn.transform(e);(p=jn(t)).isRoot=!0}else var p={id:Fn(),text:"Basic root",isRoot:!0,main:!0};var m=document.createElement("div");m.classList.add("mm-mindmap-container"),m.style.visibility="hidden",null===(c=n.querySelector(".markdown-embed-content"))||void 0===c||(c.style.display="none"),null===(u=n.querySelector(".markdown-embed-link"))||void 0===u||(u.style.zIndex="20"),l.appendChild(m),p.useScale=!1;var f=new pi(p,m,a,!1);if(f.path=i.path,f._mode="basic",f.colors=s,f.parent=r,d?f.initTable(p):(f.init(),f.refresh()),!r)n.findAll(".internal-embed").forEach((e=>{const n=e.getAttribute("src"),r="string"==typeof n&&t.metadataCache.getFirstLinkpathDest(n,i.path);if(r&&"md"!==r.extension&&f){e.innerText="";var s=t.vault.getResourcePath(r);e.createEl("img",{attr:{src:s}},(t=>{e.hasAttribute("width")&&t.setAttribute("width",e.getAttribute("width")),e.hasAttribute("alt")&&t.setAttribute("alt",e.getAttribute("alt"))})),e.addClasses(["image-embed","is-loaded"])}})),n.querySelectorAll("img").forEach((t=>{t.onload=()=>{var e,i=null===(e=t.closest(".mm-node"))||void 0===e?void 0:e.getAttribute("data-id");if(i){var n=f.getNodeById(i);null==n||n.clearCacheData(),null==n||n.refreshBox(),f.timeOut&&clearTimeout(f.timeOut),f.timeOut=setTimeout((()=>{f.refresh()}),300)}},t.setAttribute("draggble","false")}));setTimeout((()=>{r||(f.refresh(),f.toDiv(!0),m.style.visibility="visible",f.center(),f.root.unSelect()),h&&h(f)}),900)}}))}function c(t,i,n,r,s,o,a,h){var l,d;return e(this,void 0,void 0,(function*(){var e=yield t.vault.adapter.read(i.path);if(u=n.querySelector(".markdown-embed")){var h=e.match(/^(\`\`\` json)$.+?^(\`\`\`)$.+?/ims);if(h&&h.length>0)var c=h[0].substring(8,h[0].length-4).trim();else c=JSON.stringify({mindData:[[{id:Fn(),text:"Root",isRoot:!0,main:!0,x:4e3,y:4e3,isExpand:!0,layout:{layoutName:"mindmap2",direct:"mindmap"}}]]});var u,p=document.createElement("div");if(p.classList.add("mm-mindmap-container"),p.style.visibility="hidden",null===(l=n.querySelector(".markdown-embed-content"))||void 0===l||(l.style.display="none"),null===(d=n.querySelector(".markdown-embed-link"))||void 0===d||(d.style.zIndex="20"),u=n.querySelector(".markdown-embed")){u.appendChild(p);var m=JSON.parse(c);m.useScale=!1;var f=new pi(m,p,o,!1);if(f.path=i.path,f.colors=s,f.parent=r,f._mode="rich",f.initRich(m,{}),!r)n.findAll(".internal-embed").forEach((e=>{const n=e.getAttribute("src"),r="string"==typeof n&&t.metadataCache.getFirstLinkpathDest(n,i.path);if(r&&"md"!==r.extension&&f){e.innerText="";var s=t.vault.getResourcePath(r);e.createEl("img",{attr:{src:s}},(t=>{e.hasAttribute("width")&&t.setAttribute("width",e.getAttribute("width")),e.hasAttribute("alt")&&t.setAttribute("alt",e.getAttribute("alt"))})),e.addClasses(["image-embed","is-loaded"])}})),n.querySelectorAll("img").forEach((t=>{t.onload=()=>{var e,i=null===(e=t.closest(".mm-node"))||void 0===e?void 0:e.getAttribute("data-id");if(i){var n=f.getNodeById(i);n&&(n.clearCacheData(),n.refreshBox()),f.timeOut&&clearTimeout(f.timeOut),f.timeOut=setTimeout((()=>{f.refresh()}),300)}},t.setAttribute("draggble","false")}));setTimeout((()=>{r||(f.refresh(),f.toDiv(!0),p.style.visibility="visible",f.center(),f.root.unSelect()),a&&a(f)}),900)}}}))}function u(t,e,i){if(t&&t.length){const[n,r]=e,s=Math.PI/180*i,o=Math.cos(s),a=Math.sin(s);t.forEach((t=>{const[e,i]=t;t[0]=(e-n)*o-(i-r)*a+n,t[1]=(e-n)*a+(i-r)*o+r}))}}function p(t){const e=t[0],i=t[1];return Math.sqrt(Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2))}function m(t,e){const i=e.hachureAngle+90;let n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.max(n,.1);const r=[0,0];if(i)for(const e of t)u(e,r,i);const s=function(t,e){const i=[];for(const e of t){const t=[...e];t[0].join(",")!==t[t.length-1].join(",")&&t.push([t[0][0],t[0][1]]),t.length>2&&i.push(t)}const n=[];e=Math.max(e,.1);const r=[];for(const t of i)for(let e=0;e<t.length-1;e++){const i=t[e],n=t[e+1];if(i[1]!==n[1]){const t=Math.min(i[1],n[1]);r.push({ymin:t,ymax:Math.max(i[1],n[1]),x:t===i[1]?i[0]:n[0],islope:(n[0]-i[0])/(n[1]-i[1])})}}if(r.sort(((t,e)=>t.ymin<e.ymin?-1:t.ymin>e.ymin?1:t.x<e.x?-1:t.x>e.x?1:t.ymax===e.ymax?0:(t.ymax-e.ymax)/Math.abs(t.ymax-e.ymax))),!r.length)return n;let s=[],o=r[0].ymin;for(;s.length||r.length;){if(r.length){let t=-1;for(let e=0;e<r.length&&!(r[e].ymin>o);e++)t=e;r.splice(0,t+1).forEach((t=>{s.push({s:o,edge:t})}))}if(s=s.filter((t=>!(t.edge.ymax<=o))),s.sort(((t,e)=>t.edge.x===e.edge.x?0:(t.edge.x-e.edge.x)/Math.abs(t.edge.x-e.edge.x))),s.length>1)for(let t=0;t<s.length;t+=2){const e=t+1;if(e>=s.length)break;const i=s[t].edge,r=s[e].edge;n.push([[Math.round(i.x),o],[Math.round(r.x),o]])}o+=e,s.forEach((t=>{t.edge.x=t.edge.x+e*t.edge.islope}))}return n}(t,n);if(i){for(const e of t)u(e,r,-i);!function(t,e,i){const n=[];t.forEach((t=>n.push(...t))),u(n,e,i)}(s,r,-i)}return s}class f{constructor(t){this.helper=t}fillPolygons(t,e){return this._fillPolygons(t,e)}_fillPolygons(t,e){const i=m(t,e);return{type:"fillSketch",ops:this.renderLines(i,e)}}renderLines(t,e){const i=[];for(const n of t)i.push(...this.helper.doubleLineOps(n[0][0],n[0][1],n[1][0],n[1][1],e));return i}}class g extends f{fillPolygons(t,e){let i=e.hachureGap;i<0&&(i=4*e.strokeWidth),i=Math.max(i,.1);const n=m(t,Object.assign({},e,{hachureGap:i})),r=Math.PI/180*e.hachureAngle,s=[],o=.5*i*Math.cos(r),a=.5*i*Math.sin(r);for(const[t,e]of n)p([t,e])&&s.push([[t[0]-o,t[1]+a],[...e]],[[t[0]+o,t[1]-a],[...e]]);return{type:"fillSketch",ops:this.renderLines(s,e)}}}class v extends f{fillPolygons(t,e){const i=this._fillPolygons(t,e),n=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),r=this._fillPolygons(t,n);return i.ops=i.ops.concat(r.ops),i}}class y{constructor(t){this.helper=t}fillPolygons(t,e){const i=m(t,e=Object.assign({},e,{hachureAngle:0}));return this.dotsOnLines(i,e)}dotsOnLines(t,e){const i=[];let n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.max(n,.1);let r=e.fillWeight;r<0&&(r=e.strokeWidth/2);const s=n/4;for(const o of t){const t=p(o),a=t/n,h=Math.ceil(a)-1,l=t-h*n,d=(o[0][0]+o[1][0])/2-n/4,c=Math.min(o[0][1],o[1][1]);for(let t=0;t<h;t++){const o=c+l+t*n,a=d-s+2*Math.random()*s,h=o-s+2*Math.random()*s,u=this.helper.ellipse(a,h,r,r,e);i.push(...u.ops)}}return{type:"fillSketch",ops:i}}}class x{constructor(t){this.helper=t}fillPolygons(t,e){const i=m(t,e);return{type:"fillSketch",ops:this.dashedLine(i,e)}}dashedLine(t,e){const i=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,n=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap,r=[];return t.forEach((t=>{const s=p(t),o=Math.floor(s/(i+n)),a=(s+n-o*(i+n))/2;let h=t[0],l=t[1];h[0]>l[0]&&(h=t[1],l=t[0]);const d=Math.atan((l[1]-h[1])/(l[0]-h[0]));for(let t=0;t<o;t++){const s=t*(i+n),o=s+i,l=[h[0]+s*Math.cos(d)+a*Math.cos(d),h[1]+s*Math.sin(d)+a*Math.sin(d)],c=[h[0]+o*Math.cos(d)+a*Math.cos(d),h[1]+o*Math.sin(d)+a*Math.sin(d)];r.push(...this.helper.doubleLineOps(l[0],l[1],c[0],c[1],e))}})),r}}class b{constructor(t){this.helper=t}fillPolygons(t,e){const i=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,n=e.zigzagOffset<0?i:e.zigzagOffset,r=m(t,e=Object.assign({},e,{hachureGap:i+n}));return{type:"fillSketch",ops:this.zigzagLines(r,n,e)}}zigzagLines(t,e,i){const n=[];return t.forEach((t=>{const r=p(t),s=Math.round(r/(2*e));let o=t[0],a=t[1];o[0]>a[0]&&(o=t[1],a=t[0]);const h=Math.atan((a[1]-o[1])/(a[0]-o[0]));for(let t=0;t<s;t++){const r=2*t*e,s=2*(t+1)*e,a=Math.sqrt(2*Math.pow(e,2)),l=[o[0]+r*Math.cos(h),o[1]+r*Math.sin(h)],d=[o[0]+s*Math.cos(h),o[1]+s*Math.sin(h)],c=[l[0]+a*Math.cos(h+Math.PI/4),l[1]+a*Math.sin(h+Math.PI/4)];n.push(...this.helper.doubleLineOps(l[0],l[1],c[0],c[1],i),...this.helper.doubleLineOps(c[0],c[1],d[0],d[1],i))}})),n}}const w={};class k{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const _={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function C(t,e){return t.type===e}function D(t){const e=[],i=function(t){const e=new Array;for(;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:0,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];e[e.length]={type:1,text:`${parseFloat(RegExp.$1)}`},t=t.substr(RegExp.$1.length)}return e[e.length]={type:2,text:""},e}(t);let n="BOD",r=0,s=i[r];for(;!C(s,2);){let o=0;const a=[];if("BOD"===n){if("M"!==s.text&&"m"!==s.text)return D("M0,0"+t);r++,o=_[s.text],n=s.text}else C(s,1)?o=_[n]:(r++,o=_[s.text],n=s.text);if(!(r+o<i.length))throw new Error("Path data ended short");for(let t=r;t<r+o;t++){const e=i[t];if(!C(e,1))throw new Error("Param not a number: "+n+","+e.text);a[a.length]=+e.text}if("number"!=typeof _[n])throw new Error("Bad segment: "+n);{const t={key:n,data:a};e.push(t),r+=o,s=i[r],"M"===n&&(n="L"),"m"===n&&(n="l")}}return e}function E(t){let e=0,i=0,n=0,r=0;const s=[];for(const{key:o,data:a}of t)switch(o){case"M":s.push({key:"M",data:[...a]}),[e,i]=a,[n,r]=a;break;case"m":e+=a[0],i+=a[1],s.push({key:"M",data:[e,i]}),n=e,r=i;break;case"L":s.push({key:"L",data:[...a]}),[e,i]=a;break;case"l":e+=a[0],i+=a[1],s.push({key:"L",data:[e,i]});break;case"C":s.push({key:"C",data:[...a]}),e=a[4],i=a[5];break;case"c":{const t=a.map(((t,n)=>n%2?t+i:t+e));s.push({key:"C",data:t}),e=t[4],i=t[5];break}case"Q":s.push({key:"Q",data:[...a]}),e=a[2],i=a[3];break;case"q":{const t=a.map(((t,n)=>n%2?t+i:t+e));s.push({key:"Q",data:t}),e=t[2],i=t[3];break}case"A":s.push({key:"A",data:[...a]}),e=a[5],i=a[6];break;case"a":e+=a[5],i+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],e,i]});break;case"H":s.push({key:"H",data:[...a]}),e=a[0];break;case"h":e+=a[0],s.push({key:"H",data:[e]});break;case"V":s.push({key:"V",data:[...a]}),i=a[0];break;case"v":i+=a[0],s.push({key:"V",data:[i]});break;case"S":s.push({key:"S",data:[...a]}),e=a[2],i=a[3];break;case"s":{const t=a.map(((t,n)=>n%2?t+i:t+e));s.push({key:"S",data:t}),e=t[2],i=t[3];break}case"T":s.push({key:"T",data:[...a]}),e=a[0],i=a[1];break;case"t":e+=a[0],i+=a[1],s.push({key:"T",data:[e,i]});break;case"Z":case"z":s.push({key:"Z",data:[]}),e=n,i=r}return s}function S(t){const e=[];let i="",n=0,r=0,s=0,o=0,a=0,h=0;for(const{key:l,data:d}of t){switch(l){case"M":e.push({key:"M",data:[...d]}),[n,r]=d,[s,o]=d;break;case"C":e.push({key:"C",data:[...d]}),n=d[4],r=d[5],a=d[2],h=d[3];break;case"L":e.push({key:"L",data:[...d]}),[n,r]=d;break;case"H":n=d[0],e.push({key:"L",data:[n,r]});break;case"V":r=d[0],e.push({key:"L",data:[n,r]});break;case"S":{let t=0,s=0;"C"===i||"S"===i?(t=n+(n-a),s=r+(r-h)):(t=n,s=r),e.push({key:"C",data:[t,s,...d]}),a=d[0],h=d[1],n=d[2],r=d[3];break}case"T":{const[t,s]=d;let o=0,l=0;"Q"===i||"T"===i?(o=n+(n-a),l=r+(r-h)):(o=n,l=r);const c=n+2*(o-n)/3,u=r+2*(l-r)/3,p=t+2*(o-t)/3,m=s+2*(l-s)/3;e.push({key:"C",data:[c,u,p,m,t,s]}),a=o,h=l,n=t,r=s;break}case"Q":{const[t,i,s,o]=d,l=n+2*(t-n)/3,c=r+2*(i-r)/3,u=s+2*(t-s)/3,p=o+2*(i-o)/3;e.push({key:"C",data:[l,c,u,p,s,o]}),a=t,h=i,n=s,r=o;break}case"A":{const t=Math.abs(d[0]),i=Math.abs(d[1]),s=d[2],o=d[3],a=d[4],h=d[5],l=d[6];if(0===t||0===i)e.push({key:"C",data:[n,r,h,l,h,l]}),n=h,r=l;else if(n!==h||r!==l){M(n,r,h,l,t,i,s,o,a).forEach((function(t){e.push({key:"C",data:t})})),n=h,r=l}break}case"Z":e.push({key:"Z",data:[]}),n=s,r=o}i=l}return e}function N(t,e,i){return[t*Math.cos(i)-e*Math.sin(i),t*Math.sin(i)+e*Math.cos(i)]}function M(t,e,i,n,r,s,o,a,h,l){const d=(c=o,Math.PI*c/180);var c;let u=[],p=0,m=0,f=0,g=0;if(l)[p,m,f,g]=l;else{[t,e]=N(t,e,-d),[i,n]=N(i,n,-d);const o=(t-i)/2,l=(e-n)/2;let c=o*o/(r*r)+l*l/(s*s);c>1&&(c=Math.sqrt(c),r*=c,s*=c);const u=r*r,v=s*s,y=u*v-u*l*l-v*o*o,x=u*l*l+v*o*o,b=(a===h?-1:1)*Math.sqrt(Math.abs(y/x));f=b*r*l/s+(t+i)/2,g=b*-s*o/r+(e+n)/2,p=Math.asin(parseFloat(((e-g)/s).toFixed(9))),m=Math.asin(parseFloat(((n-g)/s).toFixed(9))),t<f&&(p=Math.PI-p),i<f&&(m=Math.PI-m),p<0&&(p=2*Math.PI+p),m<0&&(m=2*Math.PI+m),h&&p>m&&(p-=2*Math.PI),!h&&m>p&&(m-=2*Math.PI)}let v=m-p;if(Math.abs(v)>120*Math.PI/180){const t=m,e=i,a=n;m=h&&m>p?p+120*Math.PI/180*1:p+120*Math.PI/180*-1,u=M(i=f+r*Math.cos(m),n=g+s*Math.sin(m),e,a,r,s,o,0,h,[m,t,f,g])}v=m-p;const y=Math.cos(p),x=Math.sin(p),b=Math.cos(m),w=Math.sin(m),k=Math.tan(v/4),_=4/3*r*k,C=4/3*s*k,D=[t,e],E=[t+_*x,e-C*y],S=[i+_*w,n-C*b],A=[i,n];if(E[0]=2*D[0]-E[0],E[1]=2*D[1]-E[1],l)return[E,S,A].concat(u);{u=[E,S,A].concat(u);const t=[];for(let e=0;e<u.length;e+=3){const i=N(u[e][0],u[e][1],d),n=N(u[e+1][0],u[e+1][1],d),r=N(u[e+2][0],u[e+2][1],d);t.push([i[0],i[1],n[0],n[1],r[0],r[1]])}return t}}const A={randOffset:function(t,e){return H(t,e)},randOffsetWithRange:function(t,e,i){return j(t,e,i)},ellipse:function(t,e,i,n,r){const s=B(i,n,r);return O(t,e,r,s).opset},doubleLineOps:function(t,e,i,n,r){return $(t,e,i,n,r,!0)}};function L(t,e,i,n,r){return{type:"path",ops:$(t,e,i,n,r)}}function T(t,e,i){const n=(t||[]).length;if(n>2){const r=[];for(let e=0;e<n-1;e++)r.push(...$(t[e][0],t[e][1],t[e+1][0],t[e+1][1],i));return e&&r.push(...$(t[n-1][0],t[n-1][1],t[0][0],t[0][1],i)),{type:"path",ops:r}}return 2===n?L(t[0][0],t[0][1],t[1][0],t[1][1],i):{type:"path",ops:[]}}function P(t,e,i,n,r){return function(t,e){return T(t,!0,e)}([[t,e],[t+i,e],[t+i,e+n],[t,e+n]],r)}function I(t,e){let i=U(t,1*(1+.2*e.roughness),e);if(!e.disableMultiStroke){const n=U(t,1.5*(1+.22*e.roughness),function(t){const e=Object.assign({},t);e.randomizer=void 0,t.seed&&(e.seed=t.seed+1);return e}(e));i=i.concat(n)}return{type:"path",ops:i}}function B(t,e,i){const n=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),r=Math.ceil(Math.max(i.curveStepCount,i.curveStepCount/Math.sqrt(200)*n)),s=2*Math.PI/r;let o=Math.abs(t/2),a=Math.abs(e/2);const h=1-i.curveFitting;return o+=H(o*h,i),a+=H(a*h,i),{increment:s,rx:o,ry:a}}function O(t,e,i,n){const[r,s]=G(n.increment,t,e,n.rx,n.ry,1,n.increment*j(.1,j(.4,1,i),i),i);let o=V(r,null,i);if(!i.disableMultiStroke&&0!==i.roughness){const[r]=G(n.increment,t,e,n.rx,n.ry,1.5,0,i),s=V(r,null,i);o=o.concat(s)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function R(t,e,i,n,r,s,o,a,h){const l=t,d=e;let c=Math.abs(i/2),u=Math.abs(n/2);c+=H(.01*c,h),u+=H(.01*u,h);let p=r,m=s;for(;p<0;)p+=2*Math.PI,m+=2*Math.PI;m-p>2*Math.PI&&(p=0,m=2*Math.PI);const f=2*Math.PI/h.curveStepCount,g=Math.min(f/2,(m-p)/2),v=X(g,l,d,c,u,p,m,1,h);if(!h.disableMultiStroke){const t=X(g,l,d,c,u,p,m,1.5,h);v.push(...t)}return o&&(a?v.push(...$(l,d,l+c*Math.cos(p),d+u*Math.sin(p),h),...$(l,d,l+c*Math.cos(m),d+u*Math.sin(m),h)):v.push({op:"lineTo",data:[l,d]},{op:"lineTo",data:[l+c*Math.cos(p),d+u*Math.sin(p)]})),{type:"path",ops:v}}function F(t,e){const i=[];for(const n of t)if(n.length){const t=e.maxRandomnessOffset||0,r=n.length;if(r>2){i.push({op:"move",data:[n[0][0]+H(t,e),n[0][1]+H(t,e)]});for(let s=1;s<r;s++)i.push({op:"lineTo",data:[n[s][0]+H(t,e),n[s][1]+H(t,e)]})}}return{type:"fillPath",ops:i}}function z(t,e){return function(t,e){let i=t.fillStyle||"hachure";if(!w[i])switch(i){case"zigzag":w[i]||(w[i]=new g(e));break;case"cross-hatch":w[i]||(w[i]=new v(e));break;case"dots":w[i]||(w[i]=new y(e));break;case"dashed":w[i]||(w[i]=new x(e));break;case"zigzag-line":w[i]||(w[i]=new b(e));break;case"hachure":default:i="hachure",w[i]||(w[i]=new f(e))}return w[i]}(e,A).fillPolygons(t,e)}function q(t){return t.randomizer||(t.randomizer=new k(t.seed||0)),t.randomizer.next()}function j(t,e,i,n=1){return i.roughness*n*(q(i)*(e-t)+t)}function H(t,e,i=1){return j(-t,t,e,i)}function $(t,e,i,n,r,s=!1){const o=s?r.disableMultiStrokeFill:r.disableMultiStroke,a=W(t,e,i,n,r,!0,!1);if(o)return a;const h=W(t,e,i,n,r,!0,!0);return a.concat(h)}function W(t,e,i,n,r,s,o){const a=Math.pow(t-i,2)+Math.pow(e-n,2),h=Math.sqrt(a);let l=1;l=h<200?1:h>500?.4:-.0016668*h+1.233334;let d=r.maxRandomnessOffset||0;d*d*100>a&&(d=h/10);const c=d/2,u=.2+.2*q(r);let p=r.bowing*r.maxRandomnessOffset*(n-e)/200,m=r.bowing*r.maxRandomnessOffset*(t-i)/200;p=H(p,r,l),m=H(m,r,l);const f=[],g=()=>H(c,r,l),v=()=>H(d,r,l),y=r.preserveVertices;return s&&(o?f.push({op:"move",data:[t+(y?0:g()),e+(y?0:g())]}):f.push({op:"move",data:[t+(y?0:H(d,r,l)),e+(y?0:H(d,r,l))]})),o?f.push({op:"bcurveTo",data:[p+t+(i-t)*u+g(),m+e+(n-e)*u+g(),p+t+2*(i-t)*u+g(),m+e+2*(n-e)*u+g(),i+(y?0:g()),n+(y?0:g())]}):f.push({op:"bcurveTo",data:[p+t+(i-t)*u+v(),m+e+(n-e)*u+v(),p+t+2*(i-t)*u+v(),m+e+2*(n-e)*u+v(),i+(y?0:v()),n+(y?0:v())]}),f}function U(t,e,i){const n=[];n.push([t[0][0]+H(e,i),t[0][1]+H(e,i)]),n.push([t[0][0]+H(e,i),t[0][1]+H(e,i)]);for(let r=1;r<t.length;r++)n.push([t[r][0]+H(e,i),t[r][1]+H(e,i)]),r===t.length-1&&n.push([t[r][0]+H(e,i),t[r][1]+H(e,i)]);return V(n,null,i)}function V(t,e,i){const n=t.length,r=[];if(n>3){const s=[],o=1-i.curveTightness;r.push({op:"move",data:[t[1][0],t[1][1]]});for(let e=1;e+2<n;e++){const i=t[e];s[0]=[i[0],i[1]],s[1]=[i[0]+(o*t[e+1][0]-o*t[e-1][0])/6,i[1]+(o*t[e+1][1]-o*t[e-1][1])/6],s[2]=[t[e+1][0]+(o*t[e][0]-o*t[e+2][0])/6,t[e+1][1]+(o*t[e][1]-o*t[e+2][1])/6],s[3]=[t[e+1][0],t[e+1][1]],r.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}if(e&&2===e.length){const t=i.maxRandomnessOffset;r.push({op:"lineTo",data:[e[0]+H(t,i),e[1]+H(t,i)]})}}else 3===n?(r.push({op:"move",data:[t[1][0],t[1][1]]}),r.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===n&&r.push(...$(t[0][0],t[0][1],t[1][0],t[1][1],i));return r}function G(t,e,i,n,r,s,o,a){const h=[],l=[];if(0===a.roughness){t/=4,l.push([e+n*Math.cos(-t),i+r*Math.sin(-t)]);for(let s=0;s<=2*Math.PI;s+=t){const t=[e+n*Math.cos(s),i+r*Math.sin(s)];h.push(t),l.push(t)}l.push([e+n*Math.cos(0),i+r*Math.sin(0)]),l.push([e+n*Math.cos(t),i+r*Math.sin(t)])}else{const d=H(.5,a)-Math.PI/2;l.push([H(s,a)+e+.9*n*Math.cos(d-t),H(s,a)+i+.9*r*Math.sin(d-t)]);const c=2*Math.PI+d-.01;for(let o=d;o<c;o+=t){const t=[H(s,a)+e+n*Math.cos(o),H(s,a)+i+r*Math.sin(o)];h.push(t),l.push(t)}l.push([H(s,a)+e+n*Math.cos(d+2*Math.PI+.5*o),H(s,a)+i+r*Math.sin(d+2*Math.PI+.5*o)]),l.push([H(s,a)+e+.98*n*Math.cos(d+o),H(s,a)+i+.98*r*Math.sin(d+o)]),l.push([H(s,a)+e+.9*n*Math.cos(d+.5*o),H(s,a)+i+.9*r*Math.sin(d+.5*o)])}return[l,h]}function X(t,e,i,n,r,s,o,a,h){const l=s+H(.1,h),d=[];d.push([H(a,h)+e+.9*n*Math.cos(l-t),H(a,h)+i+.9*r*Math.sin(l-t)]);for(let s=l;s<=o;s+=t)d.push([H(a,h)+e+n*Math.cos(s),H(a,h)+i+r*Math.sin(s)]);return d.push([e+n*Math.cos(o),i+r*Math.sin(o)]),d.push([e+n*Math.cos(o),i+r*Math.sin(o)]),V(d,null,h)}function Y(t,e,i,n,r,s,o,a){const h=[],l=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let d=[0,0];const c=a.disableMultiStroke?1:2,u=a.preserveVertices;for(let p=0;p<c;p++)0===p?h.push({op:"move",data:[o[0],o[1]]}):h.push({op:"move",data:[o[0]+(u?0:H(l[0],a)),o[1]+(u?0:H(l[0],a))]}),d=u?[r,s]:[r+H(l[p],a),s+H(l[p],a)],h.push({op:"bcurveTo",data:[t+H(l[p],a),e+H(l[p],a),i+H(l[p],a),n+H(l[p],a),d[0],d[1]]});return h}function Z(t){return[...t]}function J(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function K(t,e,i){const n=J(e,i);if(0===n)return J(t,e);let r=((t[0]-e[0])*(i[0]-e[0])+(t[1]-e[1])*(i[1]-e[1]))/n;return r=Math.max(0,Math.min(1,r)),J(t,Q(e,i,r))}function Q(t,e,i){return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]}function tt(t,e,i,n){const r=n||[];if(function(t,e){const i=t[e+0],n=t[e+1],r=t[e+2],s=t[e+3];let o=3*n[0]-2*i[0]-s[0];o*=o;let a=3*n[1]-2*i[1]-s[1];a*=a;let h=3*r[0]-2*s[0]-i[0];h*=h;let l=3*r[1]-2*s[1]-i[1];return l*=l,o<h&&(o=h),a<l&&(a=l),o+a}(t,e)<i){const i=t[e+0];if(r.length){(s=r[r.length-1],o=i,Math.sqrt(J(s,o)))>1&&r.push(i)}else r.push(i);r.push(t[e+3])}else{const n=.5,s=t[e+0],o=t[e+1],a=t[e+2],h=t[e+3],l=Q(s,o,n),d=Q(o,a,n),c=Q(a,h,n),u=Q(l,d,n),p=Q(d,c,n),m=Q(u,p,n);tt([s,l,u,m],0,i,r),tt([m,p,c,h],0,i,r)}var s,o;return r}function et(t,e){return it(t,0,t.length,e)}function it(t,e,i,n,r){const s=r||[],o=t[e],a=t[i-1];let h=0,l=1;for(let n=e+1;n<i-1;++n){const e=K(t[n],o,a);e>h&&(h=e,l=n)}return Math.sqrt(h)>n?(it(t,e,l+1,n,s),it(t,l,i,n,s)):(s.length||s.push(o),s.push(a)),s}function nt(t,e=.15,i){const n=[],r=(t.length-1)/3;for(let i=0;i<r;i++){tt(t,3*i,e,n)}return i&&i>0?it(n,0,n.length,i):n}const rt="none";class st{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,e,i){return{shape:t,sets:e||[],options:i||this.defaultOptions}}line(t,e,i,n,r){const s=this._o(r);return this._d("line",[L(t,e,i,n,s)],s)}rectangle(t,e,i,n,r){const s=this._o(r),o=[],a=P(t,e,i,n,s);if(s.fill){const r=[[t,e],[t+i,e],[t+i,e+n],[t,e+n]];"solid"===s.fillStyle?o.push(F([r],s)):o.push(z([r],s))}return s.stroke!==rt&&o.push(a),this._d("rectangle",o,s)}ellipse(t,e,i,n,r){const s=this._o(r),o=[],a=B(i,n,s),h=O(t,e,s,a);if(s.fill)if("solid"===s.fillStyle){const i=O(t,e,s,a).opset;i.type="fillPath",o.push(i)}else o.push(z([h.estimatedPoints],s));return s.stroke!==rt&&o.push(h.opset),this._d("ellipse",o,s)}circle(t,e,i,n){const r=this.ellipse(t,e,i,i,n);return r.shape="circle",r}linearPath(t,e){const i=this._o(e);return this._d("linearPath",[T(t,!1,i)],i)}arc(t,e,i,n,r,s,o=!1,a){const h=this._o(a),l=[],d=R(t,e,i,n,r,s,o,!0,h);if(o&&h.fill)if("solid"===h.fillStyle){const o=Object.assign({},h);o.disableMultiStroke=!0;const a=R(t,e,i,n,r,s,!0,!1,o);a.type="fillPath",l.push(a)}else l.push(function(t,e,i,n,r,s,o){const a=t,h=e;let l=Math.abs(i/2),d=Math.abs(n/2);l+=H(.01*l,o),d+=H(.01*d,o);let c=r,u=s;for(;c<0;)c+=2*Math.PI,u+=2*Math.PI;u-c>2*Math.PI&&(c=0,u=2*Math.PI);const p=(u-c)/o.curveStepCount,m=[];for(let t=c;t<=u;t+=p)m.push([a+l*Math.cos(t),h+d*Math.sin(t)]);return m.push([a+l*Math.cos(u),h+d*Math.sin(u)]),m.push([a,h]),z([m],o)}(t,e,i,n,r,s,h));return h.stroke!==rt&&l.push(d),this._d("arc",l,h)}curve(t,e){const i=this._o(e),n=[],r=I(t,i);if(i.fill&&i.fill!==rt&&t.length>=3){const e=nt(function(t,e=0){const i=t.length;if(i<3)throw new Error("A curve must have at least three points.");const n=[];if(3===i)n.push(Z(t[0]),Z(t[1]),Z(t[2]),Z(t[2]));else{const i=[];i.push(t[0],t[0]);for(let e=1;e<t.length;e++)i.push(t[e]),e===t.length-1&&i.push(t[e]);const r=[],s=1-e;n.push(Z(i[0]));for(let t=1;t+2<i.length;t++){const e=i[t];r[0]=[e[0],e[1]],r[1]=[e[0]+(s*i[t+1][0]-s*i[t-1][0])/6,e[1]+(s*i[t+1][1]-s*i[t-1][1])/6],r[2]=[i[t+1][0]+(s*i[t][0]-s*i[t+2][0])/6,i[t+1][1]+(s*i[t][1]-s*i[t+2][1])/6],r[3]=[i[t+1][0],i[t+1][1]],n.push(r[1],r[2],r[3])}}return n}(t),10,(1+i.roughness)/2);"solid"===i.fillStyle?n.push(F([e],i)):n.push(z([e],i))}return i.stroke!==rt&&n.push(r),this._d("curve",n,i)}polygon(t,e){const i=this._o(e),n=[],r=T(t,!0,i);return i.fill&&("solid"===i.fillStyle?n.push(F([t],i)):n.push(z([t],i))),i.stroke!==rt&&n.push(r),this._d("polygon",n,i)}path(t,e){const i=this._o(e),n=[];if(!t)return this._d("path",n,i);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const r=i.fill&&"transparent"!==i.fill&&i.fill!==rt,s=i.stroke!==rt,o=!!(i.simplification&&i.simplification<1),a=function(t,e,i){const n=S(E(D(t))),r=[];let s=[],o=[0,0],a=[];const h=()=>{a.length>=4&&s.push(...nt(a,e)),a=[]},l=()=>{h(),s.length&&(r.push(s),s=[])};for(const{key:t,data:e}of n)switch(t){case"M":l(),o=[e[0],e[1]],s.push(o);break;case"L":h(),s.push([e[0],e[1]]);break;case"C":if(!a.length){const t=s.length?s[s.length-1]:o;a.push([t[0],t[1]])}a.push([e[0],e[1]]),a.push([e[2],e[3]]),a.push([e[4],e[5]]);break;case"Z":h(),s.push([o[0],o[1]])}if(l(),!i)return r;const d=[];for(const t of r){const e=et(t,i);e.length&&d.push(e)}return d}(t,1,o?4-4*i.simplification:(1+i.roughness)/2);return r&&("solid"===i.fillStyle?n.push(F(a,i)):n.push(z(a,i))),s&&(o?a.forEach((t=>{n.push(T(t,!1,i))})):n.push(function(t,e){const i=S(E(D(t))),n=[];let r=[0,0],s=[0,0];for(const{key:t,data:o}of i)switch(t){case"M":{const t=1*(e.maxRandomnessOffset||0),i=e.preserveVertices;n.push({op:"move",data:o.map((n=>n+(i?0:H(t,e))))}),s=[o[0],o[1]],r=[o[0],o[1]];break}case"L":n.push(...$(s[0],s[1],o[0],o[1],e)),s=[o[0],o[1]];break;case"C":{const[t,i,r,a,h,l]=o;n.push(...Y(t,i,r,a,h,l,s,e)),s=[h,l];break}case"Z":n.push(...$(s[0],s[1],r[0],r[1],e)),s=[r[0],r[1]]}return{type:"path",ops:n}}(t,i))),this._d("path",n,i)}opsToPath(t,e){let i="";for(const n of t.ops){const t="number"==typeof e&&e>=0?n.data.map((t=>+t.toFixed(e))):n.data;switch(n.op){case"move":i+=`M${t[0]} ${t[1]} `;break;case"bcurveTo":i+=`C${t[0]} ${t[1]}, ${t[2]} ${t[3]}, ${t[4]} ${t[5]} `;break;case"lineTo":i+=`L${t[0]} ${t[1]} `}}return i.trim()}toPaths(t){const e=t.sets||[],i=t.options||this.defaultOptions,n=[];for(const t of e){let e=null;switch(t.type){case"path":e={d:this.opsToPath(t),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:rt};break;case"fillPath":e={d:this.opsToPath(t),stroke:rt,strokeWidth:0,fill:i.fill||rt};break;case"fillSketch":e=this.fillSketch(t,i)}e&&n.push(e)}return n}fillSketch(t,e){let i=e.fillWeight;return i<0&&(i=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||rt,strokeWidth:i,fill:rt}}}class ot{constructor(t,e){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new st(e)}draw(t){const e=t.sets||[],i=t.options||this.getDefaultOptions(),n=this.ctx,r=t.options.fixedDecimalPlaceDigits;for(const s of e)switch(s.type){case"path":n.save(),n.strokeStyle="none"===i.stroke?"transparent":i.stroke,n.lineWidth=i.strokeWidth,i.strokeLineDash&&n.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(n.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(n,s,r),n.restore();break;case"fillPath":{n.save(),n.fillStyle=i.fill||"";const e="curve"===t.shape||"polygon"===t.shape||"path"===t.shape?"evenodd":"nonzero";this._drawToContext(n,s,r,e),n.restore();break}case"fillSketch":this.fillSketch(n,s,i)}}fillSketch(t,e,i){let n=i.fillWeight;n<0&&(n=i.strokeWidth/2),t.save(),i.fillLineDash&&t.setLineDash(i.fillLineDash),i.fillLineDashOffset&&(t.lineDashOffset=i.fillLineDashOffset),t.strokeStyle=i.fill||"",t.lineWidth=n,this._drawToContext(t,e,i.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,e,i,n="nonzero"){t.beginPath();for(const n of e.ops){const e="number"==typeof i&&i>=0?n.data.map((t=>+t.toFixed(i))):n.data;switch(n.op){case"move":t.moveTo(e[0],e[1]);break;case"bcurveTo":t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]);break;case"lineTo":t.lineTo(e[0],e[1])}}"fillPath"===e.type?t.fill(n):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,e,i,n,r){const s=this.gen.line(t,e,i,n,r);return this.draw(s),s}rectangle(t,e,i,n,r){const s=this.gen.rectangle(t,e,i,n,r);return this.draw(s),s}ellipse(t,e,i,n,r){const s=this.gen.ellipse(t,e,i,n,r);return this.draw(s),s}circle(t,e,i,n){const r=this.gen.circle(t,e,i,n);return this.draw(r),r}linearPath(t,e){const i=this.gen.linearPath(t,e);return this.draw(i),i}polygon(t,e){const i=this.gen.polygon(t,e);return this.draw(i),i}arc(t,e,i,n,r,s,o=!1,a){const h=this.gen.arc(t,e,i,n,r,s,o,a);return this.draw(h),h}curve(t,e){const i=this.gen.curve(t,e);return this.draw(i),i}path(t,e){const i=this.gen.path(t,e);return this.draw(i),i}}const at="http://www.w3.org/2000/svg";class ht{constructor(t,e){this.svg=t,this.gen=new st(e)}draw(t){const e=t.sets||[],i=t.options||this.getDefaultOptions(),n=this.svg.ownerDocument||window.document,r=n.createElementNS(at,"g"),s=t.options.fixedDecimalPlaceDigits;for(const o of e){let e=null;switch(o.type){case"path":e=n.createElementNS(at,"path"),e.setAttribute("d",this.opsToPath(o,s)),e.setAttribute("stroke",i.stroke),e.setAttribute("stroke-width",i.strokeWidth+""),e.setAttribute("fill","none"),i.strokeLineDash&&e.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&e.setAttribute("stroke-dashoffset",`${i.strokeLineDashOffset}`);break;case"fillPath":e=n.createElementNS(at,"path"),e.setAttribute("d",this.opsToPath(o,s)),e.setAttribute("stroke","none"),e.setAttribute("stroke-width","0"),e.setAttribute("fill",i.fill||""),"curve"!==t.shape&&"polygon"!==t.shape||e.setAttribute("fill-rule","evenodd");break;case"fillSketch":e=this.fillSketch(n,o,i)}e&&r.appendChild(e)}return r}fillSketch(t,e,i){let n=i.fillWeight;n<0&&(n=i.strokeWidth/2);const r=t.createElementNS(at,"path");return r.setAttribute("d",this.opsToPath(e,i.fixedDecimalPlaceDigits)),r.setAttribute("stroke",i.fill||""),r.setAttribute("stroke-width",n+""),r.setAttribute("fill","none"),i.fillLineDash&&r.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&r.setAttribute("stroke-dashoffset",`${i.fillLineDashOffset}`),r}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,e){return this.gen.opsToPath(t,e)}line(t,e,i,n,r){const s=this.gen.line(t,e,i,n,r);return this.draw(s)}rectangle(t,e,i,n,r){const s=this.gen.rectangle(t,e,i,n,r);return this.draw(s)}ellipse(t,e,i,n,r){const s=this.gen.ellipse(t,e,i,n,r);return this.draw(s)}circle(t,e,i,n){const r=this.gen.circle(t,e,i,n);return this.draw(r)}linearPath(t,e){const i=this.gen.linearPath(t,e);return this.draw(i)}polygon(t,e){const i=this.gen.polygon(t,e);return this.draw(i)}arc(t,e,i,n,r,s,o=!1,a){const h=this.gen.arc(t,e,i,n,r,s,o,a);return this.draw(h)}curve(t,e){const i=this.gen.curve(t,e);return this.draw(i)}path(t,e){const i=this.gen.path(t,e);return this.draw(i)}}var lt={canvas:(t,e)=>new ot(t,e),svg:(t,e)=>new ht(t,e),generator:t=>new st(t),newSeed:()=>st.newSeed()};function dt(t){if(window.getSelection){t.focus();var e=window.getSelection();e.selectAllChildren(t),e.collapseToEnd()}}class ct{constructor(t,e){this.box={x:0,y:0,width:0,height:0},this.name="node",this.isExpand=!0,this.isSelect=!1,this.children=[],this.isHide=!1,this.isEdit=!1,this._barDom=null,this.callout=null,this.wireFrames=[],this.summaries=[],this.induce=null,this.wireFrame=null,this.layout=null,this.wfs=[],this.induces=[],this.belongInduce=null,this._wireFrames=[],this._summaries=[],this._removeLink=null,this.shouldRender=!0,this.containBar=!1,this.tNode=null,this._shapeDom=null,this.data=t,this.mindmap=e,this.data.stroke&&(this.stroke=this.data.stroke),this.data.style&&(this.style=Object.assign({},this.style,this.data.style)),this.initDom()}getId(){return this.data.id}getParent(){return this.parent||null}initDom(){this.containEl=document.createElement("div"),this.containEl.classList.add("mm-node"),this.containEl.setAttribute("contentEditable","false"),this.containEl.setAttribute("tabIndex","-1"),this.containEl.setAttribute("data-id",this.data.id),this.containEl.setAttribute("draggable","false"),this.assistDom=document.createElement("div"),this.assistDom.classList.add("mm-node-assist"),this.contentEl=document.createElement("div"),this.contentEl.classList.add("mm-node-content"),this.containEl.appendChild(this.contentEl),this.contentEl.appendChild(this.assistDom),this.editDom=document.createElement("div"),this.editDom.classList.add("mm-node-edit"),this.contentEl.appendChild(this.editDom),this.plgDom=document.createElement("div"),this.plgDom.classList.add("mm-note-dom"),this.contentEl.appendChild(this.plgDom),this.initNodeBar(),this.updateAnnotate(),this.data.note&&this.updateNote(),this.data.isRoot&&(this.containEl.classList.add("mm-root"),this.isRoot=!0),this.setStyle(),this.parseText()}initNodeBar(){this._barDom=document.createElement("div"),this._barDom.classList.add("mm-node-bar"),this.containEl.appendChild(this._barDom)}parseText(){t.MarkdownRenderer.renderMarkdown(this.data.text,this.editDom,this.mindmap.path||"",null).then((()=>{this.data.mdText=this.editDom.innerHTML,this.refreshBox(),this.mindmap&&this.mindmap.emit("initNode",{}),this._delay()}))}isMindmap(t){if(t&&t.frontmatter){var e=t.frontmatter["mindmap-plugin"];return"rich"==e||"basic"==e}return!1}isMindmapRichMode(t){return!!(t&&t.frontmatter&&t.frontmatter["mindmap-plugin"]&&"rich"==t.frontmatter["mindmap-plugin"])}_refreshImage(t,e){t.findAll(".internal-embed").forEach((t=>{const i=t.getAttribute("src");if(i.startsWith("http"))return;const n="string"==typeof i&&this.mindmap.view&&this.mindmap.view.app&&this.mindmap.view.app.metadataCache.getFirstLinkpathDest(i,this.mindmap.path);if(n&&"md"!==n.extension&&e){t.innerText="";var r=this.mindmap.view.app.vault.getResourcePath(n);t.createEl("img",{attr:{src:r}},(e=>{t.hasAttribute("width")&&e.setAttribute("width",t.getAttribute("width")),t.hasAttribute("alt")&&e.setAttribute("alt",t.getAttribute("alt"))})),t.addClasses(["image-embed","is-loaded"])}})),t.querySelectorAll("img").forEach((t=>{var i;t.onload||(t.onload=()=>{var i,n=null===(i=t.closest(".mm-node"))||void 0===i?void 0:i.getAttribute("data-id");if(n){var r=e.getNodeById(n);r&&(r.clearCacheData(),r.refreshBox(),e.emit("renderEditNode",{node:r}))}}),t.setAttribute("draggble","false");var n=null===(i=t.closest(".mm-node"))||void 0===i?void 0:i.getAttribute("data-id");if(n){var r=e.getNodeById(n);r&&(r.clearCacheData(),r.refreshBox(),e.emit("renderEditNode",{node:r}))}}))}_createHandDrawFill(){var t=this.getLevel();if(this.mindmap&&this.mindmap.useHandMode&&t<=1){var e=this.mindmap._rc||lt.svg(this.mindmap.draw),i=!!document.querySelector(".theme-dark")||!1;this.shapeSvg&&this.mindmap.draw.node.removeChild(this.shapeSvg);var n=this.getBox(),r=0==t?"solid":"sunburst",s=0==t?"1":"2",o=i?"#fff":"rgb(0, 170, 255)",a=i?"#333":"#000";this.shapeSvg=e.rectangle(n.x,n.y,n.width,n.height,{fill:this.stroke||this.data.stroke||o,fillStyle:r,stroke:this.stroke||this.data.stroke||a,fillWeight:s}),this.mindmap.draw.node.appendChild(this.shapeSvg)}}_delay(){var i=this;this.editDom.style.overflow="",this.editDom.findAll(".internal-embed").forEach((n=>e(this,void 0,void 0,(function*(){const e=n.getAttribute("src");if("string"==typeof e){var r=t.parseLinktext(e);if(!r)return;var s="";if(this.mindmap&&this.mindmap.view){var o=this.mindmap.view.app.metadataCache.getFirstLinkpathDest(r.path,this.mindmap.path);if(o instanceof t.TFile&&"md"===o.extension){if(this.editDom.querySelector(`.markdown-embed[data-name="${o.path}"]`))return;var a=this.mindmap.view.app.metadataCache.getFileCache(o);if(this.isMindmap(a)){if((u=document.createElement("div")).classList.add("markdown-embed"),n.appendChild(u),u.setAttribute("data-name",o.path),(p=document.createElement("div")).classList.add("markdown-embed-content"),(m=document.createElement("div")).classList.add("markdown-preview-view"),p.appendChild(m),(f=document.createElement("div")).classList.add("markdown-embed-link"),f.setAttribute("aria-label","Open link"),f.innerHTML=`<a data-href="${e}" href="${e}" class="internal-link" target="_blank" rel="noopener"><svg viewBox="0 0 100 100" class="link" width="20" height="20"><path fill="currentColor" stroke="currentColor" d="M74,8c-4.8,0-9.3,1.9-12.7,5.3l-10,10c-2.9,2.9-4.7,6.6-5.1,10.6C46,34.6,46,35.3,46,36c0,2.7,0.6,5.4,1.8,7.8l3.1-3.1 C50.3,39.2,50,37.6,50,36c0-3.7,1.5-7.3,4.1-9.9l10-10c2.6-2.6,6.2-4.1,9.9-4.1s7.3,1.5,9.9,4.1c2.6,2.6,4.1,6.2,4.1,9.9 s-1.5,7.3-4.1,9.9l-10,10C71.3,48.5,67.7,50,64,50c-1.6,0-3.2-0.3-4.7-0.8l-3.1,3.1c2.4,1.1,5,1.8,7.8,1.8c4.8,0,9.3-1.9,12.7-5.3 l10-10C90.1,35.3,92,30.8,92,26s-1.9-9.3-5.3-12.7C83.3,9.9,78.8,8,74,8L74,8z M62,36c-0.5,0-1,0.2-1.4,0.6l-24,24 c-0.5,0.5-0.7,1.2-0.6,1.9c0.2,0.7,0.7,1.2,1.4,1.4c0.7,0.2,1.4,0,1.9-0.6l24-24c0.6-0.6,0.8-1.5,0.4-2.2C63.5,36.4,62.8,36,62,36 z M36,46c-4.8,0-9.3,1.9-12.7,5.3l-10,10c-3.1,3.1-5,7.2-5.2,11.6c0,0.4,0,0.8,0,1.2c0,4.8,1.9,9.3,5.3,12.7 C16.7,90.1,21.2,92,26,92s9.3-1.9,12.7-5.3l10-10C52.1,73.3,54,68.8,54,64c0-2.7-0.6-5.4-1.8-7.8l-3.1,3.1 c0.5,1.5,0.8,3.1,0.8,4.7c0,3.7-1.5,7.3-4.1,9.9l-10,10C33.3,86.5,29.7,88,26,88s-7.3-1.5-9.9-4.1S12,77.7,12,74 c0-3.7,1.5-7.3,4.1-9.9l10-10c2.6-2.6,6.2-4.1,9.9-4.1c1.6,0,3.2,0.3,4.7,0.8l3.1-3.1C41.4,46.6,38.7,46,36,46L36,46z"></path></svg></a>`,this.editDom.style.overflow="auto",u.appendChild(p),u.appendChild(f),this.isMindmapRichMode(a))yield c(this.mindmap.view.app,o,n,this,this.mindmap.colors,this.mindmap.setting,(t=>{this._refreshImage(n,t),setTimeout((()=>{t.toDiv(!0),t.containerEL.style.visibility="visible",t.center(),t.root.unSelect(),this.clearCacheData(),this.refreshBox(),this.mindmap&&this.mindmap.emit("renderEditNode",{node:i}),this._createHandDrawFill()}),900)}));else{var h=a&&a.frontmatter;if(h)var l=!!h["display-mode"]&&"table"==h["display-mode"];yield d(this.mindmap.view.app,o,n,this,this.mindmap.colors,this.mindmap.setting,(t=>{this._refreshImage(n,t),setTimeout((()=>{t.toDiv(!0),t.containerEL.style.visibility="visible",t.center(),t.root.unSelect(),this.clearCacheData(),this.refreshBox(),this.mindmap&&this.mindmap.emit("renderEditNode",{node:i}),this._createHandDrawFill()}),900)}),0,l)}}else{if(!(s=yield this.mindmap.view.app.vault.adapter.read(o.path)).trim())return;var u,p,m,f;if((u=document.createElement("div")).classList.add("markdown-embed"),u.setAttribute("data-name",o.path),(p=document.createElement("div")).classList.add("markdown-embed-content"),(m=document.createElement("div")).classList.add("markdown-preview-view"),p.appendChild(m),(f=document.createElement("div")).classList.add("markdown-embed-link"),f.setAttribute("aria-label","Open link"),f.innerHTML=`<a data-href="${e}" href="${e}" class="internal-link" target="_blank" rel="noopener"><svg viewBox="0 0 100 100" class="link" width="20" height="20"><path fill="currentColor" stroke="currentColor" d="M74,8c-4.8,0-9.3,1.9-12.7,5.3l-10,10c-2.9,2.9-4.7,6.6-5.1,10.6C46,34.6,46,35.3,46,36c0,2.7,0.6,5.4,1.8,7.8l3.1-3.1 C50.3,39.2,50,37.6,50,36c0-3.7,1.5-7.3,4.1-9.9l10-10c2.6-2.6,6.2-4.1,9.9-4.1s7.3,1.5,9.9,4.1c2.6,2.6,4.1,6.2,4.1,9.9 s-1.5,7.3-4.1,9.9l-10,10C71.3,48.5,67.7,50,64,50c-1.6,0-3.2-0.3-4.7-0.8l-3.1,3.1c2.4,1.1,5,1.8,7.8,1.8c4.8,0,9.3-1.9,12.7-5.3 l10-10C90.1,35.3,92,30.8,92,26s-1.9-9.3-5.3-12.7C83.3,9.9,78.8,8,74,8L74,8z M62,36c-0.5,0-1,0.2-1.4,0.6l-24,24 c-0.5,0.5-0.7,1.2-0.6,1.9c0.2,0.7,0.7,1.2,1.4,1.4c0.7,0.2,1.4,0,1.9-0.6l24-24c0.6-0.6,0.8-1.5,0.4-2.2C63.5,36.4,62.8,36,62,36 z M36,46c-4.8,0-9.3,1.9-12.7,5.3l-10,10c-3.1,3.1-5,7.2-5.2,11.6c0,0.4,0,0.8,0,1.2c0,4.8,1.9,9.3,5.3,12.7 C16.7,90.1,21.2,92,26,92s9.3-1.9,12.7-5.3l10-10C52.1,73.3,54,68.8,54,64c0-2.7-0.6-5.4-1.8-7.8l-3.1,3.1 c0.5,1.5,0.8,3.1,0.8,4.7c0,3.7-1.5,7.3-4.1,9.9l-10,10C33.3,86.5,29.7,88,26,88s-7.3-1.5-9.9-4.1S12,77.7,12,74 c0-3.7,1.5-7.3,4.1-9.9l10-10c2.6-2.6,6.2-4.1,9.9-4.1c1.6,0,3.2,0.3,4.7,0.8l3.1-3.1C41.4,46.6,38.7,46,36,46L36,46z"></path></svg></a>`,n.appendChild(u),u.appendChild(p),u.appendChild(f),r.subpath){var g=this.mindmap.view.app.metadataCache.getFileCache(o),v=t.resolveSubpath(g,r.subpath);if(v&&v.start&&v.end)var y=s.substring(v.start.offset,v.end.offset);else if(v&&v.start&&!v.end)y=s.substr(v.start.offset);else y=s||""}else y=s||"";y&&t.MarkdownRenderer.renderMarkdown(y,m,this.mindmap.path||"",null).then((()=>{this.refreshBox(),this.mindmap&&this.mindmap.emit("renderEditNode",{node:i}),this._createHandDrawFill()}))}}}}})))),setTimeout((()=>{this._refreshImage(this.editDom,this.mindmap),(this.editDom.querySelector("code")||this.editDom.querySelector(".MathJax"))&&setTimeout((()=>{this.clearCacheData(),this.refreshBox(),this.mindmap&&this.mindmap.emit("renderEditNode",{}),this._createHandDrawFill()}),200),this.editDom.findAll("a.external-link").length&&setTimeout((()=>{this.clearCacheData(),this.refreshBox(),this._createHandDrawFill(),this.mindmap&&(this.mindmap._initTime&&clearTimeout(this.mindmap._initTime),this.mindmap._initTime=setTimeout((()=>{this.mindmap.emit("renderEditNode",{node:i})}),600))}),300),setTimeout((()=>{this.refreshBox(),this._createHandDrawFill()}),1500)}),280)}_delayRefresh(){}select(){this.isSelect=!0,"relateLink"==this.nodeType||"callout"==this.nodeType?this.containEl.setAttribute("draggable","false"):this.containEl.setAttribute("draggable","true"),Object.assign(window,{myNode:this}),this.containEl.classList.contains("mm-node-select")||this.containEl.classList.add("mm-node-select"),this.mindmap.selectNode=this}unSelect(){this.isSelect=!1,this.containEl.setAttribute("draggable","false"),this.containEl.classList.contains("mm-node-select")&&this.containEl.classList.remove("mm-node-select")}edit(){this.editDom.innerText="",this._oldText=this.data.text,this.editDom.innerText=this._oldText,this.editDom.setAttribute("contentEditable","true"),this.containEl.setAttribute("draggable","false"),this.editDom.focus(),this.mindmap.editNode=this,this.isEdit=!0,dt(this.editDom),this.editDom.innerText==s("Sub title")&&this.selectText(),this.containEl.classList.contains("mm-edit-node")||this.containEl.classList.add("mm-edit-node")}selectText(){var t=this.editDom;if(window.getSelection){var e=window.getSelection(),i=document.createRange();i.selectNodeContents(t),e.removeAllRanges(),e.addRange(i)}}cancelEdit(){if(this.shouldRender){var e=this.editDom.innerText.trim()||"";this.data.text=e,this.editDom.innerText="",t.MarkdownRenderer.renderMarkdown(e,this.editDom,this.mindmap.path||"",null).then((()=>{this.data.mdText=this.editDom.innerHTML,this.refreshBox(),this._delay()})),e!=this._oldText&&(this.mindmap.execute("changeNodeText",{node:this,text:e,oldText:this._oldText}),this.callout&&this.callout.refresh()),this.editDom.setAttribute("contentEditable","false"),this.isEdit=!1,this.containEl.classList.contains("mm-edit-node")&&this.containEl.classList.remove("mm-edit-node"),this.mindmap.appEl.focus()}}getLevel(){var t=0,e=this.parent;if(this==this.mindmap.root||this.nodeType&&"freeNode"==this.nodeType)return t;for(t++;e&&e!=this.mindmap.root;)t++,e=e.parent;return t}getChildren(){return this.children}setPosition(t,e){this.box.x=t,this.box.y=e,this.containEl.style.left=t+"px",this.containEl.style.top=e+"px",this.data.x=t,this.data.y=e}getPosition(){return{x:this.box.x,y:this.box.y}}move(t,e){var i=this.getPosition();this.setPosition(i.x+t,i.y+e)}getStyle(){return Object.assign({},this.style)}setStyle(t,e){e&&t?this.style=t:t&&(this.style=Object.assign({},this.style,t));var i=this.style,n="";for(var r in this.style)n+="font-size"==r||"border-width"==r?`${r}:${i[r]}px;`:`${r}:${i[r]};`;this.contentEl.setAttribute("style",n),this.nodeType&&"callout"==this.nodeType&&this.callout&&(this.callout.color=this.style["background-color"]||this.callout.color,this.callout.refresh())}isEmptyObject(t){for(var e in t)return!1;return!0}getData(){var t=Object.assign({},this.data);if(t.mdText&&delete t.mdText,this.layout&&(t.layout={layoutName:this.layout.layoutName,direct:this.layout.direct}),"freeNode"==this.nodeType){t.main=!1;var e=this.getPosition();t.x=e.x,t.y=e.y}return this.isExpand&&(t.isExpand=!0),this.parent&&(t.pid=this.parent.getId()),t.stroke=this.stroke||"",this.isEmptyObject(this.style)||(t.style=Object.assign({},this.style)),this.belongInduce&&(t.direct=this.direct),JSON.parse(JSON.stringify(t))}refreshBox(){this.box=this.getDomBox()}getBox(){return Object.assign({},this.box)}refreshCBox(){this.box=this.getCBox()}getContainBox(){return this.containBar?this.containBox:this.box}getCBox(t){var e=this.getBox(),i=0,n=0;if(this.callout){var r=this.callout.getBox();r.y<e.y&&(i=e.y-r.y),r.y+r.height>e.y+e.height&&(n=r.y+r.height-e.y-e.height)}if(t&&this.wfs.length){var s=0;this.wfs.forEach((t=>{if(t.data&&t.data.text){var e=t.getTextBox().height;s<e&&(s=e)}})),i+=s+3,n+=3}return Object.assign(Object.assign({},e),{th:i,bh:n})}getContainDomBox(){var t=parseInt(this.containEl.style.top);return{x:parseInt(this.containEl.style.left),y:t,width:Math.ceil(this.containEl.offsetWidth),height:Math.ceil(this.containEl.offsetHeight),th:0,bh:0}}getDomBox(){var t=parseInt(this.containEl.style.top);return{x:parseInt(this.containEl.style.left),y:t,width:Math.ceil(this.contentEl.offsetWidth),height:Math.ceil(this.contentEl.offsetHeight),th:0,bh:0}}getNodeList(){var t=[];return function e(i){t.push(i),i.children.forEach((t=>{e(t)}))}(this),t}getShowNodeList(){var t=[];return function e(i){i.isShow()&&t.push(i),i.children.forEach((t=>{e(t)}))}(this),t}getSiblings(){return this.parent?this.parent.children.filter((t=>t!=this)):[]}isLeaf(){return!this.children.length}isShow(){return!this.isHide}show(){this.containEl.style.display="block",this.isHide=!1}hide(){this.containEl.style.display="none",this.isHide=!0}clearCacheData(){for(var t=this;t;)t.boundingRect=null,t=t.parent||t.belongInduce&&t.belongInduce.node}addChild(t,e){-1==this.children.indexOf(t)&&(e>-1?(e>this.children.length&&(e=this.children.length),this.children.splice(e,0,t)):this.children.push(t),t.parent=this)}removeChild(t){var e=this.children.indexOf(t);return e>-1&&this.children.splice(e,1),e}setText(t){this.data.text=t,this.editDom.innerHTML="",this.parseText()}expand(){this.isExpand=!0,this.data.isExpand=!0,function t(e){e.show(),e.boundingRect=null,e.induces.length&&e.induces.forEach((e=>{t(e.root)})),e.isExpand&&(e.layout&&(e.layout.svgDom&&(e.layout.svgDom.show(),e.layout.isShow=!0),e.layout.group&&(e.layout.group.show(),e.layout.isShow=!0)),e.children.forEach((e=>{t(e)})))}(this),function t(e){e.isShow()||e.show(),e.refreshBox(),e.isExpand&&e.children.forEach((e=>{t(e)})),e.wfs.length&&e.wfs.forEach((t=>{t.show(),t.refreshItems()})),e.induces.length&&e.induces.forEach((e=>{e.show(),e.refreshItems(),t(e.root)}))}(this),this.containEl.classList.contains("mm-node-collapse")&&this.containEl.classList.remove("mm-node-collapse")}collapse(){function t(e){e.hide(),e.setPosition(10,10),e.induces.length&&e.induces.forEach((e=>{t(e.root)})),e.layout&&(e.layout.svgDom&&(e.layout.svgDom.hide(),e.layout.isShow=!1),e.layout.group&&(e.layout.group.hide(),e.layout.isShow=!1)),e.isExpand&&e.children.forEach((e=>{t(e)}))}this.children.forEach((e=>{t(e)})),this.isExpand=!1,this.data.isExpand=!1,this.containEl.classList.contains("mm-node-collapse")||this.containEl.classList.add("mm-node-collapse"),this.layout&&(this.layout.svgDom&&(this.layout.svgDom.hide(),this.layout.isShow=!1),this.layout.group&&(this.layout.group.hide(),this.layout.isShow=!1)),this.getMind().updateAllAssist()}isFirst(){if(this.parent){var t=this.parent.getChildren();return t&&0==t.indexOf(this)}return!0}isLast(){if(this.parent){var t=this.parent.getChildren();return t.length&&t.indexOf(this)==t.length-1}return!0}getLayout(){for(var t=this,e=null;t;){if(t.layout){e=t.layout;break}t=t.parent}return e}getTopLayout(){if(!this.parent)return this.layout||null;var t=this,e=null,i=this.layout;for(this.layout=null;t;){if(t.layout){e=t.layout;break}t=t.parent}return this.layout=i,this.topLayout=e,e}getMind(){return this.mindmap||null}setAnnotate(t){"highlight"==t.type?(this.editDom.innerHTML=t.selectText,this.editDom.focus(),dt(this.editDom)):(this.editDom.innerHTML=`![[${t.path}]]`,this.editDom.focus(),dt(this.editDom)),this.data.annotate=t,this.updateAnnotate()}updateAnnotate(){!this.annotateDom&&this.data.annotate&&(this.annotateDom=document.createElement("div"),this.annotateDom.innerHTML='<svg t="1629010944160" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12916" width="16" height="16"><path d="M672.711111 662.670222L361.329778 351.232l266.979555-222.464 266.951111 266.951111-222.492444 266.951111z" fill="#FF445F" p-id="12917"></path><path d="M984.177778 395.719111a125.724444 125.724444 0 0 1-177.92 0l-177.976889-177.948444a125.895111 125.895111 0 0 1 177.976889-178.005334L984.177778 217.770667a125.838222 125.838222 0 0 1 0 177.948444z" fill="#EF5350" p-id="12918"></path><path d="M398.222222 506.965333S-16.867556 996.380444 5.347556 1018.680889C27.591111 1040.952889 517.034667 625.777778 517.034667 625.777778L398.222222 506.965333z" fill="#C4C6CF" p-id="12919"></path><path d="M717.226667 796.188444a125.838222 125.838222 0 0 1-178.005334 0L227.811556 484.721778a125.866667 125.866667 0 0 1 178.005333-177.948445l311.409778 311.438223a125.866667 125.866667 0 0 1 0 177.976888z" fill="#EF5350" p-id="12920"></path></svg>',this.annotateDom.classList.add("mm-node-annotate"),this.assistDom.appendChild(this.annotateDom))}deleteAnnotate(){this.annotateDom&&(this.assistDom.removeChild(this.annotateDom),this.annotateDom=null,this.data.annotate=null)}getAnnotateId(){return this.data.annotate?this.data.annotate.id:null}getAnnotate(){return this.data.annotate?JSON.parse(JSON.stringify(this.data.annotate)):null}updateNote(){if(this.plgDom.innerHTML="",this.data.note){var t=document.createElement("span");this.plgDom.appendChild(t),t.innerHTML='<svg t="1635666821412" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20498" width="16" height="16"><path d="M832 64 192 64C121.6 64 64 121.6 64 192l0 512c0 70.4 57.6 128 128 128l128 0 132.096 120.448C459.072 957.632 466.88 960 474.432 960 493.824 960 512 944.704 512 922.496L512 832l320 0c70.4 0 128-57.6 128-128L960 192C960 121.6 902.4 64 832 64zM896 704c0 35.328-28.672 64-64 64L512 768c-16.96 0-33.28 6.72-45.248 18.752S448 815.04 448 832l0 30.08-84.864-77.376C351.296 773.952 335.936 768 320 768L192 768c-35.328 0-64-28.672-64-64L128 192c0-35.328 28.672-64 64-64l640 0c35.328 0 64 28.672 64 64L896 704zM736 320l-448 0C270.336 320 256 334.336 256 352S270.336 384 288 384l448 0C753.664 384 768 369.664 768 352S753.664 320 736 320zM736 512l-448 0C270.336 512 256 526.336 256 544S270.336 576 288 576l448 0C753.664 576 768 561.664 768 544S753.664 512 736 512z" p-id="20499"></path></svg>',t.style.display="flex",t.style.alignItems="center",t.style.margin="0 4px",t.style.cursor="pointer",t.classList.add("mm-note-span")}}setNote(t){this.data.note=t,this.updateNote()}}class ut{constructor(t,e){this.children=[],this.hasInit=!1,this.isSelect=!1,this.isExpand=!0,this.isEdit=!1,this.data=t,e&&(this.mindmap=e),this.iNode=new ct(t,e),this.iNode.tNode=this}init(t){this.hasInit||(0==this.getLevel()?(this.tdDom=document.createElement("th"),this.tdDom.setAttribute("colspan",t)):this.tdDom=document.createElement("td"),this.tdDom.appendChild(this.iNode.containEl),this.tdDom.setAttribute("data-id",this.data.id),this.hasInit=!0)}_initTdDom(t){this.hasInit||(0==this.getLevel()?(this.tdDom=document.createElement("th"),this.tdDom.setAttribute("colspan",t)):this.tdDom=document.createElement("td"),this.tdDom.innerText=this.data.text,this.tdDom.setAttribute("data-id",this.data.id),this.hasInit=!0)}getLevel(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}isLeaf(){return!this.children.length}isFirst(){if(this.parent){var t=this.parent.getChildren();return t&&0==t.indexOf(this)}return!0}isLast(){if(this.parent){var t=this.parent.getChildren();return t.length&&t.indexOf(this)==t.length-1}return!0}getChildren(){return this.children}getId(){return this.data.id}unSelect(){this.isSelect=!1}select(){this.isSelect=!0}getOffset(t,e){for(var i=0,n=0;t&&t!=e;)i+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent||t.parentElement||t.parentNode;return{x:i,y:n}}getBox(t){var e=parseInt(this.mindmap.tableDom.style.left),i=parseInt(this.mindmap.tableDom.style.top),n=this.getOffset(this.iNode.containEl,this.mindmap.tableDom);return{x:n.x+e,y:n.y+i,width:this.iNode.containEl.clientWidth,height:this.iNode.containEl.clientHeight}}getDomBox(){return this.getBox()}clearCacheData(){}expand(){}refreshBox(){}getAnnotateId(){}addChild(t,e){-1==this.children.indexOf(t)&&(e>-1?(e>this.children.length&&(e=this.children.length),this.children.splice(e,0,t)):this.children.push(t),t.parent=this)}removeChild(t){var e=this.children.indexOf(t);return e>-1&&this.children.splice(e,1),e}getData(){var t=Object.assign({},this.data);return t.mdText&&delete t.mdText,this.isExpand&&(t.isExpand=!0),this.parent&&(t.pid=this.parent.getId()),JSON.parse(JSON.stringify(t))}edit(){this.isEdit=!0,this.iNode.edit()}cancelEdit(){this.isEdit=!1,this.iNode.cancelEdit()}setText(t){this.data.text=t}selectText(){this.iNode.selectText()}getMind(){return this.mindmap}}var pt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function mt(t){var e={exports:{}};return t(e,e.exports),e.exports}function ft(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gt=mt((function(t,e){!function(i,n){var r=function(){var t=null,e={};f();var i=[],n=function(e){if(void 0!==(e=e||{}).seed&&null!==e.seed&&e.seed===parseInt(e.seed,10))t=e.seed;else if("string"==typeof e.seed)t=x(e.seed);else{if(void 0!==e.seed&&null!==e.seed)throw new TypeError("The seed value must be an integer or string");t=null}var h,l;if(null!==e.count&&void 0!==e.count){for(var d=e.count,c=[],u=0;u<e.count;u++)i.push(!1);for(e.count=null;d>c.length;){var p=n(e);null!==t&&(e.seed=t),c.push(p)}return e.count=d,c}return a([h=r(e),l=s(h,e),o(h,l,e)],e)};function r(t){if(i.length>0){var e=u(s=b(t.hue)),n=(s[1]-s[0])/i.length,r=parseInt((e-s[0])/n);return!0===i[r]?r=(r+2)%i.length:i[r]=!0,(e=u(s=[(s[0]+r*n)%359,(s[0]+(r+1)*n)%359]))<0&&(e=360+e),e}var s;return(e=u(s=l(t.hue)))<0&&(e=360+e),e}function s(t,e){if("monochrome"===e.hue)return 0;if("random"===e.luminosity)return u([0,100]);var i=d(t),n=i[0],r=i[1];switch(e.luminosity){case"bright":n=55;break;case"dark":n=r-10;break;case"light":r=55}return u([n,r])}function o(t,e,i){var n=h(t,e),r=100;switch(i.luminosity){case"dark":r=n+20;break;case"light":n=(r+n)/2;break;case"random":n=0,r=100}return u([n,r])}function a(t,e){switch(e.format){case"hsvArray":return t;case"hslArray":return y(t);case"hsl":var i=y(t);return"hsl("+i[0]+", "+i[1]+"%, "+i[2]+"%)";case"hsla":var n=y(t),r=e.alpha||Math.random();return"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+r+")";case"rgbArray":return g(t);case"rgb":return"rgb("+g(t).join(", ")+")";case"rgba":var s=g(t);r=e.alpha||Math.random();return"rgba("+s.join(", ")+", "+r+")";default:return p(t)}}function h(t,e){for(var i=c(t).lowerBounds,n=0;n<i.length-1;n++){var r=i[n][0],s=i[n][1],o=i[n+1][0],a=i[n+1][1];if(e>=r&&e<=o){var h=(a-s)/(o-r);return h*e+(s-h*r)}}return 0}function l(t){if("number"==typeof parseInt(t)){var i=parseInt(t);if(i<360&&i>0)return[i,i]}if("string"==typeof t)if(e[t]){var n=e[t];if(n.hueRange)return n.hueRange}else if(t.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var r=v(t)[0];return[r,r]}return[0,360]}function d(t){return c(t).saturationRange}function c(t){for(var i in t>=334&&t<=360&&(t-=360),e){var n=e[i];if(n.hueRange&&t>=n.hueRange[0]&&t<=n.hueRange[1])return e[i]}return"Color not found"}function u(e){if(null===t){var i=.618033988749895,n=Math.random();return n+=i,n%=1,Math.floor(e[0]+n*(e[1]+1-e[0]))}var r=e[1]||1,s=e[0]||0,o=(t=(9301*t+49297)%233280)/233280;return Math.floor(s+o*(r-s))}function p(t){var e=g(t);function i(t){var e=t.toString(16);return 1==e.length?"0"+e:e}return"#"+i(e[0])+i(e[1])+i(e[2])}function m(t,i,n){var r=n[0][0],s=n[n.length-1][0],o=n[n.length-1][1],a=n[0][1];e[t]={hueRange:i,lowerBounds:n,saturationRange:[r,s],brightnessRange:[o,a]}}function f(){m("monochrome",null,[[0,0],[100,0]]),m("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),m("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),m("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),m("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),m("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),m("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),m("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function g(t){var e=t[0];0===e&&(e=1),360===e&&(e=359),e/=360;var i=t[1]/100,n=t[2]/100,r=Math.floor(6*e),s=6*e-r,o=n*(1-i),a=n*(1-s*i),h=n*(1-(1-s)*i),l=256,d=256,c=256;switch(r){case 0:l=n,d=h,c=o;break;case 1:l=a,d=n,c=o;break;case 2:l=o,d=n,c=h;break;case 3:l=o,d=a,c=n;break;case 4:l=h,d=o,c=n;break;case 5:l=n,d=o,c=a}return[Math.floor(255*l),Math.floor(255*d),Math.floor(255*c)]}function v(t){t=3===(t=t.replace(/^#/,"")).length?t.replace(/(.)/g,"$1$1"):t;var e=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,n=parseInt(t.substr(4,2),16)/255,r=Math.max(e,i,n),s=r-Math.min(e,i,n),o=r?s/r:0;switch(r){case e:return[(i-n)/s%6*60||0,o,r];case i:return[60*((n-e)/s+2)||0,o,r];case n:return[60*((e-i)/s+4)||0,o,r]}}function y(t){var e=t[0],i=t[1]/100,n=t[2]/100,r=(2-i)*n;return[e,Math.round(i*n/(r<1?r:2-r)*1e4)/100,r/2*100]}function x(t){for(var e=0,i=0;i!==t.length&&!(e>=Number.MAX_SAFE_INTEGER);i++)e+=t.charCodeAt(i);return e}function b(t){if(isNaN(t)){if("string"==typeof t)if(e[t]){var i=e[t];if(i.hueRange)return i.hueRange}else if(t.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){return c(v(t)[0]).hueRange}}else{var n=parseInt(t);if(n<360&&n>0)return c(t).hueRange}return[0,360]}return n}();t&&t.exports&&(e=t.exports=r),e.randomColor=r}()}));class vt{constructor(t){this.edges=[],this.isShow=!0,this.lineWeight=!0,this.svgDom=null,this.name=t}layout(t,e){}refresh(){}addEdge(t){this.edges.push(t)}removeEdge(t){var e=this.edges.indexOf(t);e>-1&&this.edges.splice(e,e)}moveNode(t,e,i){t&&t.move(e,i),t.callout&&t.callout.refresh(),t.wfs&&t.wfs.forEach((t=>{t.move(e,i)})),t.induces&&t.induces.forEach((t=>{t.move(e,i),this.moveNode(t.root,e,i)})),t&&t.children.forEach((t=>{this.moveNode(t,e,i)}))}linePoint(t,e){let i=0;var n=Math.ceil;return e%2==1&&(i=.5,n=parseInt),t.map((t=>[n(t[0])+i,n(t[1])+i]))}_updateNodeAssist(t,e){for(var i=t;i;){i.callout&&i.callout.refresh();var n=i.wireFrames,r=i.summaries;if(n.length&&n.forEach((e=>{e.items.indexOf(t)>-1&&(e.refreshNode(),e.refresh())})),r.length&&r.forEach((e=>{e.items.indexOf(t)>-1&&(e.refreshNode(),e.refresh())})),e){if(i==e)break;i=i.parent}else i=i.parent}}_updateRootAssist(){this.root.induce&&(this.root.induce.refreshItems(),this.root.induce.refresh()),this.root.wireFrame&&(this.root.wireFrame.refreshItems(),this.root.wireFrame.refresh())}}class yt extends vt{constructor(t,e,i){super("minder"),this.layoutName="mindmap",this.direct="",this.levelDis=40,this.nodeDis=8,this.firstLevelDis=80,this.firstNodeDis=20,this.isCache=!0,this.lefts=[],this.rights=[],this.colors=[],this.lineWidth=2,this.root=t,this.mind=this.root.mindmap,this.direct=e||"mindmap",this.colors=i||[],this.svgDom=this.mind.edgeGroup.group()}layout(t,e){t&&(this.root=t),this.root.isExpand&&(this.svgDom||(this.svgDom=this.root.mindmap.edgeGroup.group()),this.root.layout=this,e&&(this.direct=e),this.root.nodeType&&"induce"==this.root.nodeType&&(this.firstLevelDis=20,this.firstNodeDis=10),this.root.nodeType&&"freeNode"==this.root.nodeType&&(this.root.containEl.classList.contains("mm-root")||this.root.containEl.classList.add("mm-root")),this.lefts=[],this.rights=[],this.root.isShow()&&(this.setDirect(),this._layoutSecondLevelNode(this.root)),this.createLink())}setDirect(){var t=this,e=this.root.children.length,i=this.root;"right"==this.direct?(this.rights=i.children,this.rights.forEach((t=>{this._setDirect(t,"right")}))):"left"==this.direct?(this.lefts=i.children,this.lefts.forEach((t=>{this._setDirect(t,"left")}))):i.children.forEach((function(i,n){n<e/2?(t.rights.push(i),t._setDirect(i,"right")):(t.lefts.push(i),t._setDirect(i,"left"))}))}_setDirect(t,e){t.direct=e;var i=t.containEl.classList.contains("mm-node-second");t.containEl.setAttribute("class",""),t.containEl.classList.add("mm-node"),t.containEl.classList.add("mm-node-"+e),t.containEl.classList.add(`mm-${this.layoutName}-node`),t.isLeaf()&&!t.containEl.classList.contains("mm-node-leaf")?t.containEl.classList.add("mm-node-leaf"):t.containEl.classList.contains("mm-node-leaf")&&t.containEl.classList.remove("mm-node-leaf"),1==t.getLevel()&&(t.containEl.classList.add("mm-node-second"),t.refreshBox()),i&&t.refreshBox(),t.isExpand||t.containEl.classList.add("mm-node-collapse"),t.isSelect&&t.containEl.classList.add("mm-node-select"),!t.layout&&t.isExpand&&t.children.forEach((t=>{this._setDirect(t,e)}))}_layoutSecondLevelNode(t){this._layoutMinder(),"induce"!=this.root.nodeType&&this._doRefresh(),this._updateRootAssist()}_doRefresh(){var t=this.root,e=t.getPosition(),i=t.getBox(),n=e.y+i.height/2,r=t.getChildren(),s=r.filter((t=>"right"==t.direct)),o=r.filter((t=>"left"==t.direct));if(s.length>=2){var a=s[0],h=s[s.length-1],l=a.getPosition(),d=h.getPosition(),c=h.getBox(),u=d.y+c.height-n,p=n-l.y;if(Math.abs(u)!=Math.abs(p)){var m=Math.abs(Math.abs(u)-Math.abs(p))/2;Math.abs(u)>Math.abs(p)?s.forEach((t=>{this.moveNode(t,0,-parseInt(m+""))})):s.forEach((t=>{this.moveNode(t,0,parseInt(m+""))}))}}if(o.length>=2){a=o[0],h=o[o.length-1],l=a.getPosition(),d=h.getPosition(),c=h.getBox(),u=d.y+c.height-n,p=n-l.y;if(Math.abs(u)!=Math.abs(p)){m=Math.abs(Math.abs(u)-Math.abs(p))/2;Math.abs(u)>Math.abs(p)?o.forEach((t=>{this.moveNode(t,0,-parseInt(m+""))})):o.forEach((t=>{this.moveNode(t,0,parseInt(m+""))}))}}}updateRight(){var t=this.root.getPosition(),e=this.root.getBox(),i=this.rights,n=this._getNodesHeight(i),r=[parseInt(t.x+e.width+this.firstLevelDis+""),parseInt(t.y+e.height/2-n/2+"")];i.forEach((t=>{t.setPosition(r[0],r[1]);var e=t.getBox();r[1]+=parseInt(e.height+this.firstNodeDis+"")})),i.forEach((t=>{this._layoutRight(t)}))}updateLeft(){var t=this.root.getPosition(),e=this.root.getBox(),i=this.lefts,n=this._getNodesHeight(i),r=[parseInt(t.x-this.firstLevelDis+""),parseInt(t.y+e.height/2-n/2+"")];i.forEach((t=>{var e=t.getBox();t.setPosition(parseInt(r[0]-e.width+""),parseInt(r[1]+"")),r[1]+=e.height+this.firstNodeDis})),i.forEach((t=>{this._layoutLeft(t)}))}_layoutMinder(){this.updateRight(),this.updateLeft(),this._doLayout(this.root)}_getNodesHeight(t){if(t[0]&&1==t[0].getLevel())var e=this.firstNodeDis;else e=this.nodeDis;var i=0;return t.forEach(((n,r)=>{i+=n.getBox().height,r!=t.length-1&&(i+=e)})),i}_layoutRight(t){if(t.isExpand){var e=t.getPosition(),i=t.getBox(),n=this._getNodesHeight(t.children);t.callout&&t.callout.refresh();var r=[e.x+i.width+this.levelDis,i.y+i.height/2-n/2];if(t.children.forEach((t=>{t.setPosition(r[0],r[1]);var e=t.getBox();r[1]+=e.height+this.nodeDis})),t.layout){t.layout.layout(t,t.layout.direct||"");e=t.getPosition();i=t.mindmap.getBBox(t);var s=parseInt(Math.abs(e.x-i.x)+"");return this.moveNode(t,s,0),t.boundingRect=null,void(t.direct="right")}t.children.forEach((t=>{this._layoutRight(t)}))}}_updateNodeAssist(t){t.callout&&t.callout.refresh();var e=t.parent,i={};if(e){var n=e.wireFrames,r=e.summaries;n.length&&n.forEach((e=>{if(e.node==t&&(e.refreshNode(),e.refresh(),e.data&&e.data.text))if(i[t.getId()])i[t.getId()].rangeNode=i[t.getId()].rangeNode.concat(e.rangeNode.slice()),i[t.getId()].rangeNode.unique();else{var n=e.getTextBox().height,r=e.rangeNode.slice();i[t.getId()]={node:t,wf:e,topDy:n+4,rangeNode:r}}})),r.length&&r.forEach((e=>{e.node==t&&(e.refreshNode(),e.refresh())}))}this.topInfo=i}_doLayout(t){var e=this,i=t.mindmap;i.traverseDF((t=>{if(t!=e.root&&t.isShow()){if(t.layout){if(t.layout!=e&&t.getTopLayout()!=e)return}else if(t.getLayout()!=e)return;e._updateNodeAssist(t);var n=t.getCBox();if(e.isCache&&t.boundingRect)var r=t.boundingRect;else{var s=t.getShowNodeList(),o=[],a=[],h=[],l=[];if(s.forEach((t=>{t.callout&&t.callout.isShow&&h.push(t.callout);var e=t.wireFrames;t.summaries.forEach((t=>{t.isShow()&&-1==a.indexOf(t)&&a.push(t)})),e.forEach((t=>{t.isHide||-1==o.indexOf(t)&&o.push(t)}))})),s=s.concat(o),a.forEach((t=>{s=s.concat(t.getAllItem()),l=l.concat(t.groups)})),(s=s.concat(h)).length)r=i.getBoundingRect(s)}var d=t.parent;if(d)var c=d.wireFrames,u=d.summaries;if(t.boundingRect)var p=t.boundingRect.topDy,m=t.boundingRect.downDy;else p=Math.abs(r.y-n.y),m=Math.abs(r.y+r.height-n.y-n.height),c&&c.length&&c.forEach((i=>{var n=i.topNode.getCBox();if(i.node==t&&(p+=Math.abs(6+n.th),e.topInfo[t.getId()]&&(p+=e.topInfo[t.getId()].topDy)),i.endNode&&i.endNode==t){var r=i.bottomNode.getCBox();m+=Math.abs(6+r.bh)}})),r.topDy=p,r.downDy=m,t.boundingRect=r;e._adjustNode(t,0,p,m),c&&c.length&&c.forEach((e=>{e.endNode==t&&e.refresh()})),u&&u.length&&u.forEach((e=>{e.endNode==t&&e.refresh()}))}}),t)}_layoutLeft(t){if(t.isExpand){var e=t.getPosition(),i=t.getBox(),n=this._getNodesHeight(t.children);t.callout&&t.callout.refresh();var r=[e.x-this.levelDis,e.y+i.height/2-n/2];if(t.children.forEach((t=>{var e=t.getBox();t.setPosition(r[0]-e.width,r[1]),r[1]+=e.height+this.nodeDis})),t.layout){t.layout.layout(t,t.layout.direct||"");e=t.getPosition();var s=t.mindmap.getBBox(t),o=Math.abs(e.x+i.width-s.x-s.width);return this.moveNode(t,-o,0),t.direct="left",void(t.boundingRect=null)}t.children.forEach((t=>{this._layoutLeft(t)}))}}_adjustDoNode(t,e,i){if(t)for(var n=t.direct;t&&t!=this.root;){var r=t.getSiblings(),s=t.getPosition();r.forEach((t=>{t.direct==n&&(t.getPosition().y>s.y?this.moveNode(t,0,i):this.moveNode(t,0,-e))})),t=t.parent}}_adjustNode(t,e,i,n){if(t){var r=t.direct;if(t&&t!=this.root){var s=t.getSiblings(),o=t.getPosition();s.forEach((t=>{t.direct==r&&(t.getPosition().y>o.y?this.moveNode(t,e,n):this.moveNode(t,e,-i))}))}}}refresh(t){this.layout(this.root,t||this.direct),this.createLink()}createLink(){var t=this,e=this.root.mindmap;if(this.svgDom&&this.svgDom.clear(),0!=this.root.getChildren().length&&this.svgDom&&this.root.isShow()){var i=this.lineWidth;e.traverseBF((e=>{if(e.isExpand){var n=e.getChildren(),r=e.getBox(),s=e.getPosition(),o=e.getLevel(),a=n.length,h=2,l=1,d=2,c=1;1==a&&(h=4,l=1,d=4,c=3),n.forEach((n=>{var u=n.direct,p=n.getBox(),m=n.getPosition();let f=e.stroke?e.stroke:n.stroke?n.stroke:gt();if("right"==u){if(0==o||1==o){var g=[r.width+s.x,r.height/2+s.y];if(0==o)var v=[m.x,p.height/2+m.y];else v=[p.width+m.x,p.height+m.y]}else g=[r.width+s.x,r.height+s.y],v=[p.width+m.x,p.height+m.y];if(0==o)var y=[(x=[g[0]+this.firstLevelDis/h*l,g[1]])[0],v[1]];else{var x=[g[0]+this.levelDis/h*l,g[1]];y=[g[0]+this.levelDis/d*c,v[1]]}}else{if(0==o||1==o){g=[s.x,r.height/2+s.y];if(0==o)v=[m.x+p.width,p.height/2+m.y];else v=[m.x,p.height+m.y]}else g=[s.x,r.height+s.y],v=[m.x,p.height+m.y];if(0==o)y=[(x=[g[0]-this.firstLevelDis/h*l,g[1]])[0],v[1]];else x=[g[0]-this.levelDis/h*l,g[1]],y=[g[0]-this.levelDis/d*c,v[1]]}if(1==a)if(1==o)var b=[g,x,y,v];else if(Math.abs(g[1]-v[1])>2)b=[g,y,v];else b=[g,v];else if(0==e.getLevel()){var w=[],k=[];if(e.getChildren().forEach((t=>{"right"==t.direct?w.push(t):k.push(t)})),w.length>=2&&0==w.indexOf(n)||w.length>=2&&w.indexOf(n)==w.length-1)if("right"==u){if(v[1]>g[1])var _=[x[0],v[1]-2],C=[x[0]+2,v[1]];else _=[x[0],v[1]+2],C=[x[0]+2,v[1]];b=[g,x,_,C,v]}else{if(v[1]>g[1])_=[x[0],v[1]-2],C=[x[0]-2,v[1]];else _=[x[0],v[1]+2],C=[x[0]-2,v[1]];b=[g,x,_,C,v]}else if(k.length>=2&&0==k.indexOf(n)||k.length>=2&&k.indexOf(n)==k.length-1)if("right"==u){if(v[1]>g[1])_=[x[0],v[1]-2],C=[x[0]+2,v[1]];else _=[x[0],v[1]+2],C=[x[0]+2,v[1]];b=[g,x,_,C,v]}else{if(v[1]>g[1])_=[x[0],v[1]-2],C=[x[0]-2,v[1]];else _=[x[0],v[1]+2],C=[x[0]-2,v[1]];b=[g,x,_,C,v]}else if(w.length>=2&&0!=w.indexOf(n)||w.length>=2&&w.indexOf(n)!=w.length-1||k.length>=2&&0!=k.indexOf(n)||k.length>=2&&k.indexOf(n)!=k.length-1)b=[y,v];if(1==w.length&&1==k.length)b=[g,v];if(w.length>1&&1==k.length)if("right"==u)b=[g,y,v];else b=[g,v]}else if("right"==u)if(n.isFirst()||n.isLast()){if(v[1]>g[1])_=[x[0],v[1]-2],C=[x[0]+2,v[1]];else _=[x[0],v[1]+2],C=[x[0]+2,v[1]];b=[g,x,_,C,v]}else b=[y,v];else if(n.isFirst()||n.isLast()){if(v[1]>g[1])_=[x[0],v[1]-2],C=[x[0]-2,v[1]];else _=[x[0],v[1]+2],C=[x[0]-2,v[1]];b=[g,x,_,C,v]}else b=[y,v];var D=t.svgDom.polyline(t.linePoint(b,i));D.fill("none"),D.stroke({color:f,width:i,linecap:"round",linejoin:"round"}),D.source=e,D.target=n}))}}),this.root)}}}class xt extends yt{constructor(t,e,i){super(t,e,i),this.firstLevelDis=50,this.levelDis=30,this.nodeDis=10,this.layoutName="mindmap1"}createLink(){var t=this,e=this.levelDis,i=this.direct;this.svgDom&&this.svgDom.clear();var n=this.root;if(this.svgDom&&this.root.isShow()){var r=this.root.getLevel();n.children.forEach(((t,e)=>{t.stroke||(t.stroke=this.colors[e]||gt())})),function n(s){if(s==t.root);else if(s.layout)return;if(s.isExpand){var o=s.getChildren(),a=o.length,h=s.getPosition(),l=s.getBox(),d=s.getLevel();o.length&&o.forEach((function(o){var c=o.direct,u=o.getPosition(),p=o.getBox();let m=s.stroke?s.stroke:o.stroke?o.stroke:gt();if(o.stroke||(o.stroke=m),o._barDom.style.backgroundColor=m,o._barDom.style.borderColor=m,d==r)if("minder"==i)if("right"==c)var f={x:h.x+l.width/2,y:h.y+l.height/2},g={x:u.x,y:p.height/2+u.y};else f={x:h.x+l.width/2,y:h.y+l.height/2},g={x:Number.parseInt(u.x+p.width+""),y:Number.parseInt(p.height/2+u.y+"")};else{f={x:h.x+l.width/2,y:h.y+l.height/2};if("right"==c)g={x:u.x,y:p.height/2+u.y};else g={x:u.x+p.width,y:p.height/2+u.y}}else if("right"==c)f={x:h.x+l.width,y:h.y+l.height/2},g={x:u.x,y:p.height/2+u.y};else f={x:h.x,y:h.y+l.height/2},g={x:u.x+p.width,y:p.height/2+u.y};if(d==r)var v=t.svgDom.path();else v=t.svgDom.polyline();if(v.fill("none"),v.stroke({color:m,width:t.lineWidth,linecap:"round",linejoin:"round"}),d==r)if("right"==c){var y=parseInt((f.x+g.x)/2-30+""),x=parseInt(f.y+(g.y-f.y)/1.1+""),b=`M ${f.x} ${f.y} Q ${y} ${x},${g.x} ${g.y} `;v.plot(b)}else{y=parseInt((f.x+g.x)/2+30+""),x=parseInt(f.y+(g.y-f.y)/1.1+""),b=`M ${f.x} ${f.y} Q ${y} ${x},${g.x} ${g.y} `;v.plot(b)}else{var w=g.y<f.y?"top":"bottom";if(1==a)var k=[[f.x,f.y],[g.x,g.y]];else if("right"==c)if("top"==w){var _=[f.x,f.y],C=[f.x+e/2,f.y],D=[g.x,g.y];if(o.isFirst())k=[_,C,E=[f.x+e/2,g.y+5],S=[f.x+e/2+5,g.y],D];else if(Math.abs(g.y-f.y)<3)k=[_,C,S=[f.x+e/2,g.y],D];else k=[_,C,E=[f.x+e/2,g.y+5],S=[f.x+e/2+5,g.y],D]}else{_=[f.x,f.y],C=[f.x+e/2,f.y],D=[g.x,g.y];if(o.isLast())k=[_,C,E=[f.x+e/2,g.y-5],S=[f.x+e/2+5,g.y],D];else if(Math.abs(g.y-f.y)<3)k=[_,C,S=[f.x+e/2,g.y],D];else{var E,S;k=[_,C,E=[f.x+e/2,g.y-5],S=[f.x+e/2+5,g.y],D]}}else if("top"==w){_=[f.x,f.y],C=[f.x-e/2,f.y],D=[g.x,g.y];if(o.isFirst())k=[_,C,E=[f.x-e/2,g.y+5],S=[f.x-e/2-5,g.y],D];else if(Math.abs(g.y-f.y)<3)k=[_,C,S=[f.x-e/2,g.y],D];else k=[_,C,E=[f.x-e/2,g.y+5],S=[f.x-e/2-5,g.y],D]}else{_=[f.x+1,f.y],C=[f.x-e/2,f.y],D=[g.x,g.y];if(o.isLast())k=[_,C,E=[f.x-e/2,g.y-5],S=[f.x-e/2-5,g.y],D];else if(Math.abs(g.y-f.y)<3)k=[_,C,S=[f.x-e/2,g.y],D];else k=[_,C,E=[f.x-e/2,g.y-5],S=[f.x-e/2-5,g.y],D]}if(E){(v=t.svgDom.polyline(t.linePoint([_,C,E],t.lineWidth))).fill("none"),v.stroke({color:m,width:t.lineWidth,linecap:"round",linejoin:"round"});var N=t.linePoint([E],t.lineWidth)[0],M=t.linePoint([S],t.lineWidth)[0],A=`M${N[0]} ${N[1]},Q${N[0]} ${M[1]},${M[0]} ${M[1]}`,L=t.svgDom.path().stroke({color:m,width:t.lineWidth,linecap:"round",linejoin:"round"});L.plot(A),L.fill("none"),(v=t.svgDom.line(t.linePoint([S,D],t.lineWidth))).fill("none"),v.stroke({color:m,width:t.lineWidth,linecap:"round",linejoin:"round"})}else{(v=t.svgDom.polyline(t.linePoint(k,t.lineWidth))).fill("none"),v.stroke({color:m,width:t.lineWidth,linecap:"round",linejoin:"round"})}}n(o)}))}}(n),n.children.forEach((t=>{s(t)}))}function s(t){if(t.isExpand){if(t.layout)return void t.layout.createLink();t.children.forEach((t=>{s(t)}))}}}}var bt={mindmap1:xt,mindmap2:class extends yt{constructor(t,e,i){super(t,e,i),this.firstLevelDis=40,this.levelDis=30,this.nodeDis=10,this.type="minder",this.layoutName="mindmap2"}createLink(){var t=this,e=this.levelDis,i=this.root;if(this.svgDom&&this.svgDom.clear(),this.svgDom&&this.root.isExpand&&this.root.isShow()){var n=this.lineWidth,r=this.rights,s=this.lefts,o=i.getBox(),a=i.getPosition();r.length,s.length,i.children.forEach(((t,e)=>{t.stroke||(t.stroke=this.colors[e]||gt())})),function(){var e=[],h=[];r.forEach((t=>{t.getPosition().y+t.getBox().height/2>o.height/2+a.y?h.push(t):e.push(t)}));var l=e.length,d=h.length,c=parseInt((o.width/2-6)/l+""),u=parseInt((o.width/2-6)/d+"");e.forEach(((e,r)=>{var s=e.getBox(),h=e.getPosition(),l=s.height/2+h.y,d=l-(o.height/2+a.y),u=[a.x+o.width/2+6+c*r,a.y+o.height/2];if(Math.abs(d)>2)var p=[u[0],l-5*d/Math.abs(d)],m=[u[0]+5,l];else p=[u[0],l-d/2],m=[u[0]+Math.abs(d)/2,l];var f=[h.x,l];let g=i.stroke?i.stroke:e.stroke||gt();e.stroke||(e.stroke=g),e._barDom.style.backgroundColor=g,e._barDom.style.borderColor=g;var v=t.linePoint([p],n)[0],y=t.linePoint([m],n)[0],x=`M${v[0]} ${v[1]},Q${v[0]} ${y[1]},${y[0]} ${y[1]}`,b=t.svgDom.path().stroke({color:g,width:n+2,linecap:"round",linejoin:"round"});b.plot(x),b.fill("none"),t.svgDom.line(t.linePoint([u,p],n+2)).stroke({color:g,width:n+2,linecap:"round",linejoin:"round"}).fill("none"),t.svgDom.line(t.linePoint([m,f],n+2)).stroke({color:g,width:n+2,linecap:"round",linejoin:"round"}).fill("none")})),h.reverse().forEach(((e,r)=>{var s=e.getBox(),h=e.getPosition(),l=s.height/2+h.y,d=l-(o.height/2+a.y),c=[a.x+o.width/2+6+u*r,a.y+o.height/2];if(Math.abs(d)>2)var p=[c[0],l-5*d/Math.abs(d)],m=[c[0]+5,l];else p=[c[0],l-d/2],m=[c[0]+Math.abs(d)/2,l];var f=[h.x,l];let g=i.stroke?i.stroke:e.stroke||gt();e.stroke||(e.stroke=g),e._barDom.style.backgroundColor=g,e._barDom.style.borderColor=g;var v=t.linePoint([p],n)[0],y=t.linePoint([m],n)[0],x=`M${v[0]} ${v[1]},Q${v[0]} ${y[1]},${y[0]} ${y[1]}`,b=t.svgDom.path().stroke({color:g,width:n+2,linecap:"round",linejoin:"round"});b.plot(x),b.fill("none"),t.svgDom.line(t.linePoint([c,p],n+2)).stroke({color:g,width:n+2,linecap:"round",linejoin:"round"}).fill("none"),t.svgDom.line(t.linePoint([m,f],n+2)).stroke({color:g,width:n+2,linecap:"round",linejoin:"round"}).fill("none")}));var p=[],m=[];s.forEach((t=>{t.getPosition().y+t.getBox().height/2>o.height/2+a.y?m.push(t):p.push(t)}));var f=p.length,g=m.length,v=parseInt((o.width/2-12)/f+""),y=parseInt((o.width/2-12)/g+"");p.forEach(((e,r)=>{var s=e.getBox(),h=e.getPosition(),l=s.height/2+h.y,d=l-(o.height/2+a.y),c=[a.x+o.width/2-6-v*r,a.y+o.height/2];if(Math.abs(d)>2)var u=[c[0],l-5*d/Math.abs(d)],p=[c[0]-5,l];else u=[c[0],l-d/2],p=[c[0]-Math.abs(d)/2,l];var m=[h.x+s.width,l];let f=i.stroke?i.stroke:e.stroke||gt();e.stroke||(e.stroke=f),e._barDom.style.backgroundColor=f,e._barDom.style.borderColor=f;var g=t.linePoint([u],n)[0],y=t.linePoint([p],n)[0],x=`M${g[0]} ${g[1]},Q${g[0]} ${y[1]},${y[0]} ${y[1]}`,b=t.svgDom.path().stroke({color:f,width:n+2,linecap:"round",linejoin:"round"});b.plot(x),b.fill("none"),t.svgDom.line(t.linePoint([c,u],n+2)).stroke({color:f,width:n+2,linecap:"round",linejoin:"round"}).fill("none"),t.svgDom.line(t.linePoint([p,m],n+2)).stroke({color:f,width:n+2,linecap:"round",linejoin:"round"}).fill("none")})),m.reverse().forEach(((e,r)=>{var s=e.getBox(),h=e.getPosition(),l=s.height/2+h.y,d=l-(o.height/2+a.y),c=[a.x+o.width/2-6-y*r,a.y+o.height/2];if(Math.abs(d)>2)var u=[c[0],l-5*d/Math.abs(d)],p=[c[0]-5,l];else u=[c[0],l-d/2],p=[c[0]-Math.abs(d)/2,l];var m=[h.x+s.width,l];let f=i.stroke?i.stroke:e.stroke||gt();e.stroke||(e.stroke=f),e._barDom.style.backgroundColor=f,e._barDom.style.borderColor=f;var g=t.linePoint([u],n)[0],v=t.linePoint([p],n)[0],x=`M${g[0]} ${g[1]},Q${g[0]} ${v[1]},${v[0]} ${v[1]}`,b=t.svgDom.path().stroke({color:f,width:n+2,linecap:"round",linejoin:"round"});b.plot(x),b.fill("none"),t.svgDom.line(t.linePoint([c,u],n+2)).stroke({color:f,width:n+2,linecap:"round",linejoin:"round"}).fill("none"),t.svgDom.line(t.linePoint([p,m],n+2)).stroke({color:f,width:n+2,linecap:"round",linejoin:"round"}).fill("none")}))}(),i.children.forEach(((t,e)=>{h(t),l(t)}))}function h(i){if(!i.layout&&i.isExpand){var r=i.getChildren(),s=r.length,o=i.getPosition(),a=i.getBox();r.length&&r.forEach((function(r){var l=r.direct,d=r.getPosition(),c=r.getBox();let u=i.stroke?i.stroke:r.stroke?r.stroke:gt();if(r.stroke||(r.stroke=u),r._barDom.style.backgroundColor=u,r._barDom.style.borderColor=u,"right"==l)var p={x:o.x+a.width,y:o.y+a.height/2},m={x:d.x,y:c.height/2+d.y};else p={x:o.x,y:o.y+a.height/2},m={x:d.x+c.width,y:c.height/2+d.y};if(1==s)var f=[[p.x,p.y],[m.x,m.y]];else{var g=m.y<p.y?"top":"bottom";if("right"==l)if("top"==g){var v=[p.x,p.y],y=[p.x+e/2,p.y],x=[m.x,m.y];if(r.isFirst())f=[v,y,b=[p.x+e/2,m.y+5],w=[p.x+e/2+5,m.y],x];else if(Math.abs(m.y-p.y)<3)f=[v,y,w=[p.x+e/2,m.y],x];else f=[v,y,b=[p.x+e/2,m.y+5],w=[p.x+e/2+5,m.y],x]}else{v=[p.x,p.y],y=[p.x+e/2,p.y],x=[m.x,m.y];if(r.isLast())f=[v,y,b=[p.x+e/2,m.y-5],w=[p.x+e/2+5,m.y],x];else if(Math.abs(m.y-p.y)<3)f=[v,y,w=[p.x+e/2,m.y],x];else f=[v,y,b=[p.x+e/2,m.y-5],w=[p.x+e/2+5,m.y],x]}else if("top"==g){v=[p.x,p.y],y=[p.x-e/2,p.y],x=[m.x,m.y];if(r.isFirst())f=[v,y,b=[p.x-e/2,m.y+5],w=[p.x-e/2-5,m.y],x];else if(Math.abs(m.y-p.y)<3)f=[v,y,w=[p.x-e/2,m.y],x];else f=[v,y,b=[p.x-e/2,m.y+5],w=[p.x-e/2-5,m.y],x]}else{v=[p.x+1,p.y],y=[p.x-e/2,p.y],x=[m.x,m.y];if(r.isLast())f=[v,y,b=[p.x-e/2,m.y-5],w=[p.x-e/2-5,m.y],x];else if(Math.abs(m.y-p.y)<3)f=[v,y,w=[p.x-e/2,m.y],x];else{var b,w;f=[v,y,b=[p.x-e/2,m.y-5],w=[p.x-e/2-5,m.y],x]}}}if(b){(E=t.svgDom.polyline(t.linePoint([v,y,b],n))).fill("none"),E.stroke({color:u,width:n,linecap:"round",linejoin:"round"});var k=t.linePoint([b],n)[0],_=t.linePoint([w],n)[0],C=`M${k[0]} ${k[1]},Q${k[0]} ${_[1]},${_[0]} ${_[1]}`,D=t.svgDom.path().stroke({color:u,width:n,linecap:"round",linejoin:"round"});D.plot(C),D.fill("none"),(E=t.svgDom.line(t.linePoint([w,x],n))).fill("none"),E.stroke({color:u,width:n,linecap:"round",linejoin:"round"})}else{var E;(E=t.svgDom.polyline(t.linePoint(f,n))).fill("none"),E.stroke({color:u,width:n,linecap:"round",linejoin:"round"})}h(r)}))}}function l(t){if(t.isExpand){if(t.layout)return void t.layout.createLink();t.children.forEach((t=>{l(t)}))}}}},mindmap:class extends vt{constructor(t,e,i){super("mindmap"),this.layoutName="mindmap",this.direct="",this.levelDis=50,this.nodeDis=6,this.firstLevelDis=80,this.firstNodeDis=20,this.isCache=!0,this.lefts=[],this.rights=[],this.colors=[],this.lineWidth=2,this.root=t||null,this.mind=(null==t?void 0:t.mindmap)||null,this.direct=e||"mindmap",this.colors=i||[],this.svgDom||(this.svgDom=this.mind.edgeGroup.group()),this.layout()}setDirect(){var t=this,e=this.root.children.length,i=this.root;this.rights=[],this.lefts=[],"right"==this.direct?(this.rights=i.children,this.rights.forEach((t=>{this._setDirect(t,"right")}))):"left"==this.direct?(this.lefts=i.children,this.lefts.forEach((t=>{this._setDirect(t,"left")}))):i.children.forEach((function(i,n){n<e/2?(t.rights.push(i),t._setDirect(i,"right")):(t.lefts.push(i),t._setDirect(i,"left"))}))}_setDirect(t,e){t.stroke="",t.direct=e;var i=t.containEl.classList.contains("mm-node-second");t.containEl.setAttribute("class",""),t.containEl.classList.add("mm-node"),t.containEl.classList.add("mm-node-"+e),t.isLeaf()&&!t.containEl.classList.contains("mm-node-leaf")?t.containEl.classList.add("mm-node-leaf"):t.containEl.classList.contains("mm-node-leaf")&&t.containEl.classList.remove("mm-node-leaf"),1==t.getLevel()&&(t.containEl.classList.add("mm-node-second"),t.refreshBox()),i&&t.refreshBox(),t.isExpand||t.containEl.classList.add("mm-node-collapse"),t.children.forEach((t=>{this._setDirect(t,e)}))}layout(t,e){t&&(this.root=t),e&&(this.direct=e),this.setDirect(),"right"==this.direct?this.layoutRight():"left"==this.direct?this.layoutLeft():this.layoutMindMap(),this._dolayout(),this._doRefresh(),this.root&&this.root.mindmap.useHandMode?this.createHandDrawLink():this.createLink()}layoutMindMap(){this.layoutRight(),this.layoutLeft()}layoutRight(t,e){var i=t||this.rights,n=e||this.root,r=n.getPosition(),s=n.getBox(),o=n.getLevel();if(0==o)var a=this.firstLevelDis,h=this.firstNodeDis;else a=this.levelDis,h=this.nodeDis;var{disHeight:l,height:d}=this._getNodesHeight(i),c=d/i.length;if(0==o)var u=[parseInt(r.x+s.width+a+""),parseInt(r.y+s.height/2-l/2+"")];else if(1==o)u=[parseInt(r.x+s.width+a+""),parseInt(r.y+s.height/2-l/2-c/2-this.lineWidth/2+"")];else u=[parseInt(r.x+s.width+a+""),parseInt(r.y+s.height-l/2-c/2+"")];i.forEach((t=>{t.setPosition(u[0],u[1]);var e=t.getBox();u[1]+=parseInt(e.height+h+"")})),i.forEach((t=>{t.isExpand&&this.layoutRight(t.children,t)}))}layoutLeft(t,e){var i=t||this.lefts,n=e||this.root,r=n.getPosition(),s=n.getBox(),o=n.getLevel();if(0==o)var a=this.firstLevelDis,h=this.firstNodeDis;else a=this.levelDis,h=this.nodeDis;var{disHeight:l,height:d}=this._getNodesHeight(i),c=d/i.length;if(0==o)var u=[parseInt(r.x-a+""),parseInt(r.y+s.height/2-l/2+"")];else if(1==o)u=[parseInt(r.x-a+""),parseInt(r.y+s.height/2-l/2-c/2-this.lineWidth/2+"")];else u=[parseInt(r.x-a+""),parseInt(r.y+s.height-l/2-c/2+"")];i.forEach((t=>{var e=t.getBox();t.setPosition(parseInt(u[0]-e.width+""),parseInt(u[1]+"")),u[1]+=e.height+h})),i.forEach((t=>{t.isExpand&&this.layoutLeft(t.children,t)}))}_getNodesHeight(t){if(t[0]&&1==t[0].getLevel())var e=this.firstNodeDis;else e=this.nodeDis;var i=0,n=0;return 1==t.length?{disHeight:i=t[0].getBox().height,height:i}:(t.forEach(((r,s)=>{var o=r.getBox().height;i+=o,n+=o,s!=t.length-1&&(i+=e)})),{disHeight:i,height:n})}_doRefresh(){var t=this.root,e=t.getPosition(),i=t.getBox(),n=e.y+i.height/2,r=this.rights,s=this.lefts;if(r.length>=2){var o=r[0],a=r[r.length-1],h=o.getPosition(),l=a.getPosition(),d=a.getBox(),c=l.y+d.height-n,u=n-h.y;if(Math.abs(c)!=Math.abs(u)){var p=Math.abs(Math.abs(c)-Math.abs(u))/2+"";Math.abs(c)>Math.abs(u)?r.forEach((t=>{this.moveNode(t,0,-parseInt(p))})):r.forEach((t=>{this.moveNode(t,0,parseInt(p))}))}}if(s.length>=2){o=s[0],a=s[s.length-1],h=o.getPosition(),l=a.getPosition(),d=a.getBox(),c=l.y+d.height-n,u=n-h.y;if(Math.abs(c)!=Math.abs(u)){p=Math.abs(Math.abs(c)-Math.abs(u))/2+"";Math.abs(c)>Math.abs(u)?s.forEach((t=>{this.moveNode(t,0,-parseInt(p))})):s.forEach((t=>{this.moveNode(t,0,parseInt(p))}))}}}moveNode(t,e,i){t.move(e,i),t&&t.children&&t.children.forEach((t=>{this.moveNode(t,e,i)}))}linePoint(t,e){let i=0;var n;return e%2==1?(i=.5,n=parseInt):n=Math.ceil,t.map((t=>[n(t[0])+i,n(t[1])+i]))}_dolayout(){var t=this,e=this.mind;e.traverseDF((i=>{if(i!=t.root&&i.isExpand){var n=i.getCBox();if(t.isCache&&i.boundingRect)var r=i.boundingRect;else{var s=i.getShowNodeList();s.length&&(r=e.getBoundingRect(s))}if(r){if(i.boundingRect&&t.isCache)var o=r.topDy,a=r.downDy;else o=Math.abs(r.y-n.y),a=Math.abs(r.y+r.height-n.y-n.height),r.topDy=o,r.downDy=a,i.boundingRect=r;t._adjustNode(i,0,o,a)}}}))}_adjustNode(t,e,i,n){if(t){var r=t.direct;if(t&&t!=this.root){var s=t.getSiblings(),o=t.getPosition();s.forEach((t=>{t.direct==r&&(t.getPosition().y>o.y?this.moveNode(t,e,n):this.moveNode(t,e,-i))}))}}}refresh(t,e){this.layout(t,e)}createHandDrawLink(){var t=this;this.svgDom&&this.svgDom.clear();var e=lt.svg(this.root.mindmap.draw);if(0!=this.root.getChildren().length){var i=this.levelDis,n=this.root,r=this.lineWidth,s=this.root.getLevel();this.root.children.forEach(((t,e)=>{t.stroke=this.colors[e]||gt()})),function n(o){if(o.isExpand){var a=o.getChildren(),h=o.getPosition(),l=o.getBox();l.height=l.height+r;var d=o.getLevel();a.length&&a.forEach((function(a){var c=a.direct,u=a.getPosition(),p=Object.assign({},a.getBox());p.height=p.height+r;let m=o.stroke?o.stroke:a.stroke?a.stroke:gt();if(a.stroke||(a.stroke=m),a._barDom.style.backgroundColor=m,a._barDom.style.borderColor=m,d==s)var f={x:h.x+l.width/2,y:h.y+l.height/2};else f=d==1+s?"right"==c?{x:h.x+l.width,y:h.y+l.height/2}:{x:h.x,y:h.y+l.height/2}:"right"==c?{x:h.x+l.width,y:h.y+l.height}:{x:h.x,y:h.y+l.height};if(d==s)if("right"==c)var g={x:u.x,y:p.height/2+u.y};else g={x:u.x+p.width,y:p.height/2+u.y};else g="right"==c?{x:u.x,y:p.height+u.y}:{x:u.x+p.width,y:p.height+u.y};if(r%2==1)var v=parseInt(f.x+"")-.5,y=parseInt(g.x+"")-.5,x=parseInt(f.y+"")-.5,b=parseInt(g.y+"")-.5;else v=parseInt(f.x+""),x=parseInt(f.y+""),y=parseInt(g.x+""),b=parseInt(g.y+"");if(r%2==1)var w=parseInt(u.x+"")-.5,k=parseInt(u.x+p.width+"")-.5,_=b,C=b;else w=parseInt(u.x+""),_=parseInt(p.height+u.y+""),k=parseInt(u.x+p.width+""),C=parseInt(p.height+u.y+"");if(d==s){var D=`M${v} ${x}  C ${parseInt(f.x+"")+(g.x-f.x)/9} ${parseInt(f.y+"")+(g.y-f.y)/9*8}, ${parseInt(f.x+(g.x-f.x)/9*8+"")} ${parseInt(g.y+"")}, ${y} ${b}`,E=e.path(D,{stroke:m,strokeWidth:r+1,fill:"none"});t.svgDom.node.appendChild(E)}else{var S={x:f.x+i/2,y:f.y},N={x:f.x+i/2,y:g.y};"left"==c&&(S.x=f.x-i/2,N.x=f.x-i/2),S.x=parseInt(S.x+""),S.y=parseInt(S.y+""),N.x=parseInt(N.x+""),N.y=parseInt(N.y+"");var M=`M${v} ${x}  C${S.x} ${S.y}, ${N.x} ${N.y}, ${y} ${b}`,A=e.path(M,{stroke:m,strokeWidth:d==s?r+1:r,fill:"none",roughness:.4});E=e.line(w-1,_,k+1,C,{stroke:m,strokeWidth:d==s?r+1:r,fill:"none",roughness:.8});t.svgDom.node.appendChild(E),t.svgDom.node.appendChild(A)}n(a)}))}}(n)}}createLink(){var t=this;if(this.svgDom&&this.svgDom.clear(),0!=this.root.getChildren().length){var e=this.levelDis,i=this.root,n=this.lineWidth,r=this.root.getLevel();this.root.children.forEach(((t,e)=>{t.stroke=this.colors[e]||gt()})),function i(s){if(s.isExpand){var o=s.getChildren(),a=s.getPosition(),h=s.getBox();h.height=h.height+n;var l=s.getLevel();o.length&&o.forEach((function(o){var d=o.direct,c=o.getPosition(),u=Object.assign({},o.getBox());u.height=u.height+n;let p=s.stroke?s.stroke:o.stroke?o.stroke:gt();if(o.stroke||(o.stroke=p),o._barDom.style.backgroundColor=p,o._barDom.style.borderColor=p,l==r)var m={x:a.x+h.width/2,y:a.y+h.height/2};else m=l==1+r?"right"==d?{x:a.x+h.width,y:a.y+h.height/2}:{x:a.x,y:a.y+h.height/2}:"right"==d?{x:a.x+h.width,y:a.y+h.height}:{x:a.x,y:a.y+h.height};if(l==r)if("right"==d)var f={x:c.x,y:u.height/2+c.y};else f={x:c.x+u.width,y:u.height/2+c.y};else f="right"==d?{x:c.x,y:u.height+c.y}:{x:c.x+u.width,y:u.height+c.y};if(n%2==1)var g=parseInt(m.x+"")-.5,v=parseInt(f.x+"")-.5,y=parseInt(m.y+"")-.5,x=parseInt(f.y+"")-.5;else g=parseInt(m.x+""),y=parseInt(m.y+""),v=parseInt(f.x+""),x=parseInt(f.y+"");if(l==r)var b=t.svgDom.path().stroke({color:p,width:n+1,linecap:"round",linejoin:"round"}).fill("none");else b=t.svgDom.path().stroke({color:p,width:n,linecap:"round",linejoin:"round"}).fill("none");if(n%2==1)var w=parseInt(c.x+"")-.5,k=parseInt(c.x+u.width+"")-.5,_=x,C=x;else w=parseInt(c.x+""),_=parseInt(u.height+c.y+""),k=parseInt(c.x+u.width+""),C=parseInt(u.height+c.y+"");if(l==r){var D=`M${g} ${y}  C ${parseInt(m.x+"")+(f.x-m.x)/9} ${parseInt(m.y+"")+(f.y-m.y)/9*8}, ${parseInt(m.x+(f.x-m.x)/9*8+"")} ${parseInt(f.y+"")}, ${v} ${x}`;b.plot(D)}else{t.svgDom.line(w,_,k,C).stroke({color:p,width:n,linecap:"miter",linejoin:"miter"}).fill("none");var E={x:m.x+e/2,y:m.y},S={x:m.x+e/2,y:f.y};"left"==d&&(E.x=m.x-e/2,S.x=m.x-e/2),E.x=parseInt(E.x+""),E.y=parseInt(E.y+""),S.x=parseInt(S.x+""),S.y=parseInt(S.y+"");var N=`M${g} ${y}  C ${E.x} ${E.y}, ${S.x} ${S.y}, ${v} ${x}`;b.plot(N)}i(o)}))}}(i)}}},fish:class extends vt{constructor(t,e,i){super("fish"),this.root=null,this.tops=[],this.bottoms=[],this.dis=10,this.levelDis=20,this.firstLevelDis=20,this.layoutName="fish",this.type="fish",this.angle=7*Math.PI/18,this.isCache=!1,this.colors=[],this.fishTail=null,this.stroke="",this.root=t,this.direct=e||"right",this.colors=i||[],this.stroke=gt(),this.svgDom||(this.svgDom=this.root.getMind().edgeGroup.group())}layout(t,e){if(this.direct=e||"right",this.tops=[],this.bottoms=[],this.root=t||this.root,this.root.isExpand){this.svgDom||(this.svgDom=this.root.getMind().edgeGroup.group()),this.root.layout=this,this.root.parent||this.root.containEl.classList.add("mm-root");var i=this.root.children.length;this.root.getChildren().forEach(((t,e)=>{e<Math.ceil(i/2)?(this.tops.push(t),t.getNodeList().forEach((t=>{t.mark="up",t.containEl.classList=[],t.containEl.classList.add("mm-node"),t.containEl.classList.add("mm-node-"+this.direct),t.containEl.classList.add(`mm-${this.layoutName}-node`),t.direct=this.direct,t.isExpand||t.containEl.classList.add("mm-node-collapse"),t.isLeaf()&&!t.containEl.classList.contains("mm-node-leaf")?t.containEl.classList.add("mm-node-leaf"):t.containEl.classList.contains("mm-node-leaf")&&t.containEl.classList.remove("mm-node-leaf")}))):(this.bottoms.push(t),t.getNodeList().forEach((t=>{t.mark="down",t.containEl.classList=[],t.containEl.classList.add("mm-node"),t.containEl.classList.add("mm-node-"+this.direct),t.containEl.classList.add(`mm-${this.layoutName}-node`),t.direct=this.direct,t.isExpand||t.containEl.classList.add("mm-node-collapse"),t.isLeaf()&&!t.containEl.classList.contains("mm-node-leaf")?t.containEl.classList.add("mm-node-leaf"):t.containEl.classList.contains("mm-node-leaf")&&t.containEl.classList.remove("mm-node-leaf")}))),t.containEl.classList.add("mm-node-second"),t.refreshBox()})),"left"==this.direct?this._layoutRight():"right"==this.direct&&this._layoutLeft(),this.root.mindmap.useHandMode?this.createHandDrawLink():this.createLink()}}_layoutLeft(){var t=this,e=this.root,i=e.getMind(),n=e.getBox(),r=e.getPosition(),s=r.y+n.height/2,o=[];this.tops.forEach(((e,i)=>{e.direct="up";var a=e.getCBox();0==i?(e.setPosition(n.width+r.x+40+t.dis/Math.tan(t.angle),s-t.dis-a.height),o=[n.width+r.x+40+t.dis/Math.tan(t.angle)+a.width+t.dis,0]):(e.setPosition(o[0]+t.dis/Math.tan(t.angle),s-t.dis-a.height),o=[o[0]+a.width+t.dis+40,0]),t._layout(e,"top")})),this.bottoms.forEach(((e,i)=>{e.direct="down";var a=e.getBox();if(0==i){var h=n.width+50+(t.dis+a.height)/Math.tan(t.angle)+t.dis;e.setPosition(h+r.x,s+t.dis),o=[h+a.width+t.dis+40,0]}else e.setPosition(o[0]+(t.dis+a.height)/Math.tan(t.angle)+t.dis,s+t.dis),o=[o[0]+a.width+t.dis,0];t._layout(e,"bottom")})),this.tops.forEach(((t,e)=>{if(e>0){var n=i.getBBox(this.tops[e-1]),r=t.getPosition(),s=n.right-r.x+this.dis+40;this.moveNode(t,s,0)}})),this.bottoms.forEach(((t,e)=>{if(e>0){var n=i.getBBox(this.bottoms[e-1]),r=t.getPosition(),s=n.right-r.x+this.dis+40;this.moveNode(t,s,0)}})),this.tops.forEach((t=>{this._updateNodeAssist(t,this.root)})),this.bottoms.forEach((t=>{this._updateNodeAssist(t,this.root)})),this._updateRootAssist()}_layoutRight(){var t=this,e=this.root,i=e.getMind(),n=e.getBox(),r=e.getPosition(),s=r.y+n.height/2,o=[];this.tops.forEach(((e,i)=>{e.direct="up";var n=e.getBox();0==i?(e.setPosition(r.x-n.width-t.dis-t.dis/Math.tan(t.angle)-40,s-t.dis-n.height),o=[r.x-n.width-t.dis-t.dis/Math.tan(t.angle)-40,0]):(e.setPosition(o[0]-n.width-t.dis-t.dis/Math.tan(t.angle)-40,s-t.dis-n.height),o=[o[0]-n.width-t.dis-t.dis/Math.tan(t.angle)-40,0]),t._layout1(e,"top")})),this.bottoms.forEach(((e,i)=>{e.direct="down";var n=e.getBox();if(0==i){var a=r.x-n.width-t.dis-(t.dis+n.height)/Math.tan(t.angle)-40;e.setPosition(a,s+t.dis),o=[a,0]}else e.setPosition(o[0]-n.width-(t.dis+n.height)/Math.tan(t.angle)-t.dis-40,s+t.dis),o=[o[0]-(t.dis+n.height)/Math.tan(t.angle)-t.dis-40,0];t._layout1(e,"bottom")})),this.tops.forEach(((t,e)=>{if(e>0){var n=i.getBBox(this.tops[e-1]),r=t.getPosition(),s=t.getBox(),o=r.x-n.x+this.dis+s.width+40;this.moveNode(t,-o,0)}})),this.bottoms.forEach(((t,e)=>{if(e>0){var n=i.getBBox(this.bottoms[e-1]),r=t.getPosition(),s=t.getBox(),o=r.x-n.x+this.dis+s.width+40;this.moveNode(t,-o,0)}})),this.tops.forEach((t=>{this._updateNodeAssist(t)})),this.bottoms.forEach((t=>{this._updateNodeAssist(t)})),this._updateRootAssist()}_layout(t,e){if(t.isExpand){t.layout&&(t.layout.group&&(t.layout.group.clear(),t.layout.group.remove(),t.layout.group=null),t.layout.svgDom&&(t.layout.svgDom.clear(),t.layout.svgDom.remove(),t.layout.svgDom=null));var i=this,n=t.getMind();if("top"==e){var r=t.getBox(),s=t.getPosition(),o=r.width+s.x+i.dis,a=t.getChildren(),h=0,l=0;a.forEach(((t,d)=>{if(t.isShow()){t.callout&&t.callout.refresh();var c=t.getCBox();if(0==d)l=o+(i.dis+r.height+c.bh)/Math.tan(i.angle),h=s.y-c.height-c.bh-i.dis,t.setPosition(l,h);else{var u=n.getBBox(a[d-1]),p=a[d-1].getCBox(),m=(p.y-u.y+i.dis+c.bh+p.height)/Math.tan(i.angle),f=p.x+m,g=u.y-i.dis-c.height-c.bh;t.setPosition(f,g)}i._updateNodeAssist(t,i.root),i._layout(t,e)}}))}else{r=t.getBox(),s=t.getPosition(),o=r.width+s.x+i.dis,h=0,l=0,a=t.getChildren();t.getChildren().forEach(((t,d)=>{if(t.isShow()){t.callout&&t.callout.refresh();var c=t.getCBox();if(0==d){var u=(i.dis+c.th+c.height)/Math.tan(i.angle);l=o+u,h=s.y+r.height+i.dis+c.th+0,t.setPosition(l,h)}else{var p=n.getBBox(a[d-1]),m=a[d-1].getCBox(),f=(u=(i.dis+c.th+c.height+p.y+p.height-m.y-m.height)/Math.tan(i.angle),m.x+u),g=p.y+p.height+i.dis+c.th;t.setPosition(f,g)}i._updateNodeAssist(t,i.root),i._layout(t,e)}}))}}}_layout1(t,e){if(t.isExpand){t.layout&&(t.layout.group&&(t.layout.group.clear(),t.layout.group.remove(),t.layout.group=null),t.layout.svgDom&&(t.layout.svgDom.clear(),t.layout.svgDom.remove(),t.layout.svgDom=null));var i=this,n=t.getMind(),r=t.getChildren();if("top"==e){var s=t.getBox(),o=(a=t.getPosition()).x-i.dis;r.forEach(((t,h)=>{if(t.isShow()){t.callout&&t.callout.refresh();var l=t.getCBox();if(0==h){var d=o-l.width-(s.height+i.dis+l.bh)/Math.tan(i.angle),c=a.y-l.height-l.bh-i.dis;t.setPosition(d,c)}else{var u=n.getBBox(r[h-1]),p=r[h-1].getBox(),m=(p.y-u.y+i.dis+p.height+l.bh+0)/Math.tan(i.angle),f=p.x+p.width-l.width-m,g=u.y-i.dis-l.height-l.bh-0;t.setPosition(f,g)}i._updateNodeAssist(t,i.root),i._layout1(t,e)}}))}else{var a;s=t.getBox(),o=(a=t.getPosition()).x-i.dis;t.getChildren().forEach(((t,h)=>{if(t.isShow()){t.callout&&t.callout.refresh();var l=t.getCBox();if(0==h){var d=o-l.width-(l.height+i.dis+l.th+0)/Math.tan(i.angle),c=a.y+s.height+i.dis+l.th+0;t.setPosition(d,c)}else{var u=n.getBBox(r[h-1]),p=r[h-1].getBox(),m=u.y+u.height-p.y-p.height,f=(m+i.dis+l.th+0+l.height)/Math.tan(i.angle),g=p.x+p.width-l.width-f,v=p.y+i.dis+m+l.th+0+p.height;t.setPosition(g,v)}i._updateNodeAssist(t,i.root),i._layout1(t,e)}}))}}}adjustNode(t,e){var i=t.getPosition(),n=t.getBBox(),r=t.getParent(),s=r.getPosition(),o=r.getBBox();if("top"==e)var a=s.y-i.y;else a=i.y-s.y-o.height+n.height;for(var h=a/Math.tan(this.angle);r.getLevel()>1;){s=r.getPosition(),r.getSiblings().forEach((t=>{var i=t.getPosition();"top"==e?i.y<s.y&&this.moveNode(t,h,-a):"bottom"==e&&i.y>s.y&&this.moveNode(t,h,a)})),r=r.getParent()}}adjustNode1(t,e){var i=t.getPosition(),n=t.getBBox(),r=t.getParent(),s=r.getPosition(),o=r.getBBox();if("top"==e)var a=s.y-i.y;else a=i.y-s.y-o.height+n.height;for(var h=a/Math.tan(this.angle);r.getLevel()>1;){s=r.getPosition(),r.getSiblings().forEach((t=>{var i=t.getPosition();"top"==e?i.y<s.y&&this.moveNode(t,-h,-a):"bottom"==e&&i.y>s.y&&this.moveNode(t,-h,a)})),r=r.getParent()}}createHandDrawLink(){if(this.svgDom&&this.svgDom.clear(),!this.svgDom)return;if(0==this.root.getChildren().length)return;if("left"==this.direct)return void this.createHandDrawLink1();var t=lt.svg(this.root.mindmap.draw),e=this;this.dis;var i=this.root.getLevel();function n(r,s){var o=r.getBox(),a=r.getPosition();let h=r.parent.stroke?r.parent.stroke:r.stroke?r.stroke:gt();if(r.stroke||(r.stroke=h),r._barDom.style.backgroundColor=h,r._barDom.style.borderColor=h,r.getLevel()==i+1){if("top"==s){var l=[a.x-e.dis/Math.tan(e.angle),parseInt(a.y+o.height+e.dis)],d=[(c=[a.x,a.y+o.height+1])[0]+o.width+1,c[1]];e.svgDom.node.appendChild(t.linearPath(e.linePoint([l,c,d],1),{stroke:h,strokeWidth:1,fill:"none",roughness:.6}))}else if("bottom"==s){var c;l=[a.x-(e.dis+o.height)/Math.tan(e.angle),parseInt(a.y-e.dis)],d=[(c=[a.x,a.y+o.height+1])[0]+o.width+1,c[1]];e.svgDom.node.appendChild(t.linearPath(e.linePoint([l,c,d],1),{stroke:h,strokeWidth:1,fill:"none",roughness:.6}))}}else{var u=r.getParent(),p=u.getPosition(),m=u.getBox();if(r.isLast())var f=[l=[p.x+m.width-1,p.y+m.height+1],[l[0]+e.dis,l[1]],g=[a.x,a.y+o.height+1],d=[g[0]+o.width,g[1]]];else{var g;f=[g=[a.x,a.y+o.height+1],d=[g[0]+o.width,g[1]]]}e.svgDom.node.appendChild(t.linearPath(e.linePoint(f,1),{stroke:h,strokeWidth:1,fill:"none",roughness:.6}))}r.isExpand&&r.getChildren().forEach((t=>{n(t,s)}))}this.root.children.forEach(((t,e)=>{t.stroke=this.colors[e]||gt()})),this.tops.forEach((t=>{n(t,"top")})),this.bottoms.forEach((t=>{n(t,"bottom")})),this.createHandDrawBone()}createLink(){if(this.svgDom&&this.svgDom.clear(),!this.svgDom)return;if(0==this.root.getChildren().length)return;if("left"==this.direct)return void this.createLink1();var t=this;this.dis;var e=this.root.getLevel();function i(n,r){var s=n.getBox(),o=n.getPosition();let a=n.parent.stroke?n.parent.stroke:n.stroke?n.stroke:gt();if(n.stroke||(n.stroke=a),n._barDom.style.backgroundColor=a,n._barDom.style.borderColor=a,n.getLevel()==e+1){if("top"==r){var h=[o.x-t.dis/Math.tan(t.angle),parseInt(o.y+s.height+t.dis)],l=[(d=[o.x,o.y+s.height+1])[0]+s.width+1,d[1]];(c=t.svgDom.polyline(t.linePoint([h,d,l],2))).fill("none"),c.stroke({color:a,width:2,linecap:"round",linejoin:"round"})}else if("bottom"==r){var d;h=[o.x-(t.dis+s.height)/Math.tan(t.angle),parseInt(o.y-t.dis)],l=[(d=[o.x,o.y+s.height+1])[0]+s.width+1,d[1]];(c=t.svgDom.polyline(t.linePoint([h,d,l],2))).fill("none"),c.stroke({color:a,width:2,linecap:"round",linejoin:"round"})}}else{var c,u=n.getParent(),p=u.getPosition(),m=u.getBox();if(n.isLast())var f=[h=[p.x+m.width-1,p.y+m.height+1],[h[0]+t.dis,h[1]],g=[o.x,o.y+s.height+1],l=[g[0]+s.width,g[1]]];else{var g;f=[g=[o.x,o.y+s.height+1],l=[g[0]+s.width,g[1]]]}(c=t.svgDom.polyline(t.linePoint(f,2))).fill("none"),c.stroke({color:a,width:2,linecap:"round",linejoin:"round"})}n.isExpand&&n.getChildren().forEach((t=>{i(t,r)}))}this.root.children.forEach(((t,e)=>{t.stroke=this.colors[e]||gt()})),this.tops.forEach((t=>{i(t,"top")})),this.bottoms.forEach((t=>{i(t,"bottom")})),this.creatBone()}createHandDrawLink1(){var t=this;if(this.dis,!this.svgDom)return;if(this.svgDom&&this.svgDom.clear(),0==this.root.getChildren().length)return;var e=lt.svg(this.root.mindmap.draw);var i=this.root.getLevel();function n(r,s){var o=r.getBox(),a=r.getPosition();let h=r.parent.stroke?r.parent.stroke:r.stroke?r.stroke:gt();if(r.stroke||(r.stroke=h),r._barDom.style.backgroundColor=h,r._barDom.style.borderColor=h,r.getChildren().length,r.getLevel()==i+1){if("top"==s){var l=[a.x+o.width+t.dis/Math.tan(t.angle),parseInt(a.y+o.height+t.dis)],d=[a.x+o.width,a.y+o.height+1],c=[a.x-1,d[1]];t.svgDom.node.appendChild(e.linearPath(t.linePoint([l,d,c],1),{stroke:h,strokeWidth:1,fill:"none",roughness:.6}))}else if("bottom"==s){l=[a.x+o.width+(t.dis+o.height)/Math.tan(t.angle),parseInt(a.y-t.dis)],d=[a.x+o.width,a.y+o.height+1],c=[a.x-1,d[1]];t.svgDom.node.appendChild(e.linearPath(t.linePoint([l,d,c],1),{stroke:h,strokeWidth:1,fill:"none",roughness:.6}))}}else{var u=r.getParent(),p=u.getPosition(),m=u.getBox();if(r.isLast())var f=[l=[p.x+1,p.y+m.height+1],[l[0]-t.dis,l[1]],g=[a.x+o.width,a.y+o.height+1],c=[a.x,g[1]]];else{var g;f=[g=[a.x+o.width,a.y+o.height+1],c=[a.x,g[1]]]}t.svgDom.node.appendChild(e.linearPath(t.linePoint(f,1),{stroke:h,strokeWidth:1,fill:"none",roughness:.6}))}r.isExpand&&r.getChildren().forEach((t=>{n(t,s)}))}this.root.children.forEach(((t,e)=>{t.stroke=this.colors[e]||gt()})),this.tops.forEach((t=>{n(t,"top")})),this.bottoms.forEach((t=>{n(t,"bottom")})),this.createHandDrawBone1()}createLink1(){var t=this;if(this.dis,!this.svgDom)return;if(this.svgDom&&this.svgDom.clear(),0==this.root.getChildren().length)return;var e=this.root.getLevel();function i(n,r){var s=n.getBox(),o=n.getPosition();let a=n.parent.stroke?n.parent.stroke:n.stroke?n.stroke:gt();if(n.stroke||(n.stroke=a),n._barDom.style.backgroundColor=a,n._barDom.style.borderColor=a,n.getChildren().length,n.getLevel()==e+1){if("top"==r){var h=[o.x+s.width+t.dis/Math.tan(t.angle),parseInt(o.y+s.height+t.dis)],l=[o.x+s.width,o.y+s.height+1],d=[o.x-1,l[1]];(c=t.svgDom.polyline(t.linePoint([h,l,d],2))).fill("none"),c.stroke({color:a,width:2,linecap:"round",linejoin:"round"})}else if("bottom"==r){h=[o.x+s.width+(t.dis+s.height)/Math.tan(t.angle),parseInt(o.y-t.dis)],l=[o.x+s.width,o.y+s.height+1],d=[o.x-1,l[1]];(c=t.svgDom.polyline(t.linePoint([h,l,d],2))).fill("none"),c.stroke({color:a,width:2,linecap:"round",linejoin:"round"})}}else{var c,u=n.getParent(),p=u.getPosition(),m=u.getBox();if(n.isLast())var f=[h=[p.x+1,p.y+m.height+1],[h[0]-t.dis,h[1]],g=[o.x+s.width,o.y+s.height+1],d=[o.x,g[1]]];else{var g;f=[g=[o.x+s.width,o.y+s.height+1],d=[o.x,g[1]]]}(c=t.svgDom.polyline(t.linePoint(f,2))).fill("none"),c.stroke({color:a,width:2,linecap:"round",linejoin:"round"})}n.isExpand&&n.getChildren().forEach((t=>{i(t,r)}))}this.root.children.forEach(((t,e)=>{t.stroke=this.colors[e]||gt()})),this.tops.forEach((t=>{i(t,"top")})),this.bottoms.forEach((t=>{i(t,"bottom")})),this.creatBone1()}createHandDrawBone(){var t=this;if(!this.isShow)return;if(!this.svgDom)return;var e=lt.svg(this.root.mindmap.draw),i=this.root.getMind(),n=this.root,r=n.getBox(),s=n.getPosition(),o=i.getBoundingRect(n.getShowNodeList());let a=this.stroke;var h=parseInt(s.x+r.width)+.5,l=parseInt(s.y+r.height/2)+.5,d=parseInt(s.x+o.width+30)+.5,c=l;t.svgDom.node.appendChild(e.polygon([[h,l-3],[d,c],[h,l+3]],{stroke:a,strokeWidth:1,fill:a,roughness:.4}));var u=[s.x+o.width+30,l],p=[u[0]+60,u[1]-30],m=[u[0]+60,u[1]+30];t.fishTail=e.polygon([u,p,m],{stroke:a,strokeWidth:1,fill:a,roughness:.6}),t.svgDom.node.appendChild(t.fishTail)}creatBone(){var t=this;if(!this.isShow)return;if(!this.svgDom)return;var e=this.root.getMind(),i=this.root,n=i.getBox(),r=i.getPosition(),s=e.getBoundingRect(i.getShowNodeList());let o=this.stroke;var a=parseInt(r.x+n.width),h=parseInt(r.y+n.height/2),l=parseInt(r.x+s.width+30),d=h;t.svgDom.line(a,h,l,d).stroke({color:o,width:2,linecap:"round",linejoin:"round"});var c=[r.x+s.width+30,h],u=[c[0]+60,c[1]-30],p=[c[0]+60,c[1]+30];t.fishTail=t.svgDom.polygon([c,u,p]).fill("lightskyblue").stroke({color:o,width:2,linecap:"round",linejoin:"round"})}createHandDrawBone1(){var t=this;if(!this.svgDom)return;var e=lt.svg(this.root.mindmap.draw),i=this.root,n=i.getMind(),r=i.getBox(),s=i.getPosition(),o=n.getBoundingRect(i.getShowNodeList());let a=this.stroke;var h=parseInt(s.x)+.5,l=parseInt(s.y+r.height/2)+.5,d=parseInt(o.x-40)+.5,c=l;t.svgDom.node.appendChild(e.polygon([[h,l-3],[d,c],[h,l+3]],{stroke:a,strokeWidth:1,fill:a,roughness:.4}));var u=[o.x-40,l],p=[u[0]-60,u[1]-30],m=[u[0]-60,u[1]+30];t.fishTail=e.polygon([u,p,m],{stroke:a,strokeWidth:1,fill:a,roughness:.6}),t.svgDom.node.appendChild(t.fishTail)}creatBone1(){var t=this;if(!this.svgDom)return;var e=this.root,i=e.getMind(),n=e.getBox(),r=e.getPosition(),s=i.getBoundingRect(e.getShowNodeList());let o=this.stroke;var a=parseInt(r.x),h=parseInt(r.y+n.height/2),l=parseInt(s.x-40),d=h;t.svgDom.line(a,h,l,d).stroke({color:o,width:2,linecap:"round",linejoin:"round"});var c=[s.x-40,h],u=[c[0]-60,c[1]-30],p=[c[0]-60,c[1]+30];t.fishTail=t.svgDom.polygon([c,u,p]).fill("lightskyblue").stroke({color:o,width:2,linecap:"round",linejoin:"round"})}refresh(){this.tops=[],this.bottoms=[],this.layout(this.root,this.direct)}},tree:class extends vt{constructor(t,e,i){super("tree"),this.layoutName="tree",this.direct="down",this.levelDis=20,this.dis=10,this.firstLevel=60,this.firstNodeDis=20,this.isCache=!0,this.lefts=[],this.rights=[],this.colors=[],this.lineWidth=2,this.cache={},this.group=null,this.root=t,"down"!=e&&"up"!=e||(this.direct=e),this.colors=i||[],this.mind=this.root.mindmap,this.group||(this.group=this.mind.edgeGroup.group())}layout(t,e){t&&(this.root=t),this.direct=e&&("down"==e||"up"==e)?e:"down",t.layout=this,this.root.parent||this.root.containEl.classList.add("node-root"),this.group||(this.group=this.root.getMind().edgeGroup.group()),this.svgDom=this.group,this.root.isShow()&&(this.setDirect(t),this._doLayout(t),this.doLayout(t),this.root.nodeType&&"induce"!=this.root.nodeType&&this.refreshLayout(),this._updateRootAssist()),this.createLink()}setDirect(t){t.direct=this.direct;var e=t.containEl.classList.contains("mm-node-second");t.containEl.setAttribute("class",""),t.containEl.classList.add("mm-node"),t.containEl.classList.add("mm-node-"+this.direct),t.belongInduce&&t.containEl.classList.add("mm-node-induce"),t.isLeaf()&&!t.containEl.classList.contains("mm-node-leaf")?t.containEl.classList.add("mm-node-leaf"):t.containEl.classList.contains("mm-node-leaf")&&t.containEl.classList.remove("mm-node-leaf"),0==t.getLevel()&&t.containEl.classList.add("mm-root"),1==t.getLevel()&&(t.containEl.classList.add("mm-node-second"),t.refreshBox()),e&&t.refreshBox(),t.isExpand||t.containEl.classList.add("mm-node-collapse"),t.isSelect&&t.containEl.classList.add("mm-node-select"),(t===this.root||!t.layout&&t.isExpand)&&t.children.forEach((t=>{this.setDirect(t)}))}_doLayout(t){var e=this,i=this.levelDis,n=this.dis,r=t.getBox(),s=t.getPosition();0==t.getLevel()&&(i=this.firstLevel,n=this.firstNodeDis);var o=t.getChildren().length-1;let a=0;if(t.getChildren().forEach((function(t,e){let i=t.getBox();a+=i.width,e!=o&&(a+=n)})),"down"==this.direct){let e=s.y+r.height+i,o=s.x+r.width/2-a/2,h=0;t.getChildren().forEach((function(t,i){t.callout&&t.callout.refresh();let r=t.getCBox();var s=e+r.th;0==i?(t.setPosition(o,s),h=o+r.width+n):(t.setPosition(h,s),h=h+r.width+n)}))}else{let e=s.y-i,o=s.x+r.width/2-a/2,h=0;t.getChildren().forEach((function(t,i){t.callout&&t.callout.refresh(),t.wireFrame&&t.wireFrame.refresh();let r=t.getCBox();0==i?(t.setPosition(o,e-r.height-r.bh),h=o+r.width+n):(t.setPosition(h,e-r.height-r.bh),h=h+r.width+n)}))}if("down"==this.direct&&t.layout&&t!=this.root){t.layout.layout(t,t.layout.direct||""),r=t.getMind().getBBox(t);var h=t.getCBox().th,l=Math.abs(Math.abs(s.y-r.y)-h);return this.moveNode(t,0,l),t.boundingRect=null,void(t.direct="down")}t.isExpand&&t.getChildren().forEach((function(t,i){e._doLayout(t)}))}doLayout(t){if(t&&t.isExpand){var e=this,i=t.getMind();i.traverseDF((t=>{if(t!=e.root&&t.isShow()){if(t.layout){if(t.layout!=e&&t.getTopLayout()!=e)return}else if(t.getLayout()!=e&&"down"==e.direct)return;t.callout&&t.callout.isShow&&t.callout.refresh();var n={},r=t.parent;if(r){var s=r.wireFrames,o=r.summaries;s.length&&s.forEach((e=>{if(e.node==t&&(e.refreshNode(),e.refresh(),e.data&&e.data.text))if(n[t.getId()])n[t.getId()].rangeNode=n[t.getId()].rangeNode.concat(e.rangeNode.slice()),n[t.getId()].rangeNode.unique();else{var i=e.getTextBox().height,r=e.rangeNode.slice();n[t.getId()]={node:t,wf:e,topDy:i+4,rangeNode:r}}})),o.length&&o.forEach((e=>{e.node==t&&(e.refreshNode(),e.refresh())}))}var a=t.getBox();if(e.isCache&&t.boundingRect)var h=t.boundingRect;else{var l=t.getShowNodeList(),d=[],c=[],u=[],p=[];if(l.forEach((t=>{t.callout&&t.callout.isShow&&-1==u.indexOf(t)&&u.push(t.callout),t.layout&&t.layout.isShow&&-1==p.indexOf(t.layout)&&p.push(t.layout);var e=t.wireFrames;t.summaries.forEach((t=>{t.isShow()&&-1==c.indexOf(t)&&c.push(t)})),e.forEach((t=>{t.isHide||-1==d.indexOf(t)&&d.push(t)}))})),l=l.concat(d).concat(u),c.forEach((t=>{l=l.concat(t.getAllItem())})),l.length){h=i.getBoundingRect(l);p.length&&p.forEach((t=>{if("fish"==t.layoutName&&"down"==e.direct&&("right"==t.direct?t.creatBone():t.creatBone1(),t.fishTail)){var i=t.fishTail.bbox();i.x<h.x&&(h.x=i.x),i.y<h.y&&(h.y=i.y),i.x+i.width>h.right&&(h.right=i.x+i.width),i.y+i.height>h.bottom&&(h.bottom=i.y+i.height),h.width=h.right-h.x,h.height=h.bottom-h.y}}))}}if(e.isCache&&t.boundingRect)var m=t.boundingRect.leftDx,f=t.boundingRect.rightDx;else{m=Math.abs(h.x-a.x),f=Math.abs(h.right-a.x-a.width);var g={},v={};s&&s.length&&s.forEach((e=>{var i=e.leftNode;if(e.node==t){if(g[i])return;g[i]=!0,m+=6}if(e.endNode&&e.endNode==t){var n=e.rightNode;if(v[n])return;v[n]=!0,f+=6}})),h.leftDx=m,h.rightDx=f,t.boundingRect=h}if(e.adjustNode(t,m,f,0),"top"!==t.direct)for(let t in n)e.adjustNode(n[t].node,0,0,n[t].topDy,n[t]);s&&s.length&&s.forEach((e=>{e.endNode==t&&e.refresh()})),o&&o.length&&o.forEach((e=>{e.endNode==t&&e.refresh()}))}}),t,!1)}}adjustNode(t,e,i,n,r){var s=this;if(r)r.rangeNode.forEach((t=>{"down"==s.direct?s.moveNode(t,0,n):s.moveNode(t,0,-n)}));else if(t&&t!=this.root){var o=t.getPosition();t.getSiblings().forEach((function(t){let n=t.getPosition();if(o.x>n.x){if(0==e)return;s.moveNode(t,-e,0)}else{if(0==i)return;s.moveNode(t,i,0)}}))}}refreshLayout(){var t=this.root,e=t.getPosition(),i=t.getBox(),n=e.x+i.width/2,r=t.getChildren();if(r.length>=2){var s=r[0],o=r[r.length-1],a=s.getPosition(),h=o.getPosition(),l=o.getBox(),d=h.x+l.width-n,c=n-a.x;if(Math.abs(d)!=Math.abs(c)){var u=Math.abs(Math.abs(d)-Math.abs(c))/2;Math.abs(d)>Math.abs(c)?r.forEach((t=>{this.moveNode(t,-u,0)})):r.forEach((t=>{this.moveNode(t,u,0)}))}}}createLink(){"down"==this.direct?this.createDownLink():this.createUpLink()}createDownLink(){var t=this,e=this.root;if(this.group&&this.group.clear(),0==this.root.getChildren().length)return;if(!this.group||!this.root.isShow())return;let i=this.lineWidth;function n(t){if(t.isExpand){if(t.layout)return void t.layout.createLink();t.children.forEach((t=>{n(t)}))}}!function e(n){if((!n.layout||n==t.root)&&n.isExpand){var r=n.getPosition(),s=n.getBox();n.getChildren().forEach((function(o,a){let h=o.getBox(),l=o.getPosition(),d=r.x+s.width/2,c=r.y+s.height,u=l.x+h.width/2,p=l.y,m=n.stroke?n.stroke:o.stroke?o.stroke:t.colors[a]||gt();if(o.stroke||(o.stroke=m),o._barDom.style.backgroundColor=m,o._barDom.style.borderColor=m,1==n.getChildren().length){if(i%2==1)var f=parseInt(d+"")+.5,g=parseInt(c+"")+.5,v=parseInt(u+"")+.5,y=parseInt(p+"")+.5;else f=parseInt(d+""),g=parseInt(c+""),v=parseInt(u+""),y=parseInt(p+"");var x=t.group.line(f,g,v,y).stroke({color:m,width:i,linecap:"round",linejoin:"round"})}else{var b=[r.x+s.width/2,r.y+s.height],w=[l.x+h.width/2,l.y];if(0==n.getLevel())var k=[b[0],b[1]+t.firstLevel/2];else k=[b[0],b[1]+t.levelDis/2];if(l.x+h.width/2>r.x+s.width/2)var _=[w[0]-4,k[1]],C=[w[0],k[1]+4];else _=[w[0]+4,k[1]],C=[w[0],k[1]+4];var D=[b,k,_],E=[C,w];if(D.length>2){(x=t.group.polyline(t.linePoint(D,i))).fill("none"),x.stroke({color:m,width:i,linecap:"round",linejoin:"round"});var S=t.linePoint([C],i)[0],N=t.linePoint([_],i)[0],M=`M${S[0]} ${S[1]},Q${S[0]} ${N[1]},${N[0]} ${N[1]}`,A=t.group.path().stroke({color:m,width:i,linecap:"round",linejoin:"round"});A.plot(M),A.fill("none"),(x=t.group.polyline(t.linePoint(E,i))).fill("none"),x.stroke({color:m,width:i,linecap:"round",linejoin:"round"})}else{(x=t.group.polyline(t.linePoint(D,i))).fill("none"),x.stroke({color:m,width:i,linecap:"round",linejoin:"round"})}}e(o)}))}}(e),e.children.forEach(((t,e)=>{n(t)}))}createUpLink(){var t=this,e=this.root;if(this.group&&this.group.clear(),0==this.root.getChildren().length)return;if(!this.group||!this.root.isShow())return;let i=this.lineWidth;(e=this.root).children.forEach(((t,e)=>{t.stroke||(t.stroke=this.colors[e]||gt())})),function e(n){if(n.layout&&n!=t.root&&n.layout.group&&n.layout.group.clear(),n.isExpand){var r=n.getPosition(),s=n.getBox();n.getLevel(),n.getChildren().forEach((function(o,a){let h=o.getCBox(),l=o.getPosition(),d=parseInt(r.x+s.width/2+""),c=parseInt(r.y+""),u=parseInt(l.x+h.width/2+""),p=parseInt(l.y+h.height+""),m=n.stroke?n.stroke:o.stroke?o.stroke:gt();if(o.stroke||(o.stroke=m),o._barDom.style.backgroundColor=m,o._barDom.style.borderColor=m,1==n.getChildren().length){if(i%2==1)var f=parseInt(d+"")+.5,g=parseInt(c+"")+.5,v=parseInt(u+"")+.5,y=parseInt(p+"")+.5;else f=parseInt(d+""),g=parseInt(c+""),v=parseInt(u+""),y=parseInt(p+"");var x=t.group.line(f,g,v,y).stroke({color:m,width:i,linecap:"round",linejoin:"round"})}else{var b=[r.x+s.width/2,r.y],w=[l.x+h.width/2,l.y+h.height],k=[b[0],b[1]-t.levelDis/2];if(o.isFirst()||o.isLast()){if(l.x+h.width/2>r.x+s.width/2)var _=[w[0]-4,k[1]],C=[w[0],k[1]-4];else _=[w[0]+4,k[1]],C=[w[0],k[1]-4];var D=[b,k,_],E=[C,w]}else D=[_=[w[0],k[1]],w];if(D.length>2){(x=t.group.polyline(t.linePoint(D,i))).fill("none"),x.stroke({color:m,width:i,linecap:"round",linejoin:"round"});var S=t.linePoint([C],i)[0],N=t.linePoint([_],i)[0],M=`M${S[0]} ${S[1]},Q${S[0]} ${N[1]},${N[0]} ${N[1]}`,A=t.group.path().stroke({color:m,width:i,linecap:"round",linejoin:"round"});A.plot(M),A.fill("none"),(x=t.group.polyline(t.linePoint(E,i))).fill("none"),x.stroke({color:m,width:i,linecap:"round",linejoin:"round"})}else{(x=t.group.polyline(t.linePoint(D,i))).fill("none"),x.stroke({color:m,width:i,linecap:"round",linejoin:"round"})}}e(o)}))}}(e)}refresh(){var t=this.root;this.layout(t,this.direct),this.createLink()}},multipleTree:class extends vt{constructor(t,e,i){super("multipleTree"),this.mind=null,this.colors=[],this.layoutName="multipleTree",this.type="multipleTree",this.levelDis=20,this.firstLevelDis=40,this.nodeDis=18,this.root=null,this.rootLevel=0,this.rights=[],this.lefts=[],this.isCache=!1,this.name="multipleTree",this.lineWidth=2,this.root=t,this.mind=this.root.mindmap,this.colors=i||[],this.direct="multipleTree",this.svgDom||(this.svgDom=this.mind.edgeGroup.group())}layout(t,e){if(this.rights=[],this.lefts=[],this.root=t||this.root,this.rootLevel=this.root.getLevel(),this.root.layout=this,this.direct=e,this.root.containEl.classList.add("mm-node-down"),this.svgDom||(this.svgDom=this.root.mindmap.edgeGroup.group()),"right"==this.direct)this.root.children.forEach((t=>{this.rights.push(t),this.setDirect(t,"right")}));else if("left"==this.direct)this.root.children.forEach((t=>{this.lefts.push(t),this.setDirect(t,"left")}));else{var i=this.root.children.length;this.root.children.forEach(((t,e)=>{e<Math.ceil(i/2)?(this.rights.push(t),this.setDirect(t,"right")):(this.lefts.push(t),this.setDirect(t,"left"))}))}this._layoutTow(),this._updateRootAssist(),this.createLink()}setDirect(t,e){t.direct=e;var i=t.containEl.classList.contains("mm-node-second");t.containEl.setAttribute("class",""),t.containEl.classList.add("mm-node"),t.containEl.classList.add("mm-node-down"),t.containEl.classList.add(`mm-${this.layoutName}-node`),t.isLeaf()&&!t.containEl.classList.contains("mm-node-leaf")?t.containEl.classList.add("mm-node-leaf"):t.containEl.classList.contains("mm-node-leaf")&&t.containEl.classList.remove("mm-node-leaf"),t.layout||(1==t.getLevel()&&(t.containEl.classList.add("mm-node-second"),t.refreshBox()),i&&t.refreshBox(),t.isSelect&&t.containEl.classList.add("mm-node-select"),t.isExpand||t.containEl.classList.add("mm-node-collapse"),t.children.forEach((t=>{this.setDirect(t,e)})))}_layoutTow(){this.root.isExpand&&this.root.isShow()&&(this._layoutRight(),this._layoutLeft())}_layoutRight(){var t=this.root.getCBox();this.rights.forEach(((e,i)=>{e.callout&&e.callout.refresh(),this._layoutRightNode(e,i,t,!0,e.getLevel()-1)}))}getParentPos(t){t.getLevel();var e=t.getDomBox();return{x:e.x+e.width/2,y:e.y+e.height}}_layoutRightNode(t,e,i,n,r){var s=this.root.getMind(),o=i.x+i.width/2,a=i.y+i.height;if(0==e){var h=t.getCBox(!0);t.setPosition(o+this.levelDis,a+this.nodeDis+h.th+i.bh)}else{var l=t.getCBox(!0);if(n){let i=this.rights[e-1];if(this.isCache&&i.boundingRect)var d=i.boundingRect;else{d=s.getBBox(i);i.boundingRect=d}var c=i.getPosition();if(i.layout){var{x:u}=this.getParentPos(i.parent);t.setPosition(u+this.levelDis,d.y+d.height+this.nodeDis+l.th)}else t.setPosition(c.x,d.y+d.height+this.nodeDis+l.th)}else{var p=t.parent.children[e-1];let i=p.getPosition();if(this.isCache&&p.boundingRect)d=p.boundingRect;else{d=s.getBBox(p);p.boundingRect=d}if(p.layout){var{x:u}=this.getParentPos(p.parent);t.setPosition(u+this.levelDis,d.y+d.height+this.nodeDis+l.th)}else t.setPosition(i.x,d.y+d.height+this.nodeDis+l.th)}}if(t.layout){t.layout.layout(t,t.layout.direct||"");let e=t.getPosition();i=s.getBBox(t);t.boundingRect=i;var m=Math.abs(e.x-i.x);if(h)var f=Math.abs(e.y-i.y)-h.th;else f=Math.abs(e.y-i.y);return this.moveNode(t,m,f),t.direct="right",void this._updateNodeAssist(t)}if(this._updateNodeAssist(t),t.isExpand){var g=t.getCBox(!0);t.children.forEach(((t,e)=>{t.callout&&t.callout.refresh(),this._layoutRightNode(t,e,g)}))}}_layoutLeft(){var t=this.root.getCBox();this.lefts.forEach(((e,i)=>{e.callout&&e.callout.refresh(),this._layoutLeftNode(e,i,t,!0,e.getLevel()-1)}))}_layoutLeftNode(t,e,i,n,r){var s=this.root.getMind(),o=i.x+i.width/2,a=i.y+i.height,{width:h,th:l}=t.getCBox(!0);if(0==e){var d=0;r==this.rootLevel&&(d=20),t.setPosition(o-h-this.levelDis,a+this.nodeDis+d+l+i.bh)}else{var c=t.getCBox(!0);if(n){var u=this.lefts[e-1];if(this.isCache&&u.boundingRect)var p=u.boundingRect;else{p=s.getBBox(u);u.boundingRect=p}if(u.layout){var{x:m}=this.getParentPos(u.parent);t.setPosition(m-this.levelDis-h,p.y+p.height+this.nodeDis+c.th)}else{var f=u.getCBox(!0);t.setPosition(f.x+f.width-h,p.y+p.height+this.nodeDis+c.th)}}else{let i=t.parent.children[e-1];p=s.getBBox(i);if(this.isCache&&i.boundingRect)p=i.boundingRect;else{p=s.getBBox(i);i.boundingRect=p}if(i.layout){var{x:m}=this.getParentPos(i.parent);t.setPosition(m-this.levelDis-h,p.y+p.height+this.nodeDis+c.th)}else{let e=i.getCBox(!0);t.setPosition(e.x+e.width-h,p.y+p.height+this.nodeDis+c.th)}}}if(t.layout){t.layout.layout(t,t.layout.direct||"");var g=t.getPosition(),v=(i=s.getBBox(t),Math.abs(g.x+h-i.x-i.width)),y=Math.abs(g.y-i.y)-l;return this.moveNode(t,-v,y),t.direct="left",void this._updateNodeAssist(t)}if(this._updateNodeAssist(t),t.isExpand){var x=t.getCBox(!0);t.children.forEach(((t,e)=>{t.callout&&t.callout.refresh(),this._layoutLeftNode(t,e,x)}))}}createLink(){var t=this;if(this.svgDom&&this.svgDom.clear(),this.svgDom&&this.root.isShow()&&0!=this.root.getChildren().length){var e=this.lineWidth;gt(),this.root.children.forEach(((t,e)=>{t.stroke||(t.stroke=this.colors[e]||gt())})),function i(n){if(n.isExpand){var r=Object.assign({},n.getBox());n!=t.root&&(r.height+=e);var s=[r.x+r.width/2,r.y+r.height];n.children.forEach((r=>{var o=Object.assign({},r.getBox());o.height+=e;var a=n.stroke?n.stroke:r.stroke?r.stroke:gt();if(r.stroke||(r.stroke=a),r._barDom.style.backgroundColor=a,r._barDom.style.borderColor=a,"right"==r.direct)var h=t.linePoint([[s[0],o.y+o.height-6]],e)[0],l=t.linePoint([[o.x+o.width,o.y+o.height]],e)[0],d=t.linePoint([[h[0]+6,l[1]]],e)[0],c=`M${h[0]} ${h[1]},Q${h[0]} ${h[1]+6},${d[0]} ${d[1]}`;else h=t.linePoint([[s[0],o.y+o.height-6]],e)[0],l=t.linePoint([[o.x,o.y+o.height]],e)[0],d=t.linePoint([[h[0]-6,l[1]]],e)[0],c=`M${h[0]} ${h[1]},Q${h[0]} ${h[1]+6},${d[0]} ${d[1]} `;var u=t.svgDom.path().stroke({color:a,width:e,linecap:"round",linejoin:"round"});u.plot(c),u.fill("none");var p=t.svgDom.line(t.linePoint([s,h],e));p.fill("none"),p.stroke({color:a,width:e,linecap:"round",linejoin:"round"});var m=t.svgDom.line(t.linePoint([d,l],e));m.fill("none"),m.stroke({color:a,width:e,linecap:"round",linejoin:"round"}),r.layout||i(r)}))}}(this.root),this.root.children.forEach(((t,e)=>{i(t)}))}function i(t){if(t.isExpand){if(t.layout)return void t.layout.createLink();t.children.forEach((t=>{i(t)}))}}}refresh(){this.layout(this.root,this.direct),this.createLink()}},vertical:class extends vt{constructor(t,e,i){if(super("vertical"),this.layoutName="vertical",this.type="vertical",this.dis=40,this.direct="vertical",this.isCache=!0,this.root=null,this.colors=[],this.svgDom=null,this.root=t,this.direct=e||"vertical",this.colors=i||[],!t.stroke){var n=gt();t.data.stroke=n,t.stroke=n}}layout(t,e){this.direct=e||"vertical",this.root=t||this.root,this.root.parent||this.root.containEl.classList.contains("mm-root")||this.root.containEl.classList.add("mm-root"),this.svgDom||(this.svgDom=this.root.getMind().edgeGroup.group()),this.root.layout=this,this._layout(this.root,this.direct),this._updateRootAssist(),this.createLink()}_layout(t,e){var i=this;this.root=t,this.direct=e||"vertical";var n=this.root.mindmap,r=this.root.getPosition(),s=this.root.getBox(),o=r.x+s.width/2,a=r.y+s.height;this.root.isExpand&&(this.root.children.forEach(((t,e)=>{var r="right";e%2==0&&(r="left");var s;if(t.stroke)var h=t.stroke;else h=this.colors[e]||gt(),t.data.stroke=h,t.stroke=h;s=new Array(100).fill(h),!t.layout&&(t.layout=new xt(t,r,s)),t.layout.root=t;var l=t.getBox();if(0==e)t.setPosition(o-l.width/2,a+this.dis);else{var d=this.root.children[e-1],c=n.getBBox(d);t.boundingRect=c;var u=c.bottom;t.setPosition(o-l.width/2,u+this.dis)}t.layout.layout(t,r||this.direct||""),t.callout&&t.callout.refresh();var p=t.getPosition(),m=(l=n.getBBox(t),Math.abs(p.y-l.y));this.moveNode(t,0,m),t.containEl.classList=[],t.containEl.classList.add("mm-node"),t.containEl.classList.add("mm-node-"+r),t.containEl.classList.add("mm-node-second"),t.containEl.classList.add("mm-vertical-node"),t.isLeaf()?t.containEl.classList.contains("mm-node-leaf")||t.containEl.classList.add("mm-node-leaf"):t.containEl.classList.contains("mm-node-leaf")&&t.containEl.classList.remove("mm-node-leaf"),this._updateNodeAssist(t,i.root)})),this._updateNodeAssist(this.root,this.root))}createLink(){var t=this.root.children,e=t.length;if(this.svgDom&&this.svgDom.clear(),!this.svgDom||!this.root.isShow())return;if(0==e)return;let i=this.root.stroke?this.root.stroke:gt();var n=t[e-1];var r=this.root.getPosition(),s=this.root.getCBox();n.getCBox();var o=n.getPosition(),a=r.x+s.width/2,h=a,l=r.y+s.height,d=o.y;this.svgDom.line(a,l,h,d).stroke({color:i,width:2,linecap:"round",linejoin:"round"}),t.forEach((t=>{t.layout.createLink()}))}refresh(){this.layout(this.root,this.direct)}}},wt=mt((function(t,e){!function(e,i){t.exports=e.document?i(e,e.document):function(t){return i(t,t.document)}}("undefined"!=typeof window?window:pt,(function(t,e){var i=(void 0!==this?this:t).SVG=function(t){if(i.supported)return t=new i.Doc(t),i.parser.draw||i.prepare(),t};if(i.ns="http://www.w3.org/2000/svg",i.xmlns="http://www.w3.org/2000/xmlns/",i.xlink="http://www.w3.org/1999/xlink",i.svgjs="http://svgjs.com/svgjs",i.supported=!!e.createElementNS&&!!e.createElementNS(i.ns,"svg").createSVGRect,!i.supported)return!1;i.did=1e3,i.eid=function(t){return"Svgjs"+c(t)+i.did++},i.create=function(t){var i=e.createElementNS(this.ns,t);return i.setAttribute("id",this.eid(t)),i},i.extend=function(){var t,e,n,r;for(e=(t=[].slice.call(arguments)).pop(),r=t.length-1;r>=0;r--)if(t[r])for(n in e)t[r].prototype[n]=e[n];i.Set&&i.Set.inherit&&i.Set.inherit()},i.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,i.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&i.extend(e,t.extend),t.construct&&i.extend(t.parent||i.Container,t.construct),e},i.adopt=function(e){return e?e.instance?e.instance:((n="svg"==e.nodeName?e.parentNode instanceof t.SVGElement?new i.Nested:new i.Doc:"linearGradient"==e.nodeName?new i.Gradient("linear"):"radialGradient"==e.nodeName?new i.Gradient("radial"):i[c(e.nodeName)]?new(i[c(e.nodeName)]):new i.Element(e)).type=e.nodeName,n.node=e,e.instance=n,n instanceof i.Doc&&n.namespace().defs(),n.setData(JSON.parse(e.getAttribute("svgjs:data"))||{}),n):null;var n},i.prepare=function(){var t=e.getElementsByTagName("body")[0],n=(t?new i.Doc(t):i.adopt(e.documentElement).nested()).size(2,0);i.parser={body:t||e.documentElement,draw:n.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:n.polyline().node,path:n.path().node,native:i.create("svg")}},i.parser={native:i.create("svg")},e.addEventListener("DOMContentLoaded",(function(){i.parser.draw||i.prepare()}),!1),i.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},i.utils={map:function(t,e){var i,n=t.length,r=[];for(i=0;i<n;i++)r.push(e(t[i]));return r},filter:function(t,e){var i,n=t.length,r=[];for(i=0;i<n;i++)e(t[i])&&r.push(t[i]);return r},radians:function(t){return t%360*Math.PI/180},degrees:function(t){return 180*t/Math.PI%360},filterSVGElements:function(e){return this.filter(e,(function(e){return e instanceof t.SVGElement}))}},i.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},i.Color=function(t){var e,n;(this.r=0,this.g=0,this.b=0,t)&&("string"==typeof t?i.regex.isRgb.test(t)?(e=i.regex.rgb.exec(t.replace(i.regex.whitespace,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):i.regex.isHex.test(t)&&(e=i.regex.hex.exec(4==(n=t).length?["#",n.substring(1,2),n.substring(1,2),n.substring(2,3),n.substring(2,3),n.substring(3,4),n.substring(3,4)].join(""):n),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"==typeof t&&(this.r=t.r,this.g=t.g,this.b=t.b))},i.extend(i.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+u(this.r)+u(this.g)+u(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new i.Color(t),this},at:function(t){return this.destination?(t=t<0?0:t>1?1:t,new i.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),i.Color.test=function(t){return t+="",i.regex.isHex.test(t)||i.regex.isRgb.test(t)},i.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},i.Color.isColor=function(t){return i.Color.isRgb(t)||i.Color.test(t)},i.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},i.extend(i.Array,{morph:function(t){if(this.destination=this.parse(t),this.value.length!=this.destination.length){for(var e=this.value[this.value.length-1],i=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(i);for(;this.value.length<this.destination.length;)this.value.push(e)}return this},settle:function(){for(var t=0,e=this.value.length,i=[];t<e;t++)-1==i.indexOf(this.value[t])&&i.push(this.value[t]);return this.value=i},at:function(t){if(!this.destination)return this;for(var e=0,n=this.value.length,r=[];e<n;e++)r.push(this.value[e]+(this.destination[e]-this.value[e])*t);return new i.Array(r)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)},split:function(t){return t.trim().split(i.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var t=new this.constructor;return t.value=l(this.value),t}}),i.PointArray=function(t,e){i.Array.call(this,t,e||[[0,0]])},i.PointArray.prototype=new i.Array,i.PointArray.prototype.constructor=i.PointArray,i.extend(i.PointArray,{toString:function(){for(var t=0,e=this.value.length,i=[];t<e;t++)i.push(this.value[t].join(","));return i.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,n=this.value.length,r=[];e<n;e++)r.push([this.value[e][0]+(this.destination[e][0]-this.value[e][0])*t,this.value[e][1]+(this.destination[e][1]-this.value[e][1])*t]);return new i.PointArray(r)},parse:function(t){var e=[];if(t=t.valueOf(),Array.isArray(t)){if(Array.isArray(t[0]))return t.map((function(t){return t.slice()}));if(null!=t[0].x)return t.map((function(t){return[t.x,t.y]}))}else t=t.trim().split(i.regex.delimiter).map(parseFloat);t.length%2!=0&&t.pop();for(var n=0,r=t.length;n<r;n+=2)e.push([t[n],t[n+1]]);return e},move:function(t,e){var i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(var n=this.value.length-1;n>=0;n--)this.value[n]=[this.value[n][0]+t,this.value[n][1]+e];return this},size:function(t,e){var i,n=this.bbox();for(i=this.value.length-1;i>=0;i--)n.width&&(this.value[i][0]=(this.value[i][0]-n.x)*t/n.width+n.x),n.height&&(this.value[i][1]=(this.value[i][1]-n.y)*e/n.height+n.y);return this},bbox:function(){return i.parser.poly.setAttribute("points",this.toString()),i.parser.poly.getBBox()}});for(var n={M:function(t,e,i){return e.x=i.x=t[0],e.y=i.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,i){return e.x=i.x,e.y=i.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},r="mlhvqtcsaz".split(""),s=0,o=r.length;s<o;++s)n[r[s]]=function(t){return function(e,i,r){if("H"==t)e[0]=e[0]+i.x;else if("V"==t)e[0]=e[0]+i.y;else if("A"==t)e[5]=e[5]+i.x,e[6]=e[6]+i.y;else for(var s=0,o=e.length;s<o;++s)e[s]=e[s]+(s%2?i.y:i.x);return n[t](e,i,r)}}(r[s].toUpperCase());i.PathArray=function(t,e){i.Array.call(this,t,e||[["M",0,0]])},i.PathArray.prototype=new i.Array,i.PathArray.prototype.constructor=i.PathArray,i.extend(i.PathArray,{toString:function(){return function(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e][0],null!=t[e][1]&&(n+=t[e][1],null!=t[e][2]&&(n+=" ",n+=t[e][2],null!=t[e][3]&&(n+=" ",n+=t[e][3],n+=" ",n+=t[e][4],null!=t[e][5]&&(n+=" ",n+=t[e][5],n+=" ",n+=t[e][6],null!=t[e][7]&&(n+=" ",n+=t[e][7])))));return n+" "}(this.value)},move:function(t,e){var i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(var n,r=this.value.length-1;r>=0;r--)"M"==(n=this.value[r][0])||"L"==n||"T"==n?(this.value[r][1]+=t,this.value[r][2]+=e):"H"==n?this.value[r][1]+=t:"V"==n?this.value[r][1]+=e:"C"==n||"S"==n||"Q"==n?(this.value[r][1]+=t,this.value[r][2]+=e,this.value[r][3]+=t,this.value[r][4]+=e,"C"==n&&(this.value[r][5]+=t,this.value[r][6]+=e)):"A"==n&&(this.value[r][6]+=t,this.value[r][7]+=e);return this},size:function(t,e){var i,n,r=this.bbox();for(i=this.value.length-1;i>=0;i--)"M"==(n=this.value[i][0])||"L"==n||"T"==n?(this.value[i][1]=(this.value[i][1]-r.x)*t/r.width+r.x,this.value[i][2]=(this.value[i][2]-r.y)*e/r.height+r.y):"H"==n?this.value[i][1]=(this.value[i][1]-r.x)*t/r.width+r.x:"V"==n?this.value[i][1]=(this.value[i][1]-r.y)*e/r.height+r.y:"C"==n||"S"==n||"Q"==n?(this.value[i][1]=(this.value[i][1]-r.x)*t/r.width+r.x,this.value[i][2]=(this.value[i][2]-r.y)*e/r.height+r.y,this.value[i][3]=(this.value[i][3]-r.x)*t/r.width+r.x,this.value[i][4]=(this.value[i][4]-r.y)*e/r.height+r.y,"C"==n&&(this.value[i][5]=(this.value[i][5]-r.x)*t/r.width+r.x,this.value[i][6]=(this.value[i][6]-r.y)*e/r.height+r.y)):"A"==n&&(this.value[i][1]=this.value[i][1]*t/r.width,this.value[i][2]=this.value[i][2]*e/r.height,this.value[i][6]=(this.value[i][6]-r.x)*t/r.width+r.x,this.value[i][7]=(this.value[i][7]-r.y)*e/r.height+r.y);return this},equalCommands:function(t){var e,n,r;for(t=new i.PathArray(t),r=this.value.length===t.value.length,e=0,n=this.value.length;r&&e<n;e++)r=this.value[e][0]===t.value[e][0];return r},morph:function(t){return t=new i.PathArray(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at:function(t){if(!this.destination)return this;var e,n,r,s,o=this.value,a=this.destination.value,h=[],l=new i.PathArray;for(e=0,n=o.length;e<n;e++){for(h[e]=[o[e][0]],r=1,s=o[e].length;r<s;r++)h[e][r]=o[e][r]+(a[e][r]-o[e][r])*t;"A"===h[e][0]&&(h[e][4]=+(0!=h[e][4]),h[e][5]=+(0!=h[e][5]))}return l.value=h,l},parse:function(t){if(t instanceof i.PathArray)return t.valueOf();var e,r={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(i.regex.numbersWithDots,h).replace(i.regex.pathLetters," $& ").replace(i.regex.hyphen,"$1 -").trim().split(i.regex.delimiter):t.reduce((function(t,e){return[].concat.call(t,e)}),[]);var s=[],o=new i.Point,a=new i.Point,l=0,d=t.length;do{i.regex.isPathLetter.test(t[l])?(e=t[l],++l):"M"==e?e="L":"m"==e&&(e="l"),s.push(n[e].call(null,t.slice(l,l+=r[e.toUpperCase()]).map(parseFloat),o,a))}while(d>l);return s},bbox:function(){return i.parser.path.setAttribute("d",this.toString()),i.parser.path.getBBox()}}),i.Number=i.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(i.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof i.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new i.Number(t),new i.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new i.Number(t),new i.Number(this-t,this.unit||t.unit)},times:function(t){return t=new i.Number(t),new i.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new i.Number(t),new i.Number(this/t,this.unit||t.unit)},to:function(t){var e=new i.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new i.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new i.Number(this.destination).minus(this).times(t).plus(this):this}}}),i.Element=i.invent({create:function(t){this._stroke=i.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._events=t._events||{},this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var n=p(this,t,e);return this.width(new i.Number(n.width)).height(new i.Number(n.height))},clone:function(t){this.writeDataToDom();var e=v(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},inside:function(t,e){var i=this.bbox();return t>i.x&&e>i.y&&t<i.x+i.width&&e<i.y+i.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(i.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter((function(e){return e!=t})).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return i.get(this.attr(t))},parent:function(e){var n=this;if(!n.node.parentNode)return null;if(n=i.adopt(n.node.parentNode),!e)return n;for(;n&&n.node instanceof t.SVGElement;){if("string"==typeof e?n.matches(e):n instanceof e)return n;if(!n.node.parentNode||"#document"==n.node.parentNode.nodeName||"#document-fragment"==n.node.parentNode.nodeName)return null;n=i.adopt(n.node.parentNode)}},doc:function(){return this instanceof i.Doc?this:this.parent(i.Doc)},parents:function(t){var e=[],i=this;do{if(!(i=i.parent(t))||!i.node)break;e.push(i)}while(i.parent);return e},matches:function(t){return function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}(this.node,t)},native:function(){return this.node},svg:function(t){var n=e.createElement("svg");if(!(t&&this instanceof i.Parent))return n.appendChild(t=e.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),n.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");n.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var r=0,s=n.firstChild.childNodes.length;r<s;r++)this.node.appendChild(n.firstChild.firstChild);return this},writeDataToDom:function(){(this.each||this.lines)&&(this.each?this:this.lines()).each((function(){this.writeDataToDom()}));return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return function(t,e){return t instanceof e}(this,t)}}}),i.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},i.morph=function(t){return function(e,n){return new i.MorphObj(e,n).at(t)}},i.Situation=i.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new i.Number(t.duration).valueOf(),this.delay=new i.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),i.FX=i.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,n){"object"==typeof t&&(e=t.ease,n=t.delay,t=t.duration);var r=new i.Situation({duration:t||1e3,delay:n||0,ease:i.easing[e||"-"]||e});return this.queue(r),this},delay:function(t){var e=new i.Situation({duration:t,delay:0,ease:i.easing["-"]});return this.queue(e)},target:function(t){return t&&t instanceof i.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof i.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof i.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e,n,r=this.situation;if(r.init)return this;for(t in r.animations)for(n=this.target()[t](),Array.isArray(n)||(n=[n]),Array.isArray(r.animations[t])||(r.animations[t]=[r.animations[t]]),e=n.length;e--;)r.animations[t][e]instanceof i.Number&&(n[e]=new i.Number(n[e])),r.animations[t][e]=n[e].morph(r.animations[t][e]);for(t in r.attrs)r.attrs[t]=new i.MorphObj(this.target().attr(t),r.attrs[t]);for(t in r.styles)r.styles[t]=new i.MorphObj(this.target().style(t),r.styles[t]);return r.initialTransformation=this.target().matrixify(),r.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var i=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!i&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var t=this.situation;this.stop(),this.situation=t,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===this.situation.loops&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(t,e){var i=this.situation.duration/this._speed;return this.absPos=t,e||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*i,this.situation.finish=this.situation.start+i,this.step(!0)},speed:function(t){return 0===t?this.pause():t?(this._speed=t,this.at(this.absPos,!0)):this._speed},loop:function(t,e){var i=this.last();return i.loops=null==t||t,i.loop=0,e&&(i.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(t){var e=this.last();return e.reversed=void 0===t?!e.reversed:t,this},progress:function(t){return t?this.situation.ease(this.pos):this.pos},after:function(t){var e=this.last();return this.target().on("finished.fx",(function i(n){n.detail.situation==e&&(t.call(this,e),this.off("finished.fx",i))})),this._callStart()},during:function(t){var e=this.last(),n=function(n){n.detail.situation==e&&t.call(this,n.detail.pos,i.morph(n.detail.pos),n.detail.eased,e)};return this.target().off("during.fx",n).on("during.fx",n),this.after((function(){this.off("during.fx",n)})),this._callStart()},afterAll:function(t){var e=function e(i){t.call(this),this.off("allfinished.fx",e)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this._callStart()},duringAll:function(t){var e=function(e){t.call(this,e.detail.pos,i.morph(e.detail.pos),e.detail.eased,e.detail.situation)};return this.target().off("during.fx",e).on("during.fx",e),this.afterAll((function(){this.off("during.fx",e)})),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,i){return this.last()[i||"animations"][t]=e,this._callStart()},step:function(t){var e,i,n;(t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops)?(e=Math.max(this.absPos,0),i=Math.floor(e),!0===this.situation.loops||i<this.situation.loops?(this.pos=e-i,n=this.situation.loop,this.situation.loop=i):(this.absPos=this.situation.loops,this.pos=1,n=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-n)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos);this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var r=this.situation.ease(this.pos);for(var s in this.situation.once)s>this.lastPos&&s<=r&&(this.situation.once[s].call(this.target(),this.pos,r),delete this.situation.once[s]);return this.active&&this.target().fire("during",{pos:this.pos,eased:r,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=r,this):this},eachAt:function(){var t,e,n,r=this,s=this.target(),o=this.situation;for(t in o.animations)n=[].concat(o.animations[t]).map((function(t){return"string"!=typeof t&&t.at?t.at(o.ease(r.pos),r.pos):t})),s[t].apply(s,n);for(t in o.attrs)n=[t].concat(o.attrs[t]).map((function(t){return"string"!=typeof t&&t.at?t.at(o.ease(r.pos),r.pos):t})),s.attr.apply(s,n);for(t in o.styles)n=[t].concat(o.styles[t]).map((function(t){return"string"!=typeof t&&t.at?t.at(o.ease(r.pos),r.pos):t})),s.style.apply(s,n);if(o.transforms.length){for(n=o.initialTransformation,t=0,e=o.transforms.length;t<e;t++){var a=o.transforms[t];a instanceof i.Matrix?n=a.relative?n.multiply((new i.Matrix).morph(a).at(o.ease(this.pos))):n.morph(a).at(o.ease(this.pos)):(a.relative||a.undo(n.extract()),n=n.multiply(a.at(o.ease(this.pos))))}s.matrix(n)}return this},once:function(t,e,i){var n=this.last();return i||(t=n.ease(t)),n.once[t]=e,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:i.Element,construct:{animate:function(t,e,n){return(this.fx||(this.fx=new i.FX(this))).animate(t,e,n)},delay:function(t){return(this.fx||(this.fx=new i.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(t){if(this.fx){if(null==t)return this.fx.speed();this.fx.speed(t)}return this}}}),i.MorphObj=i.invent({create:function(t,e){return i.Color.isColor(e)?new i.Color(t).morph(e):i.regex.delimiter.test(t)?i.regex.pathLetters.test(t)?new i.PathArray(t).morph(e):new i.Array(t).morph(e):i.regex.numberAndUnit.test(e)?new i.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),i.extend(i.FX,{attr:function(t,e,i){if("object"==typeof t)for(var n in t)this.attr(n,t[n]);else this.add(t,e,"attrs");return this},style:function(t,e){if("object"==typeof t)for(var i in t)this.style(i,t[i]);else this.add(t,e,"styles");return this},x:function(t,e){if(this.target()instanceof i.G)return this.transform({x:t},e),this;var n=new i.Number(t);return n.relative=e,this.add("x",n)},y:function(t,e){if(this.target()instanceof i.G)return this.transform({y:t},e),this;var n=new i.Number(t);return n.relative=e,this.add("y",n)},cx:function(t){return this.add("cx",new i.Number(t))},cy:function(t){return this.add("cy",new i.Number(t))},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){var n;this.target()instanceof i.Text?this.attr("font-size",t):(t&&e||(n=this.target().bbox()),t||(t=n.width/n.height*e),e||(e=n.height/n.width*t),this.add("width",new i.Number(t)).add("height",new i.Number(e)));return this},width:function(t){return this.add("width",new i.Number(t))},height:function(t){return this.add("height",new i.Number(t))},plot:function(t,e,i,n){return 4==arguments.length?this.plot([t,e,i,n]):this.add("plot",new(this.target().morphArray)(t))},leading:function(t){return this.target().leading?this.add("leading",new i.Number(t)):this},viewbox:function(t,e,n,r){return this.target()instanceof i.Container&&this.add("viewbox",new i.ViewBox(t,e,n,r)),this},update:function(t){if(this.target()instanceof i.Stop){if("number"==typeof t||t instanceof i.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset)}return this}}),i.Box=i.invent({create:function(t,e,n,r){if(!("object"!=typeof t||t instanceof i.Element))return i.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);4==arguments.length&&(this.x=t,this.y=e,this.width=n,this.height=r),y(this)},extend:{merge:function(t){var e=new this.constructor;return e.x=Math.min(this.x,t.x),e.y=Math.min(this.y,t.y),e.width=Math.max(this.x+this.width,t.x+t.width)-e.x,e.height=Math.max(this.y+this.height,t.y+t.height)-e.y,y(e)},transform:function(t){var e,n=1/0,r=-1/0,s=1/0,o=-1/0;return[new i.Point(this.x,this.y),new i.Point(this.x2,this.y),new i.Point(this.x,this.y2),new i.Point(this.x2,this.y2)].forEach((function(e){e=e.transform(t),n=Math.min(n,e.x),r=Math.max(r,e.x),s=Math.min(s,e.y),o=Math.max(o,e.y)})),(e=new this.constructor).x=n,e.width=r-n,e.y=s,e.height=o-s,y(e),e}}}),i.BBox=i.invent({create:function(t){if(i.Box.apply(this,[].slice.call(arguments)),t instanceof i.Element){var n;try{if(e.documentElement.contains){if(!e.documentElement.contains(t.node))throw new Exception("Element not in the dom")}else{for(var r=t.node;r.parentNode;)r=r.parentNode;if(r!=e)throw new Exception("Element not in the dom")}n=t.node.getBBox()}catch(e){if(t instanceof i.Shape){var s=t.clone(i.parser.draw.instance).show();n=s.node.getBBox(),s.remove()}else n={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}i.Box.call(this,n)}},inherit:i.Box,parent:i.Element,construct:{bbox:function(){return new i.BBox(this)}}}),i.BBox.prototype.constructor=i.BBox,i.extend(i.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),i.RBox=i.invent({create:function(t){i.Box.apply(this,[].slice.call(arguments)),t instanceof i.Element&&i.Box.call(this,t.node.getBoundingClientRect())},inherit:i.Box,parent:i.Element,extend:{addOffset:function(){return this.x+=t.pageXOffset,this.y+=t.pageYOffset,this}},construct:{rbox:function(t){return t?new i.RBox(this).transform(t.screenCTM().inverse()):new i.RBox(this).addOffset()}}}),i.RBox.prototype.constructor=i.RBox,i.Matrix=i.invent({create:function(t){var e,n=f([1,0,0,1,0,0]);for(t=t instanceof i.Element?t.matrixify():"string"==typeof t?f(t.split(i.regex.delimiter).map(parseFloat)):6==arguments.length?f([].slice.call(arguments)):Array.isArray(t)?f(t):"object"==typeof t?t:n,e=b.length-1;e>=0;--e)this[b[e]]=null!=t[b[e]]?t[b[e]]:n[b[e]]},extend:{extract:function(){var t=m(this,0,1),e=m(this,1,0),n=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(n*Math.PI/180)+this.f*Math.sin(n*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(n*Math.PI/180)+this.e*Math.sin(-n*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-n,skewY:180/Math.PI*Math.atan2(e.y,e.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:n,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new i.Matrix(this)}},clone:function(){return new i.Matrix(this)},morph:function(t){return this.destination=new i.Matrix(t),this},at:function(t){return this.destination?new i.Matrix({a:this.a+(this.destination.a-this.a)*t,b:this.b+(this.destination.b-this.b)*t,c:this.c+(this.destination.c-this.c)*t,d:this.d+(this.destination.d-this.d)*t,e:this.e+(this.destination.e-this.e)*t,f:this.f+(this.destination.f-this.f)*t}):this},multiply:function(t){return new i.Matrix(this.native().multiply(function(t){t instanceof i.Matrix||(t=new i.Matrix(t));return t}(t).native()))},inverse:function(){return new i.Matrix(this.native().inverse())},translate:function(t,e){return new i.Matrix(this.native().translate(t||0,e||0))},scale:function(t,e,n,r){return 1==arguments.length?e=t:3==arguments.length&&(r=n,n=e,e=t),this.around(n,r,new i.Matrix(t,0,0,e,0,0))},rotate:function(t,e,n){return t=i.utils.radians(t),this.around(e,n,new i.Matrix(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0))},flip:function(t,e){return"x"==t?this.scale(-1,1,e,0):"y"==t?this.scale(1,-1,0,e):this.scale(-1,-1,t,null!=e?e:t)},skew:function(t,e,n,r){return 1==arguments.length?e=t:3==arguments.length&&(r=n,n=e,e=t),t=i.utils.radians(t),e=i.utils.radians(e),this.around(n,r,new i.Matrix(1,Math.tan(e),Math.tan(t),1,0,0))},skewX:function(t,e,i){return this.skew(t,0,e,i)},skewY:function(t,e,i){return this.skew(0,t,e,i)},around:function(t,e,n){return this.multiply(new i.Matrix(1,0,0,1,t||0,e||0)).multiply(n).multiply(new i.Matrix(1,0,0,1,-t||0,-e||0))},native:function(){for(var t=i.parser.native.createSVGMatrix(),e=b.length-1;e>=0;e--)t[b[e]]=this[b[e]];return t},toString:function(){return"matrix("+x(this.a)+","+x(this.b)+","+x(this.c)+","+x(this.d)+","+x(this.e)+","+x(this.f)+")"}},parent:i.Element,construct:{ctm:function(){return new i.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof i.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new i.Matrix(e)}return new i.Matrix(this.node.getScreenCTM())}}}),i.Point=i.invent({create:function(t,e){var i;i=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:{x:0,y:0},this.x=i.x,this.y=i.y},extend:{clone:function(){return new i.Point(this)},morph:function(t,e){return this.destination=new i.Point(t,e),this},at:function(t){return this.destination?new i.Point({x:this.x+(this.destination.x-this.x)*t,y:this.y+(this.destination.y-this.y)*t}):this},native:function(){var t=i.parser.native.createSVGPoint();return t.x=this.x,t.y=this.y,t},transform:function(t){return new i.Point(this.native().matrixTransform(t.native()))}}}),i.extend(i.Element,{point:function(t,e){return new i.Point(t,e).transform(this.screenCTM().inverse())}}),i.extend(i.Element,{attr:function(t,e,n){if(null==t){for(t={},n=(e=this.node.attributes).length-1;n>=0;n--)t[e[n].nodeName]=i.regex.isNumber.test(e[n].nodeValue)?parseFloat(e[n].nodeValue):e[n].nodeValue;return t}if("object"==typeof t)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?i.defaults.attrs[t]:i.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(i.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof i.Image&&(e=this.doc().defs().pattern(0,0,(function(){this.add(e)})))),"number"==typeof e?e=new i.Number(e):i.Color.isColor(e)?e=new i.Color(e):Array.isArray(e)&&(e=new i.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"==typeof n?this.node.setAttributeNS(n,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),i.extend(i.Element,{transform:function(t,e){var n,r,s=this;if("object"!=typeof t)return n=new i.Matrix(s).extract(),"string"==typeof t?n[t]:n;if(n=new i.Matrix(s),e=!!e||!!t.relative,null!=t.a)n=e?n.multiply(new i.Matrix(t)):new i.Matrix(t);else if(null!=t.rotation)g(t,s),n=e?n.rotate(t.rotation,t.cx,t.cy):n.rotate(t.rotation-n.extract().rotation,t.cx,t.cy);else if(null!=t.scale||null!=t.scaleX||null!=t.scaleY){if(g(t,s),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,!e){var o=n.extract();t.scaleX=1*t.scaleX/o.scaleX,t.scaleY=1*t.scaleY/o.scaleY}n=n.scale(t.scaleX,t.scaleY,t.cx,t.cy)}else if(null!=t.skew||null!=t.skewX||null!=t.skewY){if(g(t,s),t.skewX=null!=t.skew?t.skew:null!=t.skewX?t.skewX:0,t.skewY=null!=t.skew?t.skew:null!=t.skewY?t.skewY:0,!e){o=n.extract();n=n.multiply((new i.Matrix).skew(o.skewX,o.skewY,t.cx,t.cy).inverse())}n=n.skew(t.skewX,t.skewY,t.cx,t.cy)}else t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?s.bbox()["c"+t.flip]:t.offset:null==t.offset?(r=s.bbox(),t.flip=r.cx,t.offset=r.cy):t.flip=t.offset,n=(new i.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(e?n=n.translate(t.x,t.y):(null!=t.x&&(n.e=t.x),null!=t.y&&(n.f=t.y)));return this.attr("transform",n)}}),i.extend(i.FX,{transform:function(t,e){var n,r,s=this.target();return"object"!=typeof t?(n=new i.Matrix(s).extract(),"string"==typeof t?n[t]:n):(e=!!e||!!t.relative,null!=t.a?n=new i.Matrix(t):null!=t.rotation?(g(t,s),n=new i.Rotate(t.rotation,t.cx,t.cy)):null!=t.scale||null!=t.scaleX||null!=t.scaleY?(g(t,s),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,n=new i.Scale(t.scaleX,t.scaleY,t.cx,t.cy)):null!=t.skewX||null!=t.skewY?(g(t,s),t.skewX=null!=t.skewX?t.skewX:0,t.skewY=null!=t.skewY?t.skewY:0,n=new i.Skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?s.bbox()["c"+t.flip]:t.offset:null==t.offset?(r=s.bbox(),t.flip=r.cx,t.offset=r.cy):t.flip=t.offset,n=(new i.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(n=new i.Translate(t.x,t.y)),n?(n.relative=e,this.last().transforms.push(n),this._callStart()):this)}}),i.extend(i.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(i.regex.transforms).slice(0,-1).map((function(t){var e=t.trim().split("(");return[e[0],e[1].split(i.regex.delimiter).map((function(t){return parseFloat(t)}))]})).reduce((function(t,e){return"matrix"==e[0]?t.multiply(f(e[1])):t[e[0]].apply(t,e[1])}),new i.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),i=t.screenCTM().inverse();return this.addTo(t).untransform().transform(i.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),i.Transformation=i.invent({create:function(t,e){if(arguments.length>1&&"boolean"!=typeof e)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var i=0,n=this.arguments.length;i<n;++i)this[this.arguments[i]]=t[i];else if("object"==typeof t)for(i=0,n=this.arguments.length;i<n;++i)this[this.arguments[i]]=t[this.arguments[i]];this.inversed=!1,!0===e&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(t){for(var e=[],n=0,r=this.arguments.length;n<r;++n)e.push(this[this.arguments[n]]);var s=this._undo||new i.Matrix;return s=(new i.Matrix).morph(i.Matrix.prototype[this.method].apply(s,e)).at(t),this.inversed?s.inverse():s},undo:function(t){for(var e=0,n=this.arguments.length;e<n;++e)t[this.arguments[e]]=void 0===this[this.arguments[e]]?0:t[this.arguments[e]];return t.cx=this.cx,t.cy=this.cy,this._undo=new(i[c(this.method)])(t,!0).at(1),this}}}),i.Translate=i.invent({parent:i.Matrix,inherit:i.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),i.Rotate=i.invent({parent:i.Matrix,inherit:i.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(t){var e=(new i.Matrix).rotate((new i.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(t),this.cx,this.cy);return this.inversed?e.inverse():e},undo:function(t){return this._undo=t,this}}}),i.Scale=i.invent({parent:i.Matrix,inherit:i.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),i.Skew=i.invent({parent:i.Matrix,inherit:i.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),i.extend(i.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof t)for(e in t)this.style(e,t[e]);else{if(!i.regex.isCss.test(t))return this.node.style[d(t)];for(t=t.split(/\s*;\s*/).filter((function(t){return!!t})).map((function(t){return t.split(/\s*:\s*/)}));e=t.pop();)this.style(e[0],e[1])}else this.node.style[d(t)]=null===e||i.regex.isBlank.test(e)?"":e;return this}}),i.Parent=i.invent({create:function(t){this.constructor.call(this,t)},inherit:i.Element,extend:{children:function(){return i.utils.map(i.utils.filterSVGElements(this.node.childNodes),(function(t){return i.adopt(t)}))},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return i.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){var n,r,s=this.children();for(n=0,r=s.length;n<r;n++)s[n]instanceof i.Element&&t.apply(s[n],[n,s]),e&&s[n]instanceof i.Container&&s[n].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),i.extend(i.Parent,{ungroup:function(t,e){return 0===e||this instanceof i.Defs||this.node==i.parser.draw||(t=t||(this instanceof i.Doc?this:this.parent(i.Parent)),e=e||1/0,this.each((function(){return this instanceof i.Defs?this:this instanceof i.Parent?this.ungroup(t,e-1):this.toParent(t)})),this.node.firstChild||this.remove()),this},flatten:function(t,e){return this.ungroup(t,e)}}),i.Container=i.invent({create:function(t){this.constructor.call(this,t)},inherit:i.Parent}),i.ViewBox=i.invent({create:function(t){var e,n,r,s,o,a,h,l=[0,0,0,0],d=1,c=1,u=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(t instanceof i.Element){for(a=t,h=t,o=(t.attr("viewBox")||"").match(u),r=new i.Number(t.width()),s=new i.Number(t.height());"%"==r.unit;)d*=r.value,r=new i.Number(a instanceof i.Doc?a.parent().offsetWidth:a.parent().width()),a=a.parent();for(;"%"==s.unit;)c*=s.value,s=new i.Number(h instanceof i.Doc?h.parent().offsetHeight:h.parent().height()),h=h.parent();this.x=0,this.y=0,this.width=r*d,this.height=s*c,this.zoom=1,o&&(e=parseFloat(o[0]),n=parseFloat(o[1]),r=parseFloat(o[2]),s=parseFloat(o[3]),this.zoom=this.width/this.height>r/s?this.height/s:this.width/r,this.x=e,this.y=n,this.width=r,this.height=s)}else t="string"==typeof t?t.match(u).map((function(t){return parseFloat(t)})):Array.isArray(t)?t:"object"==typeof t?[t.x,t.y,t.width,t.height]:4==arguments.length?[].slice.call(arguments):l,this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(t,e,n,r){return this.destination=new i.ViewBox(t,e,n,r),this},at:function(t){return this.destination?new i.ViewBox([this.x+(this.destination.x-this.x)*t,this.y+(this.destination.y-this.y)*t,this.width+(this.destination.width-this.width)*t,this.height+(this.destination.height-this.height)*t]):this}},parent:i.Container,construct:{viewbox:function(t,e,n,r){return 0==arguments.length?new i.ViewBox(this):this.attr("viewBox",new i.ViewBox(t,e,n,r))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach((function(t){i.Element.prototype[t]=function(e){return null==e?i.off(this,t):i.on(this,t,e),this}})),i.listenerId=0,i.on=function(t,e,n,r,s){var o=n.bind(r||t),a=t instanceof i.Element?t.node:t;a.instance=a.instance||{_events:{}};var h=a.instance._events;n._svgjsListenerId||(n._svgjsListenerId=++i.listenerId),e.split(i.regex.delimiter).forEach((function(t){var e=t.split(".")[0],i=t.split(".")[1]||"*";h[e]=h[e]||{},h[e][i]=h[e][i]||{},h[e][i][n._svgjsListenerId]=o,a.addEventListener(e,o,s||!1)}))},i.off=function(t,e,n,r){var s=t instanceof i.Element?t.node:t;if(s.instance&&("function"!=typeof n||(n=n._svgjsListenerId))){var o=s.instance._events;(e||"").split(i.regex.delimiter).forEach((function(t){var e,a,h=t&&t.split(".")[0],l=t&&t.split(".")[1];if(n)o[h]&&o[h][l||"*"]&&(s.removeEventListener(h,o[h][l||"*"][n],r||!1),delete o[h][l||"*"][n]);else if(h&&l){if(o[h]&&o[h][l]){for(a in o[h][l])i.off(s,[h,l].join("."),a);delete o[h][l]}}else if(l)for(t in o)for(e in o[t])l===e&&i.off(s,[t,l].join("."));else if(h){if(o[h]){for(e in o[h])i.off(s,[h,e].join("."));delete o[h]}}else{for(t in o)i.off(s,t);s.instance._events={}}}))}},i.extend(i.Element,{on:function(t,e,n,r){return i.on(this,t,e,n,r),this},off:function(t,e){return i.off(this.node,t,e),this},fire:function(e,n){return e instanceof t.Event?this.node.dispatchEvent(e):this.node.dispatchEvent(e=new i.CustomEvent(e,{detail:n,cancelable:!0})),this._event=e,this},event:function(){return this._event}}),i.Defs=i.invent({create:"defs",inherit:i.Container}),i.G=i.invent({create:"g",inherit:i.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)},y:function(t){return null==t?this.transform("y"):this.transform({y:t-this.y()},!0)},cx:function(t){return null==t?this.gbox().cx:this.x(t-this.gbox().width/2)},cy:function(t){return null==t?this.gbox().cy:this.y(t-this.gbox().height/2)},gbox:function(){var t=this.bbox(),e=this.transform();return t.x+=e.x,t.x2+=e.x,t.cx+=e.x,t.y+=e.y,t.y2+=e.y,t.cy+=e.y,t}},construct:{group:function(){return this.put(new i.G)}}}),i.Doc=i.invent({create:function(t){t&&("svg"==(t="string"==typeof t?e.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,i.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:i.Container,extend:{namespace:function(){return this.attr({xmlns:i.ns,version:"1.1"}).attr("xmlns:xlink",i.xlink,i.xmlns).attr("xmlns:svgjs",i.svgjs,i.xmlns)},defs:function(){var t;this._defs||((t=this.node.getElementsByTagName("defs")[0])?this._defs=i.adopt(t):this._defs=new i.Defs,this.node.appendChild(this._defs.node));return this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName&&"#document-fragment"!=this.node.parentNode.nodeName?this.node.parentNode:null},spof:function(){var t=this.node.getScreenCTM();return t&&this.style("left",-t.e%1+"px").style("top",-t.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,i.parser.draw.parentNode||this.node.appendChild(i.parser.draw),this},clone:function(t){this.writeDataToDom();var e=this.node,i=v(e.cloneNode(!0));return t?(t.node||t).appendChild(i.node):e.parentNode.insertBefore(i.node,e.nextSibling),i}}}),i.extend(i.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),e instanceof i.Doc&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),t instanceof i.Doc&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){t.remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){t.remove();var e=this.position();return this.parent().add(t,e+1),this}}),i.Mask=i.invent({create:function(){this.constructor.call(this,i.create("mask")),this.targets=[]},inherit:i.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unmask();return this.targets=[],i.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new i.Mask)}}}),i.extend(i.Element,{maskWith:function(t){return this.masker=t instanceof i.Mask?t:this.parent().mask().add(t),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),i.ClipPath=i.invent({create:function(){this.constructor.call(this,i.create("clipPath")),this.targets=[]},inherit:i.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new i.ClipPath)}}}),i.extend(i.Element,{clipWith:function(t){return this.clipper=t instanceof i.ClipPath?t:this.parent().clip().add(t),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),i.Gradient=i.invent({create:function(t){this.constructor.call(this,i.create(t+"Gradient")),this.type=t},inherit:i.Container,extend:{at:function(t,e,n){return this.put(new i.Stop).update(t,e,n)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,n){return"transform"==t&&(t="gradientTransform"),i.Container.prototype.attr.call(this,t,e,n)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),i.extend(i.Gradient,i.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new i.Number(t),fy:new i.Number(e)}):this.attr({x1:new i.Number(t),y1:new i.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new i.Number(t),cy:new i.Number(e)}):this.attr({x2:new i.Number(t),y2:new i.Number(e)})}}),i.extend(i.Defs,{gradient:function(t,e){return this.put(new i.Gradient(t)).update(e)}}),i.Stop=i.invent({create:"stop",inherit:i.Element,extend:{update:function(t){return("number"==typeof t||t instanceof i.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new i.Number(t.offset)),this}}}),i.Pattern=i.invent({create:"pattern",inherit:i.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,n){return"transform"==t&&(t="patternTransform"),i.Container.prototype.attr.call(this,t,e,n)}},construct:{pattern:function(t,e,i){return this.defs().pattern(t,e,i)}}}),i.extend(i.Defs,{pattern:function(t,e,n){return this.put(new i.Pattern).update(n).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),i.Shape=i.invent({create:function(t){this.constructor.call(this,t)},inherit:i.Element}),i.Bare=i.invent({create:function(t,e){if(this.constructor.call(this,i.create(t)),e)for(var n in e.prototype)"function"==typeof e.prototype[n]&&(this[n]=e.prototype[n])},inherit:i.Element,extend:{words:function(t){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(e.createTextNode(t)),this}}}),i.extend(i.Parent,{element:function(t,e){return this.put(new i.Bare(t,e))}}),i.Symbol=i.invent({create:"symbol",inherit:i.Container,construct:{symbol:function(){return this.put(new i.Symbol)}}}),i.Use=i.invent({create:"use",inherit:i.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,i.xlink)}},construct:{use:function(t,e){return this.put(new i.Use).element(t,e)}}}),i.Rect=i.invent({create:"rect",inherit:i.Shape,construct:{rect:function(t,e){return this.put(new i.Rect).size(t,e)}}}),i.Circle=i.invent({create:"circle",inherit:i.Shape,construct:{circle:function(t){return this.put(new i.Circle).rx(new i.Number(t).divide(2)).move(0,0)}}}),i.extend(i.Circle,i.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),i.Ellipse=i.invent({create:"ellipse",inherit:i.Shape,construct:{ellipse:function(t,e){return this.put(new i.Ellipse).size(t,e).move(0,0)}}}),i.extend(i.Ellipse,i.Rect,i.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),i.extend(i.Circle,i.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new i.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new i.Number(t).divide(2))},size:function(t,e){var n=p(this,t,e);return this.rx(new i.Number(n.width).divide(2)).ry(new i.Number(n.height).divide(2))}}),i.Line=i.invent({create:"line",inherit:i.Shape,extend:{array:function(){return new i.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,n,r){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:n,y2:r}:new i.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var i=p(this,t,e);return this.attr(this.array().size(i.width,i.height).toLine())}},construct:{line:function(t,e,n,r){return i.Line.prototype.plot.apply(this.put(new i.Line),null!=t?[t,e,n,r]:[0,0,0,0])}}}),i.Polyline=i.invent({create:"polyline",inherit:i.Shape,construct:{polyline:function(t){return this.put(new i.Polyline).plot(t||new i.PointArray)}}}),i.Polygon=i.invent({create:"polygon",inherit:i.Shape,construct:{polygon:function(t){return this.put(new i.Polygon).plot(t||new i.PointArray)}}}),i.extend(i.Polyline,i.Polygon,{array:function(){return this._array||(this._array=new i.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new i.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var i=p(this,t,e);return this.attr("points",this.array().size(i.width,i.height))}}),i.extend(i.Line,i.Polyline,i.Polygon,{morphArray:i.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),i.Path=i.invent({create:"path",inherit:i.Shape,extend:{morphArray:i.PathArray,array:function(){return this._array||(this._array=new i.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new i.PathArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("d",this.array().move(t,e))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},size:function(t,e){var i=p(this,t,e);return this.attr("d",this.array().size(i.width,i.height))},width:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)},height:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},construct:{path:function(t){return this.put(new i.Path).plot(t||new i.PathArray)}}}),i.Image=i.invent({create:"image",inherit:i.Shape,extend:{load:function(e){if(!e)return this;var n=this,r=new t.Image;return i.on(r,"load",(function(){i.off(r);var t=n.parent(i.Pattern);null!==t&&(0==n.width()&&0==n.height()&&n.size(r.width,r.height),t&&0==t.width()&&0==t.height()&&t.size(n.width(),n.height()),"function"==typeof n._loaded&&n._loaded.call(n,{width:r.width,height:r.height,ratio:r.width/r.height,url:e}))})),i.on(r,"error",(function(t){i.off(r),"function"==typeof n._error&&n._error.call(n,t)})),this.attr("href",r.src=this.src=e,i.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,n){return this.put(new i.Image).load(t).size(e||0,n||e||0)}}}),i.Text=i.invent({create:function(){this.constructor.call(this,i.create("text")),this.dom.leading=new i.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",i.defaults.attrs["font-family"])},inherit:i.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},y:function(t){var e=this.attr("y"),i="number"==typeof e?e-this.bbox().y:0;return null==t?"number"==typeof e?e-i:e:this.attr("y","number"==typeof t.valueOf()?t+i:t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},text:function(t){if(void 0===t){t="";for(var e=this.node.childNodes,n=0,r=e.length;n<r;++n)0!=n&&3!=e[n].nodeType&&1==i.adopt(e[n]).dom.newLined&&(t+="\n"),t+=e[n].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{n=0;for(var s=(t=t.split("\n")).length;n<s;n++)this.tspan(t[n]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new i.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=i.utils.map(i.utils.filterSVGElements(t.childNodes),(function(t){return i.adopt(t)}));return new i.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,n=0,r=this.dom.leading*new i.Number(this.attr("font-size"));this.lines().each((function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?n+=r:(this.attr("dy",r+n),n=0))})),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new i.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new i.Text).text(t)},plain:function(t){return this.put(new i.Text).plain(t)}}}),i.Tspan=i.invent({create:"tspan",inherit:i.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(i.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),i.extend(i.Text,i.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(e.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,n=new i.Tspan;return!1===this._build&&this.clear(),e.appendChild(n.node),n.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),i.TextPath=i.invent({create:"textPath",inherit:i.Parent,parent:i.Text,construct:{morphArray:i.PathArray,path:function(t){for(var e=new i.TextPath,n=this.doc().defs().path(t);this.node.hasChildNodes();)e.node.appendChild(this.node.firstChild);return this.node.appendChild(e.node),e.attr("href","#"+n,i.xlink),this},array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),i=null;return e&&(i=e.plot(t)),null==t?i:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return i.adopt(this.node.firstChild)}}}),i.Nested=i.invent({create:function(){this.constructor.call(this,i.create("svg")),this.style("overflow","visible")},inherit:i.Container,construct:{nested:function(){return this.put(new i.Nested)}}}),i.A=i.invent({create:"a",inherit:i.Container,extend:{to:function(t){return this.attr("href",t,i.xlink)},show:function(t){return this.attr("show",t,i.xlink)},target:function(t){return this.attr("target",t)}},construct:{link:function(t){return this.put(new i.A).to(t)}}}),i.extend(i.Element,{linkTo:function(t){var e=new i.A;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}),i.Marker=i.invent({create:"marker",inherit:i.Container,extend:{width:function(t){return this.attr("markerWidth",t)},height:function(t){return this.attr("markerHeight",t)},ref:function(t,e){return this.attr("refX",t).attr("refY",e)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(t,e,i){return this.defs().marker(t,e,i)}}}),i.extend(i.Defs,{marker:function(t,e,n){return this.put(new i.Marker).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(n)}}),i.extend(i.Line,i.Polyline,i.Polygon,i.Path,{marker:function(t,e,n,r){var s=["marker"];return"all"!=t&&s.push(t),s=s.join("-"),t=arguments[1]instanceof i.Marker?arguments[1]:this.doc().marker(e,n,r),this.attr(s,t)}});var a={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};function h(t,e,n,r){return n+r.replace(i.regex.dots," .")}function l(t){for(var e=t.slice(0),i=e.length;i--;)Array.isArray(e[i])&&(e[i]=l(e[i]));return e}function d(t){return t.toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}function c(t){return t.charAt(0).toUpperCase()+t.slice(1)}function u(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function p(t,e,i){if(null==e||null==i){var n=t.bbox();null==e?e=n.width/n.height*i:null==i&&(i=n.height/n.width*e)}return{width:e,height:i}}function m(t,e,i){return{x:e*t.a+i*t.c+0,y:e*t.b+i*t.d+0}}function f(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function g(t,e){t.cx=null==t.cx?e.bbox().cx:t.cx,t.cy=null==t.cy?e.bbox().cy:t.cy}function v(e){for(var n=e.childNodes.length-1;n>=0;n--)e.childNodes[n]instanceof t.SVGElement&&v(e.childNodes[n]);return i.adopt(e).id(i.eid(e.nodeName))}function y(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function x(t){return Math.abs(t)>1e-37?t:0}["fill","stroke"].forEach((function(t){var e,n={};n[t]=function(n){if(void 0===n)return this;if("string"==typeof n||i.Color.isRgb(n)||n&&"function"==typeof n.fill)this.attr(t,n);else for(e=a[t].length-1;e>=0;e--)null!=n[a[t][e]]&&this.attr(a.prefix(t,a[t][e]),n[a[t][e]]);return this},i.extend(i.Element,i.FX,n)})),i.extend(i.Element,i.FX,{rotate:function(t,e,i){return this.transform({rotation:t,cx:e,cy:i})},skew:function(t,e,i,n){return 1==arguments.length||3==arguments.length?this.transform({skew:t,cx:e,cy:i}):this.transform({skewX:t,skewY:e,cx:i,cy:n})},scale:function(t,e,i,n){return 1==arguments.length||3==arguments.length?this.transform({scale:t,cx:e,cy:i}):this.transform({scaleX:t,scaleY:e,cx:i,cy:n})},translate:function(t,e){return this.transform({x:t,y:e})},flip:function(t,e){return e="number"==typeof t?t:e,this.transform({flip:t||"both",offset:e})},matrix:function(t){return this.attr("transform",new i.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new i.Number(t).plus(this instanceof i.FX?0:this.x()),!0)},dy:function(t){return this.y(new i.Number(t).plus(this instanceof i.FX?0:this.y()),!0)},dmove:function(t,e){return this.dx(t).dy(e)}}),i.extend(i.Rect,i.Ellipse,i.Circle,i.Gradient,i.FX,{radius:function(t,e){var n=(this._target||this).type;return"radial"==n||"circle"==n?this.attr("r",new i.Number(t)):this.rx(t).ry(null==e?t:e)}}),i.extend(i.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),i.extend(i.Parent,i.Text,i.Tspan,i.FX,{font:function(t,e){if("object"==typeof t)for(e in t)this.font(e,t[e]);return"leading"==t?this.leading(e):"anchor"==t?this.attr("text-anchor",e):"size"==t||"family"==t||"weight"==t||"stretch"==t||"variant"==t||"style"==t?this.attr("font-"+t,e):this.attr(t,e)}}),i.Set=i.invent({create:function(t){t instanceof i.Set?this.members=t.members.slice():Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){var t,e,i=[].slice.call(arguments);for(t=0,e=i.length;t<e;t++)this.members.push(i[t]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,i=this.members.length;e<i;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new i.RBox;var t=this.members[0].rbox(this.members[0].doc());return this.each((function(){t=t.merge(this.rbox(this.doc()))})),t}},construct:{set:function(t){return new i.Set(t)}}}),i.FX.Set=i.invent({create:function(t){this.set=t}}),i.Set.inherit=function(){var t=[];for(var e in i.Shape.prototype)"function"==typeof i.Shape.prototype[e]&&"function"!=typeof i.Set.prototype[e]&&t.push(e);for(var e in t.forEach((function(t){i.Set.prototype[t]=function(){for(var e=0,n=this.members.length;e<n;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new i.FX.Set(this)):this}})),t=[],i.FX.prototype)"function"==typeof i.FX.prototype[e]&&"function"!=typeof i.FX.Set.prototype[e]&&t.push(e);t.forEach((function(t){i.FX.Set.prototype[t]=function(){for(var e=0,i=this.set.members.length;e<i;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}}))},i.extend(i.Element,{data:function(t,e,i){if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===i||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),i.extend(i.Element,{remember:function(t,e){if("object"==typeof arguments[0])for(var e in t)this.remember(e,t[e]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),i.get=function(t){var n=e.getElementById(function(t){var e=(t||"").toString().match(i.regex.reference);if(e)return e[1]}(t)||t);return i.adopt(n)},i.select=function(t,n){return new i.Set(i.utils.map((n||e).querySelectorAll(t),(function(t){return i.adopt(t)})))},i.extend(i.Parent,{select:function(t){return i.select(t,this.node)}});var b="abcdef".split("");if("function"!=typeof t.CustomEvent){var w=function(t,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var n=e.createEvent("CustomEvent");return n.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),n};w.prototype=t.Event.prototype,i.CustomEvent=w}else i.CustomEvent=t.CustomEvent;return function(e){for(var i=0,n=["moz","webkit"],r=0;r<n.length&&!t.requestAnimationFrame;++r)e.requestAnimationFrame=e[n[r]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[n[r]+"CancelAnimationFrame"]||e[n[r]+"CancelRequestAnimationFrame"];e.requestAnimationFrame=e.requestAnimationFrame||function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-i)),s=e.setTimeout((function(){t(n+r)}),r);return i=n+r,s},e.cancelAnimationFrame=e.cancelAnimationFrame||e.clearTimeout}(t),i}))}));
/*!
* svg.js - A lightweight library for manipulating and animating SVG.
* @version 2.7.1
* https://svgdotjs.github.io/
*
* @copyright Wout Fierens <wout@mick-wout.com>
* @license MIT
*
* BUILT: Fri Nov 30 2018 10:01:55 GMT+0100 (GMT+01:00)
*/class kt{constructor(t){this.limit=50,this.undos=[],this.redos=[],this.saveCommand=null,this.limit=t||50}execute(t){this.clearRedo(),t.execute(),this.undos.length>=this.limit&&this.undos.shift(),this.undos.push(t),this.change(t)}undo(){if(this.canUndo()){var t=this.undos.pop();this.redos.push(t),t.undo(),this.change(t)}}canUndo(){return!!this.undos.length}redo(){if(this.canRedo()){var t=this.redos.pop();this.undos.push(t),t.redo(),this.change(t)}}canRedo(){return!!this.redos.length}save(){this.saveCommand=this.undos[this.undos.length-1]}dirty(){return this.saveCommand!=this.undos[this.undos.length-1]}clearRedo(){this.redos=[]}clear(){this.undos=[],this.redos=[],this.saveCommand=null,this.change()}change(t){}}class _t{constructor(t){this.name=t}execute(){}undo(){}redo(){this.execute()}refresh(t,e){var i=t||this.mind;i&&(i.emit("renderEditNode",{node:e}),i.emit("mindMapChange",{node:e}))}updateItems(t){for(var e=t;e;)e.wireFrames.length&&e.wireFrames.forEach((t=>{t.refreshItems()})),e.summaries.length&&e.summaries.forEach((t=>{t.refreshItems()})),e=e.belongInduce?e.belongInduce.node:e.parent}initTable(t){t&&(t.initTable(),setTimeout((()=>{t.mindMapChange()}),0))}}class Ct extends _t{constructor(t,e,i){super("addNode"),this.parent=null,this.mind=null,this.index=-1,this.node=t,this.parent=e,this.mind=i||this.node.mindmap}execute(){this.index>-1?this.mind.addNode(this.node,this.parent,this.index):this.mind.addNode(this.node,this.parent),"table"!=this.mind._mode?(this.node.refreshBox(),this.updateItems(this.node),this.refresh(this.node.mindmap,this.node),this.mind.clearSelectNode(),setTimeout((()=>{this.node.select(),this.node.edit()}),0)):this.initTable(this.mind)}undo(){var t=this.node.parent;this.index=this.mind.removeNode(this.node),"table"!=this.mind._mode?(this.mind.clearSelectNode(),this.updateItems(t),setTimeout((()=>{this.refresh(this.node.mindmap,this.node),t&&t.select()}),0)):this.initTable(this.mind)}}class Dt extends _t{constructor(t,e){super("removeNode"),this.parent=null,this.mind=null,this.index=-1,this.node=t,this.parent=this.node.parent||null,this.mind=e||this.node.mindmap,this.isFreeRoot="freeNode"==this.node.nodeType,this.isInduce="induce"==this.node.nodeType,this.isRelateLink="relateLink"==this.node.nodeType}execute(){var t=this;if(this.isFreeRoot)this.mind.removeFreeNode(this.node),this.mind.removeNode(this.node),this.refresh(this.mind);else if(this.isInduce)this.relateNode=this.node.belongInduce.node,this.induce=this.node.belongInduce,this.mind.removeInduce(this.induce),this.relateNode.induce=null,this.mind.removeNode(this.node),this.relateNode.clearCacheData(),this.updateItems(this.relateNode),this.refresh(this.relateNode.mindmap),this.relateNode.mindmap.updateAssist();else if(this.isRelateLink)this.mind.removeRelateLink(this.node.relateLink),this.mind.removeNode(this.node);else{this.node.clearCacheData(),this.node.refreshBox();var e=this.parent.wireFrames||[],i=this.parent.summaries||[];if(this.cacheInfo={wfs:[],induces:[]},e.forEach((e=>{if(e.node==e.endNode)e.node==t.node&&(t.mind.removeWireFrame(e),t.cacheInfo.wfs.push({item:e,type:"remove"}));else if(e.rangeNode.indexOf(t.node)>-1)if(e.rangeNode[0]==t.node){t.node.wfs.splice(t.node.wfs.indexOf(e),1);var i=e.rangeNode.slice();e.rangeNode.shift(),e.rangeNode[0].wfs.push(e),t.cacheInfo.wfs.push({item:e,type:"changeRangeNode-start",oldRange:i,newRange:e.rangeNode.slice()})}else if(e.rangeNode[e.rangeNode.length-1]==t.node){i=e.rangeNode.slice();e.rangeNode.pop(),t.cacheInfo.wfs.push({item:e,type:"changeRangeNode-end",oldRange:i,newRange:e.rangeNode.slice()})}else{i=e.rangeNode.slice();var n=e.rangeNode.indexOf(t.node);e.rangeNode.splice(n,1),t.cacheInfo.wfs.push({item:e,type:"changeRangeNode",oldRange:i,newRange:e.rangeNode.slice(),num:n})}})),i.forEach((e=>{if(e.node==e.endNode)e.node==t.node&&(t.mind.removeInduce(e),t.cacheInfo.induces.push({item:e,type:"remove"}),t.mind.removeNode(e.root));else if(e.rangeNode.indexOf(t.node)>-1)if(e.rangeNode[0]==t.node){t.node.induces.splice(t.node.induces.indexOf(e),1);var i=e.rangeNode.slice();e.rangeNode.shift(),e.rangeNode[0].induces.push(e),t.cacheInfo.induces.push({item:e,type:"changeRangeNode-start",oldRange:i,newRange:e.rangeNode.slice()})}else if(e.rangeNode[e.rangeNode.length-1]==t.node){i=e.rangeNode.slice();e.rangeNode.pop(),t.cacheInfo.induces.push({item:e,type:"changeRangeNode-end",oldRange:i,newRange:e.rangeNode.slice()})}else{i=e.rangeNode.slice();var n=e.rangeNode.indexOf(t.node);e.rangeNode.splice(n,1),t.cacheInfo.induces.push({item:e,type:"changeRangeNode",oldRange:i,newRange:e.rangeNode.slice(),num:n})}})),this.index=this.mind.removeNode(this.node),"table"==this.node.mindmap._mode)return void this.initTable(this.mind);this.updateItems(this.parent),this.refresh(this.parent.mindmap,this.parent)}setTimeout((()=>{this.parent&&this.parent.select()}),0)}undo(){var t=this;this.isFreeRoot?this.mind.addFreeNode(this.node):this.isInduce?(this.relateNode.clearCacheData(),this.relateNode.induce=this.induce,this.mind.addInduce(this.induce),this.induce.init()):this.isRelateLink?this.mind.addRelateLink(this.node.relateLink):this.mind.addNode(this.node,this.parent,this.index),"table"!=this.mind._mode?(this.mind.traverseDF((t=>{this.mind._addNodeDom(t)}),this.node),this.node._removeLink&&this.node._removeLink.forEach((t=>{this.mind.addRelateLink(t)})),this.node.clearCacheData(),this.node.refreshBox(),this.cacheInfo&&this.cacheInfo.wfs.forEach((e=>{if("remove"==e.type&&(t.mind.addWireFrame(e.item),e.item.init()),"changeRangeNode-start"==e.type){t.node.wfs.push(e.item);var i=e.item.rangeNode[0];i.wfs.splice(i.wfs.indexOf(e.item),1),e.item.rangeNode=e.oldRange}"changeRangeNode-end"!=e.type&&"changeRangeNode"!=e.type||(e.item.rangeNode=e.oldRange)})),this.cacheInfo&&this.cacheInfo.induces.forEach((e=>{if("remove"==e.type&&(t.mind.addInduce(e.item),e.item.init(),this.mind.traverseDF((t=>{this.mind._addNodeDom(t)}),e.item.root)),"changeRangeNode-start"==e.type){t.node.induces.push(e.item);var i=e.item.rangeNode[0];i.induces.splice(i.induces.indexOf(e.item),1),e.item.rangeNode=e.oldRange}"changeRangeNode-end"!=e.type&&"changeRangeNode"!=e.type||(e.item.rangeNode=e.oldRange)})),this.updateItems(this.node),this.mind.clearSelectNode(),this.refresh(this.node.mindmap,this.node),setTimeout((()=>{this.node.select()}),0)):this.initTable(this.mind)}}class Et extends _t{constructor(t,e,i){super("changeNodeText"),this._mode="",this.node=t,this.oldText=e,this.text=i,this.isFirst=!0,this._mode=this.node.mindmap._mode}execute(){this.isFirst||(this.node.setText(this.text),this.node.tNode&&this.node.tNode.setText(this.text)),"table"!=this._mode?(this.node.refreshBox(),this.node.clearCacheData(),this.refresh(this.node.mindmap,this.node)):this.initTable(this.node.mindmap)}undo(){this.isFirst=!1,this.node.setText(this.oldText),this.node.tNode&&this.node.tNode.setText(this.oldText),"table"!=this._mode?(this.node.clearCacheData(),this.node.refreshBox(),this.refresh(this.node.mindmap,this.node)):this.initTable(this.node.mindmap)}}class St extends _t{constructor(t){super("moveNode"),this.data={},this.index=-1,this.data=t,this.data.type.indexOf("child")>-1?(this.node=this.data.node,this.oldParent=this.data.oldParent,this.parent=this.data.parent):(this.node=this.data.node,this.oldParent=this.node.parent,this.dropNode=this.data.dropNode,this.newParent=this.dropNode.parent,this.type=this.data.direct),this._wfs=this.node.wfs,this._summary=this.node.induces}execute(){if(this._wfs&&this._wfs.length){var t=this.parent||this.newParent;this._wfs.forEach((e=>{if(this.oldParent&&this.oldParent.wireFrames){var i=this.oldParent.wireFrames.indexOf(e);i>-1&&(this.oldParent.wireFrames.splice(i,1),-1==t.wireFrames.indexOf(e)&&t.wireFrames.push(e))}}))}if(this._summary&&this._summary.length){t=this.parent||this.newParent;this._summary.forEach((e=>{if(this.oldParent&&this.oldParent.summaries){var i=this.oldParent.summaries.indexOf(e);i>-1&&(this.oldParent.summaries.splice(i,1),-1==t.summaries.indexOf(e)&&t.summaries.push(e))}}))}if(this.node.mindmap.clearSelectNode(),this.data.type.indexOf("child")>-1)this.oldParent&&(this.index=this.oldParent.removeChild(this.node)),this.parent.addChild(this.node),this.node.mindmap.traverseBF((t=>{t.boundingRect=null,t.stroke=""}),this.node),this.updateItems(this.node),this.updateItems(this.oldParent),this.node.clearCacheData(),this.oldParent.clearCacheData(),this.refresh(this.node.mindmap,this.node),this.refresh(this.node.mindmap,this.oldParent),this.node.select();else{this.oldParent&&(this.index=this.oldParent.removeChild(this.node)),this.node.mindmap.traverseBF((t=>{t.boundingRect=null,t.stroke=""}),this.node),this.oldParent.clearCacheData();var e=this.newParent.children.indexOf(this.dropNode);"top"==this.type||"left"==this.type?this.newParent.addChild(this.node,e):this.newParent.addChild(this.node,e+1),this.updateItems(this.node),this.updateItems(this.oldParent),this.node.clearCacheData(),this.refresh(this.node.mindmap,this.node),this.refresh(this.node.mindmap,this.oldParent),this.node.select()}}undo(){if(this._wfs&&this._wfs.length){var t=this.parent||this.newParent;this._wfs.forEach((e=>{if(this.oldParent&&this.oldParent.wireFrames){var i=t.wireFrames.indexOf(e);i>-1&&(t.wireFrames.splice(i,1),-1==this.oldParent.wireFrames.indexOf(e)&&this.oldParent.wireFrames.push(e))}}))}if(this._summary&&this._summary.length){t=this.parent||this.newParent;this._summary.forEach((e=>{if(this.oldParent&&this.oldParent.summaries){var i=t.summaries.indexOf(e);i>-1&&(t.summaries.splice(i,1),-1==this.oldParent.summaries.indexOf(e)&&this.oldParent.summaries.push(e))}}))}this.node.mindmap.clearSelectNode(),this.data.type.indexOf("child")>-1?(this.parent.removeChild(this.node),this.oldParent&&this.oldParent.addChild(this.node,this.index),this.node.mindmap.traverseBF((t=>{t.boundingRect=null,t.stroke=""}),this.node),this.updateItems(this.node),this.updateItems(this.parent),this.node.mindmap.updateAssist(),this.parent.clearCacheData(),this.node.clearCacheData(),this.refresh(this.node.mindmap,this.node),this.refresh(this.node.mindmap,this.parent),this.node.select()):(this.newParent.removeChild(this.node),this.dropNode.clearCacheData(),this.oldParent.addChild(this.node,this.index),this.updateItems(this.node),this.updateItems(this.parent),this.node.mindmap.updateAssist(),this.node.clearCacheData(),this.refresh(this.node.mindmap,this.node),this.refresh(this.node.mindmap,this.parent),this.node.select())}}class Nt extends _t{constructor(t,e,i){super("movePos"),this.node=t,this.oldPos=e,this.newPos=i}execute(){this.node.setPosition(this.newPos.x,this.newPos.y),this.node.callout?this.refresh(this.node.mindmap,this.node.callout.node):this.refresh(this.node.mindmap,this.node),this.node.mindmap.clearSelectNode()}undo(){this.node.setPosition(this.oldPos.x,this.oldPos.y),this.node.callout?this.refresh(this.node.mindmap,this.node.callout.node):this.refresh(this.node.mindmap,this.node),this.node.mindmap.clearSelectNode()}}class Mt extends _t{constructor(t){super("collapseNOde"),this.node=t,this.node.mindmap.clearSelectNode(),this.node.refreshBox()}execute(){this.node.clearCacheData(),this.node.collapse(),this.updateItems(this.node),this.refresh(this.node.mindmap,this.node),this.node.select()}undo(){this.node.clearCacheData(),this.node.expand(),this.updateItems(this.node),this.refresh(this.node.mindmap,this.node),this.node.select()}}class At extends _t{constructor(t){super("collapseNOde"),this.node=t,this.node.mindmap.clearSelectNode(),this.node.refreshBox()}execute(){this.node.clearCacheData(),this.node.expand(),this.updateItems(this.node),this.refresh(this.node.mindmap,this.node),this.node.select()}undo(){this.node.clearCacheData(),this.node.collapse(),this.updateItems(this.node),this.refresh(this.node.mindmap,this.node),this.node.select()}}class Lt extends _t{constructor(t,e){super("addInduce"),this.node=t,this.induce=e,this.mind=this.node.getMind(),this.added=!1}execute(){this.added||(this.mind.addInduce(this.induce),this.added=!0),this.node.clearCacheData(),this.updateItems(this.node),this.refresh(this.node.mindmap,this.node)}undo(){this.added=!1,this.mind.contentEL.removeChild(this.induce.root.containEl),this.mind.removeInduce(this.induce),this.node.clearCacheData(),this.updateItems(this.node),this.refresh(this.node.mindmap,this.node)}}class Tt extends _t{constructor(t,e){super("addWireFrame"),this.num=1,this.wireFrame=t,this.mind=e,this.node=this.wireFrame.node,this.num=1}execute(){this.node.clearCacheData(),this.mind.addWireFrame(this.wireFrame),1!=this.num&&(this.node.wireFrame=this.wireFrame,this.wireFrame.init()),this.num++,this.updateItems(this.node),this.refresh(this.node.mindmap,this.node),this.mind.clearSelectNode()}undo(){this.mind.removeWireFrame(this.wireFrame),this.node.wireFrame=null,this.node.clearCacheData(),this.updateItems(this.node),this.refresh(this.node.mindmap,this.node),this.mind.clearSelectNode()}}class Pt extends _t{constructor(t,e){super("remmoveWireFrame"),this.mind=e,this.node=t.node,this.wireFrame=t}execute(){this.mind.removeWireFrame(this.wireFrame),this.node.wireFrame=null,this.node.clearCacheData(),this.updateItems(this.node),this.refresh(this.node.mindmap,this.node),this.mind.clearSelectNode(),this.mind._dragFrame.style.display="none",this.mind._indicateDom.style.display="none"}undo(){this.node.wireFrame=this.wireFrame,this.node.clearCacheData(),this.mind.addWireFrame(this.wireFrame),this.wireFrame.init(),this.updateItems(this.node),this.refresh(this.node.mindmap,this.node),this.mind.clearSelectNode(),this.mind._dragFrame.style.display="none",this.mind._indicateDom.style.display="none"}}class It extends _t{constructor(t,e,i){super("changeRangeNode"),this.item=t,this.old=e,this.new=i}pre(){var t=this.old[0];"wireFrame"==this.item.name?t.wfs.splice(t.wfs.indexOf(this.item),1):t.induces.splice(t.induces.indexOf(this.item),1)}execute(){this.pre(),this.item.rangeNode=this.new,this.item.node=this.new[0],this.item.endNode=this.new[this.new.length-1],"wireFrame"==this.item.name?-1==this.new[0].wfs.indexOf(this.item)&&this.new[0].wfs.push(this.item):-1==this.new[0].induces.indexOf(this.item)&&this.new[0].induces.push(this.item),this.old.forEach((t=>{t&&t.clearCacheData()})),this.new.forEach((t=>{t&&t.clearCacheData()})),this.updateItems(this.item.node),this.refresh(this.item.node.mindmap,this.item.node)}undo(){"wireFrame"==this.item.name?this.new[0].wfs.splice(this.new[0].wfs.indexOf(this.item),1):this.new[0].induces.splice(this.new[0].induces.indexOf(this.item),1),this.item.rangeNode=this.old,this.item.node=this.old[0],this.item.endNode=this.old[this.old.length-1],"wireFrame"==this.item.name?this.old[0].wfs.indexOf(this.item)&&this.old[0].wfs.push(this.item):this.old[0].induces.indexOf(this.item)&&this.old[0].induces.push(this.item),this.old.forEach((t=>{t&&t.clearCacheData()})),this.new.forEach((t=>{t&&t.clearCacheData()})),this.updateItems(this.item.node),this.refresh(this.item.node.mindmap,this.item.node)}}class Bt extends _t{constructor(t){super("addRelate"),this.link=t,this.mind=this.link.startNode.getMind()}execute(){this.mind.addRelateLink(this.link),this.mind.status="",this.link.status="added"}undo(){this.mind.removeRelateLink(this.link)}}class Ot extends _t{constructor(t,e,i){super("relateLinkBox"),this.relateLink=t,this.oldBox=e,this.box=i}execute(){this.relateLink.data=this.box.data,this.relateLink.setBox(Object.assign({},this.box)),this.refresh(this.relateLink.startNode.mindmap,this.relateLink.startNode)}undo(){this.relateLink.data=this.oldBox.data,this.relateLink.setBox(Object.assign({},this.oldBox)),this.refresh(this.relateLink.startNode.mindmap,this.relateLink.startNode)}}class Rt extends _t{constructor(t,e){super("setAnnotate"),this.node=t,this.annotate=e,t.getAnnotateId()&&(this.oldAnnotate=t.getAnnotate())}execute(){this.node.setAnnotate(this.annotate),this.refresh(this.node.mindmap,this.node)}undo(){this.oldAnnotate?this.node.setAnnotate(this.oldAnnotate):this.node.deleteAnnotate(),this.refresh(this.node.mindmap,this.node)}}class Ft extends _t{constructor(t){super("setAnnotate"),this.node=t,this.annotate=t.getAnnotate()}execute(){this.node.deleteAnnotate(),this.refresh(this.node.mindmap,this.node)}undo(){this.node.setAnnotate(this.annotate),this.refresh(this.node.mindmap,this.node)}}class zt extends _t{constructor(t){super("changeNodeToFreeRoot"),this.node=t,this.mind=t.getMind(),this.pos=this.node.getPosition(),this.parent=this.node.parent,this.node.data.main=!1,this.node.layout&&(this.layout=this.node.layout)}execute(){var t=this;if(this.layout&&(this.node.layout=this.layout),this.node.clearCacheData(),this.node.containEl.classList.contains("mm-root")||this.node.containEl.classList.add("mm-root"),this.node.containEl.classList.contains("mm-freeNode")||this.node.containEl.classList.add("mm-freeNode"),this.node.refreshBox(),this.parent)var e=this.parent.wireFrames,i=this.parent.summaries;this.cacheInfo={wfs:[],induces:[]},e&&e.forEach((e=>{if(e.node==e.endNode){if(e.node==t.node){var i=e.node.parent,n=i.wireFrames.indexOf(e);i.wireFrames.splice(n,1),e.node.wireFrame=e,t.cacheInfo.wfs.push({item:e,type:"toFreeRoot"})}}else if(e.rangeNode.indexOf(t.node)>-1)if(e.rangeNode[0]==t.node){t.node.wfs.splice(t.node.wfs.indexOf(e),1);var r=e.rangeNode.slice();e.rangeNode.shift(),e.rangeNode[0].wfs.push(e),t.cacheInfo.wfs.push({item:e,type:"changeRangeNode-start",oldRange:r,newRange:e.rangeNode.slice()})}else if(e.rangeNode[e.rangeNode.length-1]==t.node){r=e.rangeNode.slice();e.rangeNode.pop(),t.cacheInfo.wfs.push({item:e,type:"changeRangeNode-end",oldRange:r,newRange:e.rangeNode.slice()})}else{r=e.rangeNode.slice();var s=e.rangeNode.indexOf(t.node);e.rangeNode.splice(s,1),t.cacheInfo.wfs.push({item:e,type:"changeRangeNode",oldRange:r,newRange:e.rangeNode.slice(),num:s})}})),i&&i.forEach((e=>{if(e.node==e.endNode)e.node==t.node&&(t.mind.removeInduce(e),t.cacheInfo.induces.push({item:e,type:"remove"}),t.mind.removeNode(e.root));else if(e.rangeNode.indexOf(t.node)>-1)if(e.rangeNode[0]==t.node){t.node.induces.splice(t.node.induces.indexOf(e),1);var i=e.rangeNode.slice();e.rangeNode.shift(),e.rangeNode[0].induces.push(e),t.cacheInfo.induces.push({item:e,type:"changeRangeNode-start",oldRange:i,newRange:e.rangeNode.slice()})}else if(e.rangeNode[e.rangeNode.length-1]==t.node){i=e.rangeNode.slice();e.rangeNode.pop(),t.cacheInfo.induces.push({item:e,type:"changeRangeNode-end",oldRange:i,newRange:e.rangeNode.slice()})}else{i=e.rangeNode.slice();var n=e.rangeNode.indexOf(t.node);e.rangeNode.splice(n,1),t.cacheInfo.induces.push({item:e,type:"changeRangeNode",oldRange:i,newRange:e.rangeNode.slice(),num:n})}})),this.parent&&(this.index=this.parent.removeChild(this.node)),this.node.parent=null,this.mind.addFreeNode(this.node),this.mind.traverseDF((t=>{t.boundingRect=null,t.stroke=""}),this.node),this.node.nodeType="freeNode",this.node.setPosition(this.pos.x,this.pos.y),this.updateItems(this.parent),this.updateItems(this.node),this.parent.clearCacheData(),this.refresh(this.parent.mindmap,this.parent),this.refresh(this.node.mindmap,this.node),this.layout||(this.layout=this.node.layout),this.mind.clearSelectNode()}undo(){var t=this;this.mind.removeFreeNode(this.node),this.node.containEl.classList.contains("mm-root")&&this.node.containEl.classList.remove("mm-root"),this.node.containEl.classList.contains("mm-freeNode")&&this.node.containEl.classList.remove("mm-freeNode"),this.node.refreshBox(),this.node.layout&&(this.node.layout.svgDom&&this.node.layout.svgDom.clear()&&this.node.layout.svgDom.remove(),this.node.layout.group&&this.node.layout.group.clear()&&this.node.layout.group.remove(),this.node.layout.svgDom=null,this.node.layout.group,this.node.layout=null),this.node.nodeType="richText",this.parent&&this.parent.addChild(this.node,this.index),this.node.clearCacheData(),this.mind.traverseDF((t=>{t.boundingRect=null,t.stroke=""}),this.node),this.node._isRoot||this.node.layout&&(this.node.layout.svgDom&&this.node.layout.svgDom.remove(),this.node.layout.svgDom=null,this.node.layout=null),this.cacheInfo&&this.cacheInfo.wfs.forEach((e=>{if("toFreeRoot"==e.type){var i=e.item.node.parent;i&&(i.wireFrames.push(e.item),i.wireFrames.unique(),i.wireFrames.sort((function(t,e){return t.rangeNode.length-e.rangeNode.length}))),e.item.node.wireFrame=null}if("remove"==e.type&&(t.mind.addWireFrame(e.item),e.item.init()),"changeRangeNode-start"==e.type){t.node.wfs.push(e.item);var n=e.item.rangeNode[0];n.wfs.splice(n.wfs.indexOf(e.item),1),e.item.rangeNode=e.oldRange}"changeRangeNode-end"!=e.type&&"changeRangeNode"!=e.type||(e.item.rangeNode=e.oldRange)})),this.cacheInfo&&this.cacheInfo.induces.forEach((e=>{if("remove"==e.type&&(t.mind.addInduce(e.item),e.item.init(),this.mind.traverseDF((t=>{this.mind._addNodeDom(t)}),e.item.root)),"changeRangeNode-start"==e.type){t.node.induces.push(e.item);var i=e.item.rangeNode[0];i.induces.splice(i.induces.indexOf(e.item),1),e.item.rangeNode=e.oldRange}"changeRangeNode-end"!=e.type&&"changeRangeNode"!=e.type||(e.item.rangeNode=e.oldRange)})),this.updateItems(this.node),this.refresh(this.node.mindmap,this.node),this.node.layout=null,this.mind.clearSelectNode()}}class qt extends _t{constructor(t,e){super("changeFreeRootToNode"),this.node=t,this.pos=this.node.getPosition(),this.parent=e,this.mind=this.node.getMind(),this.oldLayout=this.node.layout}execute(){if(this.node.containEl.classList.contains("mm-root")&&(this.node.containEl.classList.remove("mm-root"),this.node.containEl.classList.remove("mm-freeNode")),this.node.refreshBox(),this.mind.removeFreeNode(this.node),this.node.layout.svgDom&&this.node.layout.svgDom.clear(),this.node.layout=null,this.node.nodeType="richText",this.parent.addChild(this.node),this.node.clearCacheData(),this.mind.traverseDF((t=>{t.boundingRect=null,t.direct="",t.stroke=""}),this.node),this.node.wfs.length){var t=this.node.parent;t&&(-1==t.wireFrames.indexOf(this.node.wfs[0])&&t.wireFrames.push(this.node.wfs[0]),t.wireFrames.sort((function(t,e){return t.rangeNode.length-e.rangeNode.length}))),this.rootWf=this.node.wfs[0],this.node.wireFrame=null}this.updateItems(this.node),this.refresh(this.node.mindmap,this.node),this.mind.clearSelectNode()}undo(){if(this.node.layout=this.oldLayout,this.node.clearCacheData(),this.mind.addFreeNode(this.node),this.node.nodeType="freeNode",this.parent.removeChild(this.node),this.node.setPosition(this.pos.x,this.pos.y),this.mind.traverseDF((t=>{t.boundingRect=null,t.direct="",t.stroke=""}),this.node),this.node.containEl.classList.contains("mm-root")||(this.node.containEl.classList.add("mm-root"),this.node.containEl.classList.add("mm-freeNode")),this.node.refreshBox(),this.mind.clearSelectNode(),this.rootWf){var t=this.rootWf.node.parent;t&&t.wireFrames.splice(t.wireFrames.indexOf(this.rootWf),1),this.rootWf.node.wireFrame=this.rootWf,this.rootWf=null}this.updateItems(this.parent),this.updateItems(this.node),this.refresh(this.parent.mindmap,this.parent),this.refresh(this.node.mindmap,this.node)}}class jt extends _t{constructor(t){super("removeCommand"),this.node=t.node,this.induce=t}execute(){var t=this.node.getMind();t.removeInduce(this.induce),this.induce.root.layout&&this.induce.root.layout.svgDom&&this.induce.root.layout.svgDom.remove()&&(this.induce.root.layout.svgDom=null),function e(i){t.removeNode(i),i.wireFrames&&i.wireFrames.forEach((e=>{t.removeWireFrame(e)})),i.summaries&&i.summaries.forEach((i=>{t.removeInduce(i),i.root.layout&&i.root.layout.svgDom&&i.root.layout.svgDom.remove()&&(i.root.layout.svgDom=null),e(i.root)})),i.getChildren().forEach((t=>{e(t)}))}(this.induce.root),this.node.induce=null,this.node.clearCacheData(),this.updateItems(this.node),this.refresh(t,this.node),t.updateAssist(),t._dragFrame.style.display="none",t._indicateDom.style.display="none"}undo(){var t=this.node.getMind();t.addInduce(this.induce),function e(i){t.addNode(i),i.wireFrames.length&&i.wireFrames.forEach((e=>{t.addWireFrame(e)})),i.summaries.length&&i.summaries.forEach((i=>{t.addInduce(i),e(i.root)})),i.getChildren().forEach((t=>{e(t)}))}(this.induce.root),this.node.induce=this.induce,this.node.clearCacheData(),this.updateItems(this.node),this.refresh(this.node.mindmap,this.node),t._dragFrame.style.display="none",t._indicateDom.style.display="none"}}class Ht extends _t{constructor(t){super("removeRelateLink"),this.link=t,this.mind=t.startNode.getMind()}execute(){this.mind.removeNode(this.link.textNode),this.mind.removeRelateLink(this.link),this.refresh(this.mind,this.link.startNode)}undo(){this.mind.addRelateLink(this.link),this.refresh(this.mind,this.link.startNode)}}class $t extends _t{constructor(t,e){super("changeLayout"),this.node=t,this.mind=this.node.mindmap,this.direct=e}execute(){if("right"==this.direct||"left"==this.direct||"mindmap"==this.direct){if(!(e=this.node.getLayout()))return;if(this.mind.traverseDF((t=>{t.boundingRect=null}),e.root),-1==e.layoutName.indexOf("mindmap")){this.oldLayout=e,e.svgDom&&e.svgDom.clear()&&e.svgDom.remove()&&e.svgDom,e.group&&e.group.clear()&&e.group.remove()&&e.group;var t=new bt.mindmap2(e.root,this.direct,this.mind.view.colors.slice());e.root.layout=t}else e.direct!=this.direct&&(this.oldDirect=e.direct,e.layout(e.root,this.direct))}var e;if("up"==this.direct||"down"==this.direct)if(-1==(e=this.node.getLayout()).layoutName.indexOf("tree")){this.mind.traverseDF((t=>{t.boundingRect=null}),e.root),this.oldLayout=e,e.svgDom&&e.svgDom.clear()&&e.svgDom.remove()&&e.svgDom,e.group&&e.group.clear()&&e.group.remove()&&e.group;t=new bt.tree(e.root,this.direct,this.mind.view.colors.slice());e.root.layout=t}else e.direct!=this.direct&&(this.oldDirect=e.direct,e.layout(e.root,this.direct));"lTree"==this.direct&&this.changeLayout("multipleTree","multipleTree"),"vertical"==this.direct&&this.changeLayout("vertical","vertical"),"fishRight"==this.direct&&this.changeLayout("fish","right"),"fishLeft"==this.direct&&this.changeLayout("fish","left"),this.oldLayout?this.refresh(this.mind,this.oldLayout.root):this.refresh(this.mind,this.node)}changeLayout(t,e){var i=this.node.getLayout();if(i.layoutName!=t){this.mind.traverseDF((t=>{t.boundingRect=null,t.refreshBox(),t.direct=""}),i.root),this.oldLayout=i,i.svgDom&&i.svgDom.clear()&&i.svgDom.remove()&&i.svgDom,i.group&&i.group.clear()&&i.group.remove()&&i.group;var n=new bt[t](i.root,e,this.mind.view.colors.slice());i.root.layout=n}else i.direct!=e&&(this.oldDirect=i.direct,i.layout(i.root,e))}undo(){this.oldLayout&&(this.oldLayout.root.layout.svgDom&&this.oldLayout.root.layout.svgDom.clear()&&this.oldLayout.root.layout.svgDom.remove()&&this.oldLayout.root.layout.svgDom,this.oldLayout.root.layout.group&&this.oldLayout.root.layout.group.clear()&&this.oldLayout.root.layout.group.remove()&&this.oldLayout.root.layout.group,this.mind.traverseDF((t=>{t.boundingRect=null,t.refreshBox(),t.direct=""}),this.oldLayout.root),this.oldLayout.root.layout=this.oldLayout,this.oldLayout.svgDom&&(this.oldLayout.svgDom=null),this.oldLayout.group&&(this.oldLayout.group=null),this.oldLayout.layout(this.oldLayout.root,this.oldLayout.direct)),this.oldLayout?this.refresh(this.mind,this.oldLayout.root):this.refresh(this.mind,this.node)}}class Wt extends _t{constructor(t,e){super("changeSummary"),this.summary=t,this.stroke=e,this.oldStroke=t.stroke}execute(){this.summary.setData({stroke:this.stroke,lineType:"solid"});var t=this.summary.node;this.refresh(t.mindmap,t)}undo(){this.summary.setData({stroke:this.oldStroke,lineType:"solid"});var t=this.summary.node;this.refresh(t.mindmap,t)}}class Ut extends _t{constructor(t,e,i){super("ChangeWireframe"),this.wf=t,this.stroke=e,this.oldStroke=t.stroke,this.background=i,this.oldBackground=t.fill}execute(){this.wf.fill=this.background,this.wf.stroke=this.stroke,this.wf.refresh();var t=this.wf.node;this.refresh(t.mindmap,t)}undo(){this.wf.fill=this.oldBackground,this.wf.stroke=this.oldStroke;var t=this.wf.node;this.refresh(t.mindmap,t)}}class Vt extends _t{constructor(t,e){super("changeLinkStroke"),this.link=t,this.stroke=e,this.oldStroke=t.data.color}execute(){this.link.data.color=this.stroke,this.link.refresh(),this.refresh(this.link.mind,this.link.startNode)}undo(){this.link.data.color=this.oldStroke,this.link.refresh(),this.refresh(this.link.mind,this.link.startNode)}}class Gt extends _t{constructor(t,e){super("changeLinkType"),this.link=t,this.type=e,this.oldType=t.data.type}execute(){this.link.data.type=this.type,this.link.bs&&(this.link.bs.remove(),this.link._createLine(),this.link._addLineEvent()),this.link.refresh(),this.refresh(this.link.mind,this.link.startNode)}undo(){this.link.data.type=this.oldType,this.link.bs&&(this.link.bs.remove(),this.link._createLine(),this.link._addLineEvent()),this.link.refresh(),this.refresh(this.link.mind,this.link.startNode)}}class Xt extends _t{constructor(t,e){super("note"),this.node=t,this.note=e,this.oldNote=t.data.note}execute(){this.node.setNote(this.note),this.node.refreshBox(),this.node.clearCacheData(),this.refresh(this.node.mindmap,this.node)}undo(){this.node.setNote(this.oldNote),this.node.refreshBox(),this.node.clearCacheData(),this.refresh(this.node.mindmap,this.node)}}class Yt extends _t{constructor(t){super("addFreeNode"),this.node=t}execute(){this.node.mindmap.addFreeNode(this.node),this.refresh(this.node.mindmap,this.node)}undo(){this.node.mindmap.removeFreeNode(this.node),this.node.mindmap.removeNode(this.node),this.refresh(this.node.mindmap,this.node)}}class Zt extends _t{constructor(t,e){super("copyNode"),this.waitCollapse=[],this.node=t,this.data=e,this.mind=this.node.mindmap,this.waitCollapse=[]}execute(){this.paste()}undo(){this.firstNode&&(this.mind.removeNode(this.firstNode),this.node.clearCacheData(),this.updateItems(this.node),this.refresh(this.node.mindmap,this.node))}paste(){this.data.forEach(((t,e)=>{var i=new ct(t,this.mind);if(i.mindmap=this.mind,t.isExpand||this.waitCollapse.push(i),0==e)i.data.pid=this.node.getId(),this.mind.addNode(i,this.node),this.firstNode=i,i.setPosition(0,0),i.refreshBox();else{var n=this.mind.getNodeById(t.pid);n&&(this.mind.addNode(i,n),i.setPosition(0,0),i.refreshBox())}e==this.data.length-1&&(i.clearCacheData(),this.updateItems(i),this.refresh(this.mind,i))}))}}class Jt extends _t{constructor(t,e){super("setNodeStyle"),this.oldStyles={},this.nodes=t,this.newStyle=e}execute(){var t=[];this.nodes.forEach((e=>{var i=e.getStyle();this.oldStyles[e.getId()]=JSON.stringify(i);var n=Object.assign({},i,this.newStyle);e.setStyle(n),e.clearCacheData(),e.refreshBox();var r=e.getTopLayout();-1==t.indexOf(r)&&t.push(r),e.callout&&e.callout.refresh()})),t.length&&t.forEach((t=>{t&&t.refresh()})),this.refresh(this.nodes[0].mindmap,this.nodes[0])}undo(){var t=[];this.nodes.forEach((e=>{var i=e.getId(),n=JSON.parse(this.oldStyles[i]);e.setStyle(n,!0),e.clearCacheData(),e.refreshBox();var r=e.getTopLayout();-1==t.indexOf(r)&&t.push(r),e.callout&&e.callout.refresh()})),t.length&&t.forEach((t=>{t&&t.refresh()})),this.refresh(this.nodes[0].mindmap,this.nodes[0])}}class Kt extends _t{constructor(t,e){super("addCallout"),this.node=t,this.callout=e,this.mind=t.getMind(),this.num=1}execute(){this.mind.addCallout(this.callout),1!=this.num&&(this.callout.init(),this.mind.contentEL.appendChild(this.callout.root.containEl)),this.callout.node.callout=this.callout,this.num++,this.updateItems(this.callout.node),this.node.clearCacheData(),this.refresh(this.mind,this.callout.node)}undo(){this.mind.removeCallout(this.callout),this.mind.contentEL.removeChild(this.callout.root.containEl),this.callout.off(),this.callout.remove(),this.node.callout=null,this.node.clearCacheData(),this.updateItems(this.node),this.refresh(this.mind,this.node)}}class Qt extends _t{constructor(t){super("RemoveCallout"),this.callout=t,this.mind=t.node.getMind()}execute(){this.mind.contentEL.removeChild(this.callout.root.containEl),this.mind.removeCallout(this.callout),this.callout.node.clearCacheData(),this.callout.off(),this.callout.node.callout=null,this.updateItems(this.callout.node),this.refresh(this.mind,this.callout.node)}undo(){this.mind.addCallout(this.callout),this.mind.contentEL.appendChild(this.callout.root.containEl),this.callout.init(),this.callout.node.callout=this.callout,this.callout.node.clearCacheData(),this.updateItems(this.callout.node),this.refresh(this.mind,this.callout.node)}}class te{constructor(){this.history=new kt(50)}execute(t,e){switch(t){case"addChildNode":case"addSiblingNode":if(e){var i={id:Fn(),text:e.text||s("Sub title")},n=e.parent;if(n.mindmap.isRead)return;if(n.belongInduce&&!n.layout){for(var r=n.direct,o=[],a=0;a<50;a++)o.push(n.belongInduce.node.stroke);n.layout="right"==r||"left"==r?new bt.mindmap1(n,r,o):new bt.tree(n,r,o)}if(n.isExpand||n.expand(),"table"==n.mindmap._mode)var h=new ut(i,n.mindmap);else h=new ct(i,n.mindmap);this.history.execute(new Ct(h,e.parent,n.mindmap))}break;case"deleteNodeAndChild":if(e){if((h=e.node).mindmap.isRead)return;this.history.execute(new Dt(h,h.mindmap))}break;case"deleteNodeExcludeChild":break;case"changeNodeText":if(e){if((h=e.node).mindmap.isRead)return;this.history.execute(new Et(e.node,e.oldText,e.text))}break;case"moveNode":e&&this.history.execute(new St(e));break;case"movePosition":e&&this.history.execute(new Nt(e.node,e.oldPos,e.newPos));break;case"expandNode":e&&this.history.execute(new At(e.node));break;case"collapseNode":e&&this.history.execute(new Mt(e.node));break;case"addSummary":if(e){if((h=e.node).mindmap.isRead)return;this.history.execute(new Lt(e.node,e.summary))}break;case"addWireFrame":if(e){if((h=e.node).mindmap.isRead)return;this.history.execute(new Tt(e.wireFrame,e.node.mindmap))}break;case"changeRangeNode":this.history.execute(new It(e.item,e.oldRangeNode,e.newRangeNode));break;case"addRelateLink":this.history.execute(new Bt(e.link));break;case"changeRelateLink":this.history.execute(new Ot(e.link,e.oldBox,e.box));break;case"setAnnotate":this.history.execute(new Rt(e.node,e.annotate));break;case"deleteAnnotate":if((h=e.node).mindmap.isRead)return;this.history.execute(new Ft(e.node));break;case"changeNodeToFreeRoot":if((h=e.node).mindmap.isRead)return;this.history.execute(new zt(e.node));break;case"changeFreeRootToNode":if((h=e.node).mindmap.isRead)return;this.history.execute(new qt(e.node,e.parent));break;case"deleteInduce":if((h=e.summary.node).mindmap.isRead)return;this.history.execute(new jt(e.summary));break;case"deleteWireFrame":if((h=e.wireFrame.node).mindmap.isRead)return;this.history.execute(new Pt(e.wireFrame,e.wireFrame.node.mindmap));break;case"deleteRelateLink":if((h=e.link.startNode).mindmap.isRead)return;this.history.execute(new Ht(e.link));break;case"changeLayout":h=e.node;this.history.execute(new $t(e.node,e.direct));break;case"changeSummary":this.history.execute(new Wt(e.summary,e.stroke));break;case"changeWireFrame":this.history.execute(new Ut(e.wireFrame,e.stroke,e.background));break;case"changeLinkStroke":this.history.execute(new Vt(e.link,e.stroke));break;case"changeLinkType":this.history.execute(new Gt(e.link,e.type));break;case"note":h=e.node;var l=e.note;h&&this.history.execute(new Xt(h,l));break;case"addFreeNode":this.history.execute(new Yt(e.node));break;case"pasteNode":this.history.execute(new Zt(e.node,e.data));break;case"setNodeStyle":this.history.execute(new Jt(e.nodes,e.style));break;case"addCallout":this.history.execute(new Kt(e.node,e.callout));break;case"removeCallout":this.history.execute(new Qt(e.callout))}}undo(){this.history.undo()}redo(){this.history.redo()}}class ee{constructor(t,e,i="#666",n){this.name="induce",this.node=t,this.endNode=t,this.root=e||new ct,this.root.containEl.classList.add("mm-node-induce"),this.root.containEl.classList.add("mm-node-leaf"),this.root.direct=this.node.direct,this.root.box={width:48,height:32},this.root.shapeType="bubble",this.lineType=n||"solid",this.stroke=i,this.lineWidth=2,this.type="right",this.lineDash=[0,0],this.visible=!0,this.isHide=!1,this.id=+new Date,this.node.induce=this,this.root.belongInduce=this,this.root.isRoot=!0,this.root.mind=this.node.getMind(),this.root.nodeType="induce",this.box={width:48,height:32},this.position=[],this.node.mindmap.contentEL.contains(this.root.containEl)||(this.node.mindmap.contentEL.appendChild(this.root.containEl),this.root.refreshBox()),this.refreshItems()}getId(){return this.id}init(){this.group&&this.group.remove(),this.group=this.node.getMind().induceGroup.group(),this.createInduceLine(),this.refreshBox(),this.render()}createInduceLine(){this.pl1&&this.pl1.remove()&&this.pl1,this.pl1=this.group.polyline().stroke({color:`${this.stroke}`,width:`${this.lineWidth}`,dasharray:`${this.lineDash}`,linecap:"round",linejoin:"round"}).fill("none"),this.pl2&&this.pl2.remove()&&this.pl2,this.pl2=this.group.polyline().stroke({color:`${this.stroke}`,width:`${this.lineWidth}`,dasharray:`${this.lineDash}`,linecap:"round",linejoin:"round"}).fill("none")}refreshItems(){var t=this.getInduces(),e=this.listNode;t.forEach((t=>{t.isShow()&&(e=e.concat(t.getAllItem()))})),this.items=e,this.node.isHide&&this.endNode.isHide&&this.hide()}render(){this.adjustType();var t=this.getNodeBox();this.renderInduce(t)}adjustType(){this.node.getMind().getRootByNode(this.node);var t="node-"+this.type;this.root.containEl.classList.contains(t)&&this.root.containEl.classList.remove(t),this.type=this.node.direct,this.direct=this.node.direct;var e="node-"+this.type;this.root.containEl.classList.contains(e)||this.root.containEl.classList.add(e)}getInduces(){var t=this,e=[],i=[],n=[],r=[];if(this.rangeNode&&this.rangeNode.length)this.rangeNode.forEach((t=>{e=e.concat(t.getShowNodeList())}));else{this.rangeNode=[];var s=this.node.parent,o=s.children.indexOf(this.node),a=s.children.indexOf(this.endNode);s.children.forEach(((i,n)=>{n>=o&&n<=a&&(t.rangeNode.push(i),e=e.concat(i.getShowNodeList()))})),t.rangeNode=hi(t.rangeNode)}return e.forEach((t=>{t.summaries.length&&t.summaries.forEach((t=>{t.isShow()&&i.push(t)})),t.callout&&t.callout.isShow&&e.push(t.callout),t.wireFrames.length&&t.wireFrames.forEach((t=>{t.isHide||n.push(t)})),t.layout&&t.layout.isShow&&r.push(t.layout)})),i=hi(i),n=hi(n),this.listNode=e.concat(n),this.groups=hi(r),i}getNodeBox(){var t=this.items,e=this.groups,i=this.node.getMind().getBoundingRect(t);return e.length&&e.forEach((t=>{if("fish"==t.layoutName&&("right"==t.direct?t.creatBone():t.creatBone1(),t.fishTail)){var e=t.fishTail.bbox();e.x<i.x&&(i.x=e.x),e.y<i.y&&(i.y=e.y),e.x+e.width>i.right&&(i.right=e.x+e.width),e.y+e.height>i.bottom&&(i.bottom=e.y+e.height),i.width=i.right-i.x,i.height=i.bottom-i.y}})),i}getBoxRect(){return this.node.getMind().getBoundingRect(this.getAllItem())}getBBox(){return this.getNodeBox()}refreshBox(){var t=this.node.getMind();this.box=t.getBoundingRect(this.getAllItem())}getBox(){var t=this.group.gbox();if(this.box)var e=this.box;else{e=this.root.getBox();this.box=e}return t.x<e.x&&(this.box.x=t.x),t.y<e.y&&(this.box.y=t.y),e.right<t.x2&&(this.right=t.x2),e.bottom<t.y2&&(this.box.bottom=t.y2),this.box.width=this.box.right-this.box.x,this.box.height=this.box.bottom-this.box.y,this.box}refreshAllItems(){var t=[];this.root&&function e(i){i.isShow()&&(t.push(i),i.containBar=!1,i.isExpand||(i.containBar=!0)),i.callout&&i.callout.isShow&&t.push(i.callout),i.wireFrames.length&&i.wireFrames.forEach((e=>{e.isHide||t.push(e)})),i.summaries.length&&i.summaries.forEach((e=>{e.isShow()&&(t=t.concat(e.getAllItem()))})),i.isExpand&&i.children.forEach((t=>{e(t)}))}(this.root),this.allItems=hi(t)}getAllItem(){return this.refreshAllItems(),this.allItems}hide(){this.isHide=!0,this.group&&this.group.hide(),this.root.hide()}isShow(){return!this.isHide}show(){this.isHide=!1,this.group&&this.group.show(),this.root.show()}doLayout(){if(0!=this.root.getChildren().length){var t=this.root.layout.direct;this.root.layout.layout(this.root,t)}}getWireFrame(){var t=[],e=[];return this.rangeNode&&this.rangeNode.length&&this.rangeNode.forEach((t=>{e=e.concat(t.getShowNodeList())})),e.forEach((e=>{e.wireFrames.length&&e.wireFrames.forEach((i=>{i.isHide||(t=t.concat(e.wireFrames))}))})),hi(t)}setEndNode(t){this.endNode=t,this.refreshNode(),this.refresh()}refreshNode(){var t=this.node.getShowNodeList();this.endNode&&this.endNode!=this.node&&(t=t.concat(this.endNode.getShowNodeList()));var e=this.node.getMind().getBoundingRect(t);this.topNode=e.topNode,this.bottomNode=e.bottomNode,this.leftNode=e.leftNode,this.rightNode=e.rightNode}renderInduce(t){if(t&&this.pl1){if("solid"==this.lineType?this.lineDash=[0]:this.lineDash=[4,2],"right"==this.type){t.x1=t.x+t.width,this.setPosition(parseInt(t.x1)+5,t.y),this.pl1.plot([[4,0],[12,0],[12,parseInt(t.height/2)],[22,parseInt(t.height/2)]]),this.pl2.plot([[22,parseInt(t.height/2)],[12,parseInt(t.height/2)],[12,parseInt(t.height)],[4,parseInt(t.height)]]);var e=this.root.getBox();this.root.setPosition(t.x1+30,t.y+t.height/2-e.height/2)}else if("left"==this.type){e=this.root.getBox();this.setPosition(parseInt(t.x-e.width-26),parseInt(t.y)),this.pl2.plot([[parseInt(e.width+2),parseInt(t.height/2)],[parseInt(e.width+12),parseInt(t.height/2)],[parseInt(e.width+12),parseInt(t.height)],[parseInt(e.width+18),parseInt(t.height)]]),this.pl1.plot([[parseInt(e.width+2),parseInt(t.height/2)],[parseInt(e.width+12),parseInt(t.height/2)],[parseInt(e.width+12),0],[parseInt(e.width+18),0]]),this.root.setPosition(t.x-e.width-28,parseInt(t.y+(t.height-e.height)/2))}else if("top"==this.type||"up"==this.type){e=this.root.getBox();this.setPosition(parseInt(t.x),parseInt(t.y-e.height-30)),this.pl1.plot([[0,parseInt(e.height+20)],[0,parseInt(e.height+12)],[parseInt(t.width/2),parseInt(e.height+12)],[parseInt(t.width/2),parseInt(e.height+4)]]),this.pl2.plot([[parseInt(t.width/2),parseInt(e.height+4)],[parseInt(t.width/2),parseInt(e.height+12)],[parseInt(t.width),parseInt(e.height+12)],[parseInt(t.width),parseInt(e.height+20)]]),this.root.setPosition(parseInt(t.x+(t.width-e.width)/2),t.y-e.height-25)}else{this.setPosition(parseInt(t.x),parseInt(t.y+t.height+5)),this.pl1.plot([[0,4],[0,12],[parseInt(t.width/2),12],[parseInt(t.width/2),20]]),this.pl2.plot([[parseInt(t.width/2),20],[parseInt(t.width/2),12],[parseInt(t.width),12],[parseInt(t.width),4]]);e=this.root.getBox();this.root.setPosition(t.x+(t.width-e.width)/2,t.y+t.height+26)}this.doLayout()}}getPosition(){return{x:this.position[0],y:this.position[1]}}setPosition(t,e){this.group.attr({transform:`translate(${t},${e})`}),this.position=[t,e]}setText(t){}getText(){return this.induceText}getTextBox(){return this.text.getBox()}refresh(){if(this.node.isShow()&&this.endNode&&this.endNode.isShow())!this.isHide&&this.root.isShow()||(this.show(),function t(e){e.show(),e.isExpand&&e.children.forEach((e=>{t(e)}))}(this.root)),this.render(),this.refreshBox();else{if(this.isHide)return;this.hide(),function t(e){e.hide(),e.isExpand&&e.children.forEach((e=>{t(e)}))}(this.root),this.root.layout&&this.root.layout.group&&(this.root.layout.group.clear(),this.root.layout.group.remove(),this.root.layout.group=null)}}active(){this.status="active",this.root.setStyle("stroke","rgb(247,186,134)")}move(t,e){var i=this.getPosition();this.setPosition(i.x+t,i.y+e),this.box&&(this.box.x+=t,this.box.y+=e)}unactive(){this.status="unactive",this.root.setStyle("stroke",this.color)}isactive(){return"active"==this.status}remove(){this.pl1&&this.pl1.remove(),this.pl2&&this.pl2.remove(),this.pl1=null,this.pl2=null,this.root.layout&&this.root.layout.svgDom&&this.root.layout.svgDom.remove()&&(this.root.layout.svgDom=null)}initEvent(){this.pl1.on("click",(t=>{t.induce=this,this.__zr.trigger("touchInduce",t),this.__zr.trigger("selectInduce",t)})),this.pl2.on("click",(t=>{t.induce=this,this.__zr.trigger("touchInduce",t),this.__zr.trigger("selectInduce",t)}))}getData(){if(this.node&&this.endNode){var t=this.node.parent,e=0,i=0;return t&&(e=t.children.indexOf(this.node),i=t.children.indexOf(this.endNode)),{nodeId:this.node.getId(),endNodeId:this.endNode.getId(),stroke:this.stroke,root:this.root.getId(),lineType:this.lineType,id:this.id,range:`${e},${i}`,type:this.type}}return null}setData(t){this.stroke=t.stroke,this.lineType=t.lineType,this.refresh(),this.pl1.attr({stroke:this.stroke,fill:"none"}),this.pl2.attr({stroke:this.stroke,fill:"none"})}judgeNodePos(t,e){if(!e)return"right";var i=t.getPosition(),n=t.getBox(),r=e.getPosition(),s=e.getBox();return"right"==t.direct?i.x>r.x+s.width?"right":"left":r.x>i.x+n.width?"left":"right"}getChildren(){return this.childrens}addChild(t,e){t._parent=this,"number"==typeof e?this.childrens.splice(e,0,t):this.childrens.push(t)}removeChild(t){var e=this.childrens.indexOf(t);return e>-1&&this.childrens.splice(e,1),e}}class ie{constructor(t,e="rgba(213,233,252,.1)",i="rgb(42,122,194)",n={text:"",nodeType:"wireFrame"}){this.node=t,this.endNode=t,this.node.clearCacheData(),this.stroke=i,this.fill=e,this.lineDash=[6,2],this.data=n,this.status="",this.shapeType="rect",this.lineWidth=1,this.radius=10,this.node.wireFrame=this,this.mind=this.node.getMind(),this.name="wireFrame",this.isHide=!1,this.rangeNode=[],this.refreshNode(),this.refreshItems(),this.init()}init(){this.direct=this.node.direct,this.beforeCreate(),this.create()}setEndNode(t){this.endNode=t,this.refreshNode(),this.refresh()}refreshNode(){var t=this.node.getShowNodeList();this.endNode&&this.endNode!=this.node&&(t=t.concat(this.endNode.getShowNodeList()));var e=this.node.getMind().getBoundingRect(t);this.topNode=e.topNode,this.bottomNode=e.bottomNode,this.leftNode=e.leftNode,this.rightNode=e.rightNode,this.node.refreshCBox(),this.endNode&&this.endNode.refreshCBox()}beforeCreate(){if(this.group||(this.group=this.mind.wireFrameGroup.group()),this.data.text){if(!this.t)if(this._t)this.t=this._t,this._t=null;else{var t=this.data.nodeData||{text:this.data.text,nodeType:"wireFrame",paddingLeft:6,paddingRight:6,paddingBottom:4,paddingTop:4};this.t=new ct(t,this.mind),this.t.wireFrame=this,this.t.containEl.setAttribute("draggable",!1)}this.t.containEl.classList.add("node-wireFrame"),this.mind.contentEL.appendChild(this.t.containEl),this.t.mind=this.mind}else this.t&&(this.mind.contentEL.removeChild(this.t.containEl),this._t=this.t,this.t=null);this.rect||("rect"==this.shapeType?this.rect=this.group.rect().fill(this.fill).stroke(`color:${this.stroke},width:${this.lineWidth},dasharray:${this.lineDash}`).radius(this.radius):this.rect=this.group.polygon().stroke(`color:${this.stroke},width:${this.lineWidth||2},dasharray:${this.lineDash}`)),this.rect.off("click").on("click",(t=>{t.preventDefault(),t.stopPropagation(),this.node.getMind().emit("showWireFrame",{wf:this})}))}getTextBox(){return this.data.text?this.t.getDomBox():{x:0,y:0,width:0,height:0}}move(t,e){t=parseInt(t),e=parseInt(e);var i=this.position.slice();if(this.setPosition(i[0]+t,i[1]+e),this.t){var n=this.t.getPosition();this.t.setPosition(n.x+t,n.y+e)}this.refreshBox()}refreshItems(){var t=this,e=[],i=[],n=[];if(this.rangeNode&&this.rangeNode.length)this.rangeNode.forEach((t=>{n=n.concat(t.getShowNodeList())})),this.node.isHide&&this.endNode.isHide&&this.hide();else{this.rangeNode=[];var r=this.node.parent;if(r){var s=r.children.indexOf(this.node),o=r.children.indexOf(this.endNode);r.children.forEach(((e,i)=>{i>=s&&i<=o&&(t.rangeNode.push(e),n=n.concat(e.getShowNodeList()))})),t.rangeNode=hi(t.rangeNode)}else t.rangeNode=[this.node],n=n.concat(this.node.getShowNodeList())}n.forEach((t=>{i.push(t),t.containBar=!1,t.isExpand||(t.containBar=!0),t.layout&&t.layout.isShow&&t.layout.group&&e.push(t.layout),t.callout&&t.callout.isShow&&i.push(t.callout),t.layout&&t.layout.isShow&&t.layout.group&&e.push(t.layout),t.wireFrames.length&&t.wireFrames.forEach((t=>{t.isHide||i.push(t)})),t.summaries.length&&t.summaries.forEach((t=>{t.isShow()&&(i=i.concat(t.getAllItem()))}))})),this.items=hi(i),this.groups=hi(e)}create(){if(this.group)if(this.node.isShow()&&this.endNode.isShow()&&!this.isShow){this.show();var t=this.items,e=this.groups,i=this.mind.getBoundingRect(t);if(e.length&&e.forEach((t=>{if("fish"==t.layoutName&&("right"==t.direct?t.creatBone():t.creatBone1(),t.fishTail)){var e=t.fishTail.bbox();e.x<i.x&&(i.x=e.x),e.y<i.y&&(i.y=e.y),e.x+e.width>i.right&&(i.right=e.x+e.width),e.y+e.height>i.bottom&&(i.bottom=e.y+e.height),i.width=i.right-i.x,i.height=i.bottom-i.y}})),i){var n=parseInt(i.width+12),r=parseInt(i.height+12);if("rect"==this.shapeType)this.rect.attr({width:n,height:r,fill:this.fill,cursor:"pointer"}).stroke({color:this.stroke,width:this.lineWidth,dasharray:this.lineDash}).radius(this.radius).move(0,0);else{var s=this.node.getBox(),o=this.node.getPosition(),a=[0,Math.abs(o.y-i.y-6)],h=[0,Math.abs(i.y-o.y-s.height-6)],l=[s.width,0],d=[s.width,i.height+12],c=[i.width+12,0],u=[i.width+12,i.height+12];this.rect.plot([a,l,c,u,d,h]).attr({fill:this.fill,stroke:this.stroke,dasharray:this.lineDash,cursor:"pointer"}).move(0,0)}this.position=[];var p=0;if(this.lineWidth%2==1&&(p=.5),this.setPosition(parseInt(i.x-6)+p,parseInt(i.y-6)+p),this.t)if("rect"==this.shapeType){this.t.isShow()||this.t.show();var m=this.t.getDomBox();this.textBox=m,this.t.setPosition(i.x,i.y-m.height-5-this.lineWidth),this.t.dom.style.maxWidth=i.width-30+"px"}else this.t.isShow()&&this.t.hide();this.refreshBox()}}else this.hide()}refresh(){this.init()}setPosition(t,e){this.group&&(t||e)&&(this.position=[t,e],this.group.attr({transform:`translate(${t},${e})`}))}getPosition(){return{x:this.position.slice()[0],y:this.position.slice()[1]}}show(){this.group.show(),this.t&&this.t.show(),this.isHide=!1}hide(){this.group.hide(),this.t&&this.t.hide(),this.isHide=!0}remove(){this.group&&this.group.clear()&&this.group.remove(),this.rect&&this.rect.remove(),this.t&&this.mind.el.removeChild(this.t.dom),this.rect=null,this.t=null,this.group=null}off(){this.rect.off()}active(){this.status="active",this.rect.setStyle("stroke","orange")}unactive(){this.status="unactive",this.rect.setStyle("stroke",this.stroke)}isactive(){return"active"==this.status}getData(){var t=this.node.parent,e=0,i=0;t&&(e=t.children.indexOf(this.node),i=t.children.indexOf(this.endNode));var n={stroke:this.stroke,fill:this.fill,lineDash:this.lineDash.slice(),data:{...this.data},radius:this.radius,lineWidth:this.lineWidth,nodeId:this.node.getId(),endNodeId:this.endNode.getId(),range:`${e},${i}`};if(this.t){var r=this.t.getData();n.nodeData=r,n.text=r.text}return n}setData(t){this.stroke=t.stroke,this.fill=t.fill,this.lineDash=t.lineDash,this.data=t.data,this.lineWidth=t.lineWidth,this.radius=t.radius,this.refresh()}refreshBox(){var t=this.rect.bbox();this.box={...t,x:this.position[0],y:this.position[1]}}getBox(){return this.box}getBBox(){if(this.t){var t={...this.getBox()},e=this.t.getDomBox(),i=this.t.getPosition();t.y=i.y,t.height=t.height+e.height}else t=this.getBox();return t}}const ne=function(t,e){return[t[0]+e[0],t[1]+e[1]]},re=function(t,e){return[t[0]*e,t[1]*e]},se=function(t,e){return t[0]*e[1]-t[1]*e[0]==0},oe=function(t,e){return t[0]*e[0]+t[1]*e[1]};function ae(t,e){return t.find((t=>t!=e))}function he(t){return(0!=t[0]||0!=t[1])&&(0==t[0]?[0,t[1]/Math.abs(t[1])]:0==t[1]?[t[0]/Math.abs(t[0]),0]:function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]}(t))}function le(t){return function(t,e){var i,n=e/2,r=0,s=0;for(i=0;i<t.length-1&&(s=de(t[i],t[i+1]))+r<n;i++)r+=s;return[(t[i][0]+t[i+1][0])/2,(t[i][1]+t[i+1][1])/2]}(t,function(t){for(var e=0,i=0;i<t.length-1;i++)e+=de(t[i],t[i+1]);return e}(t))}function de(t,e){var i=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(i*i+n*n)}class ce{constructor(t,e){var i={color:"#f06",width:2,nodeData:{id:Fn(),text:"label",nodeType:"relateLink",backgroundColor:"#f06"},type:"bs",dashArray:[0],nodeHide:!1,startMarker:"circle",endMarker:"arrow"};this.startNode=t,this.mind=this.startNode.getMind(),this.data={...i,...e||{}},this.group=this.startNode.getMind().draw.group(),this.draw=this.startNode.getMind().draw,this.box={x:0,y:0,x1:0,y1:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,startDirect:"",startDx:0,startDy:0,endDirect:"",endDx:0,endDy:0},this.entryExt=20,this.exitExt=20,this.entryDirection=[0,1],this.exitDirection=[0,1],e&&e.entryDirection&&(this.entryDirection=e.entryDirection),e&&e.exitDirection&&(this.exitDirection=e.exitDirection),this.isAdd=!0,this.name="relateLink",this.actived=!0,this.isShow=!0,this.status="add",this.create(),this.calcLimit(),this.setStartPoint(),this._addEvent(),this.active(),this.added=!0}_createLine(){"bs"==this.data.type?this.bs=this.group.path():"line"==this.data.type?this.bs=this.group.line():this.bs=this.group.polyline()}create(){this.textNode=new ct(this.data.nodeData,this.mind),this.textNode.containEl.classList.add("node-relate"),this.textNode.relateLink=this,this.textNode.containEl.setAttribute("draggable",!1),this.textNode.nodeType="relateLink",this.line1=this.group.line().stroke({color:"#666",width:1,linecap:"round",linejoin:"round"}).hide(),this.line2=this.group.line().stroke({color:"#666",width:1,linecap:"round",linejoin:"round"}).hide(),this._createLine(),this.bs.stroke({cursor:"pointer",color:this.data.color,width:this.data.width,dasharray:this.data.dashArray,linecap:"round",linejoin:"round"}).fill("none"),this.createMarker(),this.corl1=document.createElement("div"),this.corl1.className="relate-ctrl",this.corl1.style=`cursor:move;position:absolute;z-index:1000;width:10px;height:10px;border-radius:50%;background:${this.data.color}`,this.corl2=document.createElement("div"),this.corl2.className="relate-ctrl",this.corl2.style=`cursor:move;position:absolute;z-index:1000;width:10px;height:10px;border-radius:50%;background:${this.data.color}`,this.corl1.setAttribute("nochilddrag",!0),this.corl1.setAttribute("direct","start"),this.corl2.setAttribute("nochilddrag",!0),this.corl2.setAttribute("direct","end"),this.mind.contentEL.appendChild(this.corl1),this.mind.contentEL.appendChild(this.corl2),this.mind.contentEL.appendChild(this.textNode.containEl)}createMarker(){var t=this;this.startMarker&&this.startMarker.remove(),this.endMarker&&this.endMarker.remove(),"circle"==this.data.startMarker?this.startMarker=this.draw.marker(8,8,(function(e){e.circle(4).center(4,4).fill(`${t.data.color}`)})):"rect"==this.data.startMarker?this.startMarker=this.draw.marker(4,4,(function(e){e.rect(4,4).fill(`${t.data.color}`)})):"line"==this.data.startMarker?this.startMarker=this.draw.marker(2,6,(function(e){e.rect(1,6).fill(`${t.data.color}`)})):"arrow"==this.data.startMarker?this.startMarker=this.draw.marker(5,4,(function(e){e.polygon("0,0,5,2,0,4"),this.fill(`${t.data.color}`)})):"arrow1"==this.data.startMarker?this.startMarker=this.draw.marker(5,4,(function(e){e.polygon("5,0,0,2,5,4"),this.fill(`${t.data.color}`)})):this.startMarker&&(this.startMarker.remove(),this.startMarker=null),this.startMarker&&this.bs.marker("start",this.startMarker),"circle"==this.data.endMarker?this.endMarker=this.draw.marker(8,8,(function(e){e.circle(4).center(4,4).fill(`${t.data.color}`)})):"rect"==this.data.endMarker?this.endMarker=this.draw.marker(4,4,(function(e){e.rect(4,4).fill(`${t.data.color}`)})):"line"==this.data.endMarker?this.endMarker=this.draw.marker(2,6,(function(e){e.rect(1,6).fill(`${t.data.color}`)})):"arrow"==this.data.endMarker?this.endMarker=this.draw.marker(5,4,(function(e){e.polygon("0,0,5,2,0,4"),this.fill(`${t.data.color}`)})):"arrow1"==this.data.endMarker?this.endMarker=this.draw.marker(5,4,(function(e){e.polygon("5,0,0,2,5,4"),this.fill(`${t.data.color}`)})):this.endMarker&&(this.endMarker.remove(),this.endMarker=null),this.endMarker&&this.bs.marker("end",this.endMarker)}remove(){this.group.remove(),this.mind.contentEL.contains(this.corl1)&&this.mind.contentEL.removeChild(this.corl1),this.mind.contentEL.contains(this.corl2)&&this.mind.contentEL.removeChild(this.corl2),this.mind.contentEL.contains(this.textNode.containEl)&&this.mind.contentEL.removeChild(this.textNode.containEl)}off(){this.mind.isMobile?this.mind.draw.off("touchend",this.drawFunc2):(this.mind.draw.off("mouseup",this.drawFunc2),this.mind.draw.off("mousemove",this.drawFunc1))}offEvent(){this.corl1.removeEventListener("mousedown",this.func),this.corl2.removeEventListener("mousedown",this.func),this.corl1.removeEventListener("click",this.clickFn),this.corl2.removeEventListener("click",this.clickFn),this.mind.isMobile&&(this.corl1.removeEventListener("touchstart",this.func),this.corl2.removeEventListener("touchstart",this.func)),this.off()}calcLimit(){var t=this.startNode.getBox();if(this.startBox=t,this.startLimit={x:t.x-6,y:t.y-6,x1:t.x+t.width+6,y1:t.y+t.height+6,cx:t.width/2+t.x,cy:t.height/2+t.y},this.endNode){t=this.endNode.getBox();this.endBox=t,this.endLimit={x:t.x-6,y:t.y-6,x1:t.x+t.width+6,y1:t.y+t.height+6,cx:t.width/2+t.x,cy:t.height/2+t.y}}}active(){this.actived=!0,this.corl1.style.display="block",this.corl2.style.display="block",this.line1.show(),this.line2.show(),this.addEvent()}unactive(){this.actived=!1,this.corl1.style.display="none",this.corl2.style.display="none",this.line1.hide(),this.line2.hide(),this.offEvent()}hide(){this.unactive(),this.isShow=!1,this.textNode&&this.textNode.hide(),this.group.hide()}show(){this.isShow=!0,this.group.show()}calcDirect(){var t={x:this.startLimit.cx,y:this.startLimit.cy},e={x:this.endLimit.cx,y:this.endLimit.cy};switch(this.calcPos(t,e)){case"lefttop":this.box.x=t.x,this.box.y=this.startLimit.y;break;case"leftbottom":this.box.x=t.x,this.box.y=this.startLimit.y1;break;case"righttop":this.box.x=t.x,this.box.y=this.startLimit.y;break;case"rightbotom":this.box.x=t.x,this.box.y=this.startLimit.y1}this.calcPoint(),this.clacDD(),this.refresh()}clacDD(){this.startBox=this.startNode.getBox(),this.endBox=this.endNode.getBox(),this.data.startDirect=this.calcStroke({x:this.box.x,y:this.box.y},this.startBox),this.data.endDirect=this.calcStroke({x:this.box.x1,y:this.box.y1},this.endBox),this.data.startDx=(this.box.x-this.startBox.x)/this.startBox.width,this.data.startDy=(this.box.y-this.startBox.y)/this.startBox.height,this.data.endDx=(this.box.x1-this.endBox.x)/this.endBox.width,this.data.endDy=(this.box.y1-this.endBox.y)/this.endBox.height,this.data.gapsx=this.box.cpx1-this.startBox.x,this.data.gapsy=this.box.cpy1-this.startBox.y,this.data.gapex=this.box.cpx2-this.endBox.x,this.data.gapey=this.box.cpy2-this.endBox.y}calcPoint(){var t=this.box.x1-this.box.x,e=this.box.y1-this.box.y;this.box.cpx1=this.box.x+t/6,this.box.cpy1=this.box.y+e/6,this.box.cpx2=this.box.x+t/6*5,this.box.cpy2=this.box.y+e/6*5}calcStroke(t,e){var i="";return Math.abs(t.x-e.x+4)<=2&&(i+="left"),Math.abs(t.x-e.x-e.width-4)<=2&&(i+="right"),Math.abs(t.y-e.y+4)<=2&&(i+="top"),Math.abs(t.y-e.y-e.height-4)<=2&&(i+="bottom"),i}_update(){this.startNode&&(this.startBox=this.startNode.getBox()),this.endNode&&(this.endBox=this.endNode.getBox()),this.box.x=this.startBox.x+this.data.startDx*this.startBox.width,this.box.y=this.startBox.y+this.data.startDy*this.startBox.height,this.box.x1=this.endBox.x+this.data.endDx*this.endBox.width,this.box.y1=this.endBox.y+this.data.endDy*this.endBox.height,this.box.cpx1=this.startBox.x+this.data.gapsx,this.box.cpy1=this.startBox.y+this.data.gapsy,this.box.cpx2=this.endBox.x+this.data.gapex,this.box.cpy2=this.endBox.y+this.data.gapey}refresh(t){if(this.startNode&&this.endNode){if(!this.startNode.isShow()||!this.endNode.isShow())return void this.hide();this.show()}if(this.data.nodeHide?this.textNode.hide():this.textNode.show(),t&&this._update(),"line"==this.data.type){this.bs.plot(this.box.x,this.box.y,this.box.x1,this.box.y1);var e={x:(this.box.x+this.box.x1)/2,y:(this.box.y+this.box.y1)/2},i=this.textNode.getDomBox();this.textNode.setPosition(e.x-i.width/2,e.y-i.height/2)}else if("bs"==this.data.type){var n=`M${this.box.x} ${this.box.y}  C ${this.box.cpx1} ${this.box.cpy1}, ${this.box.cpx2} ${this.box.cpy2}, ${this.box.x1} ${this.box.y1}`;this.bs.plot(n);var r=this.bs.length();e=this.bs.pointAt(r/2),i=this.textNode.getDomBox();this.textNode.setPosition(e.x-i.width/2,e.y-i.height/2)}else{var s=function({entryPoint:t=[0,0],entryDirection:e=[0,1],entryExt:i=10,exitPoint:n=[10,10],exitDirection:r=[1,0],exitExt:s=10},o=.5){if(null===r||"0,0"==r.join()){let e=(a=n,[(h=t)[0]-a[0],h[1]-a[1]]);r=Math.abs(e[0])>Math.abs(e[1])?[e[0]/Math.abs(e[0]),0]:[0,e[1]/Math.abs(e[1])]}var a,h;let l=ne(t,re(e,i)),d=ne(n,re(r,s));r=re(r,-1);let c,u,p=[[d[0]-l[0],0],[0,d[1]-l[1]]],m=p.find((t=>se(t,e)));c=oe(m,e)>0?m:ae(p,m);let f=p.find((t=>se(t,r)));u=oe(f,r)>0?f:ae(p,f);let g=oe(c,u)>0?2:1,v=ae(p,u),y=[];if(y.push({position:t,direction:null},{position:l,direction:e}),1==g){let t=ne(l,c),e=he(c),i=ne(t,u),n=he(u);y.push({position:t,direction:e},{position:i,direction:n})}else{let t=ne(l,re(c,o)),e=he(c),i=ne(t,v),n=he(v),r=ne(i,re(u,1-o)),s=he(u);y.push({position:t,direction:e},{position:i,direction:n,type:"pathMiddleP"},{position:r,direction:s})}return y.push({position:n,direction:r}),y.filter((t=>!1!==t.direction))}({entryPoint:[this.box.x,this.box.y],exitPoint:[this.box.x1,this.box.y1],entryDirection:this.entryDirection,exitDirection:this.exitDirection,entryExt:this.entryExt,exitExt:this.exitExt}),o=[];s.forEach((t=>{o.push(t.position)})),this.data.width%2==1?o.forEach((t=>{t[0]=parseInt(t[0])+.5,t[1]=parseInt(t[1])+.5})):o.forEach((t=>{t[0]=parseInt(t[0]),t[1]=parseInt(t[1])}));var a=le(o);i=this.textNode.getDomBox();this.textNode.setPosition(a[0]-i.width/2,a[1]-i.height/2),this.bs.plot(o)}this.bs.stroke({color:this.data.color,width:this.data.width,dasharray:this.data.dashArray,linecap:"round",linejoin:"round"}).fill("none"),this.createMarker(),this.bs.attr("cursor","pointer"),this.corl1.style.left=this.box.cpx1-5+"px",this.corl1.style.top=this.box.cpy1-5+"px",this.corl2.style.left=this.box.cpx2-5+"px",this.corl2.style.top=this.box.cpy2-5+"px",this.line1.plot(this.box.x,this.box.y,this.box.cpx1,this.box.cpy1),this.line2.plot(this.box.x1,this.box.y1,this.box.cpx2,this.box.cpy2)}select(){this.isSelect=!0}unSelect(){this.isSelect=!1}calcPos(t,e){return e.x<=t.x&&e.y<=t.y?"lefttop":e.x<=t.x&&e.y>t.y?"leftbottom":e.x>t.x&&e.y<=t.y?"righttop":"rightbotom"}move(t,e){this.box.x1=t,this.box.y1=e,this.calcPoint(),this.refresh()}setEndNode(t){this.endNode=t,this.calcLimit(),this.calcDirect()}setStartPoint(t,e){if(t&&e)this.box.x=t,this.box.y=e;else{var i=this.startNode.getBox();this.box.x=i.x+i.width/2,this.box.y=i.y+i.height/2}}setEndPoint(t,e){this.box.x1=t,this.box.y1=e}setBox(t){this.box=t,this.refresh()}getData(){this.data.nodeData=this.textNode.getData();var t={startNodeId:this.startNode.getId(),endNodeId:this.endNode.getId(),...this.data,box:{...this.box}};return t.entryDirection=this.entryDirection,t.exitDirection=this.exitDirection,t.box&&t.box.data&&delete t.box.data,t}_mouseDown(t){t.preventDefault(),t.stopPropagation(),this.func1&&(this.mind.isMobile?document.removeEventListener("touchmove",this.func1,!1):document.removeEventListener("mousemove",this.func1)),this.func2&&(this.mind.isMobile?document.removeEventListener("touchend",this.func2):document.removeEventListener("mouseup",this.func2)),this.mind=this.startNode.getMind(),this.mind.isMobile?(this.sx=t.touches[0].pageX,this.sy=t.touches[0].pageY,this.pageX=t.touches[0].pageX,this.pageY=t.touches[0].pageY):(this.sx=t.pageX,this.sy=t.pageY,this.pageX=t.pageX,this.pageY=t.pageY),this.dx=0,this.dy=0,this.drag=!0,this.status="changeRelate",this.target=t.target,this.oldBox=JSON.parse(JSON.stringify({...this.box}));var e=JSON.parse(JSON.stringify(this.data));this.oldBox.data=e,this.func1=this._mouseMove.bind(this),this.func2=this._mouseUp.bind(this),this.mind.isMobile?(document.addEventListener("touchmove",this.func1,!1),document.addEventListener("touchend",this.func2)):(document.addEventListener("mousemove",this.func1),document.addEventListener("mouseup",this.func2))}_mouseUp(){this.drag=!1,this.sx=0,this.sy=0,this.dx=0,this.dy=0,this.mind=this.startNode.getMind();var t=JSON.parse(JSON.stringify({...this.box})),e=JSON.parse(JSON.stringify(this.data));t.data=e,this.mind.execute("changeRelateLink",{link:this,oldBox:this.oldBox,box:t,type:"changeRelateLinkBox"}),this.target=null,this.mind.isMobile?(document.removeEventListener("touchmove",this.func1,!1),document.removeEventListener("touchend",this.func2)):(document.removeEventListener("mousemove",this.func1),document.removeEventListener("mouseup",this.func2))}_mouseMove(t){if("addRelate"==this.status)this.mind.isMobile||this.move(t.offsetX,t.offsetY);else{if(!this.drag)return;if(this.target){if(t.preventDefault(),t.stopPropagation(),this.mind.isMobile)var e=t.touches[0].pageX,i=t.touches[0].pageY;else e=t.pageX,i=t.pageY;var n=e-this.pageX,r=i-this.pageY;this.dx=e-this.sx,this.dy=i-this.sy,this.pageX=e,this.pageY=i;var s=this.target.getAttribute("direct");if(this.calcLimit(),"start"==s){this.box.cpx1=this.oldBox.cpx1+this.dx,this.box.cpy1=this.oldBox.cpy1+this.dy;var o=this.calcStroke({x:this.box.x,y:this.box.y},this.startBox);if(this.startBox.width>400)var a=1.2;else if(this.startBox.width>200)a=1.5;else a=2;switch(o){case"left":this.entryDirection=[-1,0],this.box.y>=this.startLimit.y&&this.box.y<=this.startLimit.y1?this.box.y+=r/a:(this.box.y<this.startLimit.y&&(this.box.y=this.startLimit.y),this.box.y>this.startLimit.y1&&(this.box.y=this.startLimit.y1));break;case"right":this.entryDirection=[1,0],this.box.y>=this.startLimit.y&&this.box.y<=this.startLimit.y1?this.box.y+=r/a:(this.box.y<this.startLimit.y&&(this.box.y=this.startLimit.y),this.box.y>this.startLimit.y1&&(this.box.y=this.startLimit.y1));break;case"top":this.entryDirection=[0,-1],this.box.x>=this.startLimit.x&&this.box.x<=this.startLimit.x1?this.box.x+=n/a:(this.box.x<this.startLimit.x&&(this.box.x=this.startLimit.x),this.box.x>this.startLimit.x1&&(this.box.x=this.startLimit.x1));break;case"bottom":this.entryDirection=[0,1],this.box.x>=this.startLimit.x&&this.box.x<=this.startLimit.x1?this.box.x+=n/a:(this.box.x<this.startLimit.x&&(this.box.x=this.startLimit.x),this.box.x>this.startLimit.x1&&(this.box.x=this.startLimit.x1));break;default:this.box.x>=this.startLimit.x&&this.box.x<=this.startLimit.x1?this.box.x+=n/a:(this.box.x<this.startLimit.x&&(this.box.x=this.startLimit.x),this.box.x>this.startLimit.x1&&(this.box.x=this.startLimit.x1)),this.box.y>=this.startLimit.y&&this.box.y<=this.startLimit.y1?this.box.y+=r/a:(this.box.y<this.startLimit.y&&(this.box.y=this.startLimit.y),this.box.y>this.startLimit.y1&&(this.box.y=this.startLimit.y1))}}else{switch(this.box.cpx2=this.oldBox.cpx2+this.dx,this.box.cpy2=this.oldBox.cpy2+this.dy,o=this.calcStroke({x:this.box.x1,y:this.box.y1},this.endBox)){case"left":this.exitDirection=[-1,0],this.box.y1>=this.endLimit.y&&this.box.y1<=this.endLimit.y1?this.box.y1+=r/3:(this.box.y1<this.endLimit.y&&(this.box.y1=this.endLimit.y),this.box.y1>this.endLimit.y1&&(this.box.y1=this.endLimit.y1));break;case"right":this.exitDirection=[1,0],this.box.y1>=this.endLimit.y&&this.box.y1<=this.endLimit.y1?this.box.y1+=r/3:(this.box.y1<this.endLimit.y&&(this.box.y1=this.endLimit.y),this.box.y1>this.endLimit.y1&&(this.box.y1=this.endLimit.y1));break;case"top":this.exitDirection=[0,-1],this.box.x1>=this.endLimit.x&&this.box.x1<=this.endLimit.x1?this.box.x1+=n/3:(this.box.x1<this.endLimit.x&&(this.box.x1=this.endLimit.x),this.box.x1>this.endLimit.x1&&(this.box.x1=this.endLimit.x1));break;case"bottom":this.exitDirection=[0,1],this.box.x1>=this.endLimit.x&&this.box.x1<=this.endLimit.x1?this.box.x1+=n/3:(this.box.x1<this.endLimit.x&&(this.box.x1=this.endLimit.x),this.box.x1>this.endLimit.x1&&(this.box.x1=this.endLimit.x1));break;default:this.box.x1>=this.endLimit.x&&this.box.x1<=this.endLimit.x1?this.box.x1+=n/3:(this.box.x1<this.endLimit.x&&(this.box.x1=this.endLimit.x),this.box.x1>this.endLimit.x1&&(this.box.x1=this.endLimit.x1)),this.box.y1>=this.endLimit.y&&this.box.y1<=this.endLimit.y1?this.box.y1+=r/3:(this.box.y1<this.endLimit.y&&(this.box.y1=this.endLimit.y),this.box.y1>this.endLimit.y1&&(this.box.y1=this.endLimit.y1))}}this.clacDD(),this.refresh()}}}_clickFn(t){t.preventDefault(),t.stopPropagation()}_addEvent(){this.drawFunc1=this._mouseMove.bind(this),this.drawFunc2=this._mouseUp.bind(this),this.mind.isMobile?this.mind.draw.on("touchend",this.drawFunc2):(this.mind.draw.on("mousemove",this.drawFunc1),this.mind.draw.on("mouseup",this.drawFunc2)),this._addLineEvent()}_addLineEvent(){this.bs.off("click"),this.bs.off("dblclick");var t=this;this.bs.dblclick((()=>{this.textNode.data.text||this.textNode.data.isImageNode||(this.data.nodeHide=!1,this.startNode.mindmap.clearSelectNode(),this.startNode.mindmap.updateRelateLink(),this.textNode.edit())})),this.bs.click((e=>{e.preventDefault(),e.stopPropagation();var i=e.offsetX,n=e.offsetY;t.active(),t.mind._changeAssistItem=t,t.mind.emit("showRelateLink",{x:i,y:n,relateLink:t})}))}addEvent(){this.func=this._mouseDown.bind(this),this.clickFn=this._clickFn.bind(this),this.mind.isMobile?(this.corl1.addEventListener("touchstart",this.func),this.corl2.addEventListener("touchstart",this.func)):(this.corl1.addEventListener("mousedown",this.func),this.corl2.addEventListener("mousedown",this.func)),this.corl1.addEventListener("click",this.clickFn),this.corl2.addEventListener("click",this.clickFn)}}class ue{constructor(t,e={id:Fn(),text:"callout",nodeType:"callout",style:{"background-color":"#f06",color:"#fff","font-size":"12px"}}){this.node=t,this.data=e,e.style?this.color=e.style["background-color"]||"#f06":this.color="#f06",this.root=new ct(e,this.node.getMind()),this.root.nodeType="callout",this.group=this.node.getMind().calloutGroup,this.node.getMind().contentEL.appendChild(this.root.containEl),this.root.mind=this.node.getMind(),this.root.refreshBox(),this.node.clearCacheData(),this.node.callout=this,this.root.callout=this,this.direct=this.data.direct||"top",this.name="callout",this.init()}init(){this.calcLimit(),this.create(),this.initEvent()}off(){t.Platform.isDesktopApp?this.root.containEl.removeEventListener("mousedown",this._mouseDown):t.Platform.isMobileApp&&this.root.containEl.removeEventListener("touchstart",this._mouseDown)}remove(){this.polygon&&this.polygon.remove(),this.polygon=null}move(t,e){this.point={x:this.point.x+t,y:this.point.y+e},this.root.move(t,e),this.refresh()}calcLimit(){var t=this.node.getBox();this.limit={x:t.x,y:t.y,width:t.width,height:t.height,cx:t.x+t.width/2,cy:t.y+t.height/2,x1:t.x+t.width,y1:t.y+t.height}}beforeCreate(){!this.polygon&&(this.polygon=this.group.polygon().fill(this.color)),this.root.containEl.setAttribute("draggable",!1),this.root.containEl.classList.add("mm-node-callout")}create(){if(this.beforeCreate(),this.data.x&&this.data.y)this.root.setPosition(this.data.x,this.data.y),this.data.box&&(this.box=this.data.box);else{var t=this.root.getBox();this.root.setPosition(this.limit.x+this.limit.width/2-t.width/2,this.limit.y-t.height-10)}if(this.data.point?this.point=this.data.point:this.point={x:this.limit.cx,y:this.limit.y},!this.box){var e=this.root.getPosition();this.box={dx:(e.x-this.limit.x)/this.limit.width,dy:(e.y-this.limit.y)/this.limit.height,px:(this.point.x-this.limit.x)/this.limit.width,py:(this.point.y-this.limit.y)/this.limit.height}}this.refresh(!0)}refresh(t){if(this.polygon)if(this.node.isShow()){this.show(),this.calcLimit(),t||(this.point.x=this.box.px*this.limit.width+this.limit.x,this.point.y=this.box.py*this.limit.height+this.limit.y,this.root.setPosition(this.box.dx*this.limit.width+this.limit.x,this.box.dy*this.limit.height+this.limit.y));var e=this.root.getBox(),i=e.x+e.width/2,n=e.y+e.height/2;(this.point.x||this.point.y)&&("top"==this.direct||"bottom"==this.direct?this.polygon.plot(`${this.point.x},${this.point.y} ${i-8},${n} ${i+8},${n}`).fill(this.color):this.polygon.plot(`${this.point.x},${this.point.y} ${i},${n-8} ${i},${n+8}`).fill(this.color))}else this.hide()}hide(){this.isShow=!1,this.root.hide(),this.polygon.hide()}show(){this.isShow=!0,this.root.show(),this.polygon.show()}getData(){var t=this.root.getData();return t.point=this.point,t.box=this.box,{nodeId:this.node.getId(),rootData:t,color:this.color,direct:this.direct}}setData(t){this.color=t.color}getBox(){var t=this.polygon.bbox(),e=this.root.getBox(),i=Math.min(t.x,e.x),n=Math.min(t.y,e.y),r=Math.max(t.x2,e.x+e.width),s=Math.max(t.y2,e.y+e.height);return{x:i,y:n,x1:r,y1:s,width:r-i,height:s-n}}initEvent(){var e,i,n,r,s,o,a,h=!1;this._mouseDown=function(n){if(!this.root.isEdit){h=!0,t.Platform.isDesktopApp?(e=n.pageX,i=n.pageY,this.px=n.pageX,this.py=n.pageY):(e=n.touches[0].pageX,i=n.touches[0].pageY,this.px=e,this.py=i),a=this.root.getPosition();var r={...this.box};a.direct=this.direct,a.box=r,t.Platform.isDesktopApp?(document.addEventListener("mousemove",this._mouseMove),document.addEventListener("mouseup",this._mouseUp)):(document.addEventListener("touchmove",this._mouseMove,{passive:!1}),document.addEventListener("touchend",this._mouseUp))}}.bind(this),t.Platform.isDesktopApp?this.root.containEl.addEventListener("mousedown",this._mouseDown):this.root.containEl.addEventListener("touchstart",this._mouseDown),this._mouseMove=function(t){h&&(t.touches?(t.preventDefault(),s=t.touches[0].pageX-this.px,o=t.touches[0].pageY-this.py,n=t.touches[0].pageX-e,r=t.touches[0].pageY-i):(s=t.pageX-this.px,o=t.pageY-this.py,n=t.pageX-e,r=t.pageY-i),this.point.x<=this.limit.x||this.point.x>=this.limit.x1?this.point.y+=o/4:this.point.x+=s/4,this.point.y<=this.limit.y||this.point.y>=this.limit.y1?this.point.x+=s/4:this.point.y+=o/4,this.point.x<=this.limit.x&&(this.point.x=this.limit.x,this.direct="left"),this.point.x>=this.limit.x1&&(this.point.x=this.limit.x1,this.direct="right"),this.point.y<=this.limit.y&&(this.point.y=this.limit.y,this.direct="top"),this.point.y>=this.limit.y1&&(this.point.y=this.limit.y1,this.direct="bottom"),this.root.setPosition(a.x+n,a.y+r),this.box={dx:(a.x+n-this.limit.x)/this.limit.width,dy:(a.y+r-this.limit.y)/this.limit.height,px:(this.point.x-this.limit.x)/this.limit.width,py:(this.point.y-this.limit.y)/this.limit.height},this.refresh(!0),t.touches?(this.px=t.touches[0].pageX,this.py=t.touches[0].pageY):(this.px=t.pageX,this.py=t.pageY))}.bind(this),this._mouseUp=function(e){h=!1,this.node.clearCacheData(),this.refresh(),this.node.refreshCBox();var i=this.root.getPosition();i.box={...this.box},i.direct=this.direct,this.node.getMind().execute("movePosition",{node:this.root,oldPos:a,newPos:i}),t.Platform.isDesktopApp?(document.removeEventListener("mousemove",this._mouseMove),document.removeEventListener("mouseup",this._mouseUp)):(document.removeEventListener("touchmove",this._mouseMove,{passive:!1}),document.removeEventListener("touchend",this._mouseUp))}.bind(this)}}function pe(t){return Array.isArray?Array.isArray(t):"[object Array]"===be(t)}function me(t){return"string"==typeof t}function fe(t){return"number"==typeof t}function ge(t){return!0===t||!1===t||function(t){return ve(t)&&null!==t}(t)&&"[object Boolean]"==be(t)}function ve(t){return"object"==typeof t}function ye(t){return null!=t}function xe(t){return!t.trim().length}function be(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const we=Object.prototype.hasOwnProperty;class ke{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach((t=>{let i=_e(t);e+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,e+=i.weight})),this._keys.forEach((t=>{t.weight/=e}))}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function _e(t){let e=null,i=null,n=null,r=1;if(me(t)||pe(t))n=t,e=Ce(t),i=De(t);else{if(!we.call(t,"name"))throw new Error((t=>`Missing ${t} property in key`)("name"));const s=t.name;if(n=s,we.call(t,"weight")&&(r=t.weight,r<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(s));e=Ce(s),i=De(s)}return{path:e,id:i,weight:r,src:n}}function Ce(t){return pe(t)?t:t.split(".")}function De(t){return pe(t)?t.join("."):t}var Ee={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(t,e){let i=[],n=!1;const r=(t,e,s)=>{if(ye(t))if(e[s]){const o=t[e[s]];if(!ye(o))return;if(s===e.length-1&&(me(o)||fe(o)||ge(o)))i.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(o));else if(pe(o)){n=!0;for(let t=0,i=o.length;t<i;t+=1)r(o[t],e,s+1)}else e.length&&r(o,e,s+1)}else i.push(t)};return r(t,me(e)?e.split("."):e,0),n?i:i[0]},ignoreLocation:!1,ignoreFieldNorm:!1}};const Se=/[^ ]+/g;class Ne{constructor({getFn:t=Ee.getFn}={}){this.norm=function(t=3){const e=new Map,i=Math.pow(10,t);return{get(t){const n=t.match(Se).length;if(e.has(n))return e.get(n);const r=1/Math.sqrt(n),s=parseFloat(Math.round(r*i)/i);return e.set(n,s),s},clear(){e.clear()}}}(3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach(((t,e)=>{this._keysMap[t.id]=e}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,me(this.docs[0])?this.docs.forEach(((t,e)=>{this._addString(t,e)})):this.docs.forEach(((t,e)=>{this._addObject(t,e)})),this.norm.clear())}add(t){const e=this.size();me(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,i=this.size();e<i;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!ye(t)||xe(t))return;let i={v:t,i:e,n:this.norm.get(t)};this.records.push(i)}_addObject(t,e){let i={i:e,$:{}};this.keys.forEach(((e,n)=>{let r=this.getFn(t,e.path);if(ye(r))if(pe(r)){let t=[];const e=[{nestedArrIndex:-1,value:r}];for(;e.length;){const{nestedArrIndex:i,value:n}=e.pop();if(ye(n))if(me(n)&&!xe(n)){let e={v:n,i:i,n:this.norm.get(n)};t.push(e)}else pe(n)&&n.forEach(((t,i)=>{e.push({nestedArrIndex:i,value:t})}))}i.$[n]=t}else if(!xe(r)){let t={v:r,n:this.norm.get(r)};i.$[n]=t}})),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function Me(t,e,{getFn:i=Ee.getFn}={}){const n=new Ne({getFn:i});return n.setKeys(t.map(_e)),n.setSources(e),n.create(),n}function Ae(t,{errors:e=0,currentLocation:i=0,expectedLocation:n=0,distance:r=Ee.distance,ignoreLocation:s=Ee.ignoreLocation}={}){const o=e/t.length;if(s)return o;const a=Math.abs(n-i);return r?o+a/r:a?1:o}function Le(t,e,i,{location:n=Ee.location,distance:r=Ee.distance,threshold:s=Ee.threshold,findAllMatches:o=Ee.findAllMatches,minMatchCharLength:a=Ee.minMatchCharLength,includeMatches:h=Ee.includeMatches,ignoreLocation:l=Ee.ignoreLocation}={}){if(e.length>32)throw new Error(`Pattern length exceeds max of ${32}.`);const d=e.length,c=t.length,u=Math.max(0,Math.min(n,c));let p=s,m=u;const f=a>1||h,g=f?Array(c):[];let v;for(;(v=t.indexOf(e,m))>-1;){let t=Ae(e,{currentLocation:v,expectedLocation:u,distance:r,ignoreLocation:l});if(p=Math.min(t,p),m=v+d,f){let t=0;for(;t<d;)g[v+t]=1,t+=1}}m=-1;let y=[],x=1,b=d+c;const w=1<<d-1;for(let n=0;n<d;n+=1){let s=0,a=b;for(;s<a;){Ae(e,{errors:n,currentLocation:u+a,expectedLocation:u,distance:r,ignoreLocation:l})<=p?s=a:b=a,a=Math.floor((b-s)/2+s)}b=a;let h=Math.max(1,u-a+1),v=o?c:Math.min(u+a,c)+d,k=Array(v+2);k[v+1]=(1<<n)-1;for(let s=v;s>=h;s-=1){let o=s-1,a=i[t.charAt(o)];if(f&&(g[o]=+!!a),k[s]=(k[s+1]<<1|1)&a,n&&(k[s]|=(y[s+1]|y[s])<<1|1|y[s+1]),k[s]&w&&(x=Ae(e,{errors:n,currentLocation:o,expectedLocation:u,distance:r,ignoreLocation:l}),x<=p)){if(p=x,m=o,m<=u)break;h=Math.max(1,2*u-m)}}if(Ae(e,{errors:n+1,currentLocation:u,expectedLocation:u,distance:r,ignoreLocation:l})>p)break;y=k}const k={isMatch:m>=0,score:Math.max(.001,x)};if(f){const t=function(t=[],e=Ee.minMatchCharLength){let i=[],n=-1,r=-1,s=0;for(let o=t.length;s<o;s+=1){let o=t[s];o&&-1===n?n=s:o||-1===n||(r=s-1,r-n+1>=e&&i.push([n,r]),n=-1)}return t[s-1]&&s-n>=e&&i.push([n,s-1]),i}(g,a);t.length?h&&(k.indices=t):k.isMatch=!1}return k}function Te(t){let e={};for(let i=0,n=t.length;i<n;i+=1){const r=t.charAt(i);e[r]=(e[r]||0)|1<<n-i-1}return e}class Pe{constructor(t,{location:e=Ee.location,threshold:i=Ee.threshold,distance:n=Ee.distance,includeMatches:r=Ee.includeMatches,findAllMatches:s=Ee.findAllMatches,minMatchCharLength:o=Ee.minMatchCharLength,isCaseSensitive:a=Ee.isCaseSensitive,ignoreLocation:h=Ee.ignoreLocation}={}){if(this.options={location:e,threshold:i,distance:n,includeMatches:r,findAllMatches:s,minMatchCharLength:o,isCaseSensitive:a,ignoreLocation:h},this.pattern=a?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(t,e)=>{this.chunks.push({pattern:t,alphabet:Te(t),startIndex:e})},d=this.pattern.length;if(d>32){let t=0;const e=d%32,i=d-e;for(;t<i;)l(this.pattern.substr(t,32),t),t+=32;if(e){const t=d-32;l(this.pattern.substr(t),t)}}else l(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:i}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let e={isMatch:!0,score:0};return i&&(e.indices=[[0,t.length-1]]),e}const{location:n,distance:r,threshold:s,findAllMatches:o,minMatchCharLength:a,ignoreLocation:h}=this.options;let l=[],d=0,c=!1;this.chunks.forEach((({pattern:e,alphabet:u,startIndex:p})=>{const{isMatch:m,score:f,indices:g}=Le(t,e,u,{location:n+p,distance:r,threshold:s,findAllMatches:o,minMatchCharLength:a,includeMatches:i,ignoreLocation:h});m&&(c=!0),d+=f,m&&g&&(l=[...l,...g])}));let u={isMatch:c,score:c?d/this.chunks.length:1};return c&&i&&(u.indices=l),u}}class Ie{constructor(t){this.pattern=t}static isMultiMatch(t){return Be(t,this.multiRegex)}static isSingleMatch(t){return Be(t,this.singleRegex)}search(){}}function Be(t,e){const i=t.match(e);return i?i[1]:null}class Oe extends Ie{constructor(t,{location:e=Ee.location,threshold:i=Ee.threshold,distance:n=Ee.distance,includeMatches:r=Ee.includeMatches,findAllMatches:s=Ee.findAllMatches,minMatchCharLength:o=Ee.minMatchCharLength,isCaseSensitive:a=Ee.isCaseSensitive,ignoreLocation:h=Ee.ignoreLocation}={}){super(t),this._bitapSearch=new Pe(t,{location:e,threshold:i,distance:n,includeMatches:r,findAllMatches:s,minMatchCharLength:o,isCaseSensitive:a,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Re extends Ie{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,i=0;const n=[],r=this.pattern.length;for(;(e=t.indexOf(this.pattern,i))>-1;)i=e+r,n.push([e,i-1]);const s=!!n.length;return{isMatch:s,score:s?0:1,indices:n}}}const Fe=[class extends Ie{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},Re,class extends Ie{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends Ie{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends Ie{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends Ie{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends Ie{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},Oe],ze=Fe.length,qe=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;const je=new Set([Oe.type,Re.type]);class He{constructor(t,{isCaseSensitive:e=Ee.isCaseSensitive,includeMatches:i=Ee.includeMatches,minMatchCharLength:n=Ee.minMatchCharLength,ignoreLocation:r=Ee.ignoreLocation,findAllMatches:s=Ee.findAllMatches,location:o=Ee.location,threshold:a=Ee.threshold,distance:h=Ee.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:i,minMatchCharLength:n,findAllMatches:s,ignoreLocation:r,location:o,threshold:a,distance:h},this.pattern=e?t:t.toLowerCase(),this.query=function(t,e={}){return t.split("|").map((t=>{let i=t.trim().split(qe).filter((t=>t&&!!t.trim())),n=[];for(let t=0,r=i.length;t<r;t+=1){const r=i[t];let s=!1,o=-1;for(;!s&&++o<ze;){const t=Fe[o];let i=t.isMultiMatch(r);i&&(n.push(new t(i,e)),s=!0)}if(!s)for(o=-1;++o<ze;){const t=Fe[o];let i=t.isSingleMatch(r);if(i){n.push(new t(i,e));break}}}return n}))}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:n}=this.options;t=n?t:t.toLowerCase();let r=0,s=[],o=0;for(let n=0,a=e.length;n<a;n+=1){const a=e[n];s.length=0,r=0;for(let e=0,n=a.length;e<n;e+=1){const n=a[e],{isMatch:h,indices:l,score:d}=n.search(t);if(!h){o=0,r=0,s.length=0;break}if(r+=1,o+=d,i){const t=n.constructor.type;je.has(t)?s=[...s,...l]:s.push(l)}}if(r){let t={isMatch:!0,score:o/r};return i&&(t.indices=s),t}}return{isMatch:!1,score:1}}}const $e=[];function We(t,e){for(let i=0,n=$e.length;i<n;i+=1){let n=$e[i];if(n.condition(t,e))return new n(t,e)}return new Pe(t,e)}const Ue="$and",Ve="$or",Ge="$path",Xe="$val",Ye=t=>!(!t[Ue]&&!t[Ve]),Ze=t=>({[Ue]:Object.keys(t).map((e=>({[e]:t[e]})))});function Je(t,e,{auto:i=!0}={}){const n=t=>{let r=Object.keys(t);const s=(t=>!!t[Ge])(t);if(!s&&r.length>1&&!Ye(t))return n(Ze(t));if((t=>!pe(t)&&ve(t)&&!Ye(t))(t)){const n=s?t[Ge]:r[0],o=s?t[Xe]:t[n];if(!me(o))throw new Error((t=>`Invalid value for key ${t}`)(n));const a={keyId:De(n),pattern:o};return i&&(a.searcher=We(o,e)),a}let o={children:[],operator:r[0]};return r.forEach((e=>{const i=t[e];pe(i)&&i.forEach((t=>{o.children.push(n(t))}))})),o};return Ye(t)||(t=Ze(t)),n(t)}function Ke(t,e){const i=t.matches;e.matches=[],ye(i)&&i.forEach((t=>{if(!ye(t.indices)||!t.indices.length)return;const{indices:i,value:n}=t;let r={indices:i,value:n};t.key&&(r.key=t.key.src),t.idx>-1&&(r.refIndex=t.idx),e.matches.push(r)}))}function Qe(t,e){e.score=t.score}class ti{constructor(t,e={},i){this.options={...Ee,...e},this.options.useExtendedSearch,this._keyStore=new ke(this.options.keys),this.setCollection(t,i)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof Ne))throw new Error("Incorrect 'index' type");this._myIndex=e||Me(this.options.keys,this._docs,{getFn:this.options.getFn})}add(t){ye(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=(()=>!1)){const e=[];for(let i=0,n=this._docs.length;i<n;i+=1){const r=this._docs[i];t(r,i)&&(this.removeAt(i),i-=1,n-=1,e.push(r))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:i,includeScore:n,shouldSort:r,sortFn:s,ignoreFieldNorm:o}=this.options;let a=me(t)?me(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=Ee.ignoreFieldNorm}){t.forEach((t=>{let i=1;t.matches.forEach((({key:t,norm:n,score:r})=>{const s=t?t.weight:null;i*=Math.pow(0===r&&s?Number.EPSILON:r,(s||1)*(e?1:n))})),t.score=i}))}(a,{ignoreFieldNorm:o}),r&&a.sort(s),fe(e)&&e>-1&&(a=a.slice(0,e)),function(t,e,{includeMatches:i=Ee.includeMatches,includeScore:n=Ee.includeScore}={}){const r=[];return i&&r.push(Ke),n&&r.push(Qe),t.map((t=>{const{idx:i}=t,n={item:e[i],refIndex:i};return r.length&&r.forEach((e=>{e(t,n)})),n}))}(a,this._docs,{includeMatches:i,includeScore:n})}_searchStringList(t){const e=We(t,this.options),{records:i}=this._myIndex,n=[];return i.forEach((({v:t,i:i,n:r})=>{if(!ye(t))return;const{isMatch:s,score:o,indices:a}=e.searchIn(t);s&&n.push({item:t,idx:i,matches:[{score:o,value:t,norm:r,indices:a}]})})),n}_searchLogical(t){const e=Je(t,this.options),i=(t,e,n)=>{if(!t.children){const{keyId:i,searcher:r}=t,s=this._findMatches({key:this._keyStore.get(i),value:this._myIndex.getValueForItemAtKeyId(e,i),searcher:r});return s&&s.length?[{idx:n,item:e,matches:s}]:[]}switch(t.operator){case Ue:{const r=[];for(let s=0,o=t.children.length;s<o;s+=1){const o=t.children[s],a=i(o,e,n);if(!a.length)return[];r.push(...a)}return r}case Ve:{const r=[];for(let s=0,o=t.children.length;s<o;s+=1){const o=t.children[s],a=i(o,e,n);if(a.length){r.push(...a);break}}return r}}},n=this._myIndex.records,r={},s=[];return n.forEach((({$:t,i:n})=>{if(ye(t)){let o=i(e,t,n);o.length&&(r[n]||(r[n]={idx:n,item:t,matches:[]},s.push(r[n])),o.forEach((({matches:t})=>{r[n].matches.push(...t)})))}})),s}_searchObjectList(t){const e=We(t,this.options),{keys:i,records:n}=this._myIndex,r=[];return n.forEach((({$:t,i:n})=>{if(!ye(t))return;let s=[];i.forEach(((i,n)=>{s.push(...this._findMatches({key:i,value:t[n],searcher:e}))})),s.length&&r.push({idx:n,item:t,matches:s})})),r}_findMatches({key:t,value:e,searcher:i}){if(!ye(e))return[];let n=[];if(pe(e))e.forEach((({v:e,i:r,n:s})=>{if(!ye(e))return;const{isMatch:o,score:a,indices:h}=i.searchIn(e);o&&n.push({score:a,key:t,value:e,idx:r,norm:s,indices:h})}));else{const{v:r,n:s}=e,{isMatch:o,score:a,indices:h}=i.searchIn(r);o&&n.push({score:a,key:t,value:r,norm:s,indices:h})}return n}}ti.version="6.4.6",ti.createIndex=Me,ti.parseIndex=function(t,{getFn:e=Ee.getFn}={}){const{keys:i,records:n}=t,r=new Ne({getFn:e});return r.setKeys(i),r.setIndexRecords(n),r},ti.config=Ee,ti.parseQuery=Je,function(...t){$e.push(...t)}(He);
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */
var ei=mt((function(t){!function(e,i){t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}}("undefined"!=typeof window?window:pt,(function(t,e){var i=[],n=Object.getPrototypeOf,r=i.slice,s=function(t){return i.concat.apply([],t)},o=i.push,a=i.indexOf,h={},l=h.toString,d=h.hasOwnProperty,c=d.toString,u=c.call(Object),p={},m=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},f=function(t){return null!=t&&t===t.window},g=t.document,v={type:!0,src:!0,nonce:!0,noModule:!0};function y(t,e,i){var n,r,s=(i=i||g).createElement("script");if(s.text=t,e)for(n in v)(r=e[n]||e.getAttribute&&e.getAttribute(n))&&s.setAttribute(n,r);i.head.appendChild(s).parentNode.removeChild(s)}function x(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[l.call(t)]||"object":typeof t}var b="3.6.0",w=function(t,e){return new w.fn.init(t,e)};function k(t){var e=!!t&&"length"in t&&t.length,i=x(t);return!m(t)&&!f(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}w.fn=w.prototype={jquery:b,constructor:w,length:0,toArray:function(){return r.call(this)},get:function(t){return null==t?r.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=w.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return w.each(this,t)},map:function(t){return this.pushStack(w.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(w.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:i.sort,splice:i.splice},w.extend=w.fn.extend=function(){var t,e,i,n,r,s,o=arguments[0]||{},a=1,h=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||m(o)||(o={}),a===h&&(o=this,a--);a<h;a++)if(null!=(t=arguments[a]))for(e in t)n=t[e],"__proto__"!==e&&o!==n&&(l&&n&&(w.isPlainObject(n)||(r=Array.isArray(n)))?(i=o[e],s=r&&!Array.isArray(i)?[]:r||w.isPlainObject(i)?i:{},r=!1,o[e]=w.extend(l,s,n)):void 0!==n&&(o[e]=n));return o},w.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==l.call(t))&&(!(e=n(t))||"function"==typeof(i=d.call(e,"constructor")&&e.constructor)&&c.call(i)===u)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,i){y(t,{nonce:e&&e.nonce},i)},each:function(t,e){var i,n=0;if(k(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},makeArray:function(t,e){var i=e||[];return null!=t&&(k(Object(t))?w.merge(i,"string"==typeof t?[t]:t):o.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:a.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,s=t.length,o=!i;r<s;r++)!e(t[r],r)!==o&&n.push(t[r]);return n},map:function(t,e,i){var n,r,o=0,a=[];if(k(t))for(n=t.length;o<n;o++)null!=(r=e(t[o],o,i))&&a.push(r);else for(o in t)null!=(r=e(t[o],o,i))&&a.push(r);return s(a)},guid:1,support:p}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=i[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var _=
/*!
 * Sizzle CSS Selector Engine v2.3.6
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2021-02-16
 */
function(t){var e,i,n,r,s,o,a,h,l,d,c,u,p,m,f,g,v,y,x,b="sizzle"+1*new Date,w=t.document,k=0,_=0,C=ht(),D=ht(),E=ht(),S=ht(),N=function(t,e){return t===e&&(c=!0),0},M={}.hasOwnProperty,A=[],L=A.pop,T=A.push,P=A.push,I=A.slice,B=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",z="\\[[\\x20\\t\\r\\n\\f]*("+F+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+R+"*\\]",q=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",j=new RegExp(R+"+","g"),H=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),$=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),W=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),U=new RegExp(R+"|>"),V=new RegExp(q),G=new RegExp("^"+F+"$"),X={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),it=function(t,e){var i="0x"+t.slice(1)-65536;return e||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},nt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},st=function(){u()},ot=bt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{P.apply(A=I.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(t){P={apply:A.length?function(t,e){T.apply(t,I.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function at(t,e,n,r){var s,a,l,d,c,m,v,y=e&&e.ownerDocument,w=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==w&&9!==w&&11!==w)return n;if(!r&&(u(e),e=e||p,f)){if(11!==w&&(c=Q.exec(t)))if(s=c[1]){if(9===w){if(!(l=e.getElementById(s)))return n;if(l.id===s)return n.push(l),n}else if(y&&(l=y.getElementById(s))&&x(e,l)&&l.id===s)return n.push(l),n}else{if(c[2])return P.apply(n,e.getElementsByTagName(t)),n;if((s=c[3])&&i.getElementsByClassName&&e.getElementsByClassName)return P.apply(n,e.getElementsByClassName(s)),n}if(i.qsa&&!S[t+" "]&&(!g||!g.test(t))&&(1!==w||"object"!==e.nodeName.toLowerCase())){if(v=t,y=e,1===w&&(U.test(t)||W.test(t))){for((y=tt.test(t)&&vt(e.parentNode)||e)===e&&i.scope||((d=e.getAttribute("id"))?d=d.replace(nt,rt):e.setAttribute("id",d=b)),a=(m=o(t)).length;a--;)m[a]=(d?"#"+d:":scope")+" "+xt(m[a]);v=m.join(",")}try{return P.apply(n,y.querySelectorAll(v)),n}catch(e){S(t,!0)}finally{d===b&&e.removeAttribute("id")}}}return h(t.replace(H,"$1"),e,n,r)}function ht(){var t=[];return function e(i,r){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=r}}function lt(t){return t[b]=!0,t}function dt(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var i=t.split("|"),r=i.length;r--;)n.attrHandle[i[r]]=e}function ut(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function mt(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function ft(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ot(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function gt(t){return lt((function(e){return e=+e,lt((function(i,n){for(var r,s=t([],i.length,e),o=s.length;o--;)i[r=s[o]]&&(i[r]=!(n[r]=i[r]))}))}))}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in i=at.support={},s=at.isXML=function(t){var e=t&&t.namespaceURI,i=t&&(t.ownerDocument||t).documentElement;return!Y.test(e||i&&i.nodeName||"HTML")},u=at.setDocument=function(t){var e,r,o=t?t.ownerDocument||t:w;return o!=p&&9===o.nodeType&&o.documentElement?(m=(p=o).documentElement,f=!s(p),w!=p&&(r=p.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",st,!1):r.attachEvent&&r.attachEvent("onunload",st)),i.scope=dt((function(t){return m.appendChild(t).appendChild(p.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),i.attributes=dt((function(t){return t.className="i",!t.getAttribute("className")})),i.getElementsByTagName=dt((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),i.getElementsByClassName=K.test(p.getElementsByClassName),i.getById=dt((function(t){return m.appendChild(t).id=b,!p.getElementsByName||!p.getElementsByName(b).length})),i.getById?(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){return t.getAttribute("id")===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var i=e.getElementById(t);return i?[i]:[]}}):(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var i,n,r,s=e.getElementById(t);if(s){if((i=s.getAttributeNode("id"))&&i.value===t)return[s];for(r=e.getElementsByName(t),n=0;s=r[n++];)if((i=s.getAttributeNode("id"))&&i.value===t)return[s]}return[]}}),n.find.TAG=i.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;i=s[r++];)1===i.nodeType&&n.push(i);return n}return s},n.find.CLASS=i.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&f)return e.getElementsByClassName(t)},v=[],g=[],(i.qsa=K.test(p.querySelectorAll))&&(dt((function(t){var e;m.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+O+")"),t.querySelectorAll("[id~="+b+"-]").length||g.push("~="),(e=p.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||g.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||g.push(".#.+[+~]"),t.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),dt((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),m.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")}))),(i.matchesSelector=K.test(y=m.matches||m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&dt((function(t){i.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",q)})),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),e=K.test(m.compareDocumentPosition),x=e||K.test(m.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},N=e?function(t,e){if(t===e)return c=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===n?t==p||t.ownerDocument==w&&x(w,t)?-1:e==p||e.ownerDocument==w&&x(w,e)?1:d?B(d,t)-B(d,e):0:4&n?-1:1)}:function(t,e){if(t===e)return c=!0,0;var i,n=0,r=t.parentNode,s=e.parentNode,o=[t],a=[e];if(!r||!s)return t==p?-1:e==p?1:r?-1:s?1:d?B(d,t)-B(d,e):0;if(r===s)return ut(t,e);for(i=t;i=i.parentNode;)o.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;o[n]===a[n];)n++;return n?ut(o[n],a[n]):o[n]==w?-1:a[n]==w?1:0},p):p},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if(u(t),i.matchesSelector&&f&&!S[e+" "]&&(!v||!v.test(e))&&(!g||!g.test(e)))try{var n=y.call(t,e);if(n||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){S(e,!0)}return at(e,p,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!=p&&u(t),x(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!=p&&u(t);var r=n.attrHandle[e.toLowerCase()],s=r&&M.call(n.attrHandle,e.toLowerCase())?r(t,e,!f):void 0;return void 0!==s?s:i.attributes||!f?t.getAttribute(e):(s=t.getAttributeNode(e))&&s.specified?s.value:null},at.escape=function(t){return(t+"").replace(nt,rt)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,n=[],r=0,s=0;if(c=!i.detectDuplicates,d=!i.sortStable&&t.slice(0),t.sort(N),c){for(;e=t[s++];)e===t[s]&&(r=n.push(s));for(;r--;)t.splice(n[r],1)}return d=null,t},r=at.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=r(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=r(e);return i},(n=at.selectors={cacheLength:50,createPseudo:lt,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,it),t[3]=(t[3]||t[4]||t[5]||"").replace(et,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return X.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&V.test(i)&&(e=o(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=C[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+R+"|$)"))&&C(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,i){return function(n){var r=at.attr(n,t);return null==r?"!="===e:!e||(r+="","="===e?r===i:"!="===e?r!==i:"^="===e?i&&0===r.indexOf(i):"*="===e?i&&r.indexOf(i)>-1:"$="===e?i&&r.slice(-i.length)===i:"~="===e?(" "+r.replace(j," ")+" ").indexOf(i)>-1:"|="===e&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,h){var l,d,c,u,p,m,f=s!==o?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!h&&!a,x=!1;if(g){if(s){for(;f;){for(u=e;u=u[f];)if(a?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;m=f="only"===t&&!m&&"nextSibling"}return!0}if(m=[o?g.firstChild:g.lastChild],o&&y){for(x=(p=(l=(d=(c=(u=g)[b]||(u[b]={}))[u.uniqueID]||(c[u.uniqueID]={}))[t]||[])[0]===k&&l[1])&&l[2],u=p&&g.childNodes[p];u=++p&&u&&u[f]||(x=p=0)||m.pop();)if(1===u.nodeType&&++x&&u===e){d[t]=[k,p,x];break}}else if(y&&(x=p=(l=(d=(c=(u=e)[b]||(u[b]={}))[u.uniqueID]||(c[u.uniqueID]={}))[t]||[])[0]===k&&l[1]),!1===x)for(;(u=++p&&u&&u[f]||(x=p=0)||m.pop())&&((a?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++x||(y&&((d=(c=u[b]||(u[b]={}))[u.uniqueID]||(c[u.uniqueID]={}))[t]=[k,x]),u!==e)););return(x-=r)===n||x%n==0&&x/n>=0}}},PSEUDO:function(t,e){var i,r=n.pseudos[t]||n.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return r[b]?r(e):r.length>1?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?lt((function(t,i){for(var n,s=r(t,e),o=s.length;o--;)t[n=B(t,s[o])]=!(i[n]=s[o])})):function(t){return r(t,0,i)}):r}},pseudos:{not:lt((function(t){var e=[],i=[],n=a(t.replace(H,"$1"));return n[b]?lt((function(t,e,i,r){for(var s,o=n(t,null,r,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))})):function(t,r,s){return e[0]=t,n(e,null,s,i),e[0]=null,!i.pop()}})),has:lt((function(t){return function(e){return at(t,e).length>0}})),contains:lt((function(t){return t=t.replace(et,it),function(e){return(e.textContent||r(e)).indexOf(t)>-1}})),lang:lt((function(t){return G.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,it).toLowerCase(),function(e){var i;do{if(i=f?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===m},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ft(!1),disabled:ft(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return J.test(t.nodeName)},input:function(t){return Z.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt((function(){return[0]})),last:gt((function(t,e){return[e-1]})),eq:gt((function(t,e,i){return[i<0?i+e:i]})),even:gt((function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t})),odd:gt((function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t})),lt:gt((function(t,e,i){for(var n=i<0?i+e:i>e?e:i;--n>=0;)t.push(n);return t})),gt:gt((function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t}))}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=mt(e);function yt(){}function xt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function bt(t,e,i){var n=e.dir,r=e.next,s=r||n,o=i&&"parentNode"===s,a=_++;return e.first?function(e,i,r){for(;e=e[n];)if(1===e.nodeType||o)return t(e,i,r);return!1}:function(e,i,h){var l,d,c,u=[k,a];if(h){for(;e=e[n];)if((1===e.nodeType||o)&&t(e,i,h))return!0}else for(;e=e[n];)if(1===e.nodeType||o)if(d=(c=e[b]||(e[b]={}))[e.uniqueID]||(c[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[n]||e;else{if((l=d[s])&&l[0]===k&&l[1]===a)return u[2]=l[2];if(d[s]=u,u[2]=t(e,i,h))return!0}return!1}}function wt(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function kt(t,e,i,n,r){for(var s,o=[],a=0,h=t.length,l=null!=e;a<h;a++)(s=t[a])&&(i&&!i(s,n,r)||(o.push(s),l&&e.push(a)));return o}function _t(t,e,i,n,r,s){return n&&!n[b]&&(n=_t(n)),r&&!r[b]&&(r=_t(r,s)),lt((function(s,o,a,h){var l,d,c,u=[],p=[],m=o.length,f=s||function(t,e,i){for(var n=0,r=e.length;n<r;n++)at(t,e[n],i);return i}(e||"*",a.nodeType?[a]:a,[]),g=!t||!s&&e?f:kt(f,u,t,a,h),v=i?r||(s?t:m||n)?[]:o:g;if(i&&i(g,v,a,h),n)for(l=kt(v,p),n(l,[],a,h),d=l.length;d--;)(c=l[d])&&(v[p[d]]=!(g[p[d]]=c));if(s){if(r||t){if(r){for(l=[],d=v.length;d--;)(c=v[d])&&l.push(g[d]=c);r(null,v=[],l,h)}for(d=v.length;d--;)(c=v[d])&&(l=r?B(s,c):u[d])>-1&&(s[l]=!(o[l]=c))}}else v=kt(v===o?v.splice(m,v.length):v),r?r(null,o,v,h):P.apply(o,v)}))}function Ct(t){for(var e,i,r,s=t.length,o=n.relative[t[0].type],a=o||n.relative[" "],h=o?1:0,d=bt((function(t){return t===e}),a,!0),c=bt((function(t){return B(e,t)>-1}),a,!0),u=[function(t,i,n){var r=!o&&(n||i!==l)||((e=i).nodeType?d(t,i,n):c(t,i,n));return e=null,r}];h<s;h++)if(i=n.relative[t[h].type])u=[bt(wt(u),i)];else{if((i=n.filter[t[h].type].apply(null,t[h].matches))[b]){for(r=++h;r<s&&!n.relative[t[r].type];r++);return _t(h>1&&wt(u),h>1&&xt(t.slice(0,h-1).concat({value:" "===t[h-2].type?"*":""})).replace(H,"$1"),i,h<r&&Ct(t.slice(h,r)),r<s&&Ct(t=t.slice(r)),r<s&&xt(t))}u.push(i)}return wt(u)}return yt.prototype=n.filters=n.pseudos,n.setFilters=new yt,o=at.tokenize=function(t,e){var i,r,s,o,a,h,l,d=D[t+" "];if(d)return e?0:d.slice(0);for(a=t,h=[],l=n.preFilter;a;){for(o in i&&!(r=$.exec(a))||(r&&(a=a.slice(r[0].length)||a),h.push(s=[])),i=!1,(r=W.exec(a))&&(i=r.shift(),s.push({value:i,type:r[0].replace(H," ")}),a=a.slice(i.length)),n.filter)!(r=X[o].exec(a))||l[o]&&!(r=l[o](r))||(i=r.shift(),s.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return e?a.length:a?at.error(t):D(t,h).slice(0)},a=at.compile=function(t,e){var i,r=[],s=[],a=E[t+" "];if(!a){for(e||(e=o(t)),i=e.length;i--;)(a=Ct(e[i]))[b]?r.push(a):s.push(a);(a=E(t,function(t,e){var i=e.length>0,r=t.length>0,s=function(s,o,a,h,d){var c,m,g,v=0,y="0",x=s&&[],b=[],w=l,_=s||r&&n.find.TAG("*",d),C=k+=null==w?1:Math.random()||.1,D=_.length;for(d&&(l=o==p||o||d);y!==D&&null!=(c=_[y]);y++){if(r&&c){for(m=0,o||c.ownerDocument==p||(u(c),a=!f);g=t[m++];)if(g(c,o||p,a)){h.push(c);break}d&&(k=C)}i&&((c=!g&&c)&&v--,s&&x.push(c))}if(v+=y,i&&y!==v){for(m=0;g=e[m++];)g(x,b,o,a);if(s){if(v>0)for(;y--;)x[y]||b[y]||(b[y]=L.call(h));b=kt(b)}P.apply(h,b),d&&!s&&b.length>0&&v+e.length>1&&at.uniqueSort(h)}return d&&(k=C,l=w),x};return i?lt(s):s}(s,r))).selector=t}return a},h=at.select=function(t,e,i,r){var s,h,l,d,c,u="function"==typeof t&&t,p=!r&&o(t=u.selector||t);if(i=i||[],1===p.length){if((h=p[0]=p[0].slice(0)).length>2&&"ID"===(l=h[0]).type&&9===e.nodeType&&f&&n.relative[h[1].type]){if(!(e=(n.find.ID(l.matches[0].replace(et,it),e)||[])[0]))return i;u&&(e=e.parentNode),t=t.slice(h.shift().value.length)}for(s=X.needsContext.test(t)?0:h.length;s--&&(l=h[s],!n.relative[d=l.type]);)if((c=n.find[d])&&(r=c(l.matches[0].replace(et,it),tt.test(h[0].type)&&vt(e.parentNode)||e))){if(h.splice(s,1),!(t=r.length&&xt(h)))return P.apply(i,r),i;break}}return(u||a(t,p))(r,e,!f,i,!e||tt.test(t)&&vt(e.parentNode)||e),i},i.sortStable=b.split("").sort(N).join("")===b,i.detectDuplicates=!!c,u(),i.sortDetached=dt((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),dt((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ct("type|href|height|width",(function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),i.attributes&&dt((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ct("value",(function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),dt((function(t){return null==t.getAttribute("disabled")}))||ct(O,(function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null})),at}(t);w.find=_,w.expr=_.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=_.uniqueSort,w.text=_.getText,w.isXMLDoc=_.isXML,w.contains=_.contains,w.escapeSelector=_.escape;var C=function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&w(t).is(i))break;n.push(t)}return n},D=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},E=w.expr.match.needsContext;function S(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(t,e,i){return m(e)?w.grep(t,(function(t,n){return!!e.call(t,n,t)!==i})):e.nodeType?w.grep(t,(function(t){return t===e!==i})):"string"!=typeof e?w.grep(t,(function(t){return a.call(e,t)>-1!==i})):w.filter(e,t,i)}w.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?w.find.matchesSelector(n,t)?[n]:[]:w.find.matches(t,w.grep(e,(function(t){return 1===t.nodeType})))},w.fn.extend({find:function(t){var e,i,n=this.length,r=this;if("string"!=typeof t)return this.pushStack(w(t).filter((function(){for(e=0;e<n;e++)if(w.contains(r[e],this))return!0})));for(i=this.pushStack([]),e=0;e<n;e++)w.find(t,r[e],i);return n>1?w.uniqueSort(i):i},filter:function(t){return this.pushStack(M(this,t||[],!1))},not:function(t){return this.pushStack(M(this,t||[],!0))},is:function(t){return!!M(this,"string"==typeof t&&E.test(t)?w(t):t||[],!1).length}});var A,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(t,e,i){var n,r;if(!t)return this;if(i=i||A,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:L.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof w?e[0]:e,w.merge(this,w.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:g,!0)),N.test(n[1])&&w.isPlainObject(e))for(n in e)m(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(r=g.getElementById(n[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?void 0!==i.ready?i.ready(t):t(w):w.makeArray(t,this)}).prototype=w.fn,A=w(g);var T=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function I(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.fn.extend({has:function(t){var e=w(t,this),i=e.length;return this.filter((function(){for(var t=0;t<i;t++)if(w.contains(this,e[t]))return!0}))},closest:function(t,e){var i,n=0,r=this.length,s=[],o="string"!=typeof t&&w(t);if(!E.test(t))for(;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&w.find.matchesSelector(i,t))){s.push(i);break}return this.pushStack(s.length>1?w.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?a.call(w(t),this[0]):a.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return C(t,"parentNode")},parentsUntil:function(t,e,i){return C(t,"parentNode",i)},next:function(t){return I(t,"nextSibling")},prev:function(t){return I(t,"previousSibling")},nextAll:function(t){return C(t,"nextSibling")},prevAll:function(t){return C(t,"previousSibling")},nextUntil:function(t,e,i){return C(t,"nextSibling",i)},prevUntil:function(t,e,i){return C(t,"previousSibling",i)},siblings:function(t){return D((t.parentNode||{}).firstChild,t)},children:function(t){return D(t.firstChild)},contents:function(t){return null!=t.contentDocument&&n(t.contentDocument)?t.contentDocument:(S(t,"template")&&(t=t.content||t),w.merge([],t.childNodes))}},(function(t,e){w.fn[t]=function(i,n){var r=w.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=w.filter(n,r)),this.length>1&&(P[t]||w.uniqueSort(r),T.test(t)&&r.reverse()),this.pushStack(r)}}));var B=/[^\x20\t\r\n\f]+/g;function O(t){return t}function R(t){throw t}function F(t,e,i,n){var r;try{t&&m(r=t.promise)?r.call(t).done(e).fail(i):t&&m(r=t.then)?r.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}w.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return w.each(t.match(B)||[],(function(t,i){e[i]=!0})),e}(t):w.extend({},t);var e,i,n,r,s=[],o=[],a=-1,h=function(){for(r=r||t.once,n=e=!0;o.length;a=-1)for(i=o.shift();++a<s.length;)!1===s[a].apply(i[0],i[1])&&t.stopOnFalse&&(a=s.length,i=!1);t.memory||(i=!1),e=!1,r&&(s=i?[]:"")},l={add:function(){return s&&(i&&!e&&(a=s.length-1,o.push(i)),function e(i){w.each(i,(function(i,n){m(n)?t.unique&&l.has(n)||s.push(n):n&&n.length&&"string"!==x(n)&&e(n)}))}(arguments),i&&!e&&h()),this},remove:function(){return w.each(arguments,(function(t,e){for(var i;(i=w.inArray(e,s,i))>-1;)s.splice(i,1),i<=a&&a--})),this},has:function(t){return t?w.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=o=[],s=i="",this},disabled:function(){return!s},lock:function(){return r=o=[],i||e||(s=i=""),this},locked:function(){return!!r},fireWith:function(t,i){return r||(i=[t,(i=i||[]).slice?i.slice():i],o.push(i),e||h()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!n}};return l},w.extend({Deferred:function(e){var i=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return w.Deferred((function(e){w.each(i,(function(i,n){var r=m(t[n[4]])&&t[n[4]];s[n[1]]((function(){var t=r&&r.apply(this,arguments);t&&m(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[n[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(e,n,r){var s=0;function o(e,i,n,r){return function(){var a=this,h=arguments,l=function(){var t,l;if(!(e<s)){if((t=n.apply(a,h))===i.promise())throw new TypeError("Thenable self-resolution");l=t&&("object"==typeof t||"function"==typeof t)&&t.then,m(l)?r?l.call(t,o(s,i,O,r),o(s,i,R,r)):(s++,l.call(t,o(s,i,O,r),o(s,i,R,r),o(s,i,O,i.notifyWith))):(n!==O&&(a=void 0,h=[t]),(r||i.resolveWith)(a,h))}},d=r?l:function(){try{l()}catch(t){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(t,d.stackTrace),e+1>=s&&(n!==R&&(a=void 0,h=[t]),i.rejectWith(a,h))}};e?d():(w.Deferred.getStackHook&&(d.stackTrace=w.Deferred.getStackHook()),t.setTimeout(d))}}return w.Deferred((function(t){i[0][3].add(o(0,t,m(r)?r:O,t.notifyWith)),i[1][3].add(o(0,t,m(e)?e:O)),i[2][3].add(o(0,t,m(n)?n:R))})).promise()},promise:function(t){return null!=t?w.extend(t,r):r}},s={};return w.each(i,(function(t,e){var o=e[2],a=e[5];r[e[1]]=o.add,a&&o.add((function(){n=a}),i[3-t][2].disable,i[3-t][3].disable,i[0][2].lock,i[0][3].lock),o.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=o.fireWith})),r.promise(s),e&&e.call(s,s),s},when:function(t){var e=arguments.length,i=e,n=Array(i),s=r.call(arguments),o=w.Deferred(),a=function(t){return function(i){n[t]=this,s[t]=arguments.length>1?r.call(arguments):i,--e||o.resolveWith(n,s)}};if(e<=1&&(F(t,o.done(a(i)).resolve,o.reject,!e),"pending"===o.state()||m(s[i]&&s[i].then)))return o.then();for(;i--;)F(s[i],a(i),o.reject);return o.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(e,i){t.console&&t.console.warn&&e&&z.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,i)},w.readyException=function(e){t.setTimeout((function(){throw e}))};var q=w.Deferred();function j(){g.removeEventListener("DOMContentLoaded",j),t.removeEventListener("load",j),w.ready()}w.fn.ready=function(t){return q.then(t).catch((function(t){w.readyException(t)})),this},w.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==t&&--w.readyWait>0||q.resolveWith(g,[w]))}}),w.ready.then=q.then,"complete"===g.readyState||"loading"!==g.readyState&&!g.documentElement.doScroll?t.setTimeout(w.ready):(g.addEventListener("DOMContentLoaded",j),t.addEventListener("load",j));var H=function(t,e,i,n,r,s,o){var a=0,h=t.length,l=null==i;if("object"===x(i))for(a in r=!0,i)H(t,e,a,i[a],!0,s,o);else if(void 0!==n&&(r=!0,m(n)||(o=!0),l&&(o?(e.call(t,n),e=null):(l=e,e=function(t,e,i){return l.call(w(t),i)})),e))for(;a<h;a++)e(t[a],i,o?n:n.call(t[a],a,e(t[a],i)));return r?t:l?e.call(t):h?e(t[0],i):s},$=/^-ms-/,W=/-([a-z])/g;function U(t,e){return e.toUpperCase()}function V(t){return t.replace($,"ms-").replace(W,U)}var G=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function X(){this.expando=w.expando+X.uid++}X.uid=1,X.prototype={cache:function(t){var e=t[this.expando];return e||(e={},G(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[V(e)]=i;else for(n in e)r[V(n)]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][V(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(V):(e=V(e))in n?[e]:e.match(B)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||w.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!w.isEmptyObject(e)}};var Y=new X,Z=new X,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Q(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(K,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:J.test(t)?JSON.parse(t):t)}(i)}catch(t){}Z.set(t,e,i)}else i=void 0;return i}w.extend({hasData:function(t){return Z.hasData(t)||Y.hasData(t)},data:function(t,e,i){return Z.access(t,e,i)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,i){return Y.access(t,e,i)},_removeData:function(t,e){Y.remove(t,e)}}),w.fn.extend({data:function(t,e){var i,n,r,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(r=Z.get(s),1===s.nodeType&&!Y.get(s,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&0===(n=o[i].name).indexOf("data-")&&(n=V(n.slice(5)),Q(s,n,r[n]));Y.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){Z.set(this,t)})):H(this,(function(e){var i;if(s&&void 0===e)return void 0!==(i=Z.get(s,t))||void 0!==(i=Q(s,t))?i:void 0;this.each((function(){Z.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Z.remove(this,t)}))}}),w.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=Y.get(t,e),i&&(!n||Array.isArray(i)?n=Y.access(t,e,w.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=w.queue(t,e),n=i.length,r=i.shift(),s=w._queueHooks(t,e);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete s.stop,r.call(t,(function(){w.dequeue(t,e)}),s)),!n&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Y.get(t,i)||Y.access(t,i,{empty:w.Callbacks("once memory").add((function(){Y.remove(t,[e+"queue",i])}))})}}),w.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?w.queue(this[0],t):void 0===e?this:this.each((function(){var i=w.queue(this,t,e);w._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&w.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){w.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=w.Deferred(),s=this,o=this.length,a=function(){--n||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(i=Y.get(s[o],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),it=["Top","Right","Bottom","Left"],nt=g.documentElement,rt=function(t){return w.contains(t.ownerDocument,t)},st={composed:!0};nt.getRootNode&&(rt=function(t){return w.contains(t.ownerDocument,t)||t.getRootNode(st)===t.ownerDocument});var ot=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&rt(t)&&"none"===w.css(t,"display")};function at(t,e,i,n){var r,s,o=20,a=n?function(){return n.cur()}:function(){return w.css(t,e,"")},h=a(),l=i&&i[3]||(w.cssNumber[e]?"":"px"),d=t.nodeType&&(w.cssNumber[e]||"px"!==l&&+h)&&et.exec(w.css(t,e));if(d&&d[3]!==l){for(h/=2,l=l||d[3],d=+h||1;o--;)w.style(t,e,d+l),(1-s)*(1-(s=a()/h||.5))<=0&&(o=0),d/=s;d*=2,w.style(t,e,d+l),i=i||[]}return i&&(d=+d||+h||0,r=i[1]?d+(i[1]+1)*i[2]:+i[2],n&&(n.unit=l,n.start=d,n.end=r)),r}var ht={};function lt(t){var e,i=t.ownerDocument,n=t.nodeName,r=ht[n];return r||(e=i.body.appendChild(i.createElement(n)),r=w.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),ht[n]=r,r)}function dt(t,e){for(var i,n,r=[],s=0,o=t.length;s<o;s++)(n=t[s]).style&&(i=n.style.display,e?("none"===i&&(r[s]=Y.get(n,"display")||null,r[s]||(n.style.display="")),""===n.style.display&&ot(n)&&(r[s]=lt(n))):"none"!==i&&(r[s]="none",Y.set(n,"display",i)));for(s=0;s<o;s++)null!=r[s]&&(t[s].style.display=r[s]);return t}w.fn.extend({show:function(){return dt(this,!0)},hide:function(){return dt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){ot(this)?w(this).show():w(this).hide()}))}});var ct,ut,pt=/^(?:checkbox|radio)$/i,mt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ft=/^$|^module$|\/(?:java|ecma)script/i;ct=g.createDocumentFragment().appendChild(g.createElement("div")),(ut=g.createElement("input")).setAttribute("type","radio"),ut.setAttribute("checked","checked"),ut.setAttribute("name","t"),ct.appendChild(ut),p.checkClone=ct.cloneNode(!0).cloneNode(!0).lastChild.checked,ct.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!ct.cloneNode(!0).lastChild.defaultValue,ct.innerHTML="<option></option>",p.option=!!ct.lastChild;var gt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function vt(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&S(t,e)?w.merge([t],i):i}function yt(t,e){for(var i=0,n=t.length;i<n;i++)Y.set(t[i],"globalEval",!e||Y.get(e[i],"globalEval"))}gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td,p.option||(gt.optgroup=gt.option=[1,"<select multiple='multiple'>","</select>"]);var xt=/<|&#?\w+;/;function bt(t,e,i,n,r){for(var s,o,a,h,l,d,c=e.createDocumentFragment(),u=[],p=0,m=t.length;p<m;p++)if((s=t[p])||0===s)if("object"===x(s))w.merge(u,s.nodeType?[s]:s);else if(xt.test(s)){for(o=o||c.appendChild(e.createElement("div")),a=(mt.exec(s)||["",""])[1].toLowerCase(),h=gt[a]||gt._default,o.innerHTML=h[1]+w.htmlPrefilter(s)+h[2],d=h[0];d--;)o=o.lastChild;w.merge(u,o.childNodes),(o=c.firstChild).textContent=""}else u.push(e.createTextNode(s));for(c.textContent="",p=0;s=u[p++];)if(n&&w.inArray(s,n)>-1)r&&r.push(s);else if(l=rt(s),o=vt(c.appendChild(s),"script"),l&&yt(o),i)for(d=0;s=o[d++];)ft.test(s.type||"")&&i.push(s);return c}var wt=/^([^.]*)(?:\.(.+)|)/;function kt(){return!0}function _t(){return!1}function Ct(t,e){return t===function(){try{return g.activeElement}catch(t){}}()==("focus"===e)}function Dt(t,e,i,n,r,s){var o,a;if("object"==typeof e){for(a in"string"!=typeof i&&(n=n||i,i=void 0),e)Dt(t,a,i,n,e[a],s);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=_t;else if(!r)return t;return 1===s&&(o=r,(r=function(t){return w().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=w.guid++)),t.each((function(){w.event.add(this,e,r,n,i)}))}function Et(t,e,i){i?(Y.set(t,e,!1),w.event.add(t,e,{namespace:!1,handler:function(t){var n,s,o=Y.get(this,e);if(1&t.isTrigger&&this[e]){if(o.length)(w.event.special[e]||{}).delegateType&&t.stopPropagation();else if(o=r.call(arguments),Y.set(this,e,o),n=i(this,e),this[e](),o!==(s=Y.get(this,e))||n?Y.set(this,e,!1):s={},o!==s)return t.stopImmediatePropagation(),t.preventDefault(),s&&s.value}else o.length&&(Y.set(this,e,{value:w.event.trigger(w.extend(o[0],w.Event.prototype),o.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Y.get(t,e)&&w.event.add(t,e,kt)}w.event={global:{},add:function(t,e,i,n,r){var s,o,a,h,l,d,c,u,p,m,f,g=Y.get(t);if(G(t))for(i.handler&&(i=(s=i).handler,r=s.selector),r&&w.find.matchesSelector(nt,r),i.guid||(i.guid=w.guid++),(h=g.events)||(h=g.events=Object.create(null)),(o=g.handle)||(o=g.handle=function(e){return void 0!==w&&w.event.triggered!==e.type?w.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(B)||[""]).length;l--;)p=f=(a=wt.exec(e[l])||[])[1],m=(a[2]||"").split(".").sort(),p&&(c=w.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,c=w.event.special[p]||{},d=w.extend({type:p,origType:f,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&w.expr.match.needsContext.test(r),namespace:m.join(".")},s),(u=h[p])||((u=h[p]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,n,m,o)||t.addEventListener&&t.addEventListener(p,o)),c.add&&(c.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),r?u.splice(u.delegateCount++,0,d):u.push(d),w.event.global[p]=!0)},remove:function(t,e,i,n,r){var s,o,a,h,l,d,c,u,p,m,f,g=Y.hasData(t)&&Y.get(t);if(g&&(h=g.events)){for(l=(e=(e||"").match(B)||[""]).length;l--;)if(p=f=(a=wt.exec(e[l])||[])[1],m=(a[2]||"").split(".").sort(),p){for(c=w.event.special[p]||{},u=h[p=(n?c.delegateType:c.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=u.length;s--;)d=u[s],!r&&f!==d.origType||i&&i.guid!==d.guid||a&&!a.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(u.splice(s,1),d.selector&&u.delegateCount--,c.remove&&c.remove.call(t,d));o&&!u.length&&(c.teardown&&!1!==c.teardown.call(t,m,g.handle)||w.removeEvent(t,p,g.handle),delete h[p])}else for(p in h)w.event.remove(t,p+e[l],i,n,!0);w.isEmptyObject(h)&&Y.remove(t,"handle events")}},dispatch:function(t){var e,i,n,r,s,o,a=new Array(arguments.length),h=w.event.fix(t),l=(Y.get(this,"events")||Object.create(null))[h.type]||[],d=w.event.special[h.type]||{};for(a[0]=h,e=1;e<arguments.length;e++)a[e]=arguments[e];if(h.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,h)){for(o=w.event.handlers.call(this,h,l),e=0;(r=o[e++])&&!h.isPropagationStopped();)for(h.currentTarget=r.elem,i=0;(s=r.handlers[i++])&&!h.isImmediatePropagationStopped();)h.rnamespace&&!1!==s.namespace&&!h.rnamespace.test(s.namespace)||(h.handleObj=s,h.data=s.data,void 0!==(n=((w.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a))&&!1===(h.result=n)&&(h.preventDefault(),h.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,h),h.result}},handlers:function(t,e){var i,n,r,s,o,a=[],h=e.delegateCount,l=t.target;if(h&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(s=[],o={},i=0;i<h;i++)void 0===o[r=(n=e[i]).selector+" "]&&(o[r]=n.needsContext?w(r,this).index(l)>-1:w.find(r,this,null,[l]).length),o[r]&&s.push(n);s.length&&a.push({elem:l,handlers:s})}return l=this,h<e.length&&a.push({elem:l,handlers:e.slice(h)}),a},addProp:function(t,e){Object.defineProperty(w.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[w.expando]?t:new w.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return pt.test(e.type)&&e.click&&S(e,"input")&&Et(e,"click",kt),!1},trigger:function(t){var e=this||t;return pt.test(e.type)&&e.click&&S(e,"input")&&Et(e,"click"),!0},_default:function(t){var e=t.target;return pt.test(e.type)&&e.click&&S(e,"input")&&Y.get(e,"click")||S(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},w.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},w.Event=function(t,e){if(!(this instanceof w.Event))return new w.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?kt:_t,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:_t,isPropagationStopped:_t,isImmediatePropagationStopped:_t,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=kt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=kt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=kt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},(function(t,e){w.event.special[t]={setup:function(){return Et(this,t,Ct),!1},trigger:function(){return Et(this,t),!0},_default:function(){return!0},delegateType:e}})),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){w.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,s=t.handleObj;return r&&(r===n||w.contains(n,r))||(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}})),w.fn.extend({on:function(t,e,i,n){return Dt(this,t,e,i,n)},one:function(t,e,i,n){return Dt(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,w(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=_t),this.each((function(){w.event.remove(this,t,i,e)}))}});var St=/<script|<style|<link/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,Mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function At(t,e){return S(t,"table")&&S(11!==e.nodeType?e:e.firstChild,"tr")&&w(t).children("tbody")[0]||t}function Lt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Tt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Pt(t,e){var i,n,r,s,o,a;if(1===e.nodeType){if(Y.hasData(t)&&(a=Y.get(t).events))for(r in Y.remove(e,"handle events"),a)for(i=0,n=a[r].length;i<n;i++)w.event.add(e,r,a[r][i]);Z.hasData(t)&&(s=Z.access(t),o=w.extend({},s),Z.set(e,o))}}function It(t,e){var i=e.nodeName.toLowerCase();"input"===i&&pt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function Bt(t,e,i,n){e=s(e);var r,o,a,h,l,d,c=0,u=t.length,f=u-1,g=e[0],v=m(g);if(v||u>1&&"string"==typeof g&&!p.checkClone&&Nt.test(g))return t.each((function(r){var s=t.eq(r);v&&(e[0]=g.call(this,r,s.html())),Bt(s,e,i,n)}));if(u&&(o=(r=bt(e,t[0].ownerDocument,!1,t,n)).firstChild,1===r.childNodes.length&&(r=o),o||n)){for(h=(a=w.map(vt(r,"script"),Lt)).length;c<u;c++)l=r,c!==f&&(l=w.clone(l,!0,!0),h&&w.merge(a,vt(l,"script"))),i.call(t[c],l,c);if(h)for(d=a[a.length-1].ownerDocument,w.map(a,Tt),c=0;c<h;c++)l=a[c],ft.test(l.type||"")&&!Y.access(l,"globalEval")&&w.contains(d,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&!l.noModule&&w._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},d):y(l.textContent.replace(Mt,""),l,d))}return t}function Ot(t,e,i){for(var n,r=e?w.filter(e,t):t,s=0;null!=(n=r[s]);s++)i||1!==n.nodeType||w.cleanData(vt(n)),n.parentNode&&(i&&rt(n)&&yt(vt(n,"script")),n.parentNode.removeChild(n));return t}w.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var n,r,s,o,a=t.cloneNode(!0),h=rt(t);if(!(p.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(o=vt(a),n=0,r=(s=vt(t)).length;n<r;n++)It(s[n],o[n]);if(e)if(i)for(s=s||vt(t),o=o||vt(a),n=0,r=s.length;n<r;n++)Pt(s[n],o[n]);else Pt(t,a);return(o=vt(a,"script")).length>0&&yt(o,!h&&vt(t,"script")),a},cleanData:function(t){for(var e,i,n,r=w.event.special,s=0;void 0!==(i=t[s]);s++)if(G(i)){if(e=i[Y.expando]){if(e.events)for(n in e.events)r[n]?w.event.remove(i,n):w.removeEvent(i,n,e.handle);i[Y.expando]=void 0}i[Z.expando]&&(i[Z.expando]=void 0)}}}),w.fn.extend({detach:function(t){return Ot(this,t,!0)},remove:function(t){return Ot(this,t)},text:function(t){return H(this,(function(t){return void 0===t?w.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Bt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||At(this,t).appendChild(t)}))},prepend:function(){return Bt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=At(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Bt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Bt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(vt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return w.clone(this,t,e)}))},html:function(t){return H(this,(function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!St.test(t)&&!gt[(mt.exec(t)||["",""])[1].toLowerCase()]){t=w.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(w.cleanData(vt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Bt(this,arguments,(function(e){var i=this.parentNode;w.inArray(this,t)<0&&(w.cleanData(vt(this)),i&&i.replaceChild(e,this))}),t)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){w.fn[t]=function(t){for(var i,n=[],r=w(t),s=r.length-1,a=0;a<=s;a++)i=a===s?this:this.clone(!0),w(r[a])[e](i),o.apply(n,i.get());return this.pushStack(n)}}));var Rt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Ft=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},zt=function(t,e,i){var n,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];for(r in n=i.call(t),e)t.style[r]=s[r];return n},qt=new RegExp(it.join("|"),"i");function jt(t,e,i){var n,r,s,o,a=t.style;return(i=i||Ft(t))&&(""!==(o=i.getPropertyValue(e)||i[e])||rt(t)||(o=w.style(t,e)),!p.pixelBoxStyles()&&Rt.test(o)&&qt.test(e)&&(n=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=r,a.maxWidth=s)),void 0!==o?o+"":o}function Ht(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(d){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",nt.appendChild(l).appendChild(d);var e=t.getComputedStyle(d);n="1%"!==e.top,h=12===i(e.marginLeft),d.style.right="60%",o=36===i(e.right),r=36===i(e.width),d.style.position="absolute",s=12===i(d.offsetWidth/3),nt.removeChild(l),d=null}}function i(t){return Math.round(parseFloat(t))}var n,r,s,o,a,h,l=g.createElement("div"),d=g.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===d.style.backgroundClip,w.extend(p,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),h},scrollboxSize:function(){return e(),s},reliableTrDimensions:function(){var e,i,n,r;return null==a&&(e=g.createElement("table"),i=g.createElement("tr"),n=g.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",i.style.cssText="border:1px solid",i.style.height="1px",n.style.height="9px",n.style.display="block",nt.appendChild(e).appendChild(i).appendChild(n),r=t.getComputedStyle(i),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===i.offsetHeight,nt.removeChild(e)),a}}))}();var $t=["Webkit","Moz","ms"],Wt=g.createElement("div").style,Ut={};function Vt(t){var e=w.cssProps[t]||Ut[t];return e||(t in Wt?t:Ut[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=$t.length;i--;)if((t=$t[i]+e)in Wt)return t}(t)||t)}var Gt=/^(none|table(?!-c[ea]).+)/,Xt=/^--/,Yt={position:"absolute",visibility:"hidden",display:"block"},Zt={letterSpacing:"0",fontWeight:"400"};function Jt(t,e,i){var n=et.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function Kt(t,e,i,n,r,s){var o="width"===e?1:0,a=0,h=0;if(i===(n?"border":"content"))return 0;for(;o<4;o+=2)"margin"===i&&(h+=w.css(t,i+it[o],!0,r)),n?("content"===i&&(h-=w.css(t,"padding"+it[o],!0,r)),"margin"!==i&&(h-=w.css(t,"border"+it[o]+"Width",!0,r))):(h+=w.css(t,"padding"+it[o],!0,r),"padding"!==i?h+=w.css(t,"border"+it[o]+"Width",!0,r):a+=w.css(t,"border"+it[o]+"Width",!0,r));return!n&&s>=0&&(h+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-s-h-a-.5))||0),h}function Qt(t,e,i){var n=Ft(t),r=(!p.boxSizingReliable()||i)&&"border-box"===w.css(t,"boxSizing",!1,n),s=r,o=jt(t,e,n),a="offset"+e[0].toUpperCase()+e.slice(1);if(Rt.test(o)){if(!i)return o;o="auto"}return(!p.boxSizingReliable()&&r||!p.reliableTrDimensions()&&S(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===w.css(t,"display",!1,n))&&t.getClientRects().length&&(r="border-box"===w.css(t,"boxSizing",!1,n),(s=a in t)&&(o=t[a])),(o=parseFloat(o)||0)+Kt(t,e,i||(r?"border":"content"),s,n,o)+"px"}function te(t,e,i,n,r){return new te.prototype.init(t,e,i,n,r)}w.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=jt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=V(e),h=Xt.test(e),l=t.style;if(h||(e=Vt(a)),o=w.cssHooks[e]||w.cssHooks[a],void 0===i)return o&&"get"in o&&void 0!==(r=o.get(t,!1,n))?r:l[e];"string"===(s=typeof i)&&(r=et.exec(i))&&r[1]&&(i=at(t,e,r),s="number"),null!=i&&i==i&&("number"!==s||h||(i+=r&&r[3]||(w.cssNumber[a]?"":"px")),p.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(i=o.set(t,i,n))||(h?l.setProperty(e,i):l[e]=i))}},css:function(t,e,i,n){var r,s,o,a=V(e);return Xt.test(e)||(e=Vt(a)),(o=w.cssHooks[e]||w.cssHooks[a])&&"get"in o&&(r=o.get(t,!0,i)),void 0===r&&(r=jt(t,e,n)),"normal"===r&&e in Zt&&(r=Zt[e]),""===i||i?(s=parseFloat(r),!0===i||isFinite(s)?s||0:r):r}}),w.each(["height","width"],(function(t,e){w.cssHooks[e]={get:function(t,i,n){if(i)return!Gt.test(w.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Qt(t,e,n):zt(t,Yt,(function(){return Qt(t,e,n)}))},set:function(t,i,n){var r,s=Ft(t),o=!p.scrollboxSize()&&"absolute"===s.position,a=(o||n)&&"border-box"===w.css(t,"boxSizing",!1,s),h=n?Kt(t,e,n,a,s):0;return a&&o&&(h-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(s[e])-Kt(t,e,"border",!1,s)-.5)),h&&(r=et.exec(i))&&"px"!==(r[3]||"px")&&(t.style[e]=i,i=w.css(t,e)),Jt(0,i,h)}}})),w.cssHooks.marginLeft=Ht(p.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(jt(t,"marginLeft"))||t.getBoundingClientRect().left-zt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),w.each({margin:"",padding:"",border:"Width"},(function(t,e){w.cssHooks[t+e]={expand:function(i){for(var n=0,r={},s="string"==typeof i?i.split(" "):[i];n<4;n++)r[t+it[n]+e]=s[n]||s[n-2]||s[0];return r}},"margin"!==t&&(w.cssHooks[t+e].set=Jt)})),w.fn.extend({css:function(t,e){return H(this,(function(t,e,i){var n,r,s={},o=0;if(Array.isArray(e)){for(n=Ft(t),r=e.length;o<r;o++)s[e[o]]=w.css(t,e[o],!1,n);return s}return void 0!==i?w.style(t,e,i):w.css(t,e)}),t,e,arguments.length>1)}}),w.Tween=te,te.prototype={constructor:te,init:function(t,e,i,n,r,s){this.elem=t,this.prop=i,this.easing=r||w.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=s||(w.cssNumber[i]?"":"px")},cur:function(){var t=te.propHooks[this.prop];return t&&t.get?t.get(this):te.propHooks._default.get(this)},run:function(t){var e,i=te.propHooks[this.prop];return this.options.duration?this.pos=e=w.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):te.propHooks._default.set(this),this}},te.prototype.init.prototype=te.prototype,te.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=w.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){w.fx.step[t.prop]?w.fx.step[t.prop](t):1!==t.elem.nodeType||!w.cssHooks[t.prop]&&null==t.elem.style[Vt(t.prop)]?t.elem[t.prop]=t.now:w.style(t.elem,t.prop,t.now+t.unit)}}},te.propHooks.scrollTop=te.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},w.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},w.fx=te.prototype.init,w.fx.step={};var ee,ie,ne=/^(?:toggle|show|hide)$/,re=/queueHooks$/;function se(){ie&&(!1===g.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(se):t.setTimeout(se,w.fx.interval),w.fx.tick())}function oe(){return t.setTimeout((function(){ee=void 0})),ee=Date.now()}function ae(t,e){var i,n=0,r={height:t};for(e=e?1:0;n<4;n+=2-e)r["margin"+(i=it[n])]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function he(t,e,i){for(var n,r=(le.tweeners[e]||[]).concat(le.tweeners["*"]),s=0,o=r.length;s<o;s++)if(n=r[s].call(i,e,t))return n}function le(t,e,i){var n,r,s=0,o=le.prefilters.length,a=w.Deferred().always((function(){delete h.elem})),h=function(){if(r)return!1;for(var e=ee||oe(),i=Math.max(0,l.startTime+l.duration-e),n=1-(i/l.duration||0),s=0,o=l.tweens.length;s<o;s++)l.tweens[s].run(n);return a.notifyWith(t,[l,n,i]),n<1&&o?i:(o||a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:w.extend({},e),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},i),originalProperties:e,originalOptions:i,startTime:ee||oe(),duration:i.duration,tweens:[],createTween:function(e,i){var n=w.Tween(t,l.opts,e,i,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var i=0,n=e?l.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)l.tweens[i].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),d=l.props;for(!function(t,e){var i,n,r,s,o;for(i in t)if(r=e[n=V(i)],s=t[i],Array.isArray(s)&&(r=s[1],s=t[i]=s[0]),i!==n&&(t[n]=s,delete t[i]),(o=w.cssHooks[n])&&"expand"in o)for(i in s=o.expand(s),delete t[n],s)i in t||(t[i]=s[i],e[i]=r);else e[n]=r}(d,l.opts.specialEasing);s<o;s++)if(n=le.prefilters[s].call(l,t,d,l.opts))return m(n.stop)&&(w._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return w.map(d,he,l),m(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),w.fx.timer(w.extend(h,{elem:t,anim:l,queue:l.opts.queue})),l}w.Animation=w.extend(le,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return at(i.elem,t,et.exec(e),i),i}]},tweener:function(t,e){m(t)?(e=t,t=["*"]):t=t.match(B);for(var i,n=0,r=t.length;n<r;n++)i=t[n],le.tweeners[i]=le.tweeners[i]||[],le.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,r,s,o,a,h,l,d,c="width"in e||"height"in e,u=this,p={},m=t.style,f=t.nodeType&&ot(t),g=Y.get(t,"fxshow");for(n in i.queue||(null==(o=w._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,u.always((function(){u.always((function(){o.unqueued--,w.queue(t,"fx").length||o.empty.fire()}))}))),e)if(r=e[n],ne.test(r)){if(delete e[n],s=s||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!g||void 0===g[n])continue;f=!0}p[n]=g&&g[n]||w.style(t,n)}if((h=!w.isEmptyObject(e))||!w.isEmptyObject(p))for(n in c&&1===t.nodeType&&(i.overflow=[m.overflow,m.overflowX,m.overflowY],null==(l=g&&g.display)&&(l=Y.get(t,"display")),"none"===(d=w.css(t,"display"))&&(l?d=l:(dt([t],!0),l=t.style.display||l,d=w.css(t,"display"),dt([t]))),("inline"===d||"inline-block"===d&&null!=l)&&"none"===w.css(t,"float")&&(h||(u.done((function(){m.display=l})),null==l&&(d=m.display,l="none"===d?"":d)),m.display="inline-block")),i.overflow&&(m.overflow="hidden",u.always((function(){m.overflow=i.overflow[0],m.overflowX=i.overflow[1],m.overflowY=i.overflow[2]}))),h=!1,p)h||(g?"hidden"in g&&(f=g.hidden):g=Y.access(t,"fxshow",{display:l}),s&&(g.hidden=!f),f&&dt([t],!0),u.done((function(){for(n in f||dt([t]),Y.remove(t,"fxshow"),p)w.style(t,n,p[n])}))),h=he(f?g[n]:0,n,u),n in g||(g[n]=h.start,f&&(h.end=h.start,h.start=0))}],prefilter:function(t,e){e?le.prefilters.unshift(t):le.prefilters.push(t)}}),w.speed=function(t,e,i){var n=t&&"object"==typeof t?w.extend({},t):{complete:i||!i&&e||m(t)&&t,duration:t,easing:i&&e||e&&!m(e)&&e};return w.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in w.fx.speeds?n.duration=w.fx.speeds[n.duration]:n.duration=w.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){m(n.old)&&n.old.call(this),n.queue&&w.dequeue(this,n.queue)},n},w.fn.extend({fadeTo:function(t,e,i,n){return this.filter(ot).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=w.isEmptyObject(t),s=w.speed(e,i,n),o=function(){var e=le(this,w.extend({},t),s);(r||Y.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",s=w.timers,o=Y.get(this);if(r)o[r]&&o[r].stop&&n(o[r]);else for(r in o)o[r]&&o[r].stop&&re.test(r)&&n(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(i),e=!1,s.splice(r,1));!e&&i||w.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,i=Y.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],s=w.timers,o=n?n.length:0;for(i.finish=!0,w.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish}))}}),w.each(["toggle","show","hide"],(function(t,e){var i=w.fn[e];w.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(ae(e,!0),t,n,r)}})),w.each({slideDown:ae("show"),slideUp:ae("hide"),slideToggle:ae("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){w.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}})),w.timers=[],w.fx.tick=function(){var t,e=0,i=w.timers;for(ee=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||w.fx.stop(),ee=void 0},w.fx.timer=function(t){w.timers.push(t),w.fx.start()},w.fx.interval=13,w.fx.start=function(){ie||(ie=!0,se())},w.fx.stop=function(){ie=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(e,i){return e=w.fx&&w.fx.speeds[e]||e,i=i||"fx",this.queue(i,(function(i,n){var r=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(r)}}))},function(){var t=g.createElement("input"),e=g.createElement("select").appendChild(g.createElement("option"));t.type="checkbox",p.checkOn=""!==t.value,p.optSelected=e.selected,(t=g.createElement("input")).value="t",t.type="radio",p.radioValue="t"===t.value}();var de,ce=w.expr.attrHandle;w.fn.extend({attr:function(t,e){return H(this,w.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){w.removeAttr(this,t)}))}}),w.extend({attr:function(t,e,i){var n,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?w.prop(t,e,i):(1===s&&w.isXMLDoc(t)||(r=w.attrHooks[e.toLowerCase()]||(w.expr.match.bool.test(e)?de:void 0)),void 0!==i?null===i?void w.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):r&&"get"in r&&null!==(n=r.get(t,e))?n:null==(n=w.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&"radio"===e&&S(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,r=e&&e.match(B);if(r&&1===t.nodeType)for(;i=r[n++];)t.removeAttribute(i)}}),de={set:function(t,e,i){return!1===e?w.removeAttr(t,i):t.setAttribute(i,i),i}},w.each(w.expr.match.bool.source.match(/\w+/g),(function(t,e){var i=ce[e]||w.find.attr;ce[e]=function(t,e,n){var r,s,o=e.toLowerCase();return n||(s=ce[o],ce[o]=r,r=null!=i(t,e,n)?o:null,ce[o]=s),r}}));var ue=/^(?:input|select|textarea|button)$/i,pe=/^(?:a|area)$/i;function me(t){return(t.match(B)||[]).join(" ")}function fe(t){return t.getAttribute&&t.getAttribute("class")||""}function ge(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(B)||[]}w.fn.extend({prop:function(t,e){return H(this,w.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[w.propFix[t]||t]}))}}),w.extend({prop:function(t,e,i){var n,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&w.isXMLDoc(t)||(e=w.propFix[e]||e,r=w.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=w.find.attr(t,"tabindex");return e?parseInt(e,10):ue.test(t.nodeName)||pe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(w.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){w.propFix[this.toLowerCase()]=this})),w.fn.extend({addClass:function(t){var e,i,n,r,s,o,a,h=0;if(m(t))return this.each((function(e){w(this).addClass(t.call(this,e,fe(this)))}));if((e=ge(t)).length)for(;i=this[h++];)if(r=fe(i),n=1===i.nodeType&&" "+me(r)+" "){for(o=0;s=e[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");r!==(a=me(n))&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,r,s,o,a,h=0;if(m(t))return this.each((function(e){w(this).removeClass(t.call(this,e,fe(this)))}));if(!arguments.length)return this.attr("class","");if((e=ge(t)).length)for(;i=this[h++];)if(r=fe(i),n=1===i.nodeType&&" "+me(r)+" "){for(o=0;s=e[o++];)for(;n.indexOf(" "+s+" ")>-1;)n=n.replace(" "+s+" "," ");r!==(a=me(n))&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t,n="string"===i||Array.isArray(t);return"boolean"==typeof e&&n?e?this.addClass(t):this.removeClass(t):m(t)?this.each((function(i){w(this).toggleClass(t.call(this,i,fe(this),e),e)})):this.each((function(){var e,r,s,o;if(n)for(r=0,s=w(this),o=ge(t);e=o[r++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else void 0!==t&&"boolean"!==i||((e=fe(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Y.get(this,"__className__")||""))}))},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+me(fe(i))+" ").indexOf(e)>-1)return!0;return!1}});var ve=/\r/g;w.fn.extend({val:function(t){var e,i,n,r=this[0];return arguments.length?(n=m(t),this.each((function(i){var r;1===this.nodeType&&(null==(r=n?t.call(this,i,w(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=w.map(r,(function(t){return null==t?"":t+""}))),(e=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=w.valHooks[r.type]||w.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(ve,""):null==i?"":i:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:me(w.text(t))}},select:{get:function(t){var e,i,n,r=t.options,s=t.selectedIndex,o="select-one"===t.type,a=o?null:[],h=o?s+1:r.length;for(n=s<0?h:o?s:0;n<h;n++)if(((i=r[n]).selected||n===s)&&!i.disabled&&(!i.parentNode.disabled||!S(i.parentNode,"optgroup"))){if(e=w(i).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var i,n,r=t.options,s=w.makeArray(e),o=r.length;o--;)((n=r[o]).selected=w.inArray(w.valHooks.option.get(n),s)>-1)&&(i=!0);return i||(t.selectedIndex=-1),s}}}}),w.each(["radio","checkbox"],(function(){w.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=w.inArray(w(t).val(),e)>-1}},p.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),p.focusin="onfocusin"in t;var ye=/^(?:focusinfocus|focusoutblur)$/,xe=function(t){t.stopPropagation()};w.extend(w.event,{trigger:function(e,i,n,r){var s,o,a,h,l,c,u,p,v=[n||g],y=d.call(e,"type")?e.type:e,x=d.call(e,"namespace")?e.namespace.split("."):[];if(o=p=a=n=n||g,3!==n.nodeType&&8!==n.nodeType&&!ye.test(y+w.event.triggered)&&(y.indexOf(".")>-1&&(x=y.split("."),y=x.shift(),x.sort()),l=y.indexOf(":")<0&&"on"+y,(e=e[w.expando]?e:new w.Event(y,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=x.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:w.makeArray(i,[e]),u=w.event.special[y]||{},r||!u.trigger||!1!==u.trigger.apply(n,i))){if(!r&&!u.noBubble&&!f(n)){for(h=u.delegateType||y,ye.test(h+y)||(o=o.parentNode);o;o=o.parentNode)v.push(o),a=o;a===(n.ownerDocument||g)&&v.push(a.defaultView||a.parentWindow||t)}for(s=0;(o=v[s++])&&!e.isPropagationStopped();)p=o,e.type=s>1?h:u.bindType||y,(c=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&c.apply(o,i),(c=l&&o[l])&&c.apply&&G(o)&&(e.result=c.apply(o,i),!1===e.result&&e.preventDefault());return e.type=y,r||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(v.pop(),i)||!G(n)||l&&m(n[y])&&!f(n)&&((a=n[l])&&(n[l]=null),w.event.triggered=y,e.isPropagationStopped()&&p.addEventListener(y,xe),n[y](),e.isPropagationStopped()&&p.removeEventListener(y,xe),w.event.triggered=void 0,a&&(n[l]=a)),e.result}},simulate:function(t,e,i){var n=w.extend(new w.Event,i,{type:t,isSimulated:!0});w.event.trigger(n,null,e)}}),w.fn.extend({trigger:function(t,e){return this.each((function(){w.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var i=this[0];if(i)return w.event.trigger(t,e,i,!0)}}),p.focusin||w.each({focus:"focusin",blur:"focusout"},(function(t,e){var i=function(t){w.event.simulate(e,t.target,w.event.fix(t))};w.event.special[e]={setup:function(){var n=this.ownerDocument||this.document||this,r=Y.access(n,e);r||n.addEventListener(t,i,!0),Y.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,r=Y.access(n,e)-1;r?Y.access(n,e,r):(n.removeEventListener(t,i,!0),Y.remove(n,e))}}}));var be=t.location,we={guid:Date.now()},ke=/\?/;w.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){}return n=i&&i.getElementsByTagName("parsererror")[0],i&&!n||w.error("Invalid XML: "+(n?w.map(n.childNodes,(function(t){return t.textContent})).join("\n"):e)),i};var _e=/\[\]$/,Ce=/\r?\n/g,De=/^(?:submit|button|image|reset|file)$/i,Ee=/^(?:input|select|textarea|keygen)/i;function Se(t,e,i,n){var r;if(Array.isArray(e))w.each(e,(function(e,r){i||_e.test(t)?n(t,r):Se(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,i,n)}));else if(i||"object"!==x(e))n(t,e);else for(r in e)Se(t+"["+r+"]",e[r],i,n)}w.param=function(t,e){var i,n=[],r=function(t,e){var i=m(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,(function(){r(this.name,this.value)}));else for(i in t)Se(i,t[i],e,r);return n.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&Ee.test(this.nodeName)&&!De.test(t)&&(this.checked||!pt.test(t))})).map((function(t,e){var i=w(this).val();return null==i?null:Array.isArray(i)?w.map(i,(function(t){return{name:e.name,value:t.replace(Ce,"\r\n")}})):{name:e.name,value:i.replace(Ce,"\r\n")}})).get()}});var Ne=/%20/g,Me=/#.*$/,Ae=/([?&])_=[^&]*/,Le=/^(.*?):[ \t]*([^\r\n]*)$/gm,Te=/^(?:GET|HEAD)$/,Pe=/^\/\//,Ie={},Be={},Oe="*/".concat("*"),Re=g.createElement("a");function Fe(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,s=e.toLowerCase().match(B)||[];if(m(i))for(;n=s[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function ze(t,e,i,n){var r={},s=t===Be;function o(a){var h;return r[a]=!0,w.each(t[a]||[],(function(t,a){var l=a(e,i,n);return"string"!=typeof l||s||r[l]?s?!(h=l):void 0:(e.dataTypes.unshift(l),o(l),!1)})),h}return o(e.dataTypes[0])||!r["*"]&&o("*")}function qe(t,e){var i,n,r=w.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&w.extend(!0,t,n),t}Re.href=be.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:be.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(be.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Oe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?qe(qe(t,w.ajaxSettings),e):qe(w.ajaxSettings,t)},ajaxPrefilter:Fe(Ie),ajaxTransport:Fe(Be),ajax:function(e,i){"object"==typeof e&&(i=e,e=void 0),i=i||{};var n,r,s,o,a,h,l,d,c,u,p=w.ajaxSetup({},i),m=p.context||p,f=p.context&&(m.nodeType||m.jquery)?w(m):w.event,v=w.Deferred(),y=w.Callbacks("once memory"),x=p.statusCode||{},b={},k={},_="canceled",C={readyState:0,getResponseHeader:function(t){var e;if(l){if(!o)for(o={};e=Le.exec(s);)o[e[1].toLowerCase()+" "]=(o[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=o[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?s:null},setRequestHeader:function(t,e){return null==l&&(t=k[t.toLowerCase()]=k[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==l&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)C.always(t[C.status]);else for(e in t)x[e]=[x[e],t[e]];return this},abort:function(t){var e=t||_;return n&&n.abort(e),D(0,e),this}};if(v.promise(C),p.url=((e||p.url||be.href)+"").replace(Pe,be.protocol+"//"),p.type=i.method||i.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(B)||[""],null==p.crossDomain){h=g.createElement("a");try{h.href=p.url,h.href=h.href,p.crossDomain=Re.protocol+"//"+Re.host!=h.protocol+"//"+h.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=w.param(p.data,p.traditional)),ze(Ie,p,i,C),l)return C;for(c in(d=w.event&&p.global)&&0==w.active++&&w.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Te.test(p.type),r=p.url.replace(Me,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Ne,"+")):(u=p.url.slice(r.length),p.data&&(p.processData||"string"==typeof p.data)&&(r+=(ke.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(r=r.replace(Ae,"$1"),u=(ke.test(r)?"&":"?")+"_="+we.guid+++u),p.url=r+u),p.ifModified&&(w.lastModified[r]&&C.setRequestHeader("If-Modified-Since",w.lastModified[r]),w.etag[r]&&C.setRequestHeader("If-None-Match",w.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||i.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Oe+"; q=0.01":""):p.accepts["*"]),p.headers)C.setRequestHeader(c,p.headers[c]);if(p.beforeSend&&(!1===p.beforeSend.call(m,C,p)||l))return C.abort();if(_="abort",y.add(p.complete),C.done(p.success),C.fail(p.error),n=ze(Be,p,i,C)){if(C.readyState=1,d&&f.trigger("ajaxSend",[C,p]),l)return C;p.async&&p.timeout>0&&(a=t.setTimeout((function(){C.abort("timeout")}),p.timeout));try{l=!1,n.send(b,D)}catch(t){if(l)throw t;D(-1,t)}}else D(-1,"No Transport");function D(e,i,o,h){var c,u,g,b,k,_=i;l||(l=!0,a&&t.clearTimeout(a),n=void 0,s=h||"",C.readyState=e>0?4:0,c=e>=200&&e<300||304===e,o&&(b=function(t,e,i){for(var n,r,s,o,a=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){h.unshift(r);break}if(h[0]in i)s=h[0];else{for(r in i){if(!h[0]||t.converters[r+" "+h[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==h[0]&&h.unshift(s),i[s]}(p,C,o)),!c&&w.inArray("script",p.dataTypes)>-1&&w.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),b=function(t,e,i,n){var r,s,o,a,h,l={},d=t.dataTypes.slice();if(d[1])for(o in t.converters)l[o.toLowerCase()]=t.converters[o];for(s=d.shift();s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!h&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),h=s,s=d.shift())if("*"===s)s=h;else if("*"!==h&&h!==s){if(!(o=l[h+" "+s]||l["* "+s]))for(r in l)if((a=r.split(" "))[1]===s&&(o=l[h+" "+a[0]]||l["* "+a[0]])){!0===o?o=l[r]:!0!==l[r]&&(s=a[0],d.unshift(a[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+h+" to "+s}}}return{state:"success",data:e}}(p,b,C,c),c?(p.ifModified&&((k=C.getResponseHeader("Last-Modified"))&&(w.lastModified[r]=k),(k=C.getResponseHeader("etag"))&&(w.etag[r]=k)),204===e||"HEAD"===p.type?_="nocontent":304===e?_="notmodified":(_=b.state,u=b.data,c=!(g=b.error))):(g=_,!e&&_||(_="error",e<0&&(e=0))),C.status=e,C.statusText=(i||_)+"",c?v.resolveWith(m,[u,_,C]):v.rejectWith(m,[C,_,g]),C.statusCode(x),x=void 0,d&&f.trigger(c?"ajaxSuccess":"ajaxError",[C,p,c?u:g]),y.fireWith(m,[C,_]),d&&(f.trigger("ajaxComplete",[C,p]),--w.active||w.event.trigger("ajaxStop")))}return C},getJSON:function(t,e,i){return w.get(t,e,i,"json")},getScript:function(t,e){return w.get(t,void 0,e,"script")}}),w.each(["get","post"],(function(t,e){w[e]=function(t,i,n,r){return m(i)&&(r=r||n,n=i,i=void 0),w.ajax(w.extend({url:t,type:e,dataType:r,data:i,success:n},w.isPlainObject(t)&&t))}})),w.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),w._evalUrl=function(t,e,i){return w.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){w.globalEval(t,e,i)}})},w.fn.extend({wrapAll:function(t){var e;return this[0]&&(m(t)&&(t=t.call(this[0])),e=w(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return m(t)?this.each((function(e){w(this).wrapInner(t.call(this,e))})):this.each((function(){var e=w(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)}))},wrap:function(t){var e=m(t);return this.each((function(i){w(this).wrapAll(e?t.call(this,i):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){w(this).replaceWith(this.childNodes)})),this}}),w.expr.pseudos.hidden=function(t){return!w.expr.pseudos.visible(t)},w.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var je={0:200,1223:204},He=w.ajaxSettings.xhr();p.cors=!!He&&"withCredentials"in He,p.ajax=He=!!He,w.ajaxTransport((function(e){var i,n;if(p.cors||He&&!e.crossDomain)return{send:function(r,s){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];for(o in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(o,r[o]);i=function(t){return function(){i&&(i=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(je[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),n=a.onerror=a.ontimeout=i("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout((function(){i&&n()}))},i=i("abort");try{a.send(e.hasContent&&e.data||null)}catch(t){if(i)throw t}},abort:function(){i&&i()}}})),w.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return w.globalEval(t),t}}}),w.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),w.ajaxTransport("script",(function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(n,r){e=w("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),g.head.appendChild(e[0])},abort:function(){i&&i()}}}));var $e,We=[],Ue=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=We.pop()||w.expando+"_"+we.guid++;return this[t]=!0,t}}),w.ajaxPrefilter("json jsonp",(function(e,i,n){var r,s,o,a=!1!==e.jsonp&&(Ue.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ue.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ue,"$1"+r):!1!==e.jsonp&&(e.url+=(ke.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||w.error(r+" was not called"),o[0]},e.dataTypes[0]="json",s=t[r],t[r]=function(){o=arguments},n.always((function(){void 0===s?w(t).removeProp(r):t[r]=s,e[r]&&(e.jsonpCallback=i.jsonpCallback,We.push(r)),o&&m(s)&&s(o[0]),o=s=void 0})),"script"})),p.createHTMLDocument=(($e=g.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===$e.childNodes.length),w.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(p.createHTMLDocument?((n=(e=g.implementation.createHTMLDocument("")).createElement("base")).href=g.location.href,e.head.appendChild(n)):e=g),s=!i&&[],(r=N.exec(t))?[e.createElement(r[1])]:(r=bt([t],e,s),s&&s.length&&w(s).remove(),w.merge([],r.childNodes)));var n,r,s},w.fn.load=function(t,e,i){var n,r,s,o=this,a=t.indexOf(" ");return a>-1&&(n=me(t.slice(a)),t=t.slice(0,a)),m(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&w.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done((function(t){s=arguments,o.html(n?w("<div>").append(w.parseHTML(t)).find(n):t)})).always(i&&function(t,e){o.each((function(){i.apply(this,s||[t.responseText,e,t])}))}),this},w.expr.pseudos.animated=function(t){return w.grep(w.timers,(function(e){return t===e.elem})).length},w.offset={setOffset:function(t,e,i){var n,r,s,o,a,h,l=w.css(t,"position"),d=w(t),c={};"static"===l&&(t.style.position="relative"),a=d.offset(),s=w.css(t,"top"),h=w.css(t,"left"),("absolute"===l||"fixed"===l)&&(s+h).indexOf("auto")>-1?(o=(n=d.position()).top,r=n.left):(o=parseFloat(s)||0,r=parseFloat(h)||0),m(e)&&(e=e.call(t,i,w.extend({},a))),null!=e.top&&(c.top=e.top-a.top+o),null!=e.left&&(c.left=e.left-a.left+r),"using"in e?e.using.call(t,c):d.css(c)}},w.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){w.offset.setOffset(this,t,e)}));var e,i,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],r={top:0,left:0};if("fixed"===w.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===w.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((r=w(t).offset()).top+=w.css(t,"borderTopWidth",!0),r.left+=w.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-w.css(n,"marginTop",!0),left:e.left-r.left-w.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===w.css(t,"position");)t=t.offsetParent;return t||nt}))}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var i="pageYOffset"===e;w.fn[t]=function(n){return H(this,(function(t,n,r){var s;if(f(t)?s=t:9===t.nodeType&&(s=t.defaultView),void 0===r)return s?s[e]:t[n];s?s.scrollTo(i?s.pageXOffset:r,i?r:s.pageYOffset):t[n]=r}),t,n,arguments.length)}})),w.each(["top","left"],(function(t,e){w.cssHooks[e]=Ht(p.pixelPosition,(function(t,i){if(i)return i=jt(t,e),Rt.test(i)?w(t).position()[e]+"px":i}))})),w.each({Height:"height",Width:"width"},(function(t,e){w.each({padding:"inner"+t,content:e,"":"outer"+t},(function(i,n){w.fn[n]=function(r,s){var o=arguments.length&&(i||"boolean"!=typeof r),a=i||(!0===r||!0===s?"margin":"border");return H(this,(function(e,i,r){var s;return f(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===r?w.css(e,i,a):w.style(e,i,r,a)}),e,o?r:void 0,o)}}))})),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){w.fn[e]=function(t){return this.on(e,t)}})),w.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){w.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}));var Ve=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(t,e){var i,n,s;if("string"==typeof e&&(i=t[e],e=t,t=i),m(t))return n=r.call(arguments,2),(s=function(){return t.apply(e||this,n.concat(r.call(arguments)))}).guid=t.guid=t.guid||w.guid++,s},w.holdReady=function(t){t?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=S,w.isFunction=m,w.isWindow=f,w.camelCase=V,w.type=x,w.now=Date.now,w.isNumeric=function(t){var e=w.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},w.trim=function(t){return null==t?"":(t+"").replace(Ve,"")};var Ge=t.jQuery,Xe=t.$;return w.noConflict=function(e){return t.$===w&&(t.$=Xe),e&&t.jQuery===w&&(t.jQuery=Ge),w},void 0===e&&(t.jQuery=t.$=w),w}))})),ii=mt((function(t,e){t.exports=function t(e,i,n){function r(o,a){if(!i[o]){if(!e[o]){if(!a&&ft)return ft(o);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var l=i[o]={exports:{}};e[o][0].call(l.exports,(function(t){return r(e[o][1][t]||t)}),l,l.exports,t,e,i,n)}return i[o].exports}for(var s=ft,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,i){var n=t("./utils"),r=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(t){for(var e,i,r,o,a,h,l,d=[],c=0,u=t.length,p=u,m="string"!==n.getTypeOf(t);c<t.length;)p=u-c,r=m?(e=t[c++],i=c<u?t[c++]:0,c<u?t[c++]:0):(e=t.charCodeAt(c++),i=c<u?t.charCodeAt(c++):0,c<u?t.charCodeAt(c++):0),o=e>>2,a=(3&e)<<4|i>>4,h=1<p?(15&i)<<2|r>>6:64,l=2<p?63&r:64,d.push(s.charAt(o)+s.charAt(a)+s.charAt(h)+s.charAt(l));return d.join("")},i.decode=function(t){var e,i,n,o,a,h,l=0,d=0,c="data:";if(t.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");var u,p=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===s.charAt(64)&&p--,t.charAt(t.length-2)===s.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(u=r.uint8array?new Uint8Array(0|p):new Array(0|p);l<t.length;)e=s.indexOf(t.charAt(l++))<<2|(o=s.indexOf(t.charAt(l++)))>>4,i=(15&o)<<4|(a=s.indexOf(t.charAt(l++)))>>2,n=(3&a)<<6|(h=s.indexOf(t.charAt(l++))),u[d++]=e,64!==a&&(u[d++]=i),64!==h&&(u[d++]=n);return u}},{"./support":30,"./utils":32}],2:[function(t,e,i){var n=t("./external"),r=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),o=t("./stream/DataLengthProbe");function a(t,e,i,n,r){this.compressedSize=t,this.uncompressedSize=e,this.crc32=i,this.compression=n,this.compressedContent=r}a.prototype={getContentWorker:function(){var t=new r(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new r(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,e,i){return t.pipe(new s).pipe(new o("uncompressedSize")).pipe(e.compressWorker(i)).pipe(new o("compressedSize")).withStreamInfo("compression",e)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,i){var n=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(t){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,i){var n=t("./utils"),r=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==n.getTypeOf(t)?function(t,e,i,n){var s=r,o=n+i;t^=-1;for(var a=n;a<o;a++)t=t>>>8^s[255&(t^e[a])];return-1^t}(0|e,t,t.length,0):function(t,e,i,n){var s=r,o=n+i;t^=-1;for(var a=n;a<o;a++)t=t>>>8^s[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length,0):0}},{"./utils":32}],5:[function(t,e,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,e,i){var n=null;n="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:n}},{lie:37}],7:[function(t,e,i){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=t("pako"),s=t("./utils"),o=t("./stream/GenericWorker"),a=n?"uint8array":"array";function h(t,e){o.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}i.magic="\b\0",s.inherits(h,o),h.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(a,t.data),!1)},h.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},i.compressWorker=function(t){return new h("Deflate",t)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,i){function n(t,e){var i,n="";for(i=0;i<e;i++)n+=String.fromCharCode(255&t),t>>>=8;return n}function r(t,e,i,r,o,d){var c,u,p=t.file,m=t.compression,f=d!==a.utf8encode,g=s.transformTo("string",d(p.name)),v=s.transformTo("string",a.utf8encode(p.name)),y=p.comment,x=s.transformTo("string",d(y)),b=s.transformTo("string",a.utf8encode(y)),w=v.length!==p.name.length,k=b.length!==y.length,_="",C="",D="",E=p.dir,S=p.date,N={crc32:0,compressedSize:0,uncompressedSize:0};e&&!i||(N.crc32=t.crc32,N.compressedSize=t.compressedSize,N.uncompressedSize=t.uncompressedSize);var M=0;e&&(M|=8),f||!w&&!k||(M|=2048);var A=0,L=0;E&&(A|=16),"UNIX"===o?(L=798,A|=function(t,e){var i=t;return t||(i=e?16893:33204),(65535&i)<<16}(p.unixPermissions,E)):(L=20,A|=function(t){return 63&(t||0)}(p.dosPermissions)),c=S.getUTCHours(),c<<=6,c|=S.getUTCMinutes(),c<<=5,c|=S.getUTCSeconds()/2,u=S.getUTCFullYear()-1980,u<<=4,u|=S.getUTCMonth()+1,u<<=5,u|=S.getUTCDate(),w&&(C=n(1,1)+n(h(g),4)+v,_+="up"+n(C.length,2)+C),k&&(D=n(1,1)+n(h(x),4)+b,_+="uc"+n(D.length,2)+D);var T="";return T+="\n\0",T+=n(M,2),T+=m.magic,T+=n(c,2),T+=n(u,2),T+=n(N.crc32,4),T+=n(N.compressedSize,4),T+=n(N.uncompressedSize,4),T+=n(g.length,2),T+=n(_.length,2),{fileRecord:l.LOCAL_FILE_HEADER+T+g+_,dirRecord:l.CENTRAL_FILE_HEADER+n(L,2)+T+n(x.length,2)+"\0\0\0\0"+n(A,4)+n(r,4)+g+_+x}}var s=t("../utils"),o=t("../stream/GenericWorker"),a=t("../utf8"),h=t("../crc32"),l=t("../signature");function d(t,e,i,n){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=i,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(d,o),d.prototype.push=function(t){var e=t.meta.percent||0,i=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,o.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:i?(e+100*(i-n-1))/i:100}}))},d.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var i=r(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,i=r(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),e)this.push({data:function(t){return l.DATA_DESCRIPTOR+n(t.crc32,4)+n(t.compressedSize,4)+n(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var i=this.bytesWritten-t,r=function(t,e,i,r,o){var a=s.transformTo("string",o(r));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(t,2)+n(t,2)+n(e,4)+n(i,4)+n(a.length,2)+a}(this.dirRecords.length,i,t,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},d.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(t){var e=this._sources;if(!o.prototype.error.call(this,t))return!1;for(var i=0;i<e.length;i++)try{e[i].error(t)}catch(t){}return!0},d.prototype.lock=function(){o.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,i){var n=t("../compressions"),r=t("./ZipFileWorker");i.generateWorker=function(t,e,i){var s=new r(e.streamFiles,i,e.platform,e.encodeFileName),o=0;try{t.forEach((function(t,i){o++;var r=function(t,e){var i=t||e,r=n[i];if(!r)throw new Error(i+" is not a valid compression method !");return r}(i.options.compression,e.compression),a=i.options.compressionOptions||e.compressionOptions||{},h=i.dir,l=i.date;i._compressWorker(r,a).withStreamInfo("file",{name:t,dir:h,date:l,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(s)})),s.entriesCount=o}catch(t){s.error(t)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,i){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new n;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.7.1",n.loadAsync=function(t,e){return(new n).loadAsync(t,e)},n.external=t("./external"),e.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,i){var n=t("./utils"),r=t("./external"),s=t("./utf8"),o=t("./zipEntries"),a=t("./stream/Crc32Probe"),h=t("./nodejsUtils");function l(t){return new r.Promise((function(e,i){var n=t.decompressed.getContentWorker().pipe(new a);n.on("error",(function(t){i(t)})).on("end",(function(){n.streamInfo.crc32!==t.decompressed.crc32?i(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var i=this;return e=n.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),h.isNode&&h.isStream(t)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var i=new o(e);return i.load(t),i})).then((function(t){var i=[r.Promise.resolve(t)],n=t.files;if(e.checkCRC32)for(var s=0;s<n.length;s++)i.push(l(n[s]));return r.Promise.all(i)})).then((function(t){for(var n=t.shift(),r=n.files,s=0;s<r.length;s++){var o=r[s];i.file(o.fileNameStr,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:e.createFolders})}return n.zipComment.length&&(i.comment=n.zipComment),i}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,i){var n=t("../utils"),r=t("../stream/GenericWorker");function s(t,e){r.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}n.inherits(s,r),s.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},s.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,i){var n=t("readable-stream").Readable;function r(t,e,i){n.call(this,e),this._helper=t;var r=this;t.on("data",(function(t,e){r.push(t)||r._helper.pause(),i&&i(e)})).on("error",(function(t){r.emit("error",t)})).on("end",(function(){r.push(null)}))}t("../utils").inherits(r,n),r.prototype._read=function(){this._helper.resume()},e.exports=r},{"../utils":32,"readable-stream":16}],14:[function(t,e,i){e.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,i){function n(t,e,i){var n,r=s.getTypeOf(e),a=s.extend(i||{},h);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(t=f(t)),a.createFolders&&(n=m(t))&&g.call(this,n,!0);var c="string"===r&&!1===a.binary&&!1===a.base64;i&&void 0!==i.binary||(a.binary=!c),(e instanceof l&&0===e.uncompressedSize||a.dir||!e||0===e.length)&&(a.base64=!1,a.binary=!0,e="",a.compression="STORE",r="string");var v=null;v=e instanceof l||e instanceof o?e:u.isNode&&u.isStream(e)?new p(t,e):s.prepareContent(t,e,a.binary,a.optimizedBinaryString,a.base64);var y=new d(t,v,a);this.files[t]=y}var r=t("./utf8"),s=t("./utils"),o=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),h=t("./defaults"),l=t("./compressedObject"),d=t("./zipObject"),c=t("./generate"),u=t("./nodejsUtils"),p=t("./nodejs/NodejsStreamInputAdapter"),m=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},f=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},g=function(t,e){return e=void 0!==e?e:h.createFolders,t=f(t),this.files[t]||n.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function v(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,i,n;for(e in this.files)n=this.files[e],(i=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(i,n)},filter:function(t){var e=[];return this.forEach((function(i,n){t(i,n)&&e.push(n)})),e},file:function(t,e,i){if(1!==arguments.length)return t=this.root+t,n.call(this,t,e,i),this;if(v(t)){var r=t;return this.filter((function(t,e){return!e.dir&&r.test(t)}))}var s=this.files[this.root+t];return s&&!s.dir?s:null},folder:function(t){if(!t)return this;if(v(t))return this.filter((function(e,i){return i.dir&&t.test(e)}));var e=this.root+t,i=g.call(this,e),n=this.clone();return n.root=i.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var i=this.filter((function(e,i){return i.name.slice(0,t.length)===t})),n=0;n<i.length;n++)delete this.files[i[n].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,i={};try{if((i=s.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=i.type.toLowerCase(),i.compression=i.compression.toUpperCase(),"binarystring"===i.type&&(i.type="string"),!i.type)throw new Error("No output type specified.");s.checkSupport(i.type),"darwin"!==i.platform&&"freebsd"!==i.platform&&"linux"!==i.platform&&"sunos"!==i.platform||(i.platform="UNIX"),"win32"===i.platform&&(i.platform="DOS");var n=i.comment||this.comment||"";e=c.generateWorker(this,i,n)}catch(t){(e=new o("error")).error(t)}return new a(e,i.type||"string",i.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,i){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,i){var n=t("./DataReader");function r(t){n.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(r,n),r.prototype.byteAt=function(t){return this.data[this.zero+t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2),r=t.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===e&&this.data[s+1]===i&&this.data[s+2]===n&&this.data[s+3]===r)return s-this.zero;return-1},r.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2),r=t.charCodeAt(3),s=this.readData(4);return e===s[0]&&i===s[1]&&n===s[2]&&r===s[3]},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],18:[function(t,e,i){var n=t("../utils");function r(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,i=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)i=(i<<8)+this.byteAt(e);return this.index+=t,i},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=r},{"../utils":32}],19:[function(t,e,i){var n=t("./Uint8ArrayReader");function r(t){n.call(this,t)}t("../utils").inherits(r,n),r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,i){var n=t("./DataReader");function r(t){n.call(this,t)}t("../utils").inherits(r,n),r.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},r.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],21:[function(t,e,i){var n=t("./ArrayReader");function r(t){n.call(this,t)}t("../utils").inherits(r,n),r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,i){var n=t("../utils"),r=t("../support"),s=t("./ArrayReader"),o=t("./StringReader"),a=t("./NodeBufferReader"),h=t("./Uint8ArrayReader");e.exports=function(t){var e=n.getTypeOf(t);return n.checkSupport(e),"string"!==e||r.uint8array?"nodebuffer"===e?new a(t):r.uint8array?new h(n.transformTo("uint8array",t)):new s(n.transformTo("array",t)):new o(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,i){var n=t("./GenericWorker"),r=t("../utils");function s(t){n.call(this,"ConvertWorker to "+t),this.destType=t}r.inherits(s,n),s.prototype.processChunk=function(t){this.push({data:r.transformTo(this.destType,t.data),meta:t.meta})},e.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,i){var n=t("./GenericWorker"),r=t("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,n),s.prototype.processChunk=function(t){this.streamInfo.crc32=r(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,i){var n=t("../utils"),r=t("./GenericWorker");function s(t){r.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}n.inherits(s,r),s.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}r.prototype.processChunk.call(this,t)},e.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,i){var n=t("../utils"),r=t("./GenericWorker");function s(t){r.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=n.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}n.inherits(s,r),s.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,i){function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var i=0;i<this._listeners[t].length;i++)this._listeners[t][i].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=n},{}],29:[function(t,e,i){var n=t("../utils"),r=t("./ConvertWorker"),s=t("./GenericWorker"),o=t("../base64"),a=t("../support"),h=t("../external"),l=null;if(a.nodestream)try{l=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function d(t,e){return new h.Promise((function(i,r){var s=[],a=t._internalType,h=t._outputType,l=t._mimeType;t.on("data",(function(t,i){s.push(t),e&&e(i)})).on("error",(function(t){s=[],r(t)})).on("end",(function(){try{var t=function(t,e,i){switch(t){case"blob":return n.newBlob(n.transformTo("arraybuffer",e),i);case"base64":return o.encode(e);default:return n.transformTo(t,e)}}(h,function(t,e){var i,n=0,r=null,s=0;for(i=0;i<e.length;i++)s+=e[i].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(r=new Uint8Array(s),i=0;i<e.length;i++)r.set(e[i],n),n+=e[i].length;return r;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(a,s),l);i(t)}catch(t){r(t)}s=[]})).resume()}))}function c(t,e,i){var o=e;switch(e){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=e,this._mimeType=i,n.checkSupport(o),this._worker=t.pipe(new r(o)),t.lock()}catch(t){this._worker=new s("error"),this._worker.error(t)}}c.prototype={accumulate:function(t){return d(this,t)},on:function(t,e){var i=this;return"data"===t?this._worker.on(t,(function(t){e.call(i,t.data,t.meta)})):this._worker.on(t,(function(){n.delay(e,arguments,i)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof Buffer,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=0===new Blob([n],{type:"application/zip"}).size}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(n),i.blob=0===r.getBlob("application/zip").size}catch(t){i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch(t){i.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,i){for(var n=t("./utils"),r=t("./support"),s=t("./nodejsUtils"),o=t("./stream/GenericWorker"),a=new Array(256),h=0;h<256;h++)a[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function l(){o.call(this,"utf-8 decode"),this.leftOver=null}function d(){o.call(this,"utf-8 encode")}a[254]=a[254]=1,i.utf8encode=function(t){return r.nodebuffer?s.newBufferFrom(t,"utf-8"):function(t){var e,i,n,s,o,a=t.length,h=0;for(s=0;s<a;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(n-56320),s++),h+=i<128?1:i<2048?2:i<65536?3:4;for(e=r.uint8array?new Uint8Array(h):new Array(h),s=o=0;o<h;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(n-56320),s++),i<128?e[o++]=i:(i<2048?e[o++]=192|i>>>6:(i<65536?e[o++]=224|i>>>12:(e[o++]=240|i>>>18,e[o++]=128|i>>>12&63),e[o++]=128|i>>>6&63),e[o++]=128|63&i);return e}(t)},i.utf8decode=function(t){return r.nodebuffer?n.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,i,r,s,o=t.length,h=new Array(2*o);for(e=i=0;e<o;)if((r=t[e++])<128)h[i++]=r;else if(4<(s=a[r]))h[i++]=65533,e+=s-1;else{for(r&=2===s?31:3===s?15:7;1<s&&e<o;)r=r<<6|63&t[e++],s--;1<s?h[i++]=65533:r<65536?h[i++]=r:(r-=65536,h[i++]=55296|r>>10&1023,h[i++]=56320|1023&r)}return h.length!==i&&(h.subarray?h=h.subarray(0,i):h.length=i),n.applyFromCharCode(h)}(t=n.transformTo(r.uint8array?"uint8array":"array",t))},n.inherits(l,o),l.prototype.processChunk=function(t){var e=n.transformTo(r.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var s=e;(e=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),e.set(s,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var o=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;0<=i&&128==(192&t[i]);)i--;return i<0||0===i?e:i+a[t[i]]>e?i:e}(e),h=e;o!==e.length&&(r.uint8array?(h=e.subarray(0,o),this.leftOver=e.subarray(o,e.length)):(h=e.slice(0,o),this.leftOver=e.slice(o,e.length))),this.push({data:i.utf8decode(h),meta:t.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=l,n.inherits(d,o),d.prototype.processChunk=function(t){this.push({data:i.utf8encode(t.data),meta:t.meta})},i.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,i){var n=t("./support"),r=t("./base64"),s=t("./nodejsUtils"),o=t("set-immediate-shim"),a=t("./external");function h(t){return t}function l(t,e){for(var i=0;i<t.length;++i)e[i]=255&t.charCodeAt(i);return e}i.newBlob=function(t,e){i.checkSupport("blob");try{return new Blob([t],{type:e})}catch(i){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(t),n.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(t,e,i){var n=[],r=0,s=t.length;if(s<=i)return String.fromCharCode.apply(null,t);for(;r<s;)"array"===e||"nodebuffer"===e?n.push(String.fromCharCode.apply(null,t.slice(r,Math.min(r+i,s)))):n.push(String.fromCharCode.apply(null,t.subarray(r,Math.min(r+i,s)))),r+=i;return n.join("")},stringifyByChar:function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(t){return!1}}()}};function c(t){var e=65536,n=i.getTypeOf(t),r=!0;if("uint8array"===n?r=d.applyCanBeUsed.uint8array:"nodebuffer"===n&&(r=d.applyCanBeUsed.nodebuffer),r)for(;1<e;)try{return d.stringifyByChunk(t,n,e)}catch(t){e=Math.floor(e/2)}return d.stringifyByChar(t)}function u(t,e){for(var i=0;i<t.length;i++)e[i]=t[i];return e}i.applyFromCharCode=c;var p={};p.string={string:h,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return p.string.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:function(t){return l(t,s.allocBuffer(t.length))}},p.array={string:c,array:h,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return s.newBufferFrom(t)}},p.arraybuffer={string:function(t){return c(new Uint8Array(t))},array:function(t){return u(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:h,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return s.newBufferFrom(new Uint8Array(t))}},p.uint8array={string:c,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:h,nodebuffer:function(t){return s.newBufferFrom(t)}},p.nodebuffer={string:c,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return p.nodebuffer.uint8array(t).buffer},uint8array:function(t){return u(t,new Uint8Array(t.length))},nodebuffer:h},i.transformTo=function(t,e){if(e=e||"",!t)return e;i.checkSupport(t);var n=i.getTypeOf(e);return p[n][t](e)},i.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.nodebuffer&&s.isBuffer(t)?"nodebuffer":n.uint8array&&t instanceof Uint8Array?"uint8array":n.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(t){if(!n[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(t){var e,i,n="";for(i=0;i<(t||"").length;i++)n+="\\x"+((e=t.charCodeAt(i))<16?"0":"")+e.toString(16).toUpperCase();return n},i.delay=function(t,e,i){o((function(){t.apply(i||null,e||[])}))},i.inherits=function(t,e){function i(){}i.prototype=e.prototype,t.prototype=new i},i.extend=function(){var t,e,i={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===i[e]&&(i[e]=arguments[t][e]);return i},i.prepareContent=function(t,e,s,o,h){return a.Promise.resolve(e).then((function(t){return n.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new a.Promise((function(e,i){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){i(t.target.error)},n.readAsArrayBuffer(t)})):t})).then((function(e){var d=i.getTypeOf(e);return d?("arraybuffer"===d?e=i.transformTo("uint8array",e):"string"===d&&(h?e=r.decode(e):s&&!0!==o&&(e=function(t){return l(t,n.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):a.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,i){var n=t("./reader/readerFor"),r=t("./utils"),s=t("./signature"),o=t("./zipEntry"),a=(t("./utf8"),t("./support"));function h(t){this.files=[],this.loadOptions=t}h.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(e)+", expected "+r.pretty(t)+")")}},isSignature:function(t,e){var i=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===e;return this.reader.setIndex(i),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=a.uint8array?"uint8array":"array",i=r.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,i,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),e=this.reader.readInt(4),i=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(t=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var n=e-i;if(0<n)this.isSignature(e,s.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(t){this.reader=n(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,i){var n=t("./reader/readerFor"),r=t("./utils"),s=t("./compressedObject"),o=t("./crc32"),a=t("./utf8"),h=t("./compressions"),l=t("./support");function d(t,e){this.options=t,this.loadOptions=e}d.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,i;if(t.skip(22),this.fileNameLength=t.readInt(2),i=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(i),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in h)if(h.hasOwnProperty(e)&&h[e].magic===t)return h[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,i,n,r=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<r;)e=t.readInt(2),i=t.readInt(2),n=t.readData(i),this.extraFields[e]={id:e,length:i,value:n};t.setIndex(r)},handleUTF8:function(){var t=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var i=r.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var s=r.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=n(t.value);return 1!==e.readInt(1)||o(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=n(t.value);return 1!==e.readInt(1)||o(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null}},e.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,i){function n(t,e,i){this.name=t,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=e,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}}var r=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),o=t("./utf8"),a=t("./compressedObject"),h=t("./stream/GenericWorker");n.prototype={internalStream:function(t){var e=null,i="string";try{if(!t)throw new Error("No output type specified.");var n="string"===(i=t.toLowerCase())||"text"===i;"binarystring"!==i&&"text"!==i||(i="string"),e=this._decompressWorker();var s=!this._dataBinary;s&&!n&&(e=e.pipe(new o.Utf8EncodeWorker)),!s&&n&&(e=e.pipe(new o.Utf8DecodeWorker))}catch(t){(e=new h("error")).error(t)}return new r(e,i,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var i=this._decompressWorker();return this._dataBinary||(i=i.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(i,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof h?this._data:new s(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<l.length;c++)n.prototype[l[c]]=d;e.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,i){(function(t){var i,n,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var s=0,o=new r(d),a=t.document.createTextNode("");o.observe(a,{characterData:!0}),i=function(){a.data=s=++s%2}}else if(t.setImmediate||void 0===t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){d(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(d,0)};else{var h=new t.MessageChannel;h.port1.onmessage=d,i=function(){h.port2.postMessage(0)}}var l=[];function d(){var t,e;n=!0;for(var i=l.length;i;){for(e=l,l=[],t=-1;++t<i;)e[t]();i=l.length}n=!1}e.exports=function(t){1!==l.push(t)||n||i()}}).call(this,void 0!==pt?pt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,i){var n=t("immediate");function r(){}var s={},o=["REJECTED"],a=["FULFILLED"],h=["PENDING"];function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,t!==r&&p(this,t)}function d(t,e,i){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function c(t,e,i){n((function(){var n;try{n=e(i)}catch(n){return s.reject(t,n)}n===t?s.reject(t,new TypeError("Cannot resolve promise with itself")):s.resolve(t,n)}))}function u(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var i=!1;function n(e){i||(i=!0,s.reject(t,e))}function r(e){i||(i=!0,s.resolve(t,e))}var o=m((function(){e(r,n)}));"error"===o.status&&n(o.value)}function m(t,e){var i={};try{i.value=t(e),i.status="success"}catch(t){i.status="error",i.value=t}return i}(e.exports=l).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(i){return e.resolve(t()).then((function(){return i}))}),(function(i){return e.resolve(t()).then((function(){throw i}))}))},l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===o)return this;var i=new this.constructor(r);return this.state!==h?c(i,this.state===a?t:e,this.outcome):this.queue.push(new d(i,t,e)),i},d.prototype.callFulfilled=function(t){s.resolve(this.promise,t)},d.prototype.otherCallFulfilled=function(t){c(this.promise,this.onFulfilled,t)},d.prototype.callRejected=function(t){s.reject(this.promise,t)},d.prototype.otherCallRejected=function(t){c(this.promise,this.onRejected,t)},s.resolve=function(t,e){var i=m(u,e);if("error"===i.status)return s.reject(t,i.value);var n=i.value;if(n)p(t,n);else{t.state=a,t.outcome=e;for(var r=-1,o=t.queue.length;++r<o;)t.queue[r].callFulfilled(e)}return t},s.reject=function(t,e){t.state=o,t.outcome=e;for(var i=-1,n=t.queue.length;++i<n;)t.queue[i].callRejected(e);return t},l.resolve=function(t){return t instanceof this?t:s.resolve(new this(r),t)},l.reject=function(t){var e=new this(r);return s.reject(e,t)},l.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,n=!1;if(!i)return this.resolve([]);for(var o=new Array(i),a=0,h=-1,l=new this(r);++h<i;)d(t[h],h);return l;function d(t,r){e.resolve(t).then((function(t){o[r]=t,++a!==i||n||(n=!0,s.resolve(l,o))}),(function(t){n||(n=!0,s.reject(l,t))}))}},l.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,n=!1;if(!i)return this.resolve([]);for(var o,a=-1,h=new this(r);++a<i;)o=t[a],e.resolve(o).then((function(t){n||(n=!0,s.resolve(h,t))}),(function(t){n||(n=!0,s.reject(h,t))}));return h}},{immediate:36}],38:[function(t,e,i){var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,i){var n=t("./zlib/deflate"),r=t("./utils/common"),s=t("./utils/strings"),o=t("./zlib/messages"),a=t("./zlib/zstream"),h=Object.prototype.toString,l=0,d=-1,c=0,u=8;function p(t){if(!(this instanceof p))return new p(t);this.options=r.assign({level:d,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var i=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==l)throw new Error(o[i]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var m;if(m="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(i=n.deflateSetDictionary(this.strm,m))!==l)throw new Error(o[i]);this._dict_set=!0}}function m(t,e){var i=new p(e);if(i.push(t,!0),i.err)throw i.msg||o[i.err];return i.result}p.prototype.push=function(t,e){var i,o,a=this.strm,d=this.options.chunkSize;if(this.ended)return!1;o=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=s.string2buf(t):"[object ArrayBuffer]"===h.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new r.Buf8(d),a.next_out=0,a.avail_out=d),1!==(i=n.deflate(a,o))&&i!==l)return this.onEnd(i),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(r.shrinkBuf(a.output,a.next_out))):this.onData(r.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==i);return 4===o?(i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===l):2!==o||(this.onEnd(l),!(a.avail_out=0))},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Deflate=p,i.deflate=m,i.deflateRaw=function(t,e){return(e=e||{}).raw=!0,m(t,e)},i.gzip=function(t,e){return(e=e||{}).gzip=!0,m(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,i){var n=t("./zlib/inflate"),r=t("./utils/common"),s=t("./utils/strings"),o=t("./zlib/constants"),a=t("./zlib/messages"),h=t("./zlib/zstream"),l=t("./zlib/gzheader"),d=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var i=n.inflateInit2(this.strm,e.windowBits);if(i!==o.Z_OK)throw new Error(a[i]);this.header=new l,n.inflateGetHeader(this.strm,this.header)}function u(t,e){var i=new c(e);if(i.push(t,!0),i.err)throw i.msg||a[i.err];return i.result}c.prototype.push=function(t,e){var i,a,h,l,c,u,p=this.strm,m=this.options.chunkSize,f=this.options.dictionary,g=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof t?p.input=s.binstring2buf(t):"[object ArrayBuffer]"===d.call(t)?p.input=new Uint8Array(t):p.input=t,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new r.Buf8(m),p.next_out=0,p.avail_out=m),(i=n.inflate(p,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&f&&(u="string"==typeof f?s.string2buf(f):"[object ArrayBuffer]"===d.call(f)?new Uint8Array(f):f,i=n.inflateSetDictionary(this.strm,u)),i===o.Z_BUF_ERROR&&!0===g&&(i=o.Z_OK,g=!1),i!==o.Z_STREAM_END&&i!==o.Z_OK)return this.onEnd(i),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&i!==o.Z_STREAM_END&&(0!==p.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(h=s.utf8border(p.output,p.next_out),l=p.next_out-h,c=s.buf2string(p.output,h),p.next_out=l,p.avail_out=m-l,l&&r.arraySet(p.output,p.output,h,l,0),this.onData(c)):this.onData(r.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(g=!0)}while((0<p.avail_in||0===p.avail_out)&&i!==o.Z_STREAM_END);return i===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(i=n.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(p.avail_out=0))},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Inflate=c,i.inflate=u,i.inflateRaw=function(t,e){return(e=e||{}).raw=!0,u(t,e)},i.ungzip=u},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,i){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}}return t},i.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),r);else for(var s=0;s<n;s++)t[r+s]=e[i+s]},flattenChunks:function(t){var e,i,n,r,s,o;for(e=n=0,i=t.length;e<i;e++)n+=t[e].length;for(o=new Uint8Array(n),e=r=0,i=t.length;e<i;e++)s=t[e],o.set(s,r),r+=s.length;return o}},s={arraySet:function(t,e,i,n,r){for(var s=0;s<n;s++)t[r+s]=e[i+s]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,r)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(n)},{}],42:[function(t,e,i){var n=t("./common"),r=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var o=new n.Buf8(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function h(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&r))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var i="",o=0;o<e;o++)i+=String.fromCharCode(t[o]);return i}o[254]=o[254]=1,i.string2buf=function(t){var e,i,r,s,o,a=t.length,h=0;for(s=0;s<a;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(r-56320),s++),h+=i<128?1:i<2048?2:i<65536?3:4;for(e=new n.Buf8(h),s=o=0;o<h;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(r-56320),s++),i<128?e[o++]=i:(i<2048?e[o++]=192|i>>>6:(i<65536?e[o++]=224|i>>>12:(e[o++]=240|i>>>18,e[o++]=128|i>>>12&63),e[o++]=128|i>>>6&63),e[o++]=128|63&i);return e},i.buf2binstring=function(t){return h(t,t.length)},i.binstring2buf=function(t){for(var e=new n.Buf8(t.length),i=0,r=e.length;i<r;i++)e[i]=t.charCodeAt(i);return e},i.buf2string=function(t,e){var i,n,r,s,a=e||t.length,l=new Array(2*a);for(i=n=0;i<a;)if((r=t[i++])<128)l[n++]=r;else if(4<(s=o[r]))l[n++]=65533,i+=s-1;else{for(r&=2===s?31:3===s?15:7;1<s&&i<a;)r=r<<6|63&t[i++],s--;1<s?l[n++]=65533:r<65536?l[n++]=r:(r-=65536,l[n++]=55296|r>>10&1023,l[n++]=56320|1023&r)}return h(l,n)},i.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;0<=i&&128==(192&t[i]);)i--;return i<0||0===i?e:i+o[t[i]]>e?i:e}},{"./common":41}],43:[function(t,e,i){e.exports=function(t,e,i,n){for(var r=65535&t|0,s=t>>>16&65535|0,o=0;0!==i;){for(i-=o=2e3<i?2e3:i;s=s+(r=r+e[n++]|0)|0,--o;);r%=65521,s%=65521}return r|s<<16|0}},{}],44:[function(t,e,i){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,i){var n=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();e.exports=function(t,e,i,r){var s=n,o=r+i;t^=-1;for(var a=r;a<o;a++)t=t>>>8^s[255&(t^e[a])];return-1^t}},{}],46:[function(t,e,i){var n,r=t("../utils/common"),s=t("./trees"),o=t("./adler32"),a=t("./crc32"),h=t("./messages"),l=0,d=4,c=0,u=-2,p=-1,m=4,f=2,g=8,v=9,y=286,x=30,b=19,w=2*y+1,k=15,_=3,C=258,D=C+_+1,E=42,S=113,N=1,M=2,A=3,L=4;function T(t,e){return t.msg=h[e],e}function P(t){return(t<<1)-(4<t?9:0)}function I(t){for(var e=t.length;0<=--e;)t[e]=0}function B(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(r.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function O(t,e){s._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,B(t.strm)}function R(t,e){t.pending_buf[t.pending++]=e}function F(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function z(t,e){var i,n,r=t.max_chain_length,s=t.strstart,o=t.prev_length,a=t.nice_match,h=t.strstart>t.w_size-D?t.strstart-(t.w_size-D):0,l=t.window,d=t.w_mask,c=t.prev,u=t.strstart+C,p=l[s+o-1],m=l[s+o];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(l[(i=e)+o]===m&&l[i+o-1]===p&&l[i]===l[s]&&l[++i]===l[s+1]){s+=2,i++;do{}while(l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&s<u);if(n=C-(u-s),s=u-C,o<n){if(t.match_start=e,a<=(o=n))break;p=l[s+o-1],m=l[s+o]}}}while((e=c[e&d])>h&&0!=--r);return o<=t.lookahead?o:t.lookahead}function q(t){var e,i,n,s,h,l,d,c,u,p,m=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=m+(m-D)){for(r.arraySet(t.window,t.window,m,m,0),t.match_start-=m,t.strstart-=m,t.block_start-=m,e=i=t.hash_size;n=t.head[--e],t.head[e]=m<=n?n-m:0,--i;);for(e=i=m;n=t.prev[--e],t.prev[e]=m<=n?n-m:0,--i;);s+=m}if(0===t.strm.avail_in)break;if(l=t.strm,d=t.window,c=t.strstart+t.lookahead,p=void 0,(u=s)<(p=l.avail_in)&&(p=u),i=0===p?0:(l.avail_in-=p,r.arraySet(d,l.input,l.next_in,p,c),1===l.state.wrap?l.adler=o(l.adler,d,p,c):2===l.state.wrap&&(l.adler=a(l.adler,d,p,c)),l.next_in+=p,l.total_in+=p,p),t.lookahead+=i,t.lookahead+t.insert>=_)for(h=t.strstart-t.insert,t.ins_h=t.window[h],t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+_-1])&t.hash_mask,t.prev[h&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=h,h++,t.insert--,!(t.lookahead+t.insert<_)););}while(t.lookahead<D&&0!==t.strm.avail_in)}function j(t,e){for(var i,n;;){if(t.lookahead<D){if(q(t),t.lookahead<D&&e===l)return N;if(0===t.lookahead)break}if(i=0,t.lookahead>=_&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+_-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-D&&(t.match_length=z(t,i)),t.match_length>=_)if(n=s._tr_tally(t,t.strstart-t.match_start,t.match_length-_),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=_){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+_-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(O(t,!1),0===t.strm.avail_out))return N}return t.insert=t.strstart<_-1?t.strstart:_-1,e===d?(O(t,!0),0===t.strm.avail_out?A:L):t.last_lit&&(O(t,!1),0===t.strm.avail_out)?N:M}function H(t,e){for(var i,n,r;;){if(t.lookahead<D){if(q(t),t.lookahead<D&&e===l)return N;if(0===t.lookahead)break}if(i=0,t.lookahead>=_&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+_-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=_-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-D&&(t.match_length=z(t,i),t.match_length<=5&&(1===t.strategy||t.match_length===_&&4096<t.strstart-t.match_start)&&(t.match_length=_-1)),t.prev_length>=_&&t.match_length<=t.prev_length){for(r=t.strstart+t.lookahead-_,n=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-_),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+_-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=_-1,t.strstart++,n&&(O(t,!1),0===t.strm.avail_out))return N}else if(t.match_available){if((n=s._tr_tally(t,0,t.window[t.strstart-1]))&&O(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return N}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<_-1?t.strstart:_-1,e===d?(O(t,!0),0===t.strm.avail_out?A:L):t.last_lit&&(O(t,!1),0===t.strm.avail_out)?N:M}function $(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*w),this.dyn_dtree=new r.Buf16(2*(2*x+1)),this.bl_tree=new r.Buf16(2*(2*b+1)),I(this.dyn_ltree),I(this.dyn_dtree),I(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(k+1),this.heap=new r.Buf16(2*y+1),I(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*y+1),I(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function U(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=f,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?E:S,t.adler=2===e.wrap?0:1,e.last_flush=l,s._tr_init(e),c):T(t,u)}function V(t){var e=U(t);return e===c&&function(t){t.window_size=2*t.w_size,I(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=_-1,t.match_available=0,t.ins_h=0}(t.state),e}function G(t,e,i,n,s,o){if(!t)return u;var a=1;if(e===p&&(e=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),s<1||v<s||i!==g||n<8||15<n||e<0||9<e||o<0||m<o)return T(t,u);8===n&&(n=9);var h=new W;return(t.state=h).strm=t,h.wrap=a,h.gzhead=null,h.w_bits=n,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+_-1)/_),h.window=new r.Buf8(2*h.w_size),h.head=new r.Buf16(h.hash_size),h.prev=new r.Buf16(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new r.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=o,h.method=i,V(t)}n=[new $(0,0,0,0,(function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(q(t),0===t.lookahead&&e===l)return N;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,O(t,!1),0===t.strm.avail_out))return N;if(t.strstart-t.block_start>=t.w_size-D&&(O(t,!1),0===t.strm.avail_out))return N}return t.insert=0,e===d?(O(t,!0),0===t.strm.avail_out?A:L):(t.strstart>t.block_start&&(O(t,!1),t.strm.avail_out),N)})),new $(4,4,8,4,j),new $(4,5,16,8,j),new $(4,6,32,32,j),new $(4,4,16,16,H),new $(8,16,32,32,H),new $(8,16,128,128,H),new $(8,32,128,256,H),new $(32,128,258,1024,H),new $(32,258,258,4096,H)],i.deflateInit=function(t,e){return G(t,e,g,15,8,0)},i.deflateInit2=G,i.deflateReset=V,i.deflateResetKeep=U,i.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?u:(t.state.gzhead=e,c):u},i.deflate=function(t,e){var i,r,o,h;if(!t||!t.state||5<e||e<0)return t?T(t,u):u;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&e!==d)return T(t,0===t.avail_out?-5:u);if(r.strm=t,i=r.last_flush,r.last_flush=e,r.status===E)if(2===r.wrap)t.adler=0,R(r,31),R(r,139),R(r,8),r.gzhead?(R(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),R(r,255&r.gzhead.time),R(r,r.gzhead.time>>8&255),R(r,r.gzhead.time>>16&255),R(r,r.gzhead.time>>24&255),R(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),R(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(R(r,255&r.gzhead.extra.length),R(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=a(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(R(r,0),R(r,0),R(r,0),R(r,0),R(r,0),R(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),R(r,3),r.status=S);else{var p=g+(r.w_bits-8<<4)<<8;p|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(p|=32),p+=31-p%31,r.status=S,F(r,p),0!==r.strstart&&(F(r,t.adler>>>16),F(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),B(t),o=r.pending,r.pending!==r.pending_buf_size));)R(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),B(t),o=r.pending,r.pending===r.pending_buf_size)){h=1;break}h=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,R(r,h)}while(0!==h);r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),0===h&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),B(t),o=r.pending,r.pending===r.pending_buf_size)){h=1;break}h=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,R(r,h)}while(0!==h);r.gzhead.hcrc&&r.pending>o&&(t.adler=a(t.adler,r.pending_buf,r.pending-o,o)),0===h&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&B(t),r.pending+2<=r.pending_buf_size&&(R(r,255&t.adler),R(r,t.adler>>8&255),t.adler=0,r.status=S)):r.status=S),0!==r.pending){if(B(t),0===t.avail_out)return r.last_flush=-1,c}else if(0===t.avail_in&&P(e)<=P(i)&&e!==d)return T(t,-5);if(666===r.status&&0!==t.avail_in)return T(t,-5);if(0!==t.avail_in||0!==r.lookahead||e!==l&&666!==r.status){var m=2===r.strategy?function(t,e){for(var i;;){if(0===t.lookahead&&(q(t),0===t.lookahead)){if(e===l)return N;break}if(t.match_length=0,i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(O(t,!1),0===t.strm.avail_out))return N}return t.insert=0,e===d?(O(t,!0),0===t.strm.avail_out?A:L):t.last_lit&&(O(t,!1),0===t.strm.avail_out)?N:M}(r,e):3===r.strategy?function(t,e){for(var i,n,r,o,a=t.window;;){if(t.lookahead<=C){if(q(t),t.lookahead<=C&&e===l)return N;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=_&&0<t.strstart&&(n=a[r=t.strstart-1])===a[++r]&&n===a[++r]&&n===a[++r]){o=t.strstart+C;do{}while(n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&r<o);t.match_length=C-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=_?(i=s._tr_tally(t,1,t.match_length-_),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(O(t,!1),0===t.strm.avail_out))return N}return t.insert=0,e===d?(O(t,!0),0===t.strm.avail_out?A:L):t.last_lit&&(O(t,!1),0===t.strm.avail_out)?N:M}(r,e):n[r.level].func(r,e);if(m!==A&&m!==L||(r.status=666),m===N||m===A)return 0===t.avail_out&&(r.last_flush=-1),c;if(m===M&&(1===e?s._tr_align(r):5!==e&&(s._tr_stored_block(r,0,0,!1),3===e&&(I(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),B(t),0===t.avail_out))return r.last_flush=-1,c}return e!==d?c:r.wrap<=0?1:(2===r.wrap?(R(r,255&t.adler),R(r,t.adler>>8&255),R(r,t.adler>>16&255),R(r,t.adler>>24&255),R(r,255&t.total_in),R(r,t.total_in>>8&255),R(r,t.total_in>>16&255),R(r,t.total_in>>24&255)):(F(r,t.adler>>>16),F(r,65535&t.adler)),B(t),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?c:1)},i.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==E&&69!==e&&73!==e&&91!==e&&103!==e&&e!==S&&666!==e?T(t,u):(t.state=null,e===S?T(t,-3):c):u},i.deflateSetDictionary=function(t,e){var i,n,s,a,h,l,d,p,m=e.length;if(!t||!t.state)return u;if(2===(a=(i=t.state).wrap)||1===a&&i.status!==E||i.lookahead)return u;for(1===a&&(t.adler=o(t.adler,e,m,0)),i.wrap=0,m>=i.w_size&&(0===a&&(I(i.head),i.strstart=0,i.block_start=0,i.insert=0),p=new r.Buf8(i.w_size),r.arraySet(p,e,m-i.w_size,i.w_size,0),e=p,m=i.w_size),h=t.avail_in,l=t.next_in,d=t.input,t.avail_in=m,t.next_in=0,t.input=e,q(i);i.lookahead>=_;){for(n=i.strstart,s=i.lookahead-(_-1);i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+_-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++,--s;);i.strstart=n,i.lookahead=_-1,q(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=_-1,i.match_available=0,t.next_in=l,t.input=d,t.avail_in=h,i.wrap=a,c},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,i){e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,i){e.exports=function(t,e){var i,n,r,s,o,a,h,l,d,c,u,p,m,f,g,v,y,x,b,w,k,_,C,D,E;i=t.state,n=t.next_in,D=t.input,r=n+(t.avail_in-5),s=t.next_out,E=t.output,o=s-(e-t.avail_out),a=s+(t.avail_out-257),h=i.dmax,l=i.wsize,d=i.whave,c=i.wnext,u=i.window,p=i.hold,m=i.bits,f=i.lencode,g=i.distcode,v=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;t:do{m<15&&(p+=D[n++]<<m,m+=8,p+=D[n++]<<m,m+=8),x=f[p&v];e:for(;;){if(p>>>=b=x>>>24,m-=b,0==(b=x>>>16&255))E[s++]=65535&x;else{if(!(16&b)){if(0==(64&b)){x=f[(65535&x)+(p&(1<<b)-1)];continue e}if(32&b){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}w=65535&x,(b&=15)&&(m<b&&(p+=D[n++]<<m,m+=8),w+=p&(1<<b)-1,p>>>=b,m-=b),m<15&&(p+=D[n++]<<m,m+=8,p+=D[n++]<<m,m+=8),x=g[p&y];i:for(;;){if(p>>>=b=x>>>24,m-=b,!(16&(b=x>>>16&255))){if(0==(64&b)){x=g[(65535&x)+(p&(1<<b)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(k=65535&x,m<(b&=15)&&(p+=D[n++]<<m,(m+=8)<b&&(p+=D[n++]<<m,m+=8)),h<(k+=p&(1<<b)-1)){t.msg="invalid distance too far back",i.mode=30;break t}if(p>>>=b,m-=b,(b=s-o)<k){if(d<(b=k-b)&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(C=u,(_=0)===c){if(_+=l-b,b<w){for(w-=b;E[s++]=u[_++],--b;);_=s-k,C=E}}else if(c<b){if(_+=l+c-b,(b-=c)<w){for(w-=b;E[s++]=u[_++],--b;);if(_=0,c<w){for(w-=b=c;E[s++]=u[_++],--b;);_=s-k,C=E}}}else if(_+=c-b,b<w){for(w-=b;E[s++]=u[_++],--b;);_=s-k,C=E}for(;2<w;)E[s++]=C[_++],E[s++]=C[_++],E[s++]=C[_++],w-=3;w&&(E[s++]=C[_++],1<w&&(E[s++]=C[_++]))}else{for(_=s-k;E[s++]=E[_++],E[s++]=E[_++],E[s++]=E[_++],2<(w-=3););w&&(E[s++]=E[_++],1<w&&(E[s++]=E[_++]))}break}}break}}while(n<r&&s<a);n-=w=m>>3,p&=(1<<(m-=w<<3))-1,t.next_in=n,t.next_out=s,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=s<a?a-s+257:257-(s-a),i.hold=p,i.bits=m}},{}],49:[function(t,e,i){var n=t("../utils/common"),r=t("./adler32"),s=t("./crc32"),o=t("./inffast"),a=t("./inftrees"),h=1,l=2,d=0,c=-2,u=1,p=852,m=592;function f(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=u,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(p),e.distcode=e.distdyn=new n.Buf32(m),e.sane=1,e.back=-1,d):c}function y(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,v(t)):c}function x(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?c:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,y(t))):c}function b(t,e){var i,n;return t?(n=new g,(t.state=n).window=null,(i=x(t,e))!==d&&(t.state=null),i):c}var w,k,_=!0;function C(t){if(_){var e;for(w=new n.Buf32(512),k=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(h,t.lens,0,288,w,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(l,t.lens,0,32,k,0,t.work,{bits:5}),_=!1}t.lencode=w,t.lenbits=9,t.distcode=k,t.distbits=5}function D(t,e,i,r){var s,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),r>=o.wsize?(n.arraySet(o.window,e,i-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r<(s=o.wsize-o.wnext)&&(s=r),n.arraySet(o.window,e,i-r,s,o.wnext),(r-=s)?(n.arraySet(o.window,e,i-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}i.inflateReset=y,i.inflateReset2=x,i.inflateResetKeep=v,i.inflateInit=function(t){return b(t,15)},i.inflateInit2=b,i.inflate=function(t,e){var i,p,m,g,v,y,x,b,w,k,_,E,S,N,M,A,L,T,P,I,B,O,R,F,z=0,q=new n.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return c;12===(i=t.state).mode&&(i.mode=13),v=t.next_out,m=t.output,x=t.avail_out,g=t.next_in,p=t.input,y=t.avail_in,b=i.hold,w=i.bits,k=y,_=x,O=d;t:for(;;)switch(i.mode){case u:if(0===i.wrap){i.mode=13;break}for(;w<16;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}if(2&i.wrap&&35615===b){q[i.check=0]=255&b,q[1]=b>>>8&255,i.check=s(i.check,q,2,0),w=b=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&b)<<8)+(b>>8))%31){t.msg="incorrect header check",i.mode=30;break}if(8!=(15&b)){t.msg="unknown compression method",i.mode=30;break}if(w-=4,B=8+(15&(b>>>=4)),0===i.wbits)i.wbits=B;else if(B>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<B,t.adler=i.check=1,i.mode=512&b?10:12,w=b=0;break;case 2:for(;w<16;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}if(i.flags=b,8!=(255&i.flags)){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=b>>8&1),512&i.flags&&(q[0]=255&b,q[1]=b>>>8&255,i.check=s(i.check,q,2,0)),w=b=0,i.mode=3;case 3:for(;w<32;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}i.head&&(i.head.time=b),512&i.flags&&(q[0]=255&b,q[1]=b>>>8&255,q[2]=b>>>16&255,q[3]=b>>>24&255,i.check=s(i.check,q,4,0)),w=b=0,i.mode=4;case 4:for(;w<16;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}i.head&&(i.head.xflags=255&b,i.head.os=b>>8),512&i.flags&&(q[0]=255&b,q[1]=b>>>8&255,i.check=s(i.check,q,2,0)),w=b=0,i.mode=5;case 5:if(1024&i.flags){for(;w<16;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}i.length=b,i.head&&(i.head.extra_len=b),512&i.flags&&(q[0]=255&b,q[1]=b>>>8&255,i.check=s(i.check,q,2,0)),w=b=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(y<(E=i.length)&&(E=y),E&&(i.head&&(B=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,p,g,E,B)),512&i.flags&&(i.check=s(i.check,p,E,g)),y-=E,g+=E,i.length-=E),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===y)break t;for(E=0;B=p[g+E++],i.head&&B&&i.length<65536&&(i.head.name+=String.fromCharCode(B)),B&&E<y;);if(512&i.flags&&(i.check=s(i.check,p,E,g)),y-=E,g+=E,B)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===y)break t;for(E=0;B=p[g+E++],i.head&&B&&i.length<65536&&(i.head.comment+=String.fromCharCode(B)),B&&E<y;);if(512&i.flags&&(i.check=s(i.check,p,E,g)),y-=E,g+=E,B)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;w<16;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}if(b!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}w=b=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;w<32;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}t.adler=i.check=f(b),w=b=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=v,t.avail_out=x,t.next_in=g,t.avail_in=y,i.hold=b,i.bits=w,2;t.adler=i.check=1,i.mode=12;case 12:if(5===e||6===e)break t;case 13:if(i.last){b>>>=7&w,w-=7&w,i.mode=27;break}for(;w<3;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}switch(i.last=1&b,w-=1,3&(b>>>=1)){case 0:i.mode=14;break;case 1:if(C(i),i.mode=20,6!==e)break;b>>>=2,w-=2;break t;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}b>>>=2,w-=2;break;case 14:for(b>>>=7&w,w-=7&w;w<32;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}if((65535&b)!=(b>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&b,w=b=0,i.mode=15,6===e)break t;case 15:i.mode=16;case 16:if(E=i.length){if(y<E&&(E=y),x<E&&(E=x),0===E)break t;n.arraySet(m,p,g,E,v),y-=E,g+=E,x-=E,v+=E,i.length-=E;break}i.mode=12;break;case 17:for(;w<14;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}if(i.nlen=257+(31&b),b>>>=5,w-=5,i.ndist=1+(31&b),b>>>=5,w-=5,i.ncode=4+(15&b),b>>>=4,w-=4,286<i.nlen||30<i.ndist){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;w<3;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}i.lens[j[i.have++]]=7&b,b>>>=3,w-=3}for(;i.have<19;)i.lens[j[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,R={bits:i.lenbits},O=a(0,i.lens,0,19,i.lencode,0,i.work,R),i.lenbits=R.bits,O){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;A=(z=i.lencode[b&(1<<i.lenbits)-1])>>>16&255,L=65535&z,!((M=z>>>24)<=w);){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}if(L<16)b>>>=M,w-=M,i.lens[i.have++]=L;else{if(16===L){for(F=M+2;w<F;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}if(b>>>=M,w-=M,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}B=i.lens[i.have-1],E=3+(3&b),b>>>=2,w-=2}else if(17===L){for(F=M+3;w<F;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}w-=M,B=0,E=3+(7&(b>>>=M)),b>>>=3,w-=3}else{for(F=M+7;w<F;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}w-=M,B=0,E=11+(127&(b>>>=M)),b>>>=7,w-=7}if(i.have+E>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;E--;)i.lens[i.have++]=B}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,R={bits:i.lenbits},O=a(h,i.lens,0,i.nlen,i.lencode,0,i.work,R),i.lenbits=R.bits,O){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,R={bits:i.distbits},O=a(l,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,R),i.distbits=R.bits,O){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===e)break t;case 20:i.mode=21;case 21:if(6<=y&&258<=x){t.next_out=v,t.avail_out=x,t.next_in=g,t.avail_in=y,i.hold=b,i.bits=w,o(t,_),v=t.next_out,m=t.output,x=t.avail_out,g=t.next_in,p=t.input,y=t.avail_in,b=i.hold,w=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;A=(z=i.lencode[b&(1<<i.lenbits)-1])>>>16&255,L=65535&z,!((M=z>>>24)<=w);){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}if(A&&0==(240&A)){for(T=M,P=A,I=L;A=(z=i.lencode[I+((b&(1<<T+P)-1)>>T)])>>>16&255,L=65535&z,!(T+(M=z>>>24)<=w);){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}b>>>=T,w-=T,i.back+=T}if(b>>>=M,w-=M,i.back+=M,i.length=L,0===A){i.mode=26;break}if(32&A){i.back=-1,i.mode=12;break}if(64&A){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&A,i.mode=22;case 22:if(i.extra){for(F=i.extra;w<F;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}i.length+=b&(1<<i.extra)-1,b>>>=i.extra,w-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;A=(z=i.distcode[b&(1<<i.distbits)-1])>>>16&255,L=65535&z,!((M=z>>>24)<=w);){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}if(0==(240&A)){for(T=M,P=A,I=L;A=(z=i.distcode[I+((b&(1<<T+P)-1)>>T)])>>>16&255,L=65535&z,!(T+(M=z>>>24)<=w);){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}b>>>=T,w-=T,i.back+=T}if(b>>>=M,w-=M,i.back+=M,64&A){t.msg="invalid distance code",i.mode=30;break}i.offset=L,i.extra=15&A,i.mode=24;case 24:if(i.extra){for(F=i.extra;w<F;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}i.offset+=b&(1<<i.extra)-1,b>>>=i.extra,w-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===x)break t;if(E=_-x,i.offset>E){if((E=i.offset-E)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}S=E>i.wnext?(E-=i.wnext,i.wsize-E):i.wnext-E,E>i.length&&(E=i.length),N=i.window}else N=m,S=v-i.offset,E=i.length;for(x<E&&(E=x),x-=E,i.length-=E;m[v++]=N[S++],--E;);0===i.length&&(i.mode=21);break;case 26:if(0===x)break t;m[v++]=i.length,x--,i.mode=21;break;case 27:if(i.wrap){for(;w<32;){if(0===y)break t;y--,b|=p[g++]<<w,w+=8}if(_-=x,t.total_out+=_,i.total+=_,_&&(t.adler=i.check=i.flags?s(i.check,m,_,v-_):r(i.check,m,_,v-_)),_=x,(i.flags?b:f(b))!==i.check){t.msg="incorrect data check",i.mode=30;break}w=b=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;w<32;){if(0===y)break t;y--,b+=p[g++]<<w,w+=8}if(b!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}w=b=0}i.mode=29;case 29:O=1;break t;case 30:O=-3;break t;case 31:return-4;case 32:default:return c}return t.next_out=v,t.avail_out=x,t.next_in=g,t.avail_in=y,i.hold=b,i.bits=w,(i.wsize||_!==t.avail_out&&i.mode<30&&(i.mode<27||4!==e))&&D(t,t.output,t.next_out,_-t.avail_out)?(i.mode=31,-4):(k-=t.avail_in,_-=t.avail_out,t.total_in+=k,t.total_out+=_,i.total+=_,i.wrap&&_&&(t.adler=i.check=i.flags?s(i.check,m,_,t.next_out-_):r(i.check,m,_,t.next_out-_)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0==k&&0===_||4===e)&&O===d&&(O=-5),O)},i.inflateEnd=function(t){if(!t||!t.state)return c;var e=t.state;return e.window&&(e.window=null),t.state=null,d},i.inflateGetHeader=function(t,e){var i;return t&&t.state?0==(2&(i=t.state).wrap)?c:((i.head=e).done=!1,d):c},i.inflateSetDictionary=function(t,e){var i,n=e.length;return t&&t.state?0!==(i=t.state).wrap&&11!==i.mode?c:11===i.mode&&r(1,e,n,0)!==i.check?-3:D(t,e,n,n)?(i.mode=31,-4):(i.havedict=1,d):c},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,i){var n=t("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,i,h,l,d,c,u){var p,m,f,g,v,y,x,b,w,k=u.bits,_=0,C=0,D=0,E=0,S=0,N=0,M=0,A=0,L=0,T=0,P=null,I=0,B=new n.Buf16(16),O=new n.Buf16(16),R=null,F=0;for(_=0;_<=15;_++)B[_]=0;for(C=0;C<h;C++)B[e[i+C]]++;for(S=k,E=15;1<=E&&0===B[E];E--);if(E<S&&(S=E),0===E)return l[d++]=20971520,l[d++]=20971520,u.bits=1,0;for(D=1;D<E&&0===B[D];D++);for(S<D&&(S=D),_=A=1;_<=15;_++)if(A<<=1,(A-=B[_])<0)return-1;if(0<A&&(0===t||1!==E))return-1;for(O[1]=0,_=1;_<15;_++)O[_+1]=O[_]+B[_];for(C=0;C<h;C++)0!==e[i+C]&&(c[O[e[i+C]]++]=C);if(y=0===t?(P=R=c,19):1===t?(P=r,I-=257,R=s,F-=257,256):(P=o,R=a,-1),_=D,v=d,M=C=T=0,f=-1,g=(L=1<<(N=S))-1,1===t&&852<L||2===t&&592<L)return 1;for(;;){for(x=_-M,w=c[C]<y?(b=0,c[C]):c[C]>y?(b=R[F+c[C]],P[I+c[C]]):(b=96,0),p=1<<_-M,D=m=1<<N;l[v+(T>>M)+(m-=p)]=x<<24|b<<16|w|0,0!==m;);for(p=1<<_-1;T&p;)p>>=1;if(0!==p?(T&=p-1,T+=p):T=0,C++,0==--B[_]){if(_===E)break;_=e[i+c[C]]}if(S<_&&(T&g)!==f){for(0===M&&(M=S),v+=D,A=1<<(N=_-M);N+M<E&&!((A-=B[N+M])<=0);)N++,A<<=1;if(L+=1<<N,1===t&&852<L||2===t&&592<L)return 1;l[f=T&g]=S<<24|N<<16|v-d|0}}return 0!==T&&(l[v+T]=_-M<<24|64<<16|0),u.bits=S,0}},{"../utils/common":41}],51:[function(t,e,i){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,i){var n=t("../utils/common"),r=0,s=1;function o(t){for(var e=t.length;0<=--e;)t[e]=0}var a=0,h=29,l=256,d=l+1+h,c=30,u=19,p=2*d+1,m=15,f=16,g=7,v=256,y=16,x=17,b=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=new Array(2*(d+2));o(D);var E=new Array(2*c);o(E);var S=new Array(512);o(S);var N=new Array(256);o(N);var M=new Array(h);o(M);var A,L,T,P=new Array(c);function I(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function B(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function O(t){return t<256?S[t]:S[256+(t>>>7)]}function R(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function F(t,e,i){t.bi_valid>f-i?(t.bi_buf|=e<<t.bi_valid&65535,R(t,t.bi_buf),t.bi_buf=e>>f-t.bi_valid,t.bi_valid+=i-f):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function z(t,e,i){F(t,i[2*e],i[2*e+1])}function q(t,e){for(var i=0;i|=1&t,t>>>=1,i<<=1,0<--e;);return i>>>1}function j(t,e,i){var n,r,s=new Array(m+1),o=0;for(n=1;n<=m;n++)s[n]=o=o+i[n-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=q(s[a]++,a))}}function H(t){var e;for(e=0;e<d;e++)t.dyn_ltree[2*e]=0;for(e=0;e<c;e++)t.dyn_dtree[2*e]=0;for(e=0;e<u;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*v]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function $(t){8<t.bi_valid?R(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function W(t,e,i,n){var r=2*e,s=2*i;return t[r]<t[s]||t[r]===t[s]&&n[e]<=n[i]}function U(t,e,i){for(var n=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&W(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!W(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n}function V(t,e,i){var n,r,s,o,a=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],r=t.pending_buf[t.l_buf+a],a++,0===n?z(t,r,e):(z(t,(s=N[r])+l+1,e),0!==(o=w[s])&&F(t,r-=M[s],o),z(t,s=O(--n),i),0!==(o=k[s])&&F(t,n-=P[s],o)),a<t.last_lit;);z(t,v,e)}function G(t,e){var i,n,r,s=e.dyn_tree,o=e.stat_desc.static_tree,a=e.stat_desc.has_stree,h=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=p,i=0;i<h;i++)0!==s[2*i]?(t.heap[++t.heap_len]=l=i,t.depth[i]=0):s[2*i+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=o[2*r+1]);for(e.max_code=l,i=t.heap_len>>1;1<=i;i--)U(t,s,i);for(r=h;i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],U(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,s[2*r]=s[2*i]+s[2*n],t.depth[r]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,s[2*i+1]=s[2*n+1]=r,t.heap[1]=r++,U(t,s,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,n,r,s,o,a,h=e.dyn_tree,l=e.max_code,d=e.stat_desc.static_tree,c=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,g=e.stat_desc.max_length,v=0;for(s=0;s<=m;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<p;i++)g<(s=h[2*h[2*(n=t.heap[i])+1]+1]+1)&&(s=g,v++),h[2*n+1]=s,l<n||(t.bl_count[s]++,o=0,f<=n&&(o=u[n-f]),a=h[2*n],t.opt_len+=a*(s+o),c&&(t.static_len+=a*(d[2*n+1]+o)));if(0!==v){do{for(s=g-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[g]--,v-=2}while(0<v);for(s=g;0!==s;s--)for(n=t.bl_count[s];0!==n;)l<(r=t.heap[--i])||(h[2*r+1]!==s&&(t.opt_len+=(s-h[2*r+1])*h[2*r],h[2*r+1]=s),n--)}}(t,e),j(s,l,t.bl_count)}function X(t,e,i){var n,r,s=-1,o=e[1],a=0,h=7,l=4;for(0===o&&(h=138,l=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)r=o,o=e[2*(n+1)+1],++a<h&&r===o||(a<l?t.bl_tree[2*r]+=a:0!==r?(r!==s&&t.bl_tree[2*r]++,t.bl_tree[2*y]++):a<=10?t.bl_tree[2*x]++:t.bl_tree[2*b]++,s=r,l=(a=0)===o?(h=138,3):r===o?(h=6,3):(h=7,4))}function Y(t,e,i){var n,r,s=-1,o=e[1],a=0,h=7,l=4;for(0===o&&(h=138,l=3),n=0;n<=i;n++)if(r=o,o=e[2*(n+1)+1],!(++a<h&&r===o)){if(a<l)for(;z(t,r,t.bl_tree),0!=--a;);else 0!==r?(r!==s&&(z(t,r,t.bl_tree),a--),z(t,y,t.bl_tree),F(t,a-3,2)):a<=10?(z(t,x,t.bl_tree),F(t,a-3,3)):(z(t,b,t.bl_tree),F(t,a-11,7));s=r,l=(a=0)===o?(h=138,3):r===o?(h=6,3):(h=7,4)}}o(P);var Z=!1;function J(t,e,i,r){F(t,(a<<1)+(r?1:0),3),function(t,e,i,r){$(t),r&&(R(t,i),R(t,~i)),n.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i,!0)}i._tr_init=function(t){Z||(function(){var t,e,i,n,r,s=new Array(m+1);for(n=i=0;n<h-1;n++)for(M[n]=i,t=0;t<1<<w[n];t++)N[i++]=n;for(N[i-1]=n,n=r=0;n<16;n++)for(P[n]=r,t=0;t<1<<k[n];t++)S[r++]=n;for(r>>=7;n<c;n++)for(P[n]=r<<7,t=0;t<1<<k[n]-7;t++)S[256+r++]=n;for(e=0;e<=m;e++)s[e]=0;for(t=0;t<=143;)D[2*t+1]=8,t++,s[8]++;for(;t<=255;)D[2*t+1]=9,t++,s[9]++;for(;t<=279;)D[2*t+1]=7,t++,s[7]++;for(;t<=287;)D[2*t+1]=8,t++,s[8]++;for(j(D,d+1,s),t=0;t<c;t++)E[2*t+1]=5,E[2*t]=q(t,5);A=new I(D,w,l+1,d,m),L=new I(E,k,0,c,m),T=new I(new Array(0),_,0,u,g)}(),Z=!0),t.l_desc=new B(t.dyn_ltree,A),t.d_desc=new B(t.dyn_dtree,L),t.bl_desc=new B(t.bl_tree,T),t.bi_buf=0,t.bi_valid=0,H(t)},i._tr_stored_block=J,i._tr_flush_block=function(t,e,i,n){var o,a,h=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return r;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return s;for(e=32;e<l;e++)if(0!==t.dyn_ltree[2*e])return s;return r}(t)),G(t,t.l_desc),G(t,t.d_desc),h=function(t){var e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),G(t,t.bl_desc),e=u-1;3<=e&&0===t.bl_tree[2*C[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),o=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=o&&(o=a)):o=a=i+5,i+4<=o&&-1!==e?J(t,e,i,n):4===t.strategy||a===o?(F(t,2+(n?1:0),3),V(t,D,E)):(F(t,4+(n?1:0),3),function(t,e,i,n){var r;for(F(t,e-257,5),F(t,i-1,5),F(t,n-4,4),r=0;r<n;r++)F(t,t.bl_tree[2*C[r]+1],3);Y(t,t.dyn_ltree,e-1),Y(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),V(t,t.dyn_ltree,t.dyn_dtree)),H(t),n&&$(t)},i._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(N[i]+l+1)]++,t.dyn_dtree[2*O(e)]++),t.last_lit===t.lit_bufsize-1},i._tr_align=function(t){F(t,2,3),z(t,v,D),function(t){16===t.bi_valid?(R(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,i){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,i){e.exports="function"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)})),ni={},ri=["#fda16c","#74bdf7","#71FF5E","orange","#D4D4AA","yellow"];
/*!

JSZip v3.7.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/const si=function(t){ni={theme:"blue",mindData:[],induceData:[],wireFrameData:[],relateLink:[],background:"",relateLinkData:[],calloutData:[],marks:[]};var e=[];ai(t.rootTopic,null,e,!0);var i=e[0];return t.rootTopic.children&&t.rootTopic.children.detached&&t.rootTopic.children.detached.forEach((t=>{var n=[];ai(t,i.id,n),e=e.concat(n)})),ni.mindData.push(e),t.relationships&&t.relationships.forEach((t=>{var e={startNodeId:t.end1Id,endNodeId:t.end2Id,nodeData:{text:"",nodeType:"relateLink",backgroundColor:"#f06"}};t.title&&(e.nodeData.text=t.title),ni.relateLinkData.push(e)})),ni};var oi={"task-start":"0","task-oct":"10","task-3oct":"30","task-5oct":"50","task-7oct":"70","task-9oct":"90","task-done":"100"};function ai(t,e,i,n){var r="";t.title&&(r=t.title.replace(/(\r\n)|(\n)/g,"<br/>"));var s={id:t.id,pid:e,text:r,note:"",marks:[],isExpand:!0,image:"",imageName:"",x:0,y:0};e||(s.layout={},s.layout.layoutName="mindmap2",s.layout.direct="right",n&&(s.isRoot=!0,s.main=!0,s.x=4e3,s.y=4e3)),t.href&&(s.link=t.href),t.notes&&(s.note=t.notes.plain.content.replace(/\n/g,"<br>").trim()),t.labels&&(s.marks=[],t.labels.forEach((t=>{s.marks.push({id:Fn(),text:t,fill:ri[parseInt(Math.random()*ri.length+"")]})}))),t.markers&&t.markers.forEach((t=>{t.markerId.indexOf("priority")>-1&&(s.priority=t.markerId.split("-")[1]),t.markerId.indexOf("task")>-1&&(s.percent=oi[t.markerId])})),i.push(s),t.children&&t.children.attached&&t.children.attached.forEach((e=>{ai(e,t.id,i)})),t.summaries&&t.summaries.forEach((e=>{var i=e.range.substring(1,e.range.length-1),n=i.split(",")[0],r=i.split(",")[1],s={induceData:{nodeId:e.topicId,range:i,id:e.id}};t.children.attached.forEach(((t,e)=>{e==n&&(s.induceData.nodeId=t.id),e==r&&(s.induceData.endNodeId=t.id)}));var o=[];ai(t.children.summary.filter((t=>t.id==e.topicId))[0],null,o),o[0].nodeType="induce",s.mindData=o,ni.induceData.push(s)})),t.boundaries&&t.boundaries.forEach((e=>{var i=e.range.substring(1,e.range.length-1),n=i.split(",")[0],r=i.split(",")[1],s={stroke:"rgb(206, 214, 218)",fill:"transparent",lineDash:[6,2],radius:10,data:{text:"",nodeType:"wireFrame"}};e.title&&(s.data={text:e.title,nodeType:"wireFrame"}),t.children.attached.forEach(((t,e)=>{e==n&&(s.nodeId=t.id),e==r&&(s.endNodeId=t.id)})),s.range=i,ni.wireFrameData.push(s)})),t.children&&t.children.callout&&t.children.callout.forEach((e=>{var i={nodeId:t.id,color:"#f06",rootData:{text:e.title,id:e.id}};ni.calloutData.push(i)}))}function hi(t){for(var e=[],i=0;i<t.length;i++)-1==e.indexOf(t[i])&&e.push(t[i]);return e}function li(t,e){var i=e.parentNode;i&&i.lastChild==e?i.appendChild(t):i.insertBefore(t,e.nextSibling)}let di='<svg class="icon" width="16px" height="16.00px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path  d="M799.2 874.4c0 34.4-28 62.4-62.368 62.4H287.2a62.496 62.496 0 0 1-62.4-62.4V212h574.4v662.4zM349.6 100c0-7.2 5.6-12.8 12.8-12.8h300c7.2 0 12.768 5.6 12.768 12.8v37.6H349.6V100z m636.8 37.6H749.6V100c0-48-39.2-87.2-87.2-87.2h-300a87.392 87.392 0 0 0-87.2 87.2v37.6H37.6C16.8 137.6 0 154.4 0 175.2s16.8 37.6 37.6 37.6h112v661.6A137.6 137.6 0 0 0 287.2 1012h449.6a137.6 137.6 0 0 0 137.6-137.6V212h112c20.8 0 37.6-16.8 37.6-37.6s-16.8-36.8-37.6-36.8zM512 824c20.8 0 37.6-16.8 37.6-37.6v-400c0-20.8-16.768-37.6-37.6-37.6-20.8 0-37.6 16.8-37.6 37.6v400c0 20.8 16.8 37.6 37.6 37.6m-175.2 0c20.8 0 37.6-16.8 37.6-37.6v-400c0-20.8-16.8-37.6-37.6-37.6s-37.6 16.8-37.6 37.6v400c0.8 20.8 17.6 37.6 37.6 37.6m350.4 0c20.8 0 37.632-16.8 37.632-37.6v-400c0-20.8-16.8-37.6-37.632-37.6-20.768 0-37.6 16.8-37.6 37.6v400c0 20.8 16.8 37.6 37.6 37.6" /></svg>',ci={left:'<svg t="1639299949096" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3192" width="16" height="16"><path d="M118.153846 275.692308l787.692308 0 0 78.769231-787.692308 0 0-78.769231Z" p-id="3193"></path><path d="M118.153846 472.615385l315.076923 0 0 78.769231-315.076923 0 0-78.769231Z" p-id="3194"></path><path d="M118.153846 669.538462l551.384615 0 0 78.769231-551.384615 0 0-78.769231Z" p-id="3195"></path></svg>',right:'<svg t="1639299992428" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3369" width="16" height="16"><path d="M118.153846 275.692308l787.692308 0 0 78.769231-787.692308 0 0-78.769231Z" p-id="3370"></path><path d="M590.769231 472.615385l315.076923 0 0 78.769231-315.076923 0 0-78.769231Z" p-id="3371"></path><path d="M354.461538 669.538462l551.384615 0 0 78.769231-551.384615 0 0-78.769231Z" p-id="3372"></path></svg>',center:'<svg t="1639300701017" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3723" width="16" height="16"><path d="M157.538462 275.692308l708.923077 0 0 78.769231-708.923077 0 0-78.769231Z" p-id="3724"></path><path d="M157.538462 472.615385l708.923077 0 0 78.769231-708.923077 0 0-78.769231Z" p-id="3725"></path><path d="M157.538462 669.538462l708.923077 0 0 78.769231-708.923077 0 0-78.769231Z" p-id="3726"></path></svg>'},ui='<svg t="1639459396796" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2501" width="28" height="28"><path d="M768 199.111111h-512a56.888889 56.888889 0 0 0-56.888889 56.888889v512a56.888889 56.888889 0 0 0 56.888889 56.888889h512a56.888889 56.888889 0 0 0 56.888889-56.888889v-512a56.888889 56.888889 0 0 0-56.888889-56.888889z m0 227.555556h-170.666667v170.666666h170.666667v170.666667h-170.666667v-170.666667h-170.666666v170.666667h-170.666667v-170.666667h170.666667v-170.666666h-170.666667v-170.666667h170.666667v170.666667h170.666666v-170.666667h170.666667z" p-id="2502"></path></svg>';class pi{constructor(t,e,i,n=!0){if(this._nodeNum=0,this._tempNum=0,this.colors=[],this.scalePointer=[],this.mindScale=100,this.timeOut=null,this._dragType="",this.induces=[],this.induceGroup=null,this.freeNodes=[],this.wireFrames=[],this.wireFrameGroup=null,this.callouts=[],this.calloutGroup=null,this.relateLinks=[],this.relateGroup=null,this.parent=null,this._doubleMark=0,this.showFilter=!1,this._mode="basic",this._initTime=null,this.isMobile=!1,this.isRead=!1,this._setupAssistBoard=null,this.themeConfig=null,this.isEditNote=!1,this._noteTab=null,this.useAnimate=!1,this._initEvents=!0,this._scaleDom=null,this._colors=["#333","rgb(78, 52, 46)","#666","#ccc","orange","rgb(51, 51, 51)","rgb(240, 244, 195)","red","blue","rgb(5, 196, 235)","rgb(16, 151, 232)","rgb(164, 195, 190)","rgb(67, 160, 71)","rgb(115, 154, 163)","rgb(40, 53, 147)","white","#44CEF6","#72A779","#6DD625","#3E76A5","#943ACA","#7ADD99","#E82C0D","#B386B8","#D8B24D","#333","rgb(78, 52, 46)","#666","#ccc","orange","rgb(51, 51, 51)","rgb(240, 244, 195)","red","blue","rgb(5, 196, 235)","rgb(16, 151, 232)","rgb(164, 195, 190)","rgb(67, 160, 71)","rgb(115, 154, 163)","rgb(40, 53, 147)","white","#44CEF6","#72A779","#6DD625","#3E76A5","#943ACA","#7ADD99","#E82C0D","#B386B8","#D8B24D"],this._strokeWidth=[1,2,3,4],this._strokeStyle=["solid","dashed","dotted"],this._textAlign=["left","center","right"],this._fontSize=[12,14,16,18,20,22,24],this._fontStyle=["bold","italic","underline","line-throw"],this._nodeBoard=null,this._isSelectNode=!1,this._selectDom=null,this._offsetX=0,this._offsetY=0,this.tableDom=null,this._themeName="",this.isScale=!1,this._setTime=null,this._scrollLeft=0,this._scrollTop=0,this._searchDom=null,this.useHandMode=!1,this._rc=null,this.basicLayoutInfo=null,this.setting=Object.assign({theme:"default",canvasSize:8e3,fontSize:16,background:"transparent",color:"inherit",exportMdModel:"default",headLevel:2,layoutDirect:"",layout:"mindmap1",strokeArray:[],pdfjsPath:"",useAnimate:!1,nodeColorArray:"",useHandMode:!1},i||{}),this.data=t,this.useHandMode=this.data.useHandMode||!1,this.setting.nodeColorArray)try{this._colors=this.setting.nodeColorArray.split(",")}catch(t){console.log(t)}this._initEvents=n,this.appEl=document.createElement("div"),this.appEl.classList.add("mm-mindmap"),this.appEl.classList.add(`mm-theme-${this.setting.theme}`),this.appEl.style.overflow="hidden",this.contentEL=document.createElement("div"),this.contentEL.style.position="relative",this.contentEL.style.width="100%",this.contentEL.style.height="100%",this.appEl.appendChild(this.contentEL),this.draw=wt(this.contentEL).size("100%","100%"),this.contentEL.classList.add("mm-mindmap-content"),this.useHandMode&&(this._rc=lt.svg(this.draw),this.appEl.classList.add("mm-handdraw-theme")),this.setAppSetting(),e.appendChild(this.appEl),this.containerEL=e,this._indicateDom=document.createElement("div"),this._indicateDom.classList.add("mm-node-layout-indicate"),this._indicateDom.style.display="none",this._menuDom=document.createElement("div"),this._menuDom.classList.add("mm-node-menu"),this._menuDom.style.display="none",this.setMenuIcon(),this.contentEL.appendChild(this._indicateDom),this.contentEL.appendChild(this._menuDom),this._linkboard=document.createElement("div"),this._linkboard.classList.add("mm-link-board"),this.contentEL.appendChild(this._linkboard),this._linkboard.style.display="none",this._setupAssistBoard=document.createElement("div"),this._setupAssistBoard.classList.add("mm-assist-board"),this._setupAssistBoard.style.display="none",this.contentEL.appendChild(this._setupAssistBoard),this._setupAssist(),this.exec=new te,this.wireFrameGroup=this.draw.group(),this.induceGroup=this.draw.group(),this.edgeGroup=this.draw.group(),this.relateGroup=this.draw.group(),this.calloutGroup=this.draw.group(),this._setFrame(),this._blockDom=document.createElement("div"),this._blockDom.classList.add("mm-block"),this._createNoteDom(),this._createNodeBoard(),this.data.useScale&&this._createScaleDom(),this._initEvents&&!this.useHandMode&&(this.appClickFn=this.appClickFn.bind(this),this.appDragstart=this.appDragstart.bind(this),this.appDragend=this.appDragend.bind(this),this.appDragover=this.appDragover.bind(this),this.appDblclickFn=this.appDblclickFn.bind(this),this.appMouseOverFn=this.appMouseOverFn.bind(this),this.appDrop=this.appDrop.bind(this),this.appKeyup=this.appKeyup.bind(this),this.appKeydown=this.appKeydown.bind(this),this.appMousewheel=this.appMousewheel.bind(this),this.appMouseMove=this.appMouseMove.bind(this),this.appMouseLeaveFn=this.appMouseLeaveFn.bind(this),this.appMouseDown=this.appMouseDown.bind(this),this.appMouseUp=this.appMouseUp.bind(this),this._assistClickFn=this._assistClickFn.bind(this),this._noteClick=this._noteClick.bind(this),this._paste=this._paste.bind(this),this.initNode=this.initNode.bind(this),this.renderEditNode=this.renderEditNode.bind(this),this.mindMapChange=this.mindMapChange.bind(this),this.showWireFrame=this.showWireFrame.bind(this),this.showRelateLink=this.showRelateLink.bind(this),this._nodeBoardClick=this._nodeBoardClick.bind(this),this.initEvent()),this._initMustEvent()}getSelectNodes(){var t=[];return this.traverseDF((e=>{e.isSelect&&t.push(e)})),t}_nodeBoardClick(t){t.preventDefault(),t.stopPropagation();var e=t.target;if(e){var i=this.getSelectNodes();if(!i.length)return;if(e.hasClass("mm-node-bg")||e.closest(".mm-node-bg")){var n=e.closest(".mm-node-bg").getAttribute("data-color");this.execute("setNodeStyle",{style:{"background-color":n},nodes:i})}if(e.hasClass("mm-node-text")||e.closest(".mm-node-text")){n=e.closest(".mm-node-text").getAttribute("data-color");this.execute("setNodeStyle",{style:{color:n},nodes:i})}if(e.hasClass("mm-node-stroke")||e.closest(".mm-node-stroke")){n=e.closest(".mm-node-stroke").getAttribute("data-color");this.execute("setNodeStyle",{style:{"border-color":n},nodes:i})}if(e.hasClass("mm-node-align")||e.closest(".mm-node-align")){var r=e.closest(".mm-node-align").getAttribute("data-align");this.execute("setNodeStyle",{style:{"text-align":r},nodes:i})}if(e.hasClass("mm-node-stroke-width")||e.closest(".mm-node-stroke-width")){var s=e.closest(".mm-node-stroke-width").getAttribute("data-width");this.execute("setNodeStyle",{style:{"border-width":s},nodes:i})}if(e.hasClass("mm-node-stroke-style")||e.closest(".mm-node-stroke-style")){var o=e.closest(".mm-node-stroke-style").getAttribute("data-style");this.execute("setNodeStyle",{style:{"border-style":o},nodes:i})}if(e.hasClass("mm-node-size")||e.closest(".mm-node-size")){var a=e.closest(".mm-node-size").getAttribute("data-size");this.execute("setNodeStyle",{style:{"font-size":a},nodes:i})}if(e.hasClass("mm-node-text-style")||e.closest(".mm-node-text-style")){var h=e.closest(".mm-node-text-style").getAttribute("data-style");"bold"==h?this.execute("setNodeStyle",{style:{"font-weight":h},nodes:i}):"italic"==h?this.execute("setNodeStyle",{style:{"font-style":h},nodes:i}):this.execute("setNodeStyle",{style:{"text-decoration":h},nodes:i})}}}_createScaleDom(){this._scaleDom=document.createElement("div"),this._scaleDom.classList.add("mm-scale");var t=document.createElement("span");t.classList.add("mm-scale-up-btn");var e=document.createElement("span");e.classList.add("mm-scale-down-btn"),t.innerHTML='<svg t="1646806654096" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3915" width="18" height="18"><path d="M320.062 448.209h320.019V512H320.062z" p-id="3916"></path><path d="M448.176 320.095h63.791v320.019h-63.791zM710.591 664.939L896.173 850.52l-45.107 45.106-185.582-185.582z" p-id="3917"></path><path d="M479.819 126.914c-194.435 0-352.056 157.621-352.056 352.056s157.621 352.056 352.056 352.056 352.057-157.62 352.057-352.056-157.621-352.056-352.057-352.056z m-0.207 637.013c-156.37 0-283.133-126.763-283.133-283.133s126.763-283.133 283.133-283.133 283.133 126.763 283.133 283.133-126.763 283.133-283.133 283.133z" p-id="3918"></path></svg>',e.innerHTML='<svg t="1646806707097" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4776" width="18" height="18"><path d="M320.062 448.209h320.019V512H320.062zM710.591 664.939L896.173 850.52l-45.107 45.106-185.582-185.582z" p-id="4777"></path><path d="M479.819 126.914c-194.435 0-352.056 157.621-352.056 352.056s157.621 352.056 352.056 352.056 352.057-157.62 352.057-352.056-157.621-352.056-352.057-352.056z m-0.207 637.013c-156.37 0-283.133-126.763-283.133-283.133s126.763-283.133 283.133-283.133 283.133 126.763 283.133 283.133-126.763 283.133-283.133 283.133z" p-id="4778"></path></svg>';var i=document.createElement("span");i.innerText="100%",i.classList.add("mm-scale-number"),this._scaleDom.appendChild(e),this._scaleDom.appendChild(i),this._scaleDom.appendChild(t),this.containerEL.appendChild(this._scaleDom),this._scaleDom.classList.add("mm-handdraw-theme"),setTimeout((()=>{this._scaleDom.classList.remove("mm-handdraw-theme")}),300),e.onclick=()=>{this.setScale("down")},t.onclick=()=>{this.setScale("up")}}_createNodeBoard(){this._nodeBoard=document.createElement("div"),this._nodeBoard.classList.add("mm-node-setup-board");var t=`<div class="mm-dec">${s("Fill color")}</div>`;this._colors.forEach((e=>{t+=`<span class="mm-node-bg mm-color" data-color="${e}" style="background:${e};display:inline-block"></span>`})),t+=`<span class="mm-node-bg" data-color="transparent" style="border:0px solid #ccc;display:inline-block;width:30px;height:30px;margin-left:-2px">${ui}</span>`,t+=`<div class="mm-dec">${s("Stroke width")}</div>`,this._strokeWidth.forEach((e=>{t+=`<span class="mm-node-stroke-width" data-width="${e}" style="border-bottom-width:${e}px;display:inline-block"></span>`})),t+=`<div class="mm-dec">${s("Stroke color")}</div>`,this._colors.forEach((e=>{t+=`<span class="mm-node-stroke mm-color" data-color="${e}" style="background:${e};display:inline-block"></span>`})),t+=`<span class="mm-node-stroke" data-color="transparent" style="border:0px solid #ccc;display:inline-block;width:30px;height:30px;margin-left:-2px">${ui}</span>`,t+=`<div class="mm-dec">${s("Stroke style")}</div>`,this._strokeStyle.forEach((e=>{t+=`<span class="mm-node-stroke-style" data-style="${e}" style="border-bottom-width:1px;border-bottom-style:${e};display:inline-block"></span>`})),t+=`<div class="mm-dec">${s("Text color")}</div>`,this._colors.forEach((e=>{t+=`<span class="mm-node-text mm-color" data-color="${e}" style="background:${e};display:inline-block"></span>`})),t+=`<span class="mm-node-text" data-color="transparent" style="border:0px solid #ccc;display:inline-block;width:30px;height:30px;margin-left:-2px">${ui}</span>`,t+=`<div class="mm-dec">${s("Text align")}</div>`,this._textAlign.forEach((e=>{t+=`<span class="mm-node-align" data-align="${e}" style="display:inline-block">${ci[e]}</span>`})),t+=`<div class="mm-dec">${s("Font size")}</div>`,this._fontSize.forEach((e=>{t+=`<span class="mm-node-size" data-size="${e}" style="display:inline-block">${e}</span>`})),this._nodeBoard.innerHTML=t,this._nodeBoard.style.display="none",this.contentEL.appendChild(this._nodeBoard)}_createNoteDom(){this._noteDom=document.createElement("div"),this._noteDom.innerHTML=`<textarea></textarea><button class="mm-note-save">${s("save")}</button><button class="mm-note-cancel">${s("cancel")}</button>`,this._noteDom.classList.add("mm-note"),this._noteDom.style.display="none",this.contentEL.appendChild(this._noteDom);var t=this._noteDom.querySelector("textarea");t.onblur=()=>{var e=t.value,i=this.selectNode;if(i){if(i.data.note==e)return;this.execute("note",{node:i,note:e})}t.value="",this._noteDom.style.display="none",this.isEditNote=!1}}showRelateLink(t){var e=t.detail.relateLink;if("bs"==e.data.type){var i=e.bs.length();(n=e.bs.pointAt(i/2)).height=10,n.width=100}else var n=e.textNode.getBox();this.showAssistsBoard(n,"rl"),this._changeAssistItem=e}_setupAssist(){this._setupAssistBoard.innerHTML=`\n           <div class="mm-assist-menu">\n              <span class="mm-assist-color mm-color-red" data-color="red"></span>\n              <span class="mm-assist-color mm-color-orange" data-color="orange"></span>\n              <span class="mm-assist-color mm-color-yellow" data-color="yellow"></span>\n              <span class="mm-assist-color mm-color-green" data-color="green"></span>\n              <span class="mm-assist-color mm-color-blue" data-color="blue"></span>\n              <span class="mm-assist-color mm-color-indigo" data-color="indigo"></span>\n              <span class="mm-assist-color mm-color-purple" data-color="purple"></span>\n              <span class="mm-assist-color mm-color-black" data-color="black"></span>\n              <span class="mm-assist-color mm-color-white" data-color="white"></span>\n           </div>\n           <div class="mm-assist-line">\n              <span class="mm-assist-solid" data-line="solid"></span>\n              <span class="mm-assist-dashed" data-line="dashed"></span>\n              <span class="mm-assist-dott" data-line="datt"></span>\n           </div>\n           <div class="mm-assist-lineType">\n              <span class="mm-assist-type mm-assist-line"><svg t="1642590209265" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15189" width="16" height="16"><path d="M962.011 61.978l-150.243 40.261 39.115 39.139-788.895 788.873 31.75 31.75 788.895-788.873 39.115 39.115z" p-id="15190"></path></svg></span>\n              <span class="mm-assist-type mm-assist-polyline"><svg t="1642590462404" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20084" width="16" height="16"><path d="M917 211.1l-199.2 24c-6.6 0.8-9.4 8.9-4.7 13.6l59.3 59.3-226 226-101.8-101.7c-6.3-6.3-16.4-6.2-22.6 0L100.3 754.1c-3.1 3.1-3.1 8.2 0 11.3l45 45.2c3.1 3.1 8.2 3.1 11.3 0L433.3 534 535 635.7c6.3 6.2 16.4 6.2 22.6 0L829 364.5l59.3 59.3c4.7 4.7 12.8 1.9 13.6-4.7l24-199.2c0.7-5.1-3.7-9.5-8.9-8.8z" p-id="20085"></path></svg></span>\n              <span class="mm-assist-type mm-asssist-bs"><svg t="1642590544284" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="24647" width="16" height="16"><path d="M922.00324 771.5L712.90324 892.2c-2.7 1.5-6-0.4-6-3.5V816c0-8.8-7.2-16-16-16H208.00324c-42.5 0-82.6-16.7-113-47-30.3-30.3-47-70.4-47-113s16.7-82.6 47-113c30.3-30.3 70.5-47 113-47h576c53.3 0 96.5-43.6 96-97-0.5-52.8-44.4-95-97.2-95h-519c-6.8 0-12.8 4.3-15.1 10.7-17.6 49.7-65 85.3-120.7 85.3C57.00324 384-0.49676 326.2 0.00324 255.1c0.5-71 59.4-128.3 130.4-127.1 54.7 1 101.1 36.4 118.4 85.4 2.2 6.4 8.3 10.6 15 10.6H784.00324c42.5 0 82.6 16.7 113 47 30.3 30.3 47 70.5 47 113s-16.7 82.6-47 113c-30.3 30.3-70.5 47-113 47H208.00324c-53.3 0-96.5 43.6-96 97 0.5 52.8 44.4 95 97.2 95h481.7c8.8 0 16-7.2 16-16v-72.7c0-3.1 3.3-5 6-3.5L922.00324 764.5c2.7 1.6 2.7 5.4 0 7z" p-id="24648"></path></svg></span>\n           </div>\n           <button class="mm-assist-delete" title="Delete">${di}</button>\n        `}setMenuIcon(){var t=document.createElement("span"),e=document.createElement("span");t.classList.add("mm-icon-add-node"),e.classList.add("mm-icon-delete-node"),t.innerHTML='<svg class="icon" width="16px" height="16.00px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path  d="M512 1024C230.4 1024 0 793.6 0 512S230.4 0 512 0s512 230.4 512 512-230.4 512-512 512z m0-960C265.6 64 64 265.6 64 512s201.6 448 448 448 448-201.6 448-448S758.4 64 512 64z"  /><path d="M800 544H224c-19.2 0-32-12.8-32-32s12.8-32 32-32h576c19.2 0 32 12.8 32 32s-12.8 32-32 32z"  /><path  d="M512 832c-19.2 0-32-12.8-32-32V224c0-19.2 12.8-32 32-32s32 12.8 32 32v576c0 19.2-12.8 32-32 32z"  /></svg>',e.innerHTML=di,this._menuDom.appendChild(t),this._menuDom.appendChild(e);var i=document.createElement("span");i.classList.add("mm-icon-add-summary"),i.innerHTML='<svg t="1629112889362" class="icon" viewBox="0 0 1316 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5115" width="16" height="16"><path d="M55.734857 0c44.324571 0 86.893714 17.993143 118.198857 50.029714 31.451429 31.963429 49.005714 75.337143 49.005715 120.685715V381.074286c0 47.104 37.302857 85.357714 83.602285 85.357714h27.794286v90.989714h-27.794286c-46.226286 0-83.602286 38.253714-83.602285 85.357715v210.505142c0 45.275429-17.627429 88.649143-49.005715 120.685715A165.449143 165.449143 0 0 1 55.734857 1024H0v-113.810286h55.734857a56.32 56.32 0 0 0 55.734857-56.905143V620.032c0-45.860571 26.916571-86.820571 67.657143-104.594286L187.977143 512c-22.235429-7.460571-41.691429-21.942857-55.442286-41.398857a115.419429 115.419429 0 0 1-21.138286-66.706286V170.715429a57.636571 57.636571 0 0 0-13.897142-37.668572 55.442286 55.442286 0 0 0-34.889143-18.797714l-6.948572-0.438857H0V0h55.734857z m1202.468572 256c32.256 0 58.368 29.696 58.368 66.340571v379.392c0 36.571429-26.112 66.267429-58.294858 66.267429H497.152c-32.182857 0-58.294857-29.622857-58.294857-66.267429V322.340571c0-36.644571 26.112-66.340571 58.294857-66.340571h761.051429z m-66.998858 128H564.224v256h626.980571v-256z" p-id="5116"></path></svg>',this._menuDom.appendChild(i);var n=document.createElement("span");n.classList.add("mm-icon-add-frame"),n.innerHTML='<svg t="1628415198706" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="26075" width="16" height="16"><path d="M224 112H32a32 32 0 0 0-32 32v192a32 32 0 0 0 64 0v-160h160a32 32 0 0 0 0-64z m768 544a32 32 0 0 0-32 32v160h-160a32 32 0 0 0 0 64h192a32 32 0 0 0 32-32v-192a32 32 0 0 0-32-32z m-768 192H64v-160a32 32 0 0 0-64 0v192a32 32 0 0 0 32 32h192a32 32 0 0 0 0-64z m768-736h-192a32 32 0 0 0 0 64h160v160a32 32 0 0 0 64 0v-192a32 32 0 0 0-32-32z" p-id="26076"></path></svg>',this._menuDom.appendChild(n);var r=document.createElement("span");r.classList.add("mm-icon-add-link"),r.innerHTML='<svg t="1628674761488" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7103" width="16" height="16"><path d="M922.00324 771.5L712.90324 892.2c-2.7 1.5-6-0.4-6-3.5V816c0-8.8-7.2-16-16-16H208.00324c-42.5 0-82.6-16.7-113-47-30.3-30.3-47-70.4-47-113s16.7-82.6 47-113c30.3-30.3 70.5-47 113-47h576c53.3 0 96.5-43.6 96-97-0.5-52.8-44.4-95-97.2-95h-519c-6.8 0-12.8 4.3-15.1 10.7-17.6 49.7-65 85.3-120.7 85.3C57.00324 384-0.49676 326.2 0.00324 255.1c0.5-71 59.4-128.3 130.4-127.1 54.7 1 101.1 36.4 118.4 85.4 2.2 6.4 8.3 10.6 15 10.6H784.00324c42.5 0 82.6 16.7 113 47 30.3 30.3 47 70.5 47 113s-16.7 82.6-47 113c-30.3 30.3-70.5 47-113 47H208.00324c-53.3 0-96.5 43.6-96 97 0.5 52.8 44.4 95 97.2 95h481.7c8.8 0 16-7.2 16-16v-72.7c0-3.1 3.3-5 6-3.5L922.00324 764.5c2.7 1.6 2.7 5.4 0 7z" p-id="7104"></path></svg>',this._menuDom.appendChild(r);var s=document.createElement("span");s.classList.add("mm-icon-add-callout"),s.innerHTML='<svg t="1632184139610" class="icon" viewBox="0 0 1058 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2617" width="16" height="16"><path d="M330.744242 885.372121l194.779798-129.861818 16.665859-11.106263h383.844848c36.486465 0 66.19798-29.659798 66.19798-66.146262v-529.19596c0-36.434747-29.711515-66.107475-66.19798-66.107475H132.305455c-36.486465 0-66.146263 29.659798-66.146263 66.107475v529.19596c0 36.486465 29.659798 66.146263 66.146263 66.146262h198.438787v140.968081m-66.146262 123.578182V810.550303H132.305455c-73.024646 0-132.305455-59.216162-132.305455-132.292525v-529.19596C0 76.024242 59.267879 16.808081 132.305455 16.808081h793.742222c73.076364 0 132.357172 59.216162 132.357171 132.240808v529.195959c0 73.076364-59.267879 132.292525-132.357171 132.292526h-363.830303L264.59798 1008.950303z m0 0" p-id="2618"></path></svg>',this._menuDom.appendChild(s);var o=document.createElement("span");o.classList.add("mm-icon-add-note"),o.innerHTML='<svg t="1635473283014" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8328" width="16" height="16"><path d="M832 1024H192a64 64 0 0 1-64-64V160a64 64 0 0 1 64-64h64V64a64 64 0 0 1 64-64h384a64 64 0 0 1 64 64v32h64a64 64 0 0 1 64 64v800a64 64 0 0 1-64 64zM704 64H320v160h384V64z m128 96h-64v64a64 64 0 0 1-64 64H320a64 64 0 0 1-64-64V160H192v800h640V160z m-128 320H320v-64h384v64z m0 192H320v-64h384v64z" p-id="8329"></path></svg>',this._menuDom.appendChild(o)}setAppSetting(){this.appEl.style.width=`${this.setting.canvasSize}px`,this.appEl.style.height=`${this.setting.canvasSize}px`,this.contentEL.style.width="100%",this.contentEL.style.height="100%",this.contentEL.style.background=`${this.setting.background}`,this.contentEL.style.fontSize=`${this.setting.fontSize}px`}_setFrame(){this._dragFrame=document.createElement("div"),this._dragFrame.classList.add("mm-drag"),this._dragFrame.innerHTML='\n         <div class="drag-top">\n           <div class="d3"></div>\n         </div>\n         <div class="drag-bottom">\n           <div class="d4"></div>\n         </div>\n       ',this.contentEL.appendChild(this._dragFrame)}init(){this._mode="basic",this.themeConfig&&this.appEl.classList.add(`mm-theme-${this.themeConfig.name}`);var t=this,e=this.data,i=this.setting.canvasSize/2-60,n=this.setting.canvasSize/2-200;!function e(r,s,o){t._nodeNum++;var a=new ct(r,t);t.contentEL.appendChild(a.containEl),s?(a.setPosition(i,n),t.root=a,a.isRoot=!0,a.data.main=!0):(a.setPosition(0,0),o.children.push(a),a.parent=o),a.refreshBox(),r.children&&r.children.length&&r.children.forEach((t=>{e(t,!1,a)}))}(e,!0)}initRich(t,e){this.themeConfig&&this.appEl.classList.add(`mm-theme-${this.themeConfig.name}`),e&&(e.img||e.image);var i=this,n=t.mindData,r=[];this._mode="rich",n.forEach(((t,e)=>{0==e?t.forEach(((t,e)=>{if(0==e){var n=new ct(t,i);this.contentEL.appendChild(n.containEl),i.root=n}else{n=new ct(t,i);this.contentEL.appendChild(n.containEl);var s=i.getNodeById(t.pid);s.children.push(n),n.setPosition(0,0),n.parent=s}if(t.isExpand||r.push(n),t.x&&t.y&&n.setPosition(t.x,t.y),t.boundingRect&&(n.boundingRect=t.boundingRect),n.refreshBox(),t.layout){var o=i.colors;0!=e&&n.stroke&&(o=new Array(100).fill(n.stroke)),n.layout=new bt[t.layout.layoutName](n,t.layout.direct,o),n.layout.direct=t.layout.direct,n.layout.root=n}})):t.forEach(((t,e)=>{if(0==e){var n=new ct(t,i);t.layout&&(n.layout=new bt[t.layout.layoutName](n,t.layout.direct,i.colors),n.layout.direct=t.layout.direct,n.layout.root=n),i.addFreeNode(n),n.nodeType}else{n=new ct(t,i);var s=i.getNodeById(t.pid);if(t.layout){var o=i.colors;n.stroke&&(o=new Array(100).fill(n.stroke)),n.layout=new bt[t.layout.layoutName](n,t.layout.direct,o),n.layout.direct=t.layout.direct,n.layout.root=n}this.contentEL.appendChild(n.containEl),n.setPosition(0,0),s.children.push(n),n.parent=s}t.x&&t.y&&n.setPosition(t.x,t.y),t.boundingRect&&(n.boundingRect=t.boundingRect),n.refreshBox(),t.isExpand||r.push(n)}))}));var s=t.induceData;s&&s.forEach((t=>{if(t.induceData.nodeId){var e=i.getNodeById(t.induceData.nodeId);if(!e)return;var n=e.parent,s=t.induceData.range,o=[];if(s){var a=s.split(",");n.children.forEach(((t,e)=>{e>=a[0]&&e<=a[1]&&o.push(t)}));var h=o[o.length-1]}else{h=e;o=[e]}}e&&t.mindData.forEach(((n,s)=>{if(0==s){var a=new ct(n,i),l=new ee(e,a,t.induceData.stroke,t.induceData.lineType);l.endNode=h,l.rangeNode=o,l.refreshItems(),l.refreshNode(),l.type=t.type,i.addInduce(l)}else{a=new ct(n,i);var d=i.getNodeById(n.pid);this.contentEL.appendChild(a.containEl),d.children.push(a),a.setPosition(0,0),a.parent=d}if(n.x&&n.y&&a.setPosition(n.x,n.y),n.boundingRect&&(a.boundingRect=n.boundingRect),n.isExpand||r.push(a),a.refreshBox(),n.layout){var c=new Array(100).fill(o[0].stroke||o[0].data.stroke);a.layout=new bt[n.layout.layoutName](a,n.layout.direct,c),a.layout.direct=n.layout.direct,a.layout.root=a}}))}));var o=t.wireFrameData;o&&o.forEach((t=>{if(t.nodeId){var e=i.getNodeById(t.nodeId);if(!e)return;var n=e.parent;if(n){var r=t.range.split(","),s=[];n.children.forEach(((t,e)=>{e>=r[0]&&e<=r[1]&&s.push(t)}));var o=s[s.length-1]}else o=e,s=[e]}if(e){var a=new ie(e,t.fill,t.stroke,t);a.endNode=o,a.rangeNode=s,a.refreshItems(),a.refreshNode(),a.refresh(),i.addWireFrame(a),a.setData(t),n||(e.wireFrame=a)}}));var a=t.calloutData;a&&a.forEach((t=>{var e=i.getNodeById(t.nodeId);if(e){var n=new ue(e,t.rootData);i.addCallout(n)}})),r.length&&r.forEach((t=>{t.collapse()})),this.induces.forEach((t=>{t.refreshItems(),t.root.isExpand||t.root.expand(),t.root.layout&&t.root.layout.refresh()})),this.wireFrames.forEach((t=>{t.refreshItems()})),this.refresh();var h=t.relateLinkData,l=[];h&&h.forEach((t=>{var e=i.getNodeById(t.startNodeId),n=i.getNodeById(t.endNodeId);if(e&&n){if(!t.gapsx){var r=e.getBox(),s=n.getBox();t.box&&t.box.cpx1&&(t.gapsx=t.box.cpx1-r.x,t.gapsy=t.box.cpy1-r.y,t.gapex=t.box.cpx2-s.x,t.gapey=t.box.cpy2-s.y)}if(t.gapsx){var o=new ce(e,t);o.endNode=n,o.setBox(t.box),i.addRelateLink(o),o.unactive(),t.box||l.push(o)}}})),l.forEach((t=>{var e=t.endNode.getBox();t.move(e.x+e.width/2,e.y),t.refresh()})),this.updateRelateLink()}traverseBF(t,e){var i=[];if(e)i=[e];else{var n=[];this.induces.forEach((t=>{t&&n.push(t.root)}));var r=[];this.callouts.forEach((t=>{r.push(t.root)}));var s=[];this.relateLinks.forEach((t=>{t.textNode&&s.push(t.textNode)})),i=[this.root].concat(this.freeNodes).concat(n).concat(s).concat(r)}for(var o=i.shift();o;){for(let t=0,e=o.children.length;t<e;t++)i.push(o.children[t]);t(o),o=i.shift()}}traverseDF(t,e,i){function n(e){if(e&&e.children){i&&t(e);for(var r=0,s=e.children.length;r<s;r++)n(e.children[r]);i||t(e)}}if(e)n(e);else{var r=[];this.induces.forEach((t=>{t&&r.push(t.root)}));var s=[];this.callouts.forEach((t=>{s.push(t.root)}));var o=[];this.relateLinks.forEach((t=>{t.textNode&&o.push(t.textNode)})),[this.root].concat(this.freeNodes).concat(r).concat(o).concat(s).forEach((t=>{t&&n(t)}))}}getNodeById(t){var e=null;return this.traverseDF((i=>{i.getId()==t&&(e=i)})),e}clearSelectNode(t){this.selectNode&&(this.selectNode.unSelect(),this.selectNode=null),this.editNode&&(this.editNode.isEdit&&this.editNode.cancelEdit(),this.editNode=null),this._changeAssistItem=null,this._dragFrame.style.display="none",t&&this.traverseDF((t=>{t.unSelect()}))}_paste(t){t.preventDefault(),navigator.clipboard.readText().then((t=>{if(t)try{var e=JSON.parse(t);if(e.action){var i=this.selectNode,n=JSON.parse(e.text);if(i){var r={id:e.id,type:e.type,selectText:"",pdfName:n.pdfName,path:""};if("highlight"==e.type)r.selectText=e.selectText;else{var s=JSON.parse(e.text);r.path=s.path}i.mindmap.execute("setAnnotate",{node:i,annotate:r})}}}catch(e){document.execCommand("insertText",!1,t)}}))}_noteClick(t){t.stopPropagation();var e=t.target;if(e.hasClass("mm-note-save")||e.closest(".mm-note-save")){var i=this._noteDom.querySelector("textarea"),n=i.value,r=this.selectNode;if(r){if(r.data.note==n)return;this.execute("note",{node:r,note:n})}i.value="",this._noteDom.style.display="none",this.isEditNote=!1}(e.hasClass("mm-note-cancel")||e.closest(".mm-note-cancel"))&&(this._noteDom.style.display="none",this.isEditNote=!1)}initEvent(){this.appEl.addEventListener("click",this.appClickFn),this.appEl.addEventListener("mouseover",this.appMouseOverFn),this.appEl.addEventListener("mouseleave",this.appMouseLeaveFn),this.appEl.addEventListener("dblclick",this.appDblclickFn),this.appEl.addEventListener("dragstart",this.appDragstart),this.appEl.addEventListener("dragover",this.appDragover),this.appEl.addEventListener("dragend",this.appDragend),this.appEl.addEventListener("drop",this.appDrop),document.addEventListener("keyup",this.appKeyup),document.addEventListener("keydown",this.appKeydown),document.body.addEventListener("mousewheel",this.appMousewheel),this.appEl.addEventListener("paste",this._paste),t.Platform.isDesktopApp&&(this.appEl.addEventListener("mousedown",this.appMouseDown),this.appEl.addEventListener("mouseup",this.appMouseUp),this.appEl.addEventListener("mousemove",this.appMouseMove)),t.Platform.isMobileApp&&(this.appEl.addEventListener("touchstart",this.appMouseDown),this.appEl.addEventListener("touchend",this.appMouseUp),this.appEl.addEventListener("touchmove",this.appMouseMove,!1)),this._setupAssistBoard.addEventListener("click",this._assistClickFn),this._noteDom.addEventListener("click",this._noteClick),this._nodeBoard.addEventListener("click",this._nodeBoardClick)}_initMustEvent(){this.on("initNode",this.initNode),this.on("renderEditNode",this.renderEditNode),this.on("mindMapChange",this.mindMapChange),this.on("showWireFrame",this.showWireFrame),this.on("showRelateLink",this.showRelateLink)}_assistClickFn(t){var e=t.target;if(e){if(e.hasClass("mm-assist-color")){var i=e.getAttribute("data-color"),n={red:{stroke:"red",background:"rgba(242, 135, 133,0.3)"},orange:{stroke:"orange",background:"rgba(229, 153, 87,0.3)"},yellow:{stroke:"yellow",background:"rgba(252, 239, 100,0.3)"},green:{stroke:"green",background:"rgba(98,214,169,0.3)"},blue:{stroke:"blue",background:"rgba(137, 161, 255,0.3)"},indigo:{stroke:"indigo",background:"rgba(94, 16, 163,0.3)"},purple:{stroke:"purple",background:"rgba(224, 33, 221,0.3)"},black:{stroke:"#9e9d9d",background:"rgba(213,233,252,.1)"},white:{stroke:"#fff",background:"rgba(213,233,252,.1)"}};"induce"==(s=this._changeAssistItem).name?this.execute("changeSummary",{summary:s,stroke:n[i].stroke,background:n[i].background}):"wireFrame"==s.name?this.execute("changeWireFrame",{wireFrame:s,stroke:n[i].stroke,background:n[i].background}):this.execute("changeLinkStroke",{link:s,stroke:n[i].stroke,background:n[i].background})}if(e.hasClass("mm-assist-type")||e.closest(".mm-assist-type")){if(e.hasClass("mm-assist-line")||e.closest(".mm-assist-line"))var r="line";else if(e.hasClass("mm-assist-polyline")||e.closest(".mm-assist-polyline"))r="polyline";else r="bs";var s;(s=this._changeAssistItem).data.type!=r&&this.execute("changeLinkType",{link:s,oldType:s.data.type,type:r})}(e.hasClass("mm-assist-delete")||e.closest(".mm-assist-delete"))&&("induce"==this._changeAssistItem.name?this.execute("deleteInduce",{summary:this._changeAssistItem}):"wireFrame"==this._changeAssistItem.name?this.execute("deleteWireFrame",{wireFrame:this._changeAssistItem}):this.execute("deleteRelateLink",{link:this._changeAssistItem})),this._changeAssistItem=null,this._setupAssistBoard.style.display="none"}}showWireFrame(t){var e=t.detail.wf||t.detail.induce;this._changeAssistItem=e;var i=e.getBBox();if(this._dragFrame.style.left=i.x-1+"px",this._dragFrame.style.top=i.y-1+"px",this._dragFrame.style.width=i.width+1+"px",this._dragFrame.style.height=i.height+1+"px","right"==e.direct||"left"==e.direct?(this._dragFrame.setAttribute("class",""),this._dragFrame.classList.add("mm-drag"),this._dragFrame.classList.add("model-top")):(this._dragFrame.setAttribute("class",""),this._dragFrame.classList.add("mm-drag"),this._dragFrame.classList.add("model-right")),this._dragFrame.style.display="block","induce"==e.name){var n=e.root.getBox();this.showAssistsBoard(n)}else this.showAssistsBoard(i)}showAssistsBoard(t,e){this._setupAssistBoard.style.display="block",this._setupAssistBoard.style.position="absolute",this._setupAssistBoard.style.zIndex="6000",this._setupAssistBoard.style.left=t.x+"px",this._setupAssistBoard.style.top=t.y+t.height+20+"px",this._setupAssistBoard.querySelector(".mm-assist-lineType").style.display="rl"==e?"":"none"}removeEvent(){this._initEvents&&(this.appEl.removeEventListener("click",this.appClickFn),this.appEl.removeEventListener("dragstart",this.appDragstart),this.appEl.removeEventListener("dragover",this.appDragover),this.appEl.removeEventListener("dragend",this.appDragend),this.appEl.removeEventListener("dblClick",this.appDblclickFn),this.appEl.removeEventListener("mouseover",this.appMouseOverFn),this.appEl.removeEventListener("mouseleave",this.appMouseLeaveFn),this.appEl.removeEventListener("drop",this.appDrop),document.removeEventListener("keyup",this.appKeyup),document.removeEventListener("keydown",this.appKeydown),document.body.removeEventListener("mousewheel",this.appMousewheel),t.Platform.isDesktop&&(this.appEl.removeEventListener("mousedown",this.appMouseDown),this.appEl.removeEventListener("mouseup",this.appMouseUp),this.appEl.removeEventListener("mousemove",this.appMouseMove)),t.Platform.isMobile&&(this.appEl.removeEventListener("touchstart",this.appMouseDown),this.appEl.removeEventListener("touchend",this.appMouseUp),this.appEl.removeEventListener("touchmove",this.appMouseMove,!1)),this.appEl.removeEventListener("paste",this._paste),this._setupAssistBoard.removeEventListener("click",this._assistClickFn),this._noteDom.removeEventListener("click",this._noteClick),this._nodeBoard.removeEventListener("click",this._nodeBoardClick),this._noteDom.querySelector("textarea").onblur=null,this.closeSearch(),this.off("initNode",this.initNode),this.off("renderEditNode",this.renderEditNode),this.off("mindMapChange",this.mindMapChange),this.off("showRelateLink",this.showRelateLink),this.off("showWireFrame",this.showWireFrame))}initNode(t){this._tempNum++,this._tempNum==this._nodeNum&&(this.refresh(),this._setMindScalePointer())}renderEditNode(t){if("basic"!=this._mode){var e=t.detail.node||null;null==e||e.clearCacheData(),e&&function(t){if(t){var e=t.getMind();if(t){for(var i=null,n=t;n&&(n.layout&&(i=n.layout),n!=e.root);)n=n.belongInduce?n.belongInduce.node:n.parent;i&&i.refresh()}e.updateRelateLink(),0!=e.induces.length&&e.induces.forEach((t=>{t.root.layout&&t.root.layout.createLink()}))}}(e)}else this.refresh()}mindMapChange(){var t;null===(t=this.view)||void 0===t||t.mindMapChange()}appKeydown(t){var e=t.keyCode||t.which||t.charCode,i=t.ctrlKey||t.metaKey,n=t.shiftKey;if(!this.isRead){if(!i&&!n){if(13==e||"Enter"==t.key){if(this.isEditNote)return;var r=this.selectNode;if(this.showFilter&&r){t.preventDefault(),t.stopPropagation();var s=this._linkboard.querySelector(".mm-file-name.active");if(s){if("md"==s.querySelector(".mm-file-ext").innerText)var o=s.getAttribute("data-name");else o=s.getAttribute("data-path");this._completeFile(r,o)}return}if(r&&!r.isEdit){if(t.preventDefault(),t.stopPropagation(),r.isExpand||r.expand(),!r.parent)return;r.mindmap.execute("addSiblingNode",{parent:r.parent}),this._menuDom.style.display="none",this._nodeBoard.style.display="none"}}if(9!=e&&45!=e&&"Tab"!=t.key||(t.preventDefault(),t.stopPropagation()),32==e){if(this.isEditNote)return;(r=this.selectNode)&&!r.isEdit&&(t.preventDefault(),t.stopPropagation(),r.edit(),this._menuDom.style.display="none",this._nodeBoard.style.display="none")}38!=e&&"ArrowUp"!=t.key||this.showFilter&&(t.preventDefault(),t.stopPropagation()),40!=e&&"ArrowDown"!=t.key||this.showFilter&&(t.preventDefault(),t.stopPropagation())}i&&!n&&(89==e&&(t.preventDefault(),t.stopPropagation(),this.redo()),90==e&&(t.preventDefault(),t.stopPropagation(),this.undo()))}}copyNode(t){var e=t||this.selectNode;if(e){var i=[];function t(e,n){var r=e.getData();r.id=Fn(),r.pid=n,i.push({id:r.id,text:r.text,pid:n,isExpand:r.isExpand,note:r.note}),e.children.forEach((e=>{t(e,r.id)}))}t(e,null);var n={type:"copyNode",text:i};return JSON.stringify(n)}return""}pasteNode(t){var e=this.selectNode;if(t)try{var i=JSON.parse(t);if(i.type&&"copyNode"==i.type){var n=i.text;e.isExpand||(e.expand(),e.clearCacheData()),this.execute("pasteNode",{node:e,data:n}),navigator.clipboard.writeText("")}}catch(t){console.log(t)}}appKeyup(t){var e,i=t.keyCode||t.which||t.charCode,n=t.ctrlKey||t.metaKey,r=t.shiftKey;if(!this.isRead){if(!n&&!r){if(46==i||"Delete"==t.key||"Backspace"==t.key){if(this.isEditNote)return;if(this._changeAssistItem){if("induce"==this._changeAssistItem.name){if(this.editNode)return;this.execute("deleteInduce",{summary:this._changeAssistItem})}else"wireFrame"==this._changeAssistItem.name?this.execute("deleteWireFrame",{wireFrame:this._changeAssistItem}):this.execute("deleteRelateLink",{link:this._changeAssistItem});return void(this._changeAssistItem=null)}(s=this.selectNode)&&!s.isEdit&&(t.preventDefault(),t.stopPropagation(),s.mindmap.execute("deleteNodeAndChild",{node:s}),this._menuDom.style.display="none")}if(9==i||45==i||"Tab"==t.key){if(t.preventDefault(),t.stopPropagation(),this.isEditNote)return;return void((s=this.selectNode)&&!s.isEdit?(s.isExpand||s.expand(),s.mindmap.execute("addChildNode",{parent:s}),this._menuDom.style.display="none",this._nodeBoard.style.display="none"):s&&s.isEdit&&(s.cancelEdit(),s.select(),s.mindmap.editNode=null))}if(38==i||"ArrowUp"==t.key){var s=this.selectNode;if(this.isEditNote)return;if(this.showFilter){if(t.preventDefault(),a=this._linkboard.querySelector(".mm-file-name.active")){var o=a.previousSibling;if(o)o.classList.add("active"),a.classList.remove("active"),(h=o.getAttribute("data-path"))&&this._completeBlock(h)}return}if(s&&!s.isEdit)return void this._selectNode(s,"up")}if(40==i||"ArrowDown"==t.key){if(this.isEditNote)return;if(this.showFilter){var a;if(t.preventDefault(),a=this._linkboard.querySelector(".mm-file-name.active")){var h,l=a.nextSibling;if(l)l.classList.add("active"),a.classList.remove("active"),(h=l.getAttribute("data-path"))&&this._completeBlock(h)}return}if((s=this.selectNode)&&!s.isEdit)return void this._selectNode(s,"down")}if(39==i||"ArrowRight"==t.key){if(this.isEditNote)return;if((s=this.selectNode)&&!s.isEdit)return void this._selectNode(s,"right")}if(37==i||"ArrowLeft"==t.key){if(this.isEditNote)return;if((s=this.selectNode)&&!s.isEdit)return void this._selectNode(s,"left")}if("["==t.key&&(t.preventDefault(),this.selectNode)){if(this._doubleMark<1)this._doubleMark++;else{this._doubleMark=0;var d=window.getSelection(),c=d.anchorNode;if(c.closest||(c=c.parentElement),!c.closest(".mm-node"))return;if(c.closest(".mm-node")&&c.closest(".mm-node")!=(this.selectNode.containEl||this.selectNode.iNode.containEl))return;d.getRangeAt(0).insertNode(document.createTextNode("]]")),d.collapseToStart()}return}if(32!=i){if(this.isEditNote)return;if(17==i||"Controll"==t.key)return;if("Meta"==t.key)return;(s=this.selectNode)&&!s.isEdit&&(t.preventDefault(),t.stopPropagation(),s.edit(),s.selectText(),this._menuDom.style.display="none",this._nodeBoard.style.display="none")}}if(n&&!r){if(191==i||"/"==t.key)(s=this.selectNode)&&!s.isEdit&&(s.isExpand?s.mindmap.execute("collapseNode",{node:s}):s.mindmap.execute("expandNode",{node:s}));if(69!=i&&"e"!=t.key||this.center(),"r"==t.key)(s=this.selectNode)&&this.execute("changeLayout",{node:s,direct:"right"});if("l"==t.key)(s=this.selectNode)&&this.execute("changeLayout",{node:s,direct:"left"});if("u"==t.key)(s=this.selectNode)&&this.execute("changeLayout",{node:s,direct:"up"});if("d"==t.key)(s=this.selectNode)&&this.execute("changeLayout",{node:s,direct:"down"});if("m"==t.key)(s=this.selectNode)&&this.execute("changeLayout",{node:s,direct:"mindmap"});if("j"==t.key)(s=this.selectNode)&&this.execute("changeLayout",{node:s,direct:"lTree"});if("k"==t.key)(s=this.selectNode)&&this.execute("changeLayout",{node:s,direct:"vertical"});if("q"==t.key)(s=this.selectNode)&&this.execute("changeLayout",{node:s,direct:"fishRight"});if("t"==t.key)(s=this.selectNode)&&this.execute("changeLayout",{node:s,direct:"fishLeft"})}if(this.selectNode&&this.selectNode.isEdit){s=this.selectNode;var u=this.selectNode.editDom||(null===(e=this.selectNode.iNode)||void 0===e?void 0:e.editDom),p=function(t){var e,i=0,n=t.ownerDocument||t.document,r=n.defaultView||n.parentWindow;if(void 0!==r.getSelection){if((e=r.getSelection()).rangeCount>0){var s=r.getSelection().getRangeAt(0),o=s.cloneRange();o.selectNodeContents(t),o.setEnd(s.endContainer,s.endOffset),i=o.toString().length}}else if((e=n.selection)&&"Control"!=e.type){var a=e.createRange(),h=n.body.createTextRange();h.moveToElementText(t),h.setEndPoint("EndToEnd",a),i=h.text.length}return i}(u),m=u.textContent;s.shouldRender=!0;var f=!1;this._linkboard.style.display="none",this.showFilter=!1;for(var g,v=/\[\[(.+?)\]\]/g,y=0;g=v.exec(m);)if(g.index+2<=p&&g.index+g[1].length+2>=p){f=!0,y=g.index,s.shouldRender=!1,this.showFilter=!0,this._linkboard.style.display="block";break}if(f){this.selectionObj={num:p,index:y,text:g[1]},this._searchFiles(g[1]);var x=this.selectNode.getDomBox();this._linkboard.style.left=x.x+"px",this._linkboard.style.top=x.y+x.height+5+"px"}else this._searchFiles("")}}}_completeFile(t,e){if(this.selectionObj){var i=function(t,e,i){var n=0,r=document.createRange();r.setStart(t,0),r.collapse(!0);for(var s,o=[t],a=!1,h=!1;!h&&(s=o.pop());)if(3==s.nodeType){var l=n+s.length;!a&&e>=n&&e<=l&&(r.setStart(s,e-n),a=!0),a&&i>=n&&i<=l&&(r.setEnd(s,i-n),h=!0),n=l}else for(var d=s.childNodes.length;d--;)o.push(s.childNodes[d]);var c=window.getSelection();return c.removeAllRanges(),c.addRange(r),c}(t.editDom||t.iNode.editDom,this.selectionObj.index+2,this.selectionObj.index+2+this.selectionObj.text.length),n=i.getRangeAt(0);n.deleteContents(),n.insertNode(document.createTextNode(e)),i.collapseToEnd(),i.modify("move","right","character"),i.modify("move","right","character"),t.shouldRender=!0,this.showFilter=!1,this.selectionObj=null,this._linkboard.style.display="none"}}_completeBlock(t){if(this._blockDom.innerHTML="",this._blockDom.style.display="none",this.view&&t){var e=this.view.app.metadataCache.getFirstLinkpathDest(t,this.path||"");if(e&&"md"==e.extension){var i=this.view.app.metadataCache.getFileCache(e);if(i.headings&&i.headings.length){this._blockDom.style.display="block";for(var n=document.createElement("ul"),r=0;r<i.headings.length;r++){var s=document.createElement("li"),o=document.createElement("span");o.classList.add("mm-block-ext"),o.innerText="H"+i.headings[r].level,s.classList.add("mm-block-name");var a=document.createElement("span");a.innerText=i.headings[r].heading,s.setAttribute("data-head",i.headings[r].heading),n.appendChild(s),s.appendChild(o),s.appendChild(a)}this._blockDom.appendChild(n)}}}}_searchFiles(t){if(!t)return;this._nodeBoard.style.display="none";var e=this.view.app.vault.getFiles();var i=new ti(e,{keys:["name"]}).search(t);if(this._linkboard.innerHTML="",i.length){i=i.slice(0,20);for(var n=document.createElement("ul"),r=0;r<i.length;r++){var s=document.createElement("li"),o=document.createElement("span");o.classList.add("mm-file-ext"),o.innerText=i[r].item.extension,s.classList.add("mm-file-name"),i[r];var a=i[r].item.extension.length,h=i[r].item.path.substr(0,i[r].item.path.length-(a+1)),l=document.createElement("span");l.innerText=h,s.setAttribute("data-path",i[r].item.path),s.setAttribute("data-name",i[r].item.basename),n.appendChild(s),s.appendChild(o),s.appendChild(l)}this._linkboard.appendChild(n),this._linkboard.appendChild(this._blockDom);var d=this._linkboard.querySelector(".mm-file-name");d.classList.add("active");h=d.getAttribute("data-path");this._completeBlock(h)}}_selectNode(t,e){if(t){var i,n=null,r=t.getPosition();this.traverseDF((t=>{var s=t.getPosition(),o=Math.abs(s.x-r.x),a=Math.abs(s.y-r.y),h=Math.sqrt(o*o+a*a);switch(e){case"right":s.x>r.x&&(i?i>h&&(i=h,n=t):(i=h,n=t));break;case"left":s.x<r.x&&(i?i>h&&(i=h,n=t):(i=h,n=t));break;case"up":s.y<r.y&&(i?i>h&&(i=h,n=t):(i=h,n=t));break;case"down":s.y>r.y&&(i?i>h&&(i=h,n=t):(i=h,n=t))}})),n&&(this.clearSelectNode(!0),n.select())}}parseQueryString(t){for(var e,i,n,r={},s=t.split("?")[1].split("&"),o=0,a=s.length;o<a;o++)i=(e=s[o].split("="))[0],n=e[1],r[i]=n;return r}appClickFn(e){var i,n,r,o,a=e.target;if(a){if(a.hasClass("mm-node-setup-board")||a.closest(".mm-node-setup-board"))return;if(a.hasClass("mm-note-span")||a.closest(".mm-note-span")){if(!this._noteTab){this._noteTab=document.createElement("div"),this._noteTab.classList.add("mm-node-note-tab");var h=document.createElement("span"),l=document.createElement("div");h.innerHTML="x",h.classList.add("mm-node-note-close"),l.classList.add("mm-node-note-container"),this._noteTab.appendChild(h),this._noteTab.appendChild(l),this.contentEL.appendChild(this._noteTab),h.onclick=()=>{this._noteTab.style.display="none"}}var d=a.closest(".mm-node").getAttribute("data-id"),c=(b=this.getNodeById(d)).getDomBox();this._noteTab.style.left=c.x+"px",this._noteTab.style.top=c.y+c.height+10+"px",this._noteTab.style.display="block";var u=this._noteTab.querySelector(".mm-node-note-container");return u.innerHTML="",t.MarkdownRenderer.renderMarkdown(b.data.note,u,this.path||"",null).then((()=>{this._delay(u)})),void(this._noteDom.style.display="none")}if("A"==a.tagName&&(a.hasClass("internal-link")||a.hasClass("tag"))){if(e.preventDefault(),"A"==a.tagName)var p=e.target;else p=a.closest("a");var m=p.getAttribute("href");if(m){if(m.startsWith("obsidian://jump-to-pdf")){var f=this.parseQueryString(m);if(f.pdf&&f.annotate)return void this.openPDFView(decodeURIComponent(f.annotate),decodeURIComponent(f.pdf));if(f.pdf){var g=decodeURIComponent(f.pdf);return void(g.endsWith("pdf")&&this.view.app.workspace.openLinkText(g,this.view.file.path,e.ctrlKey||e.metaKey))}if(f.md&&f.node){var v=decodeURIComponent(f.md),y=decodeURIComponent(f.node);Object.assign(window,{"show-mindmap-node":y});const t=this.view.app.workspace.getLeavesOfType("mindmapview");if(t.length){var x=null;if(t.forEach((t=>{t.view&&t.view.file&&t.view.file.path==v&&(x=t.view)})),x)if(x.mindmap){var b=x.mindmap.getNodeById(y);x.mindmap.showNode(b),Object.assign(window,{"show-mindmap-node":""})}else x.app.workspace.openLinkText(v,(null===(i=x.file)||void 0===i?void 0:i.path)||"",!0);else(x=t[0].view).app.workspace.openLinkText(v,(null===(n=x.file)||void 0===n?void 0:n.path)||"",!0)}else this.view.app.workspace.openLinkText(v,(null===(r=this.view.file)||void 0===r?void 0:r.path)||"",!0);return}return f.md?void this.view.app.workspace.openLinkText(decodeURIComponent(f.md),this.view.file.path,!0):void 0}var w=m.toLowerCase();if(w.endsWith(".pdf")||w.endsWith(".epub"))return void this.view.showAnnotate("",m);if(w.startsWith("#")){const t=w.matchAll(/#([\p{Letter}\p{Emoji_Presentation}\p{Number}\/_-]+)/gu).next(),e=this.view.plugin.app.workspace.getLeavesOfType("search");if(0==e.length)return;return e[0].view.setQuery(`tag:${t.value[1]}`),void this.view.plugin.app.workspace.revealLeaf(e[0])}if(this.view.app.workspace.openLinkText(m,this.view.file.path,e.ctrlKey||e.metaKey),a.closest(".markdown-embed")){const e=t.parseLinktext(m),i=e.subpath.startsWith("#^")?e.subpath.substr(2):null;if(!i)return;var k=a.closest(".markdown-embed").getAttribute("data-name");const n=this.view.app.metadataCache.getFirstLinkpathDest(k,this.path||"");var _=this.view.app.metadataCache.getFileCache(n);if(_&&_.frontmatter&&_.frontmatter["annotate-target"]){var C=_.frontmatter["annotate-target"];return void this.openPDFView(i,C)}}}}if(a.hasClass("mm-node-bar")){e.preventDefault(),e.stopPropagation();d=a.closest(".mm-node").getAttribute("data-id");return void((b=this.getNodeById(d)).isExpand?b.mindmap.execute("collapseNode",{node:b}):b.mindmap.execute("expandNode",{node:b}))}if(a.hasClass("mm-node-annotate")||a.closest(".mm-node-annotate")){d=a.closest(".mm-node").getAttribute("data-id");var D=(b=this.getNodeById(d)).getData(),E=D.annotate.id,S=D.annotate.pdfName;return navigator.clipboard.writeText(E),void(this.view&&this.view.showAnnotate(E,S))}if(a.closest(".mm-node-menu")){var N;if(a.closest(".mm-icon-add-node"))(N=this.selectNode)&&(N.mindmap.execute("addChildNode",{parent:N}),this._menuDom.style.display="none",this._setupAssistBoard.style.display="none",this._nodeBoard.style.display="none");if(a.closest(".mm-icon-delete-node"))(N=this.selectNode)&&(N.nodeType&&"callout"==N.nodeType?N.mindmap.execute("removeCallout",{callout:N.callout}):N.mindmap.execute("deleteNodeAndChild",{node:N}),this._menuDom.style.display="none",this._setupAssistBoard.style.display="none",this._nodeBoard.style.display="none");if(a.closest(".mm-icon-add-summary"))if(N=this.selectNode){if(this._menuDom.style.display="none",this._setupAssistBoard.style.display="none",this._nodeBoard.style.display="none",this.view.period)return void this.view.showNeedNotice();var M=new ct({id:Fn(),text:"summary"},N.mindmap);if(N.mindmap.themeConfig)var A=N.mindmap.themeConfig.summaryStroke;if(A)var L=new ee(N,M,A);else L=new ee(N,M);N.mindmap.execute("addSummary",{node:N,summary:L})}if(a.closest(".mm-icon-add-frame"))if(N=this.selectNode){if(this._menuDom.style.display="none",this._setupAssistBoard.style.display="none",this._nodeBoard.style.display="none",this.view.period)return void this.view.showNeedNotice();if(N.mindmap.themeConfig)var T=N.mindmap.themeConfig.boundaryFill,P=N.mindmap.themeConfig.boundaryStroke;if(T&&P)var I=new ie(N,T,P);else I=new ie(N);N.mindmap.execute("addWireFrame",{node:N,wireFrame:I})}if(a.closest(".mm-icon-add-link"))if(N=this.selectNode){if(this._menuDom.style.display="none",this._setupAssistBoard.style.display="none",this._nodeBoard.style.display="none",this.view.period)return void this.view.showNeedNotice();if(new t.Notice(s("Please select another node")),N.mindmap.themeConfig)var B=N.mindmap.themeConfig.relateLinkStroke;if(B)var O=new ce(N,{color:B});else if("whiteboard"==this._themeName)if(document.querySelector(".theme-light"))O=new ce(N,{color:"#333"});else O=new ce(N,{color:"#fff"});else O=new ce(N);this._waitRelate=O,O.status="addRelate"}if(a.closest(".mm-icon-add-note"))if(N=this.selectNode){this._setupAssistBoard.style.display="none",this._nodeBoard.style.display="none",this._noteDom.style.display="block",this.isEditNote=!0;var R=N.data.note||"",F=N.getPosition();c=N.getDomBox();this._noteDom.style.left=F.x+c.width+10+"px",this._noteDom.style.top=F.y+c.height+10+"px";var z=this._noteDom.querySelector("textarea");z.value="",R&&(z.value=R)}if(a.closest(".mm-icon-add-callout"))if((N=this.selectNode)&&(this._setupAssistBoard.style.display="none",this._nodeBoard.style.display="none",this._noteDom.style.display="block",this.isEditNote=!1,!N.callout)){var q=new ue(N);this.execute("addCallout",{node:N,callout:q})}return}if(a.closest(".mm-link-board")){if(a.hasClass("mm-file-name")||a.closest(".mm-file-name")){if(a.hasClass("mm-file-name"))var j=a;else j=a.closest(".mm-file-name");if(j){if("md"==j.querySelector(".mm-file-ext").innerText)var H=j.getAttribute("data-name");else H=j.getAttribute("data-path");this.selectNode&&this.selectNode.isEdit&&this._completeFile(this.selectNode,H)}}if(a.hasClass("mm-block-name")||a.closest(".mm-block-name")){if(a.hasClass("mm-block-name"))j=a;else j=a.closest(".mm-block-name");if(j){H=this._linkboard.querySelector(".mm-file-name.active").getAttribute("data-name");var $=j.getAttribute("data-head");this.selectNode&&this.selectNode.isEdit&&this._completeFile(this.selectNode,H+"#"+$)}}return}if(a.closest(".mm-node")){d=a.closest(".mm-node").getAttribute("data-id");if(!(b=this.getNodeById(d)))return;if(!b.isSelect){this.clearSelectNode(!0),this.selectNode=b,null===(o=this.selectNode)||void 0===o||o.select(),this._menuDom.style.display="block";c=this.selectNode.getBox();this._menuDom.style.left=`${c.x+c.width+10}px`,this._menuDom.style.top=c.y+c.height/2-14+"px",this.showNodeBoard();for(var W=0;W<this._menuDom.children.length;W++){this._menuDom.children[W].style.display="inline"}if(b.isRoot&&b.data.main)this._menuDom.querySelector(".mm-icon-add-summary").style.display="none",this._menuDom.querySelector(".mm-icon-add-frame").style.display="none",this._menuDom.querySelector(".mm-icon-delete-node").style.display="none";if(b.nodeType&&"freeNode"==b.nodeType)this._menuDom.querySelector(".mm-icon-add-summary").style.display="none",this._menuDom.querySelector(".mm-icon-add-frame").style.display="none";if(b.nodeType&&"induce"==b.nodeType){if(L=b.belongInduce){var U=L.node;b.direct=U.direct}this._menuDom.querySelector(".mm-icon-add-summary").style.display="none",this._menuDom.querySelector(".mm-icon-add-frame").style.display="none"}if(b.nodeType&&"relateLink"==b.nodeType)this._menuDom.querySelector(".mm-icon-add-node").style.display="none",this._menuDom.querySelector(".mm-icon-add-summary").style.display="none",this._menuDom.querySelector(".mm-icon-add-frame").style.display="none",this._menuDom.querySelector(".mm-icon-add-link").style.display="none",this._menuDom.querySelector(".mm-icon-add-callout").style.display="none";if("basic"==this._mode||"table"==this._mode)this._menuDom.querySelector(".mm-icon-add-summary").style.display="none",this._menuDom.querySelector(".mm-icon-add-frame").style.display="none",this._menuDom.querySelector(".mm-icon-add-link").style.display="none",this._menuDom.querySelector(".mm-icon-add-note").style.display="none",this._menuDom.querySelector(".mm-icon-add-callout").style.display="none";if(b.nodeType&&"callout"==b.nodeType)this._menuDom.querySelector(".mm-icon-add-node").style.display="none",this._menuDom.querySelector(".mm-icon-add-summary").style.display="none",this._menuDom.querySelector(".mm-icon-add-frame").style.display="none",this._menuDom.querySelector(".mm-icon-add-link").style.display="none",this._menuDom.querySelector(".mm-icon-add-callout").style.display="none";if(b.nodeType&&"induce"==b.nodeType&&this.emit("showWireFrame",{induce:b.belongInduce}),this.relateLinks.forEach((t=>{t.startNode!=b&&t.endNode!=b||t.active()})),(e.ctrlKey||e.metaKey)&&"rich"==this._mode){const{text:t,id:e}=b.getData();var V=`${t} [🔖](obsidian://jump-to-pdf?md=${encodeURIComponent(this.path)}&node=${encodeURIComponent(e)})`;navigator.clipboard.writeText(V)}if(this._noteTab&&(this._noteTab.style.display="none"),this._waitRelate)if(this._waitRelate.startNode!=b){if(this.isMobile){F=b.getPosition();this._waitRelate.move(F.x,F.y)}this._waitRelate.setEndNode(b),this.execute("addRelateLink",{link:this._waitRelate}),this._waitRelate.off(),this._waitRelate=null}}}else this.showFilter&&(this.selectNode.shouldRender=!0,this._linkboard.style.display="none"),this.clearSelectNode(!0),this._menuDom.style.display="none",this.relateLinks.forEach((t=>{t.unactive()})),this._dragFrame.style.display="none",this._indicateDom.style.display="none",this._setupAssistBoard.style.display="none",this._noteDom.style.display="none",this._nodeBoard.style.display="none",this.isEditNote=!1,this._noteTab&&(this._noteTab.style.display="none")}}openPDFView(t,e){this.view.showAnnotate(t,e)}appDragstart(t){if(t.stopPropagation(),this.startX=t.pageX,this.startY=t.pageY,t.target instanceof HTMLElement&&t.target.closest(".mm-node")){var e=t.target.closest(".mm-node").getAttribute("data-id");if(this._dragNode=this.getNodeById(e),this.drag=!0,this._dragNode.wfs.length){var i=[];this._dragNode.wfs.forEach((t=>{if(t.node!=t.endNode&&t.node.parent){var e=t.node.parent.children.indexOf(t.node),n=t.node.parent.children.indexOf(t.endNode);t.node=t.node.parent.children[e+1],-1==t.node.wfs.indexOf(t)&&t.node.wfs.push(t);for(var r=[],s=0;s<t.node.parent.children.length;s++)s>=e+1&&s<=n&&r.push(t.node.parent.children[s]);t.rangeNode=r,t.refreshNode(),t.refreshItems(),t.refresh(!0),i.push(t)}})),this._dragNode.wireFrame=null,i.length&&i.forEach((t=>{var e=this._dragNode.wfs.indexOf(t);this._dragNode.wfs.splice(e,1)}))}if(this._dragNode.induces.length){var n=[];this._dragNode.induces.forEach((t=>{if(t.node!=t.endNode&&t.node.parent){var e=t.node.parent.children.indexOf(t.node),i=t.node.parent.children.indexOf(t.endNode);t.node=t.node.parent.children[e+1],-1==t.node.induces.indexOf(t)&&t.node.induces.push(t);for(var r=[],s=0;s<t.node.parent.children.length;s++)s>=e+1&&s<=i&&r.push(t.node.parent.children[s]);t.rangeNode=r,t.refreshNode(),t.refreshItems(),t.refresh(!0),n.push(t)}})),this._dragNode.induce=null,n.length&&n.forEach((t=>{var e=this._dragNode.induces.indexOf(t);this._dragNode.induces.splice(e,1)}))}}this._menuDom.style.display="none",this._nodeBoard.style.display="none"}appDragend(t){this.drag=!1,this._indicateDom.style.display="none",this._menuDom.style.display="none"}appDragover(t){t.preventDefault(),t.stopPropagation();var e=t.target,i=t.pageX,n=t.pageY;if(this.drag&&(this.dx=i-this.startX,this.dy=n-this.startY),e.closest(".mm-node")){var r=e.closest(".mm-node").getAttribute("data-id"),s=this.getNodeById(r),o=s.getBox();if(this._dragType=this._getDragType(s,i,n),this._indicateDom.style.display="block",this._indicateDom.style.left=o.x+o.width/2-20+"px",this._indicateDom.style.top=o.y-90+"px",this._indicateDom.className="mm-node-layout-indicate","top"==this._dragType)this._indicateDom.classList.add("mm-arrow-top");else if("down"==this._dragType)this._indicateDom.classList.add("mm-arrow-down");else if("left"==this._dragType)this._indicateDom.classList.add("mm-arrow-left");else if("right"==this._dragType)this._indicateDom.classList.add("mm-arrow-right");else{this._indicateDom.classList.add("drag-type");var a=this._dragType.split("-");a[1]?this._indicateDom.classList.add("mm-arrow-"+a[1]):this._indicateDom.classList.add("mm-arrow-right")}}else this._indicateDom.style.display="none"}_getDragType(t,e,i){if(t){var n=t.contentEl.getBoundingClientRect();switch(t.direct){case"right":return i<n.y+n.height/2&&e<n.x+n.width/4*3?"top":i>n.y+n.height/2&&e<n.x+n.width/4*3?"down":"child-right";case"left":return i<n.y+n.height/2&&e>n.x+n.width/4?"top":i>n.y+n.height/2&&e>n.x+n.width/4?"down":"child-left";case"top":case"up":return e<n.x+n.width/4?"left":e>n.x+n.width/4*3?"right":"child-top";case"down":case"bottom":return e<n.x+n.width/4?"left":e>n.x+n.width/4*3?"right":"child-down";default:return"child"}}}_dropFile(t,e){switch(t.type){case"file":if("md"==t.file.extension.toLowerCase()||["png","jpg","jpeg","gif"].contains(t.file.extension.toLowerCase())){var i=t.file.path,n=t.file.extension.length;if("md"==t.file.extension.toLowerCase())var r=i.substr(0,i.length-n-1);else r=i;var s={text:`![[${r}]]`,id:Fn(),main:!1};if(this.root||(s.main=!0),"basic"==this._mode||"table"==this._mode)return;var o=e.offsetX,a=e.offsetY,h=new ct(s,this);h.nodeType="freeNode",h.setPosition(o,a),this.execute("addFreeNode",{node:h}),this.root||(this.root=h,h.nodeType="richNode")}}}appDrop(e){var i;this._indicateDom.style.display="none",this._menuDom.style.display="none";var n=(null===(i=this.view)||void 0===i?void 0:i.app).dragManager.draggable;if(n)this._dropFile(n,e);else{var r=e.target;if(r.closest(".mm-node")){e.preventDefault();var s=r.closest(".mm-node").getAttribute("data-id"),o=this.getNodeById(s);if(this._dragNode==o){if(this._indicateDom.style.display="none","freeNode"==this._dragNode.nodeType||this._dragNode.isRoot){var a=this._dragNode.getPosition();this.execute("movePosition",{node:this._dragNode,oldPos:a,newPos:{x:a.x+this.dx,y:a.y+this.dy}})}return}if(this._dragNode.nodeType&&"freeNode"==this._dragNode.nodeType){for(var h=!1,l=o;l;){if(l==this._dragNode){h=!0;break}l=l.parent}return h?void(this._indicateDom.style.display="none"):void this.execute("changeFreeRootToNode",{node:this._dragNode,parent:o})}this._dragNode.isRoot||this.moveNode(this._dragNode,o,this._dragType)}else{var d=this._dragNode;if(d){a=d.getPosition();if(d.isRoot||d.nodeType&&"richText"!=d.nodeType)("freeNode"==d.nodeType||d.isRoot)&&this.execute("movePosition",{node:d,oldPos:a,newPos:{x:a.x+this.dx,y:a.y+this.dy}});else{if("basic"==this._mode)return;d.setPosition(a.x+this.dx,a.y+this.dy),this.execute("changeNodeToFreeRoot",{node:this._dragNode})}}if(!this.isMobile){if("basic"==this._mode)return;var c=e.dataTransfer.files;if(c.length){var u=c[0];if(u.name.toLowerCase().endsWith(".xmind"))try{var p=this,m=new FileReader;m.onload=()=>{ii.loadAsync(m.result).then((t=>{var e=t.files;for(var i in e)"content.json"==i&&e[i].async("text").then((t=>{var e=JSON.parse(t),i=si(e[0]);p.clearNode(),p.initRich(i,{}),p.root.expand(),p.root.layout.refresh(),setTimeout((()=>{p.center(),p.mindMapChange()}),100)}))}))},m.readAsArrayBuffer(u)}catch(e){new t.Notice("Parse xmind error")}}}}}}appMouseLeaveFn(t){this.isRead=!0}appMouseOverFn(t){const e=t.target;if(this.isRead=!1,e.hasClass("mm-file-name")||e.closest(".mm-file-name")){if(e.hasClass("mm-file-name"))var i=e;else i=e.closest(".mm-file-name");var n=this._linkboard.querySelector(".mm-file-name.active");if(n&&n.classList.remove("active"),i){i.classList.add("active");var r=i.getAttribute("data-path");r&&this._completeBlock(r)}}"A"===e.tagName&&e.hasClass("internal-link")&&this.view.app.workspace.trigger("hover-link",{event:t,source:"mindmap-plugin",hoverParent:this.view,targetEl:e,linktext:e.getAttr("href"),sourcePath:this.view.file.path})}_delay(e){e.findAll(".internal-embed").forEach((e=>{var i;const n=e.getAttribute("src"),r="string"==typeof n&&(null===(i=this.view)||void 0===i?void 0:i.app.metadataCache.getFirstLinkpathDest(n,this.path));if(r instanceof t.TFile&&"md"!==r.extension){e.innerText="";var s=this.view.app.vault.getResourcePath(r);e.createEl("img",{attr:{src:s}},(t=>{e.hasAttribute("width")&&t.setAttribute("width",e.getAttribute("width")),e.hasAttribute("alt")&&t.setAttribute("alt",e.getAttribute("alt"))})),e.addClasses(["image-embed","is-loaded"])}}))}_calcSelectNodes(){this.timeOut&&clearTimeout(this.timeOut);var t={x:parseInt(this._selectDom.style.left),y:parseInt(this._selectDom.style.top),width:this._selectDom.clientWidth,height:this._selectDom.clientHeight};this.timeOut=setTimeout((()=>{this.traverseDF((e=>{var i,n,r,s,o,a,h,l,d=e.getBox();n=t,r=(i=d).x+i.width/2,s=i.y+i.height/2,o=n.x+n.width/2,a=n.y+n.height/2,h=Math.abs(r-o),l=Math.abs(s-a),h<(i.width+n.width)/2&&l<(i.height+n.height)/2?e.select():e.unSelect()}))}),100)}appMouseMove(t){const e=t.target;if(this._isDragFrame){if(t.stopPropagation(),t.preventDefault(),this.isMobile)var i=t.touches[0].pageX,n=t.touches[0].pageY;else i=t.pageX,n=t.pageY;var r=i-this.startX,s=n-this.startY;"up"==this._moveDirect?(this._dragFrame.style.top=this._dragFrameY+s+"px",this._dragFrame.style.height=this._frameHeight-s+"px"):"down"==this._moveDirect?this._dragFrame.style.height=this._frameHeight+s+"px":"left"==this._moveDirect?(this._dragFrame.style.left=this._dragFrameX+r+"px",this._dragFrame.style.width=this._frameWidth-r+"px"):this._dragFrame.style.width=this._frameWidth+r+"px"}else{if(this.isMobile||(this.scalePointer=[],this.scalePointer.push(t.offsetX,t.offsetY)),e.closest(".mm-node")){var o=e.closest(".mm-node").getAttribute("data-id"),a=this.getNodeById(o);if(a&&"table"!=this._mode){var h=a.getBox();this.scalePointer=[],this.scalePointer.push(h.x+h.width/2,h.y+h.height/2)}}else{if(e.closest(".mm-note"))return;if(this.drag&&(this.isMobile||(this.containerEL.scrollLeft=this._left-(t.pageX-this.startX),this.containerEL.scrollTop=this._top-(t.pageY-this.startY))),this._isSelectNode){var l=t.pageX,d=t.pageY;r=Math.abs(l-this.startX),s=Math.abs(d-this.startY);this._selectDom.style.width=r+"px",this._selectDom.style.height=s+"px",l>this.startX&&d>this.startY||(l>this.startX&&d<this.startY?this._selectDom.style.top=this._offsetY-s+4+"px":l<this.startX&&d>this.startY?this._selectDom.style.left=this._offsetX-r+4+"px":l<this.startX&&d<this.startY&&(this._selectDom.style.top=this._offsetY-s+4+"px",this._selectDom.style.left=this._offsetX-r+4+"px")),this._calcSelectNodes()}}if(t.touches&&2==t.touches.length&&this.isMobile&&this.drag){t.preventDefault();var c={x:t.touches[0].pageX,y:t.touches[0].pageY},u={x:t.touches[1].pageX,y:t.touches[1].pageY};this.getDistance(c,u)/this.touches>1?this.setScale("up"):this.setScale("down")}}}getDistance(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}appMouseDown(t){const e=t.target;if(!(e.hasClass("relate-ctrl")||e.closest(".relate-ctrl")||e.hasClass("mm-search")||e.closest(".mm-search"))){if(!e.closest(".mm-node"))if(this._left=this.containerEL.scrollLeft,this._top=this.containerEL.scrollTop,this.isMobile)this.drag=!0,this.startX=t.touches[0].pageX,this.startY=t.touches[0].pageY;else{var i=t.ctrlKey||t.metaKey;i?i&&(t.stopPropagation(),t.preventDefault(),this._isSelectNode=!0,this.startX=t.pageX,this.startY=t.pageY,this._selectDom=document.createElement("div"),this._selectDom.classList.add("mm-mindmap-select"),this._selectDom.style.position="absolute",this._selectDom.style.zIndex="8000",this._selectDom.style.left=t.offsetX-2+"px",this._selectDom.style.top=t.offsetY-2+"px",this._selectDom.style.background="rgba(255,255,255,0.3)",this._offsetX=t.offsetX,this._offsetY=t.offsetY,this.contentEL.appendChild(this._selectDom),this.clearSelectNode(!0)):(this.drag=!0,this.startX=t.pageX,this.startY=t.pageY)}if(t.touches&&2==t.touches.length&&this.isMobile){this.drag=!0,t.preventDefault();var n={x:t.touches[0].pageX,y:t.touches[0].pageY},r={x:t.touches[1].pageX,y:t.touches[1].pageY};this.touches=this.getDistance(n,r),this.scalePointer=[],this.scalePointer.push((n.x+r.x)/2+this._left,(n.y+r.y)/2+this._top)}if(e.hasClass("drag-top")||e.closest(".drag-top")||e.hasClass("drag-bottom")||e.closest(".drag-bottom")){this.drag=!1,this._isDragFrame=!0,this.isMobile?(this.startX=t.touches[0].pageX,this.startY=t.touches[0].pageY):(this.startX=t.pageX,this.startY=t.pageY);var s=e.closest(".mm-drag");this._frameWidth=s.clientWidth,this._frameHeight=s.clientHeight,this._setupAssistBoard.style.display="none",(e.hasClass("drag-top")||e.closest(".drag-top"))&&(this._dragFrame.hasClass("model-right")?(this._moveDirect="left",this._dragFrameX=parseInt(s.style.left)):this._dragFrame.hasClass("model-top")&&(this._dragFrameY=parseInt(s.style.top),this._moveDirect="up")),(e.hasClass("drag-bottom")||e.closest(".drag-bottom"))&&(this._dragFrame.hasClass("model-top")?(this._moveDirect="down",this._dragFrameY=parseInt(s.style.top)):this._dragFrame.hasClass("model-right")&&(this._dragFrameX=parseInt(s.style.left),this._moveDirect="right"))}}}getSelectNodesBox(){return 0==this.getSelectNodes().length?null:this.getBoundingRect(this.getSelectNodes())}showNodeBoard(){if("basic"!=this._mode&&"table"!=this._mode){var t=parseInt(this._menuDom.style.left),e=parseInt(this._menuDom.style.top),i=(this._menuDom.clientWidth,this._menuDom.clientHeight);this._nodeBoard.style.left=t+"px",this._nodeBoard.style.top=e+i+20+"px",this._nodeBoard.style.display="block"}}appMouseUp(t){if(this.drag=!1,this.touches=0,this._isSelectNode&&(this._isSelectNode=!1,setTimeout((()=>{if("basic"!=this._mode){var t=this.getSelectNodesBox();t&&(this._nodeBoard.style.left=t.x+t.width+20+"px",this._nodeBoard.style.top=t.y+"px",this._nodeBoard.style.display="block",this._setupAssistBoard.style.display="none",this._menuDom.style.display="none")}}),130),this._selectDom&&(this.contentEL.removeChild(this._selectDom),this._selectDom=null)),this._isDragFrame){this._isDragFrame=!1;var e=this._changeAssistItem,i=e.node.parent,n=e.rangeNode.slice(),r=null,s=null,o=[],a=[],h={x:parseInt(this._dragFrame.style.left),y:parseInt(this._dragFrame.style.top),width:this._dragFrame.clientWidth,height:this._dragFrame.clientHeight};if(this._dragFrame.style.display="none",i.children.forEach(((t,e)=>{var i=t.getDomBox();this.collideCheck(i,h)&&a.push(e)})),i.children.forEach(((t,e)=>{e==a[0]&&(r=t),e==a[a.length-1]&&(s=t),e>=a[0]&&e<=a[a.length-1]&&o.push(t)})),n[0]==r&&n[n.length-1]==s)return;if(!o.length)return;this.execute("changeRangeNode",{item:e,oldRangeNode:n,newRangeNode:o})}}collideCheck(t,e){var i=t.x+t.width/2,n=t.y+t.height/2,r=e.x+e.width/2,s=e.y+e.height/2,o=Math.abs(i-r),a=Math.abs(n-s);return o<=t.width/2+e.width/2&&a<t.height/2+e.height/2}appDblclickFn(t){var e;if(t.target instanceof HTMLElement){if(t.target.hasClass("mm-node-bar"))return t.preventDefault(),void t.stopPropagation();if(t.target.closest(".mm-node")instanceof HTMLElement){var i=t.target.closest(".mm-node").getAttribute("data-id");return this.selectNode=this.getNodeById(i),void((!this.editNode||this.editNode&&this.editNode!=this.selectNode)&&(null===(e=this.selectNode)||void 0===e||e.edit(),this.editNode=this.selectNode,this._menuDom.style.display="none",this._nodeBoard.style.display="none"))}}if(t.target instanceof SVGElement){if("basic"==this._mode||"table"==this._mode)return;if(t.target.parentElement||t.target.parentElement.hasClass("mm-mindmap-content")){var n=t.offsetX,r=t.offsetY,s=new ct({id:Fn(),text:"freeNode",main:!1},this);s.nodeType="freeNode",s.setPosition(n,r),this.execute("addFreeNode",{node:s})}}}appMousewheel(t){if(!this.isRead){var e,i=t.ctrlKey||t.metaKey;t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e&&(e<0?i&&(t.preventDefault(),t.stopPropagation(),this.setScale("down")):i&&(t.preventDefault(),t.stopPropagation(),this.setScale("up")))}}clearNode(){var t,e;"basic"==this._mode?(this.traverseBF((t=>{this.removeNode(t)})),this.mmLayout&&(null===(t=this.mmLayout.svgDom)||void 0===t||t.clear(),null===(e=this.mmLayout.svgDom)||void 0===e||e.remove())):"rich"==this._mode?(this.relateLinks.forEach((t=>{this.removeRelateLink(t)})),this.callouts.forEach((t=>{this.removeCallout(t)})),this.wireFrames.forEach((t=>{this.removeWireFrame(t)})),this.induces.forEach((t=>{this.removeInduce(t)})),this.traverseDF((t=>{this.removeNode(t)})),this.edgeGroup.clear(),this.induceGroup.clear(),this.relateGroup.clear(),this.calloutGroup.clear(),this.root=null):this.tableDom&&(this.tableDom.innerHTML="")}clear(){var t;if(this._scaleDom){var e=this.containerEL.querySelector(".mm-scale .mm-scale-down-btn"),i=this.containerEL.querySelector(".mm-scale .mm-scale-up-btn");e&&(e.onclick=null),i&&(i.onclick=null),this.containerEL.contains(this._scaleDom)&&this.containerEL.removeChild(this._scaleDom),this._scaleDom=null}if(this.clearNode(),this.removeEvent(),null===(t=this.draw)||void 0===t||t.clear(),this._noteTab){var n=this._noteTab.querySelector("mm-node-note-close");n&&(n.onclick=null),this.contentEL.removeChild(this._noteTab),this._noteTab=null}}getBoundingRect(t){var e={x:0,y:0,width:0,height:0,right:0,bottom:0,topNode:null,bottomNode:null,leftNode:null,rightNode:null};return t.forEach(((t,i)=>{if(t){if("wireFrame"==t.name)var n=t.getBBox();else n=t.getBox();0==i?(e.x=n.x,e.y=n.y,e.right=n.x+n.width,e.bottom=n.y+n.height,"node"==t.name&&(e.topNode=t,e.bottomNode=t,e.leftNode=t,e.rightNode=t)):(n.x<e.x&&(e.x=n.x,"node"==t.name&&(e.leftNode=t)),n.y<e.y&&(e.y=n.y,"node"==t.name&&(e.topNode=t)),n.x+n.width>e.right&&(e.right=n.x+n.width,"node"==t.name&&(e.rightNode=t)),n.y+n.height>e.bottom&&(e.bottom=n.y+n.height,"node"==t.name&&(e.bottomNode=t)))}})),e.width=e.right-e.x,e.height=e.bottom-e.y,e}moveNode(t,e,i){if(t==e||t.isRoot)this._indicateDom.style.display="none";else{for(var n=!1,r=e.parent;r;){if(r==t){n=!0;break}r=r.belongInduce?r.belongInduce.node:r.parent}if(n)this._indicateDom.style.display="none";else if(e.clearCacheData(),t.clearCacheData(),e.isExpand||e.expand(),"top"==i||"left"==i||"down"==i||"right"==i)this.execute("moveNode",{type:"siblings",node:t,oldParent:t.parent,dropNode:e,direct:i});else if(i.indexOf("child")>-1){var s=i.split("-");s[1]?this.execute("moveNode",{type:"child",node:t,oldParent:t.parent,parent:e,direct:s[1]}):this.execute("moveNode",{type:"child",node:t,oldParent:t.parent,parent:e})}}}execute(t,e){this.exec.execute(t,e)}undo(){this.isRead||this.exec.undo()}redo(){this.isRead||this.exec.redo()}addNode(t,e,i=-1){e&&(e.addChild(t,i),e.direct&&(t.direct=e.direct),t.clearCacheData()),t.mindmap&&"table"!=t.mindmap._mode&&this._addNodeDom(t)}_addNodeDom(t){this.contentEL.contains(t.containEl)||(this.contentEL.appendChild(t.containEl),t.refreshBox()),t.callout&&(this.addCallout(t.callout),this.contentEL.appendChild(t.callout.root.containEl),t.callout.init()),t._wireFrames&&t._wireFrames.length&&(t.wireFrames=t._wireFrames.slice(),t._wireFrames=[]),t.wireFrames.length&&t.wireFrames.forEach((t=>{this.addWireFrame(t),t.init()})),t._summaries&&t._summaries.length&&(t._summaries.forEach((t=>{this.addInduce(t),t.init(),this.traverseDF((t=>{this._addNodeDom(t)}),t.root)})),t.summaries=t._summaries.slice(),t._summaries=[])}removeNode(t){if(t.parent){var e=t.parent,i=t.parent.removeChild(t);return"table"!=e.mindmap._mode&&(this._removeChildDom(t),e.clearCacheData()),i}return"table"!=t.mindmap._mode&&this._removeChildDom(t),-1}_removeChildDom(t){var e=this,i=[],n=[];this.traverseBF((t=>{t.layout&&n.push(t.layout),t.callout&&(e.removeCallout(t.callout),e.contentEL.contains(t.callout.root.containEl)&&e.contentEL.removeChild(t.callout.root.containEl),t.callout.remove(),t.callout.off()),t._wireFrames=t.wireFrames.slice(),t.wireFrames.length&&t.wireFrames.forEach((t=>{e.removeWireFrame(t)})),t._summaries=t.summaries.slice(),t.summaries.length&&(t.summaries.forEach((t=>{e._removeChildDom(t.root),t.remove()})),t.summaries.forEach((t=>{e.removeInduce(t)})));for(let n=0;n<e.relateLinks.length;n++)e.relateLinks[n].startNode!=t&&e.relateLinks[n].endNode!=t||i.push(e.relateLinks[n]);i.forEach((t=>{e.removeRelateLink(t)})),this.contentEL.contains(t.containEl)&&e.contentEL.removeChild(t.containEl),t.shapeSvg&&(t.shapeSvg.remove(),t.shapeSvg._delete=!0)}),t),t._removeLink=i,setTimeout((()=>{n.forEach((t=>{t.group&&(t.group.clear(),t.group.remove(),t.group=null),t.svgDom&&(t.svgDom.clear(),t.svgDom.remove(),t.svgDom=null)}))}),0)}layout(){if("basic"==this._mode){if(!this.mmLayout){var t=this.basicLayoutInfo?this.basicLayoutInfo.layout:"right",e=this.basicLayoutInfo?this.basicLayoutInfo.layoutDirect:"right",i=bt[t]||bt.mindmap;return void(i&&(this.mmLayout=new i(this.root,e||this.setting.layoutDirect||"mindmap",this.colors)))}e=this.basicLayoutInfo?this.basicLayoutInfo.layoutDirect:"";this.mmLayout.layout(this.root,e||this.setting.layoutDirect||this.mmLayout.direct||"mind map")}else"rich"==this._mode&&(this.mmLayout||(this.mmLayout=this.root.layout),this.mmLayout.layout(this.mmLayout.root,this.mmLayout.direct))}refresh(){this.layout(),this.freeNodes.forEach((t=>{t.layout&&t.layout.refresh()})),this.induces.forEach((t=>{t.root.layout&&t.root.layout.createLink()})),this.updateRelateLink()}emit(t,e){var i=new CustomEvent(t,{detail:e||{}});this.appEl.dispatchEvent(i)}on(t,e){this.appEl.addEventListener(t,e)}off(t,e){t&&e&&this.appEl.removeEventListener(t,e)}center(){this.root&&(this.showNode(this.root),setTimeout((()=>{this.root.select()}),100))}_setMindScalePointer(){this.scalePointer=[];var t=this.root;if(t){var e=t.getBox();this.scalePointer.push(e.x+e.width/2,e.y+e.height/2)}}getMarkdown(t,e,i){if("basic"==this._mode||"table"==this._mode||e){var n="";i=i||this.setting.headLevel;return this.traverseDF((t=>{var e=t.getLevel()+1,r="",s="";if(e>1&&(r="\n"),t.getLevel()<i){for(let t=0;t<e;t++)r+="#";n+=r+" ",n+=t.getData().text.trim()+"\n"}else{for(var o=0;o<t.getLevel()-i;o++)s+="   ";var a=t.getData().text.trim();if(a){var h=a.split("\n"),l=h.length;1==l?n+=`${s}- ${a}\n`:l>1&&(a.startsWith("```")?(n+="\n",n+=`${s}-\n`,h.forEach(((t,e)=>{n+=`${s}  ${t}\n`})),n+="\n"):(n+=`${s}- `,h.forEach(((t,e)=>{n+=e>0?`${s}   ${t.trim()}\n`:`${t.trim()}\n`}))))}else n+=`${s}-\n`}}),t||this.root,!0),n.trim()}var r=this.getData();return JSON.stringify(r)}scale(t){t<10&&(t=10),t>300&&(t=300),this.mindScale=t,this.scalePointer.length?(this.appEl.style.transformOrigin=`${this.scalePointer[0]}px ${this.scalePointer[1]}px`,this.appEl.style.transform="scale("+this.mindScale/100+")"):this.appEl.style.transform="scale("+this.mindScale/100+")"}setScale(t){if(this.isMobile)var e=1;else e=10;if("up"==t)var i=this.mindScale+e;else i=this.mindScale-e;this.scale(i),this._scaleDom&&(this._scaleDom.querySelector(".mm-scale .mm-scale-number").innerText=`${i}%`)}getBBox(t){var e=[];return function t(i){i.isShow()&&(e.push(i),i.callout&&i.callout.isShow&&e.push(i.callout),i.wireFrames.length&&i.wireFrames.forEach((t=>{t.isHide||e.push(t)})),i.summaries.length&&i.summaries.forEach((t=>{t.isShow()&&(e=e.concat(t.getAllItem()))}))),i.isExpand&&i.children.forEach((e=>{t(e)}))}(t),this.getBoundingRect(e)}addInduce(t){if(-1==this.induces.indexOf(t)){this.induces.push(t),this.contentEL.contains(t.root.containEl)||this.contentEL.appendChild(t.root.containEl),t.root.mind=this,t.init();var e=t.node,i=e.parent;-1==i.summaries.indexOf(t)&&(i.summaries.push(t),e.induces.push(t))}}removeInduce(t){var e=this.induces.indexOf(t);if(e>-1){var i=t.node,n=i.parent,r=n.summaries.indexOf(t);n.summaries.splice(r,1);var s=i.induces.indexOf(t);i.induces.splice(s,1),this.induces.splice(e,1)}t&&t.remove()}getRootByNode(t){for(var e=null,i=t;i;){if(i.layout){e=i;break}i=i.parent}return e}addFreeNode(t){-1==this.freeNodes.indexOf(t)&&(this.freeNodes.push(t),this.contentEL.contains(t.containEl)||this.contentEL.appendChild(t.containEl),t.containEl.classList.contains("mm-root")||t.containEl.classList.add("mm-root"),t.containEl.classList.contains("mm-freeNode")||t.containEl.classList.add("mm-freeNode"),t.refreshBox(),t.nodeType="freeNode",t.parent=null,t.layout||(t.layout=new bt.mindmap2(t,t.direct||"",this.colors.slice()),t.layout.layout(t,t.direct)))}removeFreeNode(t){var e=this.freeNodes.indexOf(t);e>-1&&(this.freeNodes.splice(e,1),t.nodeType="",t.layout&&(t.layout.svgDom&&t.layout.svgDom.clear()&&t.layout.svgDom.remove()&&(t.layout.svgDom=null),t.layout.group&&t.layout.group.clear()&&t.layout.group.remove()&&(t.layout.group=null)))}addRelateLink(t){-1==this.relateLinks.indexOf(t)&&(this.relateLinks.push(t),t.isAdd||(this.draw.add(t.group),t.isAdd=!0,this.contentEL.appendChild(t.corl1),this.contentEL.appendChild(t.corl2),this.contentEL.appendChild(t.textNode.containEl),t.addEvent()))}removeRelateLink(t,e){var i=this.relateLinks.indexOf(t);if(i>-1&&(this.relateLinks.splice(i,1),t.remove(),t.offEvent(),t.isAdd=!1),!e)return i}addWireFrame(t){if(-1==this.wireFrames.indexOf(t)){this.wireFrames.push(t);var e=t.node,i=e.parent;i&&-1==i.wireFrames.indexOf(t)&&(i.wireFrames.push(t),i.wireFrames.sort((function(t,e){return t.rangeNode.length-e.rangeNode.length}))),-1==e.wfs.indexOf(t)&&e.wfs.push(t)}}removeWireFrame(t){var e=this.wireFrames.indexOf(t),i=t.node,n=i.wfs.indexOf(t);if(i.wfs.splice(n,1),e>-1){this.wireFrames.splice(e,1);var r=i.parent;if(r){var s=r.wireFrames.indexOf(t);s>-1&&r.wireFrames.splice(s,1)}t.remove()}}addCallout(t){-1==this.callouts.indexOf(t)&&this.callouts.push(t)}removeCallout(t){var e=this.callouts.indexOf(t);e>-1&&(t.remove(),this.callouts.splice(e,1))}updateRelateLink(){this.relateLinks.forEach((t=>{t.refresh(!0)}))}updateAssist(){this.callouts.forEach((t=>{t.isShow&&t.refresh()})),this.wireFrames.forEach((t=>{t.isHide||(t.refreshItems(),t.refresh())})),this.induces.forEach((t=>{t.isShow()&&(t.refreshItems(),t.refresh(),t.root&&t.root.layout&&t.root.layout.createLink())}))}updateSummary(){this.induces.forEach((t=>{t.isShow()&&(t.refreshItems(),t.refresh(),t.root&&t.root.layout&&t.root.layout.createLink())}))}updateAllAssist(){this.updateAssist(),this.updateRelateLink()}showNode(t){t||(t=this.root);var e=this.containerEL,i=e.clientHeight,n=e.clientWidth,r=this.containerEL;if("table"==this._mode){var s={x:parseInt(this.tableDom.style.left),y:parseInt(this.tableDom.style.top),width:this.tableDom.clientWidth,height:this.tableDom.clientHeight},o=s.x+s.width/2,a=s.y+s.height/2,h=Math.abs(n/2-o),l=Math.abs(i/2-a);return r.scrollLeft=h,void(r.scrollTop=l)}this.clearSelectNode(!0),t.select();var d=t.getDomBox(),c=d.x-10,u=d.y-10,p=(o=c+(d.width+20)/2,a=u+(d.height+20)/2,this.mindScale);this.appEl.style.visibility="hidden",this.scale(100);h=Math.abs(n/2-1*o),l=Math.abs(i/2-1*a);this.appEl.style.visibility="visible",this.setting.useAnimate?(this.scalePointer=[d.x+d.width/2,d.y+d.height/2],this.scale(p),ei(r).animate({scrollLeft:h+"px",scrollTop:l+"px"},500,"linear",(()=>{}))):(r.scrollLeft=h,r.scrollTop=l,this.scalePointer=[d.x+d.width/2,d.y+d.height/2],this.scale(p))}getData(){var t=this,e=[],i=[];this.traverseBF((function(t){var e=t.getData();i.push(e)}),this.root),e.push(i),this.freeNodes.forEach((i=>{var n=[];t.traverseBF((function(t){var e=t.getData();n.push(e)}),i),e.push(n)}));var n=[],r=this.getInducesByNode(this.root);this.freeNodes.forEach((t=>{r=r.concat(this.getInducesByNode(t))})),(r=hi(r)).forEach((e=>{var i=e.getData();if(i){var r={induceData:i},s=[];t.traverseBF((t=>{var e=t.getData();s.push(e)}),e.root),r.mindData=s,n.push(r)}}));var s=[];this.wireFrames.forEach((t=>{s.push(t.getData())}));var o=[];this.relateLinks.forEach((t=>{o.push(t.getData())}));var a=[];return this.callouts.forEach((t=>{a.push(t.getData())})),{mindData:e,induceData:n,wireFrameData:s,relateLinkData:o,calloutData:a}}getInducesByNode(t){if(!t)return[];var e=[];return t.induces.length&&(e=e.concat(t.induces),t.induces.forEach((t=>{e=e.concat(this.getInducesByNode(t.root))}))),t.children.forEach((t=>{e=e.concat(this.getInducesByNode(t))})),e}toPNG(){html2canvas(this.contentEL).then((t=>{document.body.appendChild(t)}))}toDiv(t){if("table"==this._mode){this.tableDom.style.left="100px",this.tableDom.style.top="100px";var e=this.tableDom.clientWidth+200,i=this.tableDom.clientHeight+200}else{var n=[];this.traverseDF((t=>{t.isShow()&&n.push(t)})),this.freeNodes.forEach((t=>{this.traverseDF((t=>{t.isShow()&&n.push(t)}),t)})),this.induces.forEach((t=>{this.traverseDF((t=>{t.isShow()&&n.push(t)}),t.root)})),this.relateLinks.forEach((t=>{t.textNode&&t.textNode.isShow()&&n.push(t.textNode)}));var r=this.getBoundingRect(n),s=this.root.getPosition(),o=0,a=0;r.x>100&&(o=r.x-100),r.y>60&&(a=r.y-100),this.root.setPosition(s.x-o,s.y-a),this.freeNodes.forEach((t=>{var e=t.getPosition();t.setPosition(e.x-o,e.y-a),t.layout.refresh()})),this.refresh(),this.updateAssist(),this.refresh(),this.updateRelateLink();e=r.width+200,i=r.height+200}this.contentEL.style.width=e+"px",this.contentEL.style.height=i+"px",t&&(this.appEl.style.width=e+100+"px",this.appEl.style.height=i+100+"px",this.containerEL.style.maxHeight="500px",this.containerEL.style.maxWidth="100%")}initTable(t){this.clearNode(),t?(this.data=t,this.initTableNode(this.data)):this.initTableDom()}initTableNode(t){this._mode="table",this.themeConfig&&this.appEl.classList.add(`mm-theme-${this.themeConfig.name}`);var e=this;t=this.data;e._nodeNum=0,function t(i,n,r){e._nodeNum++;var s=new ut(i,e);n?(e.root=s,s.isRoot=!0,s.data.main=!0):(r.children.push(s),s.parent=r),i.children&&i.children.length&&i.children.forEach((e=>{t(e,!1,s)}))}(t,!0),this.initTableDom()}search(t){var e=[];return t&&this.traverseBF((i=>{var n=i.getData();n.text&&n.text.toLowerCase().indexOf(t)>-1&&e.push({id:n.id,text:n.text})})),e}createSearchDom(){var t=document.createElement("div");t.classList.add("mm-search");var e=document.createElement("div");t.appendChild(e),e.classList.add("mm-search-head");var i=document.createElement("input");e.appendChild(i),i.classList.add("mm-search-input");var n=document.createElement("div");e.appendChild(n),n.classList.add("mm-search-result"),t.appendChild(e);var r=document.createElement("ul");r.classList.add("mm-search-list"),t.appendChild(r),this._searchDom=t,i.onblur=()=>{var t=i.value.trim();if(ei(r).off("click"),t){var e=this.search(t.toLowerCase());n.innerHTML=s("searchResult").replace("{{nodeNumber}}",e.length),this.createSearchListDom(e,r)}else r.innerHTML="",n.innerHTML=""},this.containerEL.appendChild(t)}createSearchListDom(t,e){var i=this;if(t.length&&e){var n="";e.innerHTML="",t.forEach(((t,e)=>{var{id:i,text:r}=t;n+=`<li class="mm-search-item" id="${i}">${r}</li>`})),e.innerHTML=n,ei(e).on("click",".mm-search-item",(function(t){t.preventDefault();var e=ei(this).attr("id"),n=i.getNodeById(e);n&&i.showNode(n)}))}}closeSearch(){if(this._searchDom){this._searchDom.querySelector(".mm-search-list").innerHTML="",this._searchDom.querySelector(".mm-search-result").innerHTML="",this._searchDom.querySelector(".mm-search-input").value="",this._searchDom.querySelector(".mm-search-input").onblur=null;var t=this._searchDom.querySelector(".mm-search-list");ei(t).off("click"),this.containerEL.removeChild(this._searchDom),this._searchDom=null}}initTableDom(){var t=this.setting.canvasSize/2-60,e=this.setting.canvasSize/2-200;if(!this.tableDom){var i=document.createElement("div");i.classList.add("mm-table-content"),i.style.position="absolute",i.style.left=t+"px",i.style.top=e+"px",this.tableDom=i,this.contentEL.appendChild(i)}var n=document.createElement("table");n.classList.add("mm-table"),n.classList.add("mm-table-bordered"),this.tableDom.appendChild(n);var r=this.getMaxlevel(),s=document.createElement("thead"),o=document.createElement("tr");n.appendChild(s),this.root.init(r),this.root.tdDom.setAttribute("colspan",r),o.appendChild(this.root.tdDom),s.appendChild(o);var a=[];this.root.children.forEach((t=>{this.traverseDF((t=>{if(t.init(),t.isLeaf()&&1!=t.getLevel()){var e=document.createElement("tr");t.trDom=e,n.appendChild(e),e.appendChild(t.tdDom),a.push(t),t.tdDom.setAttribute("colspan",r-t.getLevel()+1),t.tdDom.setAttribute("rowspan",1)}}),t)})),a.forEach((t=>{for(var e=t.parent;e&&e!=this.root&&!n.querySelector(`[data-id='${e.data.id}']`);){e.tdDom.setAttribute("colspan",1);var i=e.children[0].trDom;i.insertBefore(e.tdDom,i.firstChild),e.trDom=i;var r=this.getRowspan(e);e.tdDom.setAttribute("rowspan",r),e=e.parent}})),this.root.children.forEach(((t,e)=>{if(!n.querySelector(`[data-id='${t.data.id}']`)){var i=document.createElement("tr");if(i.appendChild(t.tdDom),t.tdDom.setAttribute("colspan",r),t.tdDom.setAttribute("rowspan",1),t.trDom=i,0==e)li(i,s);else{var o=this.getLastNode(this.root.children[e-1]);o&&li(i,o.trDom)}}}))}getLastNode(t){return function t(e){var i=e.children.length;return i?t(e.children[i-1]):e}(t)}getMaxlevel(t){var e=0;return this.traverseDF((t=>{var i=t.getLevel();e<i&&(e=i)}),t||this.root),e}getRowspan(t){return function t(e){var i=e.children.length,n=e.children.filter((t=>t.children&&t.children.length));if(n.length){var r=[i];n.forEach((e=>{var i=t(e);r.push(i)}));var s=0;return r.forEach((t=>{s+=t})),s-n.length}return i}(t)}getTableHtml(t,e){var i=this,n=null;i._nodeNum=0,function t(e,r,s){i._nodeNum++;var o=new ut(e,i);r?(n=o,o.isRoot=!0,o.data.main=!0):(s.children.push(o),o.parent=s),e.children&&e.children.length&&e.children.forEach((e=>{t(e,!1,o)}))}(t,!0);var r=this.setting.canvasSize/2-60,s=this.setting.canvasSize/2-200,o=document.createElement("div");o.classList.add("mm-table-content"),o.style.position="absolute",o.style.left=r+"px",o.style.top=s+"px";var a=document.createElement("table");a.classList.add("mm-table"),a.classList.add("mm-table-bordered"),o.appendChild(a);var h=this.getMaxlevel(),l=document.createElement("thead"),d=document.createElement("tr");if(a.appendChild(l),n._initTdDom(h),n.tdDom.setAttribute("colspan",h),d.appendChild(n.tdDom),e){var c=h-1;if(c>0){for(var u=0;u<c;u++)d.appendChild(document.createElement("th"));n.tdDom.setAttribute("colspan",1)}}l.appendChild(d);var p=[];return n.children.forEach((t=>{this.traverseDF((t=>{if(t._initTdDom(),t.isLeaf()&&1!=t.getLevel()){var e=document.createElement("tr");t.trDom=e,a.appendChild(e),e.appendChild(t.tdDom),p.push(t),t.tdDom.setAttribute("colspan",h-t.getLevel()+1),t.tdDom.setAttribute("rowspan",1)}}),t)})),p.forEach((t=>{for(var e=t.parent;e&&e!=n&&!a.querySelector(`[data-id='${e.data.id}']`);){e.tdDom.setAttribute("colspan",1);var i=e.children[0].trDom;i.insertBefore(e.tdDom,i.firstChild),e.trDom=i;var r=this.getRowspan(e);e.tdDom.setAttribute("rowspan",r),e=e.parent}})),n.children.forEach(((t,e)=>{if(!a.querySelector(`[data-id='${t.data.id}']`)){var i=document.createElement("tr");if(i.appendChild(t.tdDom),t.tdDom.setAttribute("colspan",h),t.tdDom.setAttribute("rowspan",1),t.trDom=i,0==e)li(i,l);else{var r=this.getLastNode(n.children[e-1]);r&&li(i,r.trDom)}}})),this.traverseDF((t=>{t.tdDom&&t.tdDom.removeAttribute("data-id")}),n),o.innerHTML||""}getMarkdownOfTable(t){var e="";if("table"==this._mode){var i=this,n=null;function e(t,r,s){i._nodeNum++;var o=new ut(t,i);r?(n=o,o.isRoot=!0,o.data.main=!0):(s.children.push(o),o.parent=s),t.children&&t.children.length&&t.children.forEach((t=>{e(t,!1,o)}))}i._nodeNum=0,e(t,!0);var r=this.setting.canvasSize/2-60,s=this.setting.canvasSize/2-200,o=document.createElement("div");o.classList.add("mm-table-content"),o.style.position="absolute",o.style.left=r+"px",o.style.top=s+"px";var a=document.createElement("table");a.classList.add("mm-table"),a.classList.add("mm-table-bordered"),o.appendChild(a);var h=this.getMaxlevel(),l=document.createElement("thead"),d=document.createElement("tr");a.appendChild(l),n._initTdDom(h),n.tdDom.setAttribute("colspan",h),d.appendChild(n.tdDom);var c=h-1;if(c>0){for(var u=0;u<c;u++){var p=document.createElement("th");d.appendChild(p)}n.tdDom.setAttribute("colspan",1)}l.appendChild(d);var m=[];n.children.forEach((t=>{this.traverseDF((t=>{if(t._initTdDom(),t.isLeaf()&&1!=t.getLevel()){var e=document.createElement("tr");t.trDom=e,a.appendChild(e),e.appendChild(t.tdDom),m.push(t),t.tdDom.setAttribute("r-colspan",h-t.getLevel()+1);var i=h-t.getLevel()+1;if(i>1)for(var n=0;n<i-1;n++){li(document.createElement("td"),t.tdDom)}t.tdDom.setAttribute("rowspan",1)}}),t)})),m.forEach((t=>{for(var e=t.parent;e&&e!=n&&!a.querySelector(`[data-id='${e.data.id}']`);){e.tdDom.setAttribute("colspan",1);var i=e.children[0].trDom;i.insertBefore(e.tdDom,i.firstChild),e.trDom=i,e=e.parent}})),m.forEach((t=>{for(var e=t.trDom,i=e.childNodes.length,n=h-i,r=0;r<n;r++){var s=document.createElement("td");s.textContent="^^",e.insertBefore(s,e.firstChild)}})),n.children.forEach(((t,e)=>{if(!a.querySelector(`[data-id='${t.data.id}']`)){var i=document.createElement("tr");if(i.appendChild(t.tdDom),h>1)for(var r=0;r<h-1;r++){var s=document.createElement("td");i.appendChild(s)}if(t.tdDom.setAttribute("rowspan",1),t.trDom=i,0==e)li(i,l);else{var o=this.getLastNode(n.children[e-1]);o&&li(i,o.trDom)}}})),this.traverseDF((t=>{t.tdDom&&t.tdDom.removeAttribute("data-id")}),n)}e+="|";var f=0;l.childNodes.forEach((t=>{f=t.childNodes.length,t.childNodes.forEach((t=>{e+=t.textContent+"|"}))})),e+="<br>",e+="|";for(u=0;u<f;u++)e+=":--- | ";return a.childNodes.forEach((t=>{"tr"!=t.tagName&&"TR"!=t.tagName||(e+="<br>",e+="|",t.childNodes.forEach((t=>{e+=t.textContent+"|"})))})),e}}var mi=mt((function(t,e){var i;"undefined"!=typeof self&&self,i=function(){return function(){var t={d:function(e,i){for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};t.d(e,{default:function(){return Yn}});var i=function t(e,i){this.position=void 0;var n,r="KaTeX parse error: "+e,s=i&&i.loc;if(s&&s.start<=s.end){var o=s.lexer.input;n=s.start;var a=s.end;n===o.length?r+=" at end of input: ":r+=" at position "+(n+1)+": ";var h=o.slice(n,a).replace(/[^]/g,"$&̲");r+=(n>15?"…"+o.slice(n-15,n):o.slice(0,n))+h+(a+15<o.length?o.slice(a,a+15)+"…":o.slice(a))}var l=new Error(r);return l.name="ParseError",l.__proto__=t.prototype,l.position=n,l};i.prototype.__proto__=Error.prototype;var n=i,r=/([A-Z])/g,s={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},o=/[&><"']/g,a=function t(e){return"ordgroup"===e.type||"color"===e.type?1===e.body.length?t(e.body[0]):e:"font"===e.type?t(e.body):e},h={contains:function(t,e){return-1!==t.indexOf(e)},deflt:function(t,e){return void 0===t?e:t},escape:function(t){return String(t).replace(o,(function(t){return s[t]}))},hyphenate:function(t){return t.replace(r,"-$1").toLowerCase()},getBaseElem:a,isCharacterBox:function(t){var e=a(t);return"mathord"===e.type||"textord"===e.type||"atom"===e.type},protocolFromUrl:function(t){var e=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(t);return null!=e?e[1]:"_relative"}},l=function(){function t(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{},this.displayMode=h.deflt(t.displayMode,!1),this.output=h.deflt(t.output,"htmlAndMathml"),this.leqno=h.deflt(t.leqno,!1),this.fleqn=h.deflt(t.fleqn,!1),this.throwOnError=h.deflt(t.throwOnError,!0),this.errorColor=h.deflt(t.errorColor,"#cc0000"),this.macros=t.macros||{},this.minRuleThickness=Math.max(0,h.deflt(t.minRuleThickness,0)),this.colorIsTextColor=h.deflt(t.colorIsTextColor,!1),this.strict=h.deflt(t.strict,"warn"),this.trust=h.deflt(t.trust,!1),this.maxSize=Math.max(0,h.deflt(t.maxSize,1/0)),this.maxExpand=Math.max(0,h.deflt(t.maxExpand,1e3)),this.globalGroup=h.deflt(t.globalGroup,!1)}var e=t.prototype;return e.reportNonstrict=function(t,e,i){var r=this.strict;if("function"==typeof r&&(r=r(t,e,i)),r&&"ignore"!==r){if(!0===r||"error"===r)throw new n("LaTeX-incompatible input and strict mode is set to 'error': "+e+" ["+t+"]",i);"warn"===r?"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+e+" ["+t+"]"):"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+r+"': "+e+" ["+t+"]")}},e.useStrictBehavior=function(t,e,i){var n=this.strict;if("function"==typeof n)try{n=n(t,e,i)}catch(t){n="error"}return!(!n||"ignore"===n||!0!==n&&"error"!==n&&("warn"===n?("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+e+" ["+t+"]"),1):("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+n+"': "+e+" ["+t+"]"),1)))},e.isTrusted=function(t){t.url&&!t.protocol&&(t.protocol=h.protocolFromUrl(t.url));var e="function"==typeof this.trust?this.trust(t):this.trust;return Boolean(e)},t}(),d=function(){function t(t,e,i){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=e,this.cramped=i}var e=t.prototype;return e.sup=function(){return c[u[this.id]]},e.sub=function(){return c[p[this.id]]},e.fracNum=function(){return c[m[this.id]]},e.fracDen=function(){return c[f[this.id]]},e.cramp=function(){return c[g[this.id]]},e.text=function(){return c[v[this.id]]},e.isTight=function(){return this.size>=2},t}(),c=[new d(0,0,!1),new d(1,0,!0),new d(2,1,!1),new d(3,1,!0),new d(4,2,!1),new d(5,2,!0),new d(6,3,!1),new d(7,3,!0)],u=[4,5,4,5,6,7,6,7],p=[5,5,5,5,7,7,7,7],m=[2,3,4,5,6,7,6,7],f=[3,3,5,5,7,7,7,7],g=[1,1,3,3,5,5,7,7],v=[0,1,2,3,2,3,2,3],y={DISPLAY:c[0],TEXT:c[2],SCRIPT:c[4],SCRIPTSCRIPT:c[6]},x=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}],b=[];function w(t){for(var e=0;e<b.length;e+=2)if(t>=b[e]&&t<=b[e+1])return!0;return!1}x.forEach((function(t){return t.blocks.forEach((function(t){return b.push.apply(b,t)}))}));var k=80,_={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"},C=function(){function t(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}var e=t.prototype;return e.hasClass=function(t){return h.contains(this.classes,t)},e.toNode=function(){for(var t=document.createDocumentFragment(),e=0;e<this.children.length;e++)t.appendChild(this.children[e].toNode());return t},e.toMarkup=function(){for(var t="",e=0;e<this.children.length;e++)t+=this.children[e].toMarkup();return t},e.toText=function(){var t=function(t){return t.toText()};return this.children.map(t).join("")},t}(),D=function(t){return t.filter((function(t){return t})).join(" ")},E=function(t,e,i){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=i||{},e){e.style.isTight()&&this.classes.push("mtight");var n=e.getColor();n&&(this.style.color=n)}},S=function(t){var e=document.createElement(t);for(var i in e.className=D(this.classes),this.style)this.style.hasOwnProperty(i)&&(e.style[i]=this.style[i]);for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&e.setAttribute(n,this.attributes[n]);for(var r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e},N=function(t){var e="<"+t;this.classes.length&&(e+=' class="'+h.escape(D(this.classes))+'"');var i="";for(var n in this.style)this.style.hasOwnProperty(n)&&(i+=h.hyphenate(n)+":"+this.style[n]+";");for(var r in i&&(e+=' style="'+h.escape(i)+'"'),this.attributes)this.attributes.hasOwnProperty(r)&&(e+=" "+r+'="'+h.escape(this.attributes[r])+'"');e+=">";for(var s=0;s<this.children.length;s++)e+=this.children[s].toMarkup();return e+="</"+t+">"},M=function(){function t(t,e,i,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,E.call(this,t,i,n),this.children=e||[]}var e=t.prototype;return e.setAttribute=function(t,e){this.attributes[t]=e},e.hasClass=function(t){return h.contains(this.classes,t)},e.toNode=function(){return S.call(this,"span")},e.toMarkup=function(){return N.call(this,"span")},t}(),A=function(){function t(t,e,i,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,E.call(this,e,n),this.children=i||[],this.setAttribute("href",t)}var e=t.prototype;return e.setAttribute=function(t,e){this.attributes[t]=e},e.hasClass=function(t){return h.contains(this.classes,t)},e.toNode=function(){return S.call(this,"a")},e.toMarkup=function(){return N.call(this,"a")},t}(),L=function(){function t(t,e,i){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=e,this.src=t,this.classes=["mord"],this.style=i}var e=t.prototype;return e.hasClass=function(t){return h.contains(this.classes,t)},e.toNode=function(){var t=document.createElement("img");for(var e in t.src=this.src,t.alt=this.alt,t.className="mord",this.style)this.style.hasOwnProperty(e)&&(t.style[e]=this.style[e]);return t},e.toMarkup=function(){var t="<img  src='"+this.src+" 'alt='"+this.alt+"' ",e="";for(var i in this.style)this.style.hasOwnProperty(i)&&(e+=h.hyphenate(i)+":"+this.style[i]+";");return e&&(t+=' style="'+h.escape(e)+'"'),t+="'/>"},t}(),T={"î":"ı̂","ï":"ı̈","í":"ı́","ì":"ı̀"},P=function(){function t(t,e,i,n,r,s,o,a){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=e||0,this.depth=i||0,this.italic=n||0,this.skew=r||0,this.width=s||0,this.classes=o||[],this.style=a||{},this.maxFontSize=0;var h=function(t){for(var e=0;e<x.length;e++)for(var i=x[e],n=0;n<i.blocks.length;n++){var r=i.blocks[n];if(t>=r[0]&&t<=r[1])return i.name}return null}(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=T[this.text])}var e=t.prototype;return e.hasClass=function(t){return h.contains(this.classes,t)},e.toNode=function(){var t=document.createTextNode(this.text),e=null;for(var i in this.italic>0&&((e=document.createElement("span")).style.marginRight=this.italic+"em"),this.classes.length>0&&((e=e||document.createElement("span")).className=D(this.classes)),this.style)this.style.hasOwnProperty(i)&&((e=e||document.createElement("span")).style[i]=this.style[i]);return e?(e.appendChild(t),e):t},e.toMarkup=function(){var t=!1,e="<span";this.classes.length&&(t=!0,e+=' class="',e+=h.escape(D(this.classes)),e+='"');var i="";for(var n in this.italic>0&&(i+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(n)&&(i+=h.hyphenate(n)+":"+this.style[n]+";");i&&(t=!0,e+=' style="'+h.escape(i)+'"');var r=h.escape(this.text);return t?(e+=">",e+=r,e+="</span>"):r},t}(),I=function(){function t(t,e){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=e||{}}var e=t.prototype;return e.toNode=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t},e.toMarkup=function(){var t="<svg";for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+"='"+this.attributes[e]+"'");t+=">";for(var i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t+="</svg>"},t}(),B=function(){function t(t,e){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=e}var e=t.prototype;return e.toNode=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",_[this.pathName]),t},e.toMarkup=function(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+_[this.pathName]+"'/>"},t}(),O=function(){function t(t){this.attributes=void 0,this.attributes=t||{}}var e=t.prototype;return e.toNode=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","line");for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);return t},e.toMarkup=function(){var t="<line";for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+"='"+this.attributes[e]+"'");return t+="/>"},t}();function R(t){if(t instanceof P)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}var F={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.12,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,1],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.67,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.9,0,0,.278],8943:[-.19,.31,0,0,1.172],8945:[-.1,.82,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.744,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.744,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},z={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},q={"Å":"A","Ç":"C","Ð":"D","Þ":"o","å":"a","ç":"c","ð":"d","þ":"o","А":"A","Б":"B","В":"B","Г":"F","Д":"A","Е":"E","Ж":"K","З":"3","И":"N","Й":"N","К":"K","Л":"N","М":"M","Н":"H","О":"O","П":"N","Р":"P","С":"C","Т":"T","У":"y","Ф":"O","Х":"X","Ц":"U","Ч":"h","Ш":"W","Щ":"W","Ъ":"B","Ы":"X","Ь":"B","Э":"3","Ю":"X","Я":"R","а":"a","б":"b","в":"a","г":"r","д":"y","е":"e","ж":"m","з":"e","и":"n","й":"n","к":"n","л":"n","м":"m","н":"n","о":"o","п":"n","р":"p","с":"c","т":"o","у":"y","ф":"b","х":"x","ц":"n","ч":"n","ш":"w","щ":"w","ъ":"a","ы":"m","ь":"a","э":"e","ю":"m","я":"r"};function j(t,e,i){if(!F[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),r=F[e][n];if(!r&&t[0]in q&&(n=q[t[0]].charCodeAt(0),r=F[e][n]),r||"text"!==i||w(n)&&(r=F[e][77]),r)return{depth:r[0],height:r[1],italic:r[2],skew:r[3],width:r[4]}}var H={},$={bin:1,close:1,inner:1,open:1,punct:1,rel:1},W={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},U={math:{},text:{}},V=U;function G(t,e,i,n,r,s){U[t][r]={font:e,group:i,replace:n},s&&n&&(U[t][n]=U[t][r])}var X="math",Y="text",Z="main",J="ams",K="accent-token",Q="bin",tt="close",et="inner",it="mathord",nt="op-token",rt="open",st="punct",ot="rel",at="spacing",ht="textord";G(X,Z,ot,"≡","\\equiv",!0),G(X,Z,ot,"≺","\\prec",!0),G(X,Z,ot,"≻","\\succ",!0),G(X,Z,ot,"∼","\\sim",!0),G(X,Z,ot,"⊥","\\perp"),G(X,Z,ot,"⪯","\\preceq",!0),G(X,Z,ot,"⪰","\\succeq",!0),G(X,Z,ot,"≃","\\simeq",!0),G(X,Z,ot,"∣","\\mid",!0),G(X,Z,ot,"≪","\\ll",!0),G(X,Z,ot,"≫","\\gg",!0),G(X,Z,ot,"≍","\\asymp",!0),G(X,Z,ot,"∥","\\parallel"),G(X,Z,ot,"⋈","\\bowtie",!0),G(X,Z,ot,"⌣","\\smile",!0),G(X,Z,ot,"⊑","\\sqsubseteq",!0),G(X,Z,ot,"⊒","\\sqsupseteq",!0),G(X,Z,ot,"≐","\\doteq",!0),G(X,Z,ot,"⌢","\\frown",!0),G(X,Z,ot,"∋","\\ni",!0),G(X,Z,ot,"∝","\\propto",!0),G(X,Z,ot,"⊢","\\vdash",!0),G(X,Z,ot,"⊣","\\dashv",!0),G(X,Z,ot,"∋","\\owns"),G(X,Z,st,".","\\ldotp"),G(X,Z,st,"⋅","\\cdotp"),G(X,Z,ht,"#","\\#"),G(Y,Z,ht,"#","\\#"),G(X,Z,ht,"&","\\&"),G(Y,Z,ht,"&","\\&"),G(X,Z,ht,"ℵ","\\aleph",!0),G(X,Z,ht,"∀","\\forall",!0),G(X,Z,ht,"ℏ","\\hbar",!0),G(X,Z,ht,"∃","\\exists",!0),G(X,Z,ht,"∇","\\nabla",!0),G(X,Z,ht,"♭","\\flat",!0),G(X,Z,ht,"ℓ","\\ell",!0),G(X,Z,ht,"♮","\\natural",!0),G(X,Z,ht,"♣","\\clubsuit",!0),G(X,Z,ht,"℘","\\wp",!0),G(X,Z,ht,"♯","\\sharp",!0),G(X,Z,ht,"♢","\\diamondsuit",!0),G(X,Z,ht,"ℜ","\\Re",!0),G(X,Z,ht,"♡","\\heartsuit",!0),G(X,Z,ht,"ℑ","\\Im",!0),G(X,Z,ht,"♠","\\spadesuit",!0),G(X,Z,ht,"§","\\S",!0),G(Y,Z,ht,"§","\\S"),G(X,Z,ht,"¶","\\P",!0),G(Y,Z,ht,"¶","\\P"),G(X,Z,ht,"†","\\dag"),G(Y,Z,ht,"†","\\dag"),G(Y,Z,ht,"†","\\textdagger"),G(X,Z,ht,"‡","\\ddag"),G(Y,Z,ht,"‡","\\ddag"),G(Y,Z,ht,"‡","\\textdaggerdbl"),G(X,Z,tt,"⎱","\\rmoustache",!0),G(X,Z,rt,"⎰","\\lmoustache",!0),G(X,Z,tt,"⟯","\\rgroup",!0),G(X,Z,rt,"⟮","\\lgroup",!0),G(X,Z,Q,"∓","\\mp",!0),G(X,Z,Q,"⊖","\\ominus",!0),G(X,Z,Q,"⊎","\\uplus",!0),G(X,Z,Q,"⊓","\\sqcap",!0),G(X,Z,Q,"∗","\\ast"),G(X,Z,Q,"⊔","\\sqcup",!0),G(X,Z,Q,"◯","\\bigcirc",!0),G(X,Z,Q,"∙","\\bullet"),G(X,Z,Q,"‡","\\ddagger"),G(X,Z,Q,"≀","\\wr",!0),G(X,Z,Q,"⨿","\\amalg"),G(X,Z,Q,"&","\\And"),G(X,Z,ot,"⟵","\\longleftarrow",!0),G(X,Z,ot,"⇐","\\Leftarrow",!0),G(X,Z,ot,"⟸","\\Longleftarrow",!0),G(X,Z,ot,"⟶","\\longrightarrow",!0),G(X,Z,ot,"⇒","\\Rightarrow",!0),G(X,Z,ot,"⟹","\\Longrightarrow",!0),G(X,Z,ot,"↔","\\leftrightarrow",!0),G(X,Z,ot,"⟷","\\longleftrightarrow",!0),G(X,Z,ot,"⇔","\\Leftrightarrow",!0),G(X,Z,ot,"⟺","\\Longleftrightarrow",!0),G(X,Z,ot,"↦","\\mapsto",!0),G(X,Z,ot,"⟼","\\longmapsto",!0),G(X,Z,ot,"↗","\\nearrow",!0),G(X,Z,ot,"↩","\\hookleftarrow",!0),G(X,Z,ot,"↪","\\hookrightarrow",!0),G(X,Z,ot,"↘","\\searrow",!0),G(X,Z,ot,"↼","\\leftharpoonup",!0),G(X,Z,ot,"⇀","\\rightharpoonup",!0),G(X,Z,ot,"↙","\\swarrow",!0),G(X,Z,ot,"↽","\\leftharpoondown",!0),G(X,Z,ot,"⇁","\\rightharpoondown",!0),G(X,Z,ot,"↖","\\nwarrow",!0),G(X,Z,ot,"⇌","\\rightleftharpoons",!0),G(X,J,ot,"≮","\\nless",!0),G(X,J,ot,"","\\@nleqslant"),G(X,J,ot,"","\\@nleqq"),G(X,J,ot,"⪇","\\lneq",!0),G(X,J,ot,"≨","\\lneqq",!0),G(X,J,ot,"","\\@lvertneqq"),G(X,J,ot,"⋦","\\lnsim",!0),G(X,J,ot,"⪉","\\lnapprox",!0),G(X,J,ot,"⊀","\\nprec",!0),G(X,J,ot,"⋠","\\npreceq",!0),G(X,J,ot,"⋨","\\precnsim",!0),G(X,J,ot,"⪹","\\precnapprox",!0),G(X,J,ot,"≁","\\nsim",!0),G(X,J,ot,"","\\@nshortmid"),G(X,J,ot,"∤","\\nmid",!0),G(X,J,ot,"⊬","\\nvdash",!0),G(X,J,ot,"⊭","\\nvDash",!0),G(X,J,ot,"⋪","\\ntriangleleft"),G(X,J,ot,"⋬","\\ntrianglelefteq",!0),G(X,J,ot,"⊊","\\subsetneq",!0),G(X,J,ot,"","\\@varsubsetneq"),G(X,J,ot,"⫋","\\subsetneqq",!0),G(X,J,ot,"","\\@varsubsetneqq"),G(X,J,ot,"≯","\\ngtr",!0),G(X,J,ot,"","\\@ngeqslant"),G(X,J,ot,"","\\@ngeqq"),G(X,J,ot,"⪈","\\gneq",!0),G(X,J,ot,"≩","\\gneqq",!0),G(X,J,ot,"","\\@gvertneqq"),G(X,J,ot,"⋧","\\gnsim",!0),G(X,J,ot,"⪊","\\gnapprox",!0),G(X,J,ot,"⊁","\\nsucc",!0),G(X,J,ot,"⋡","\\nsucceq",!0),G(X,J,ot,"⋩","\\succnsim",!0),G(X,J,ot,"⪺","\\succnapprox",!0),G(X,J,ot,"≆","\\ncong",!0),G(X,J,ot,"","\\@nshortparallel"),G(X,J,ot,"∦","\\nparallel",!0),G(X,J,ot,"⊯","\\nVDash",!0),G(X,J,ot,"⋫","\\ntriangleright"),G(X,J,ot,"⋭","\\ntrianglerighteq",!0),G(X,J,ot,"","\\@nsupseteqq"),G(X,J,ot,"⊋","\\supsetneq",!0),G(X,J,ot,"","\\@varsupsetneq"),G(X,J,ot,"⫌","\\supsetneqq",!0),G(X,J,ot,"","\\@varsupsetneqq"),G(X,J,ot,"⊮","\\nVdash",!0),G(X,J,ot,"⪵","\\precneqq",!0),G(X,J,ot,"⪶","\\succneqq",!0),G(X,J,ot,"","\\@nsubseteqq"),G(X,J,Q,"⊴","\\unlhd"),G(X,J,Q,"⊵","\\unrhd"),G(X,J,ot,"↚","\\nleftarrow",!0),G(X,J,ot,"↛","\\nrightarrow",!0),G(X,J,ot,"⇍","\\nLeftarrow",!0),G(X,J,ot,"⇏","\\nRightarrow",!0),G(X,J,ot,"↮","\\nleftrightarrow",!0),G(X,J,ot,"⇎","\\nLeftrightarrow",!0),G(X,J,ot,"△","\\vartriangle"),G(X,J,ht,"ℏ","\\hslash"),G(X,J,ht,"▽","\\triangledown"),G(X,J,ht,"◊","\\lozenge"),G(X,J,ht,"Ⓢ","\\circledS"),G(X,J,ht,"®","\\circledR"),G(Y,J,ht,"®","\\circledR"),G(X,J,ht,"∡","\\measuredangle",!0),G(X,J,ht,"∄","\\nexists"),G(X,J,ht,"℧","\\mho"),G(X,J,ht,"Ⅎ","\\Finv",!0),G(X,J,ht,"⅁","\\Game",!0),G(X,J,ht,"‵","\\backprime"),G(X,J,ht,"▲","\\blacktriangle"),G(X,J,ht,"▼","\\blacktriangledown"),G(X,J,ht,"■","\\blacksquare"),G(X,J,ht,"⧫","\\blacklozenge"),G(X,J,ht,"★","\\bigstar"),G(X,J,ht,"∢","\\sphericalangle",!0),G(X,J,ht,"∁","\\complement",!0),G(X,J,ht,"ð","\\eth",!0),G(Y,Z,ht,"ð","ð"),G(X,J,ht,"╱","\\diagup"),G(X,J,ht,"╲","\\diagdown"),G(X,J,ht,"□","\\square"),G(X,J,ht,"□","\\Box"),G(X,J,ht,"◊","\\Diamond"),G(X,J,ht,"¥","\\yen",!0),G(Y,J,ht,"¥","\\yen",!0),G(X,J,ht,"✓","\\checkmark",!0),G(Y,J,ht,"✓","\\checkmark"),G(X,J,ht,"ℶ","\\beth",!0),G(X,J,ht,"ℸ","\\daleth",!0),G(X,J,ht,"ℷ","\\gimel",!0),G(X,J,ht,"ϝ","\\digamma",!0),G(X,J,ht,"ϰ","\\varkappa"),G(X,J,rt,"┌","\\@ulcorner",!0),G(X,J,tt,"┐","\\@urcorner",!0),G(X,J,rt,"└","\\@llcorner",!0),G(X,J,tt,"┘","\\@lrcorner",!0),G(X,J,ot,"≦","\\leqq",!0),G(X,J,ot,"⩽","\\leqslant",!0),G(X,J,ot,"⪕","\\eqslantless",!0),G(X,J,ot,"≲","\\lesssim",!0),G(X,J,ot,"⪅","\\lessapprox",!0),G(X,J,ot,"≊","\\approxeq",!0),G(X,J,Q,"⋖","\\lessdot"),G(X,J,ot,"⋘","\\lll",!0),G(X,J,ot,"≶","\\lessgtr",!0),G(X,J,ot,"⋚","\\lesseqgtr",!0),G(X,J,ot,"⪋","\\lesseqqgtr",!0),G(X,J,ot,"≑","\\doteqdot"),G(X,J,ot,"≓","\\risingdotseq",!0),G(X,J,ot,"≒","\\fallingdotseq",!0),G(X,J,ot,"∽","\\backsim",!0),G(X,J,ot,"⋍","\\backsimeq",!0),G(X,J,ot,"⫅","\\subseteqq",!0),G(X,J,ot,"⋐","\\Subset",!0),G(X,J,ot,"⊏","\\sqsubset",!0),G(X,J,ot,"≼","\\preccurlyeq",!0),G(X,J,ot,"⋞","\\curlyeqprec",!0),G(X,J,ot,"≾","\\precsim",!0),G(X,J,ot,"⪷","\\precapprox",!0),G(X,J,ot,"⊲","\\vartriangleleft"),G(X,J,ot,"⊴","\\trianglelefteq"),G(X,J,ot,"⊨","\\vDash",!0),G(X,J,ot,"⊪","\\Vvdash",!0),G(X,J,ot,"⌣","\\smallsmile"),G(X,J,ot,"⌢","\\smallfrown"),G(X,J,ot,"≏","\\bumpeq",!0),G(X,J,ot,"≎","\\Bumpeq",!0),G(X,J,ot,"≧","\\geqq",!0),G(X,J,ot,"⩾","\\geqslant",!0),G(X,J,ot,"⪖","\\eqslantgtr",!0),G(X,J,ot,"≳","\\gtrsim",!0),G(X,J,ot,"⪆","\\gtrapprox",!0),G(X,J,Q,"⋗","\\gtrdot"),G(X,J,ot,"⋙","\\ggg",!0),G(X,J,ot,"≷","\\gtrless",!0),G(X,J,ot,"⋛","\\gtreqless",!0),G(X,J,ot,"⪌","\\gtreqqless",!0),G(X,J,ot,"≖","\\eqcirc",!0),G(X,J,ot,"≗","\\circeq",!0),G(X,J,ot,"≜","\\triangleq",!0),G(X,J,ot,"∼","\\thicksim"),G(X,J,ot,"≈","\\thickapprox"),G(X,J,ot,"⫆","\\supseteqq",!0),G(X,J,ot,"⋑","\\Supset",!0),G(X,J,ot,"⊐","\\sqsupset",!0),G(X,J,ot,"≽","\\succcurlyeq",!0),G(X,J,ot,"⋟","\\curlyeqsucc",!0),G(X,J,ot,"≿","\\succsim",!0),G(X,J,ot,"⪸","\\succapprox",!0),G(X,J,ot,"⊳","\\vartriangleright"),G(X,J,ot,"⊵","\\trianglerighteq"),G(X,J,ot,"⊩","\\Vdash",!0),G(X,J,ot,"∣","\\shortmid"),G(X,J,ot,"∥","\\shortparallel"),G(X,J,ot,"≬","\\between",!0),G(X,J,ot,"⋔","\\pitchfork",!0),G(X,J,ot,"∝","\\varpropto"),G(X,J,ot,"◀","\\blacktriangleleft"),G(X,J,ot,"∴","\\therefore",!0),G(X,J,ot,"∍","\\backepsilon"),G(X,J,ot,"▶","\\blacktriangleright"),G(X,J,ot,"∵","\\because",!0),G(X,J,ot,"⋘","\\llless"),G(X,J,ot,"⋙","\\gggtr"),G(X,J,Q,"⊲","\\lhd"),G(X,J,Q,"⊳","\\rhd"),G(X,J,ot,"≂","\\eqsim",!0),G(X,Z,ot,"⋈","\\Join"),G(X,J,ot,"≑","\\Doteq",!0),G(X,J,Q,"∔","\\dotplus",!0),G(X,J,Q,"∖","\\smallsetminus"),G(X,J,Q,"⋒","\\Cap",!0),G(X,J,Q,"⋓","\\Cup",!0),G(X,J,Q,"⩞","\\doublebarwedge",!0),G(X,J,Q,"⊟","\\boxminus",!0),G(X,J,Q,"⊞","\\boxplus",!0),G(X,J,Q,"⋇","\\divideontimes",!0),G(X,J,Q,"⋉","\\ltimes",!0),G(X,J,Q,"⋊","\\rtimes",!0),G(X,J,Q,"⋋","\\leftthreetimes",!0),G(X,J,Q,"⋌","\\rightthreetimes",!0),G(X,J,Q,"⋏","\\curlywedge",!0),G(X,J,Q,"⋎","\\curlyvee",!0),G(X,J,Q,"⊝","\\circleddash",!0),G(X,J,Q,"⊛","\\circledast",!0),G(X,J,Q,"⋅","\\centerdot"),G(X,J,Q,"⊺","\\intercal",!0),G(X,J,Q,"⋒","\\doublecap"),G(X,J,Q,"⋓","\\doublecup"),G(X,J,Q,"⊠","\\boxtimes",!0),G(X,J,ot,"⇢","\\dashrightarrow",!0),G(X,J,ot,"⇠","\\dashleftarrow",!0),G(X,J,ot,"⇇","\\leftleftarrows",!0),G(X,J,ot,"⇆","\\leftrightarrows",!0),G(X,J,ot,"⇚","\\Lleftarrow",!0),G(X,J,ot,"↞","\\twoheadleftarrow",!0),G(X,J,ot,"↢","\\leftarrowtail",!0),G(X,J,ot,"↫","\\looparrowleft",!0),G(X,J,ot,"⇋","\\leftrightharpoons",!0),G(X,J,ot,"↶","\\curvearrowleft",!0),G(X,J,ot,"↺","\\circlearrowleft",!0),G(X,J,ot,"↰","\\Lsh",!0),G(X,J,ot,"⇈","\\upuparrows",!0),G(X,J,ot,"↿","\\upharpoonleft",!0),G(X,J,ot,"⇃","\\downharpoonleft",!0),G(X,Z,ot,"⊶","\\origof",!0),G(X,Z,ot,"⊷","\\imageof",!0),G(X,J,ot,"⊸","\\multimap",!0),G(X,J,ot,"↭","\\leftrightsquigarrow",!0),G(X,J,ot,"⇉","\\rightrightarrows",!0),G(X,J,ot,"⇄","\\rightleftarrows",!0),G(X,J,ot,"↠","\\twoheadrightarrow",!0),G(X,J,ot,"↣","\\rightarrowtail",!0),G(X,J,ot,"↬","\\looparrowright",!0),G(X,J,ot,"↷","\\curvearrowright",!0),G(X,J,ot,"↻","\\circlearrowright",!0),G(X,J,ot,"↱","\\Rsh",!0),G(X,J,ot,"⇊","\\downdownarrows",!0),G(X,J,ot,"↾","\\upharpoonright",!0),G(X,J,ot,"⇂","\\downharpoonright",!0),G(X,J,ot,"⇝","\\rightsquigarrow",!0),G(X,J,ot,"⇝","\\leadsto"),G(X,J,ot,"⇛","\\Rrightarrow",!0),G(X,J,ot,"↾","\\restriction"),G(X,Z,ht,"‘","`"),G(X,Z,ht,"$","\\$"),G(Y,Z,ht,"$","\\$"),G(Y,Z,ht,"$","\\textdollar"),G(X,Z,ht,"%","\\%"),G(Y,Z,ht,"%","\\%"),G(X,Z,ht,"_","\\_"),G(Y,Z,ht,"_","\\_"),G(Y,Z,ht,"_","\\textunderscore"),G(X,Z,ht,"∠","\\angle",!0),G(X,Z,ht,"∞","\\infty",!0),G(X,Z,ht,"′","\\prime"),G(X,Z,ht,"△","\\triangle"),G(X,Z,ht,"Γ","\\Gamma",!0),G(X,Z,ht,"Δ","\\Delta",!0),G(X,Z,ht,"Θ","\\Theta",!0),G(X,Z,ht,"Λ","\\Lambda",!0),G(X,Z,ht,"Ξ","\\Xi",!0),G(X,Z,ht,"Π","\\Pi",!0),G(X,Z,ht,"Σ","\\Sigma",!0),G(X,Z,ht,"Υ","\\Upsilon",!0),G(X,Z,ht,"Φ","\\Phi",!0),G(X,Z,ht,"Ψ","\\Psi",!0),G(X,Z,ht,"Ω","\\Omega",!0),G(X,Z,ht,"A","Α"),G(X,Z,ht,"B","Β"),G(X,Z,ht,"E","Ε"),G(X,Z,ht,"Z","Ζ"),G(X,Z,ht,"H","Η"),G(X,Z,ht,"I","Ι"),G(X,Z,ht,"K","Κ"),G(X,Z,ht,"M","Μ"),G(X,Z,ht,"N","Ν"),G(X,Z,ht,"O","Ο"),G(X,Z,ht,"P","Ρ"),G(X,Z,ht,"T","Τ"),G(X,Z,ht,"X","Χ"),G(X,Z,ht,"¬","\\neg",!0),G(X,Z,ht,"¬","\\lnot"),G(X,Z,ht,"⊤","\\top"),G(X,Z,ht,"⊥","\\bot"),G(X,Z,ht,"∅","\\emptyset"),G(X,J,ht,"∅","\\varnothing"),G(X,Z,it,"α","\\alpha",!0),G(X,Z,it,"β","\\beta",!0),G(X,Z,it,"γ","\\gamma",!0),G(X,Z,it,"δ","\\delta",!0),G(X,Z,it,"ϵ","\\epsilon",!0),G(X,Z,it,"ζ","\\zeta",!0),G(X,Z,it,"η","\\eta",!0),G(X,Z,it,"θ","\\theta",!0),G(X,Z,it,"ι","\\iota",!0),G(X,Z,it,"κ","\\kappa",!0),G(X,Z,it,"λ","\\lambda",!0),G(X,Z,it,"μ","\\mu",!0),G(X,Z,it,"ν","\\nu",!0),G(X,Z,it,"ξ","\\xi",!0),G(X,Z,it,"ο","\\omicron",!0),G(X,Z,it,"π","\\pi",!0),G(X,Z,it,"ρ","\\rho",!0),G(X,Z,it,"σ","\\sigma",!0),G(X,Z,it,"τ","\\tau",!0),G(X,Z,it,"υ","\\upsilon",!0),G(X,Z,it,"ϕ","\\phi",!0),G(X,Z,it,"χ","\\chi",!0),G(X,Z,it,"ψ","\\psi",!0),G(X,Z,it,"ω","\\omega",!0),G(X,Z,it,"ε","\\varepsilon",!0),G(X,Z,it,"ϑ","\\vartheta",!0),G(X,Z,it,"ϖ","\\varpi",!0),G(X,Z,it,"ϱ","\\varrho",!0),G(X,Z,it,"ς","\\varsigma",!0),G(X,Z,it,"φ","\\varphi",!0),G(X,Z,Q,"∗","*"),G(X,Z,Q,"+","+"),G(X,Z,Q,"−","-"),G(X,Z,Q,"⋅","\\cdot",!0),G(X,Z,Q,"∘","\\circ"),G(X,Z,Q,"÷","\\div",!0),G(X,Z,Q,"±","\\pm",!0),G(X,Z,Q,"×","\\times",!0),G(X,Z,Q,"∩","\\cap",!0),G(X,Z,Q,"∪","\\cup",!0),G(X,Z,Q,"∖","\\setminus"),G(X,Z,Q,"∧","\\land"),G(X,Z,Q,"∨","\\lor"),G(X,Z,Q,"∧","\\wedge",!0),G(X,Z,Q,"∨","\\vee",!0),G(X,Z,ht,"√","\\surd"),G(X,Z,rt,"⟨","\\langle",!0),G(X,Z,rt,"∣","\\lvert"),G(X,Z,rt,"∥","\\lVert"),G(X,Z,tt,"?","?"),G(X,Z,tt,"!","!"),G(X,Z,tt,"⟩","\\rangle",!0),G(X,Z,tt,"∣","\\rvert"),G(X,Z,tt,"∥","\\rVert"),G(X,Z,ot,"=","="),G(X,Z,ot,":",":"),G(X,Z,ot,"≈","\\approx",!0),G(X,Z,ot,"≅","\\cong",!0),G(X,Z,ot,"≥","\\ge"),G(X,Z,ot,"≥","\\geq",!0),G(X,Z,ot,"←","\\gets"),G(X,Z,ot,">","\\gt",!0),G(X,Z,ot,"∈","\\in",!0),G(X,Z,ot,"","\\@not"),G(X,Z,ot,"⊂","\\subset",!0),G(X,Z,ot,"⊃","\\supset",!0),G(X,Z,ot,"⊆","\\subseteq",!0),G(X,Z,ot,"⊇","\\supseteq",!0),G(X,J,ot,"⊈","\\nsubseteq",!0),G(X,J,ot,"⊉","\\nsupseteq",!0),G(X,Z,ot,"⊨","\\models"),G(X,Z,ot,"←","\\leftarrow",!0),G(X,Z,ot,"≤","\\le"),G(X,Z,ot,"≤","\\leq",!0),G(X,Z,ot,"<","\\lt",!0),G(X,Z,ot,"→","\\rightarrow",!0),G(X,Z,ot,"→","\\to"),G(X,J,ot,"≱","\\ngeq",!0),G(X,J,ot,"≰","\\nleq",!0),G(X,Z,at," ","\\ "),G(X,Z,at," ","\\space"),G(X,Z,at," ","\\nobreakspace"),G(Y,Z,at," ","\\ "),G(Y,Z,at," "," "),G(Y,Z,at," ","\\space"),G(Y,Z,at," ","\\nobreakspace"),G(X,Z,at,null,"\\nobreak"),G(X,Z,at,null,"\\allowbreak"),G(X,Z,st,",",","),G(X,Z,st,";",";"),G(X,J,Q,"⊼","\\barwedge",!0),G(X,J,Q,"⊻","\\veebar",!0),G(X,Z,Q,"⊙","\\odot",!0),G(X,Z,Q,"⊕","\\oplus",!0),G(X,Z,Q,"⊗","\\otimes",!0),G(X,Z,ht,"∂","\\partial",!0),G(X,Z,Q,"⊘","\\oslash",!0),G(X,J,Q,"⊚","\\circledcirc",!0),G(X,J,Q,"⊡","\\boxdot",!0),G(X,Z,Q,"△","\\bigtriangleup"),G(X,Z,Q,"▽","\\bigtriangledown"),G(X,Z,Q,"†","\\dagger"),G(X,Z,Q,"⋄","\\diamond"),G(X,Z,Q,"⋆","\\star"),G(X,Z,Q,"◃","\\triangleleft"),G(X,Z,Q,"▹","\\triangleright"),G(X,Z,rt,"{","\\{"),G(Y,Z,ht,"{","\\{"),G(Y,Z,ht,"{","\\textbraceleft"),G(X,Z,tt,"}","\\}"),G(Y,Z,ht,"}","\\}"),G(Y,Z,ht,"}","\\textbraceright"),G(X,Z,rt,"{","\\lbrace"),G(X,Z,tt,"}","\\rbrace"),G(X,Z,rt,"[","\\lbrack",!0),G(Y,Z,ht,"[","\\lbrack",!0),G(X,Z,tt,"]","\\rbrack",!0),G(Y,Z,ht,"]","\\rbrack",!0),G(X,Z,rt,"(","\\lparen",!0),G(X,Z,tt,")","\\rparen",!0),G(Y,Z,ht,"<","\\textless",!0),G(Y,Z,ht,">","\\textgreater",!0),G(X,Z,rt,"⌊","\\lfloor",!0),G(X,Z,tt,"⌋","\\rfloor",!0),G(X,Z,rt,"⌈","\\lceil",!0),G(X,Z,tt,"⌉","\\rceil",!0),G(X,Z,ht,"\\","\\backslash"),G(X,Z,ht,"∣","|"),G(X,Z,ht,"∣","\\vert"),G(Y,Z,ht,"|","\\textbar",!0),G(X,Z,ht,"∥","\\|"),G(X,Z,ht,"∥","\\Vert"),G(Y,Z,ht,"∥","\\textbardbl"),G(Y,Z,ht,"~","\\textasciitilde"),G(Y,Z,ht,"\\","\\textbackslash"),G(Y,Z,ht,"^","\\textasciicircum"),G(X,Z,ot,"↑","\\uparrow",!0),G(X,Z,ot,"⇑","\\Uparrow",!0),G(X,Z,ot,"↓","\\downarrow",!0),G(X,Z,ot,"⇓","\\Downarrow",!0),G(X,Z,ot,"↕","\\updownarrow",!0),G(X,Z,ot,"⇕","\\Updownarrow",!0),G(X,Z,nt,"∐","\\coprod"),G(X,Z,nt,"⋁","\\bigvee"),G(X,Z,nt,"⋀","\\bigwedge"),G(X,Z,nt,"⨄","\\biguplus"),G(X,Z,nt,"⋂","\\bigcap"),G(X,Z,nt,"⋃","\\bigcup"),G(X,Z,nt,"∫","\\int"),G(X,Z,nt,"∫","\\intop"),G(X,Z,nt,"∬","\\iint"),G(X,Z,nt,"∭","\\iiint"),G(X,Z,nt,"∏","\\prod"),G(X,Z,nt,"∑","\\sum"),G(X,Z,nt,"⨂","\\bigotimes"),G(X,Z,nt,"⨁","\\bigoplus"),G(X,Z,nt,"⨀","\\bigodot"),G(X,Z,nt,"∮","\\oint"),G(X,Z,nt,"∯","\\oiint"),G(X,Z,nt,"∰","\\oiiint"),G(X,Z,nt,"⨆","\\bigsqcup"),G(X,Z,nt,"∫","\\smallint"),G(Y,Z,et,"…","\\textellipsis"),G(X,Z,et,"…","\\mathellipsis"),G(Y,Z,et,"…","\\ldots",!0),G(X,Z,et,"…","\\ldots",!0),G(X,Z,et,"⋯","\\@cdots",!0),G(X,Z,et,"⋱","\\ddots",!0),G(X,Z,ht,"⋮","\\varvdots"),G(X,Z,K,"ˊ","\\acute"),G(X,Z,K,"ˋ","\\grave"),G(X,Z,K,"¨","\\ddot"),G(X,Z,K,"~","\\tilde"),G(X,Z,K,"ˉ","\\bar"),G(X,Z,K,"˘","\\breve"),G(X,Z,K,"ˇ","\\check"),G(X,Z,K,"^","\\hat"),G(X,Z,K,"⃗","\\vec"),G(X,Z,K,"˙","\\dot"),G(X,Z,K,"˚","\\mathring"),G(X,Z,it,"","\\@imath"),G(X,Z,it,"","\\@jmath"),G(X,Z,ht,"ı","ı"),G(X,Z,ht,"ȷ","ȷ"),G(Y,Z,ht,"ı","\\i",!0),G(Y,Z,ht,"ȷ","\\j",!0),G(Y,Z,ht,"ß","\\ss",!0),G(Y,Z,ht,"æ","\\ae",!0),G(Y,Z,ht,"œ","\\oe",!0),G(Y,Z,ht,"ø","\\o",!0),G(Y,Z,ht,"Æ","\\AE",!0),G(Y,Z,ht,"Œ","\\OE",!0),G(Y,Z,ht,"Ø","\\O",!0),G(Y,Z,K,"ˊ","\\'"),G(Y,Z,K,"ˋ","\\`"),G(Y,Z,K,"ˆ","\\^"),G(Y,Z,K,"˜","\\~"),G(Y,Z,K,"ˉ","\\="),G(Y,Z,K,"˘","\\u"),G(Y,Z,K,"˙","\\."),G(Y,Z,K,"˚","\\r"),G(Y,Z,K,"ˇ","\\v"),G(Y,Z,K,"¨",'\\"'),G(Y,Z,K,"˝","\\H"),G(Y,Z,K,"◯","\\textcircled");var lt={"--":!0,"---":!0,"``":!0,"''":!0};G(Y,Z,ht,"–","--",!0),G(Y,Z,ht,"–","\\textendash"),G(Y,Z,ht,"—","---",!0),G(Y,Z,ht,"—","\\textemdash"),G(Y,Z,ht,"‘","`",!0),G(Y,Z,ht,"‘","\\textquoteleft"),G(Y,Z,ht,"’","'",!0),G(Y,Z,ht,"’","\\textquoteright"),G(Y,Z,ht,"“","``",!0),G(Y,Z,ht,"“","\\textquotedblleft"),G(Y,Z,ht,"”","''",!0),G(Y,Z,ht,"”","\\textquotedblright"),G(X,Z,ht,"°","\\degree",!0),G(Y,Z,ht,"°","\\degree"),G(Y,Z,ht,"°","\\textdegree",!0),G(X,Z,ht,"£","\\pounds"),G(X,Z,ht,"£","\\mathsterling",!0),G(Y,Z,ht,"£","\\pounds"),G(Y,Z,ht,"£","\\textsterling",!0),G(X,J,ht,"✠","\\maltese"),G(Y,J,ht,"✠","\\maltese");for(var dt='0123456789/@."',ct=0;ct<dt.length;ct++){var ut=dt.charAt(ct);G(X,Z,ht,ut,ut)}for(var pt='0123456789!@*()-=+";:?/.,',mt=0;mt<pt.length;mt++){var ft=pt.charAt(mt);G(Y,Z,ht,ft,ft)}for(var gt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",vt=0;vt<gt.length;vt++){var yt=gt.charAt(vt);G(X,Z,it,yt,yt),G(Y,Z,ht,yt,yt)}G(X,J,ht,"C","ℂ"),G(Y,J,ht,"C","ℂ"),G(X,J,ht,"H","ℍ"),G(Y,J,ht,"H","ℍ"),G(X,J,ht,"N","ℕ"),G(Y,J,ht,"N","ℕ"),G(X,J,ht,"P","ℙ"),G(Y,J,ht,"P","ℙ"),G(X,J,ht,"Q","ℚ"),G(Y,J,ht,"Q","ℚ"),G(X,J,ht,"R","ℝ"),G(Y,J,ht,"R","ℝ"),G(X,J,ht,"Z","ℤ"),G(Y,J,ht,"Z","ℤ"),G(X,Z,it,"h","ℎ"),G(Y,Z,it,"h","ℎ");for(var xt="",bt=0;bt<gt.length;bt++){var wt=gt.charAt(bt);G(X,Z,it,wt,xt=String.fromCharCode(55349,56320+bt)),G(Y,Z,ht,wt,xt),G(X,Z,it,wt,xt=String.fromCharCode(55349,56372+bt)),G(Y,Z,ht,wt,xt),G(X,Z,it,wt,xt=String.fromCharCode(55349,56424+bt)),G(Y,Z,ht,wt,xt),G(X,Z,it,wt,xt=String.fromCharCode(55349,56580+bt)),G(Y,Z,ht,wt,xt),G(X,Z,it,wt,xt=String.fromCharCode(55349,56736+bt)),G(Y,Z,ht,wt,xt),G(X,Z,it,wt,xt=String.fromCharCode(55349,56788+bt)),G(Y,Z,ht,wt,xt),G(X,Z,it,wt,xt=String.fromCharCode(55349,56840+bt)),G(Y,Z,ht,wt,xt),G(X,Z,it,wt,xt=String.fromCharCode(55349,56944+bt)),G(Y,Z,ht,wt,xt),bt<26&&(G(X,Z,it,wt,xt=String.fromCharCode(55349,56632+bt)),G(Y,Z,ht,wt,xt),G(X,Z,it,wt,xt=String.fromCharCode(55349,56476+bt)),G(Y,Z,ht,wt,xt))}G(X,Z,it,"k",xt=String.fromCharCode(55349,56668)),G(Y,Z,ht,"k",xt);for(var kt=0;kt<10;kt++){var _t=kt.toString();G(X,Z,it,_t,xt=String.fromCharCode(55349,57294+kt)),G(Y,Z,ht,_t,xt),G(X,Z,it,_t,xt=String.fromCharCode(55349,57314+kt)),G(Y,Z,ht,_t,xt),G(X,Z,it,_t,xt=String.fromCharCode(55349,57324+kt)),G(Y,Z,ht,_t,xt),G(X,Z,it,_t,xt=String.fromCharCode(55349,57334+kt)),G(Y,Z,ht,_t,xt)}for(var Ct="ÇÐÞçþ",Dt=0;Dt<Ct.length;Dt++){var Et=Ct.charAt(Dt);G(X,Z,it,Et,Et),G(Y,Z,ht,Et,Et)}var St=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Nt=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Mt=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],At=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Lt=function(t,e){return e.size<2?t:Mt[t-1][e.size-1]},Tt=function(){function t(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||t.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=At[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}var e=t.prototype;return e.extend=function(e){var i={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return new t(i)},e.havingStyle=function(t){return this.style===t?this:this.extend({style:t,size:Lt(this.textSize,t)})},e.havingCrampedStyle=function(){return this.havingStyle(this.style.cramp())},e.havingSize=function(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:At[t-1]})},e.havingBaseStyle=function(e){e=e||this.style.text();var i=Lt(t.BASESIZE,e);return this.size===i&&this.textSize===t.BASESIZE&&this.style===e?this:this.extend({style:e,size:i})},e.havingBaseSizing=function(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})},e.withColor=function(t){return this.extend({color:t})},e.withPhantom=function(){return this.extend({phantom:!0})},e.withFont=function(t){return this.extend({font:t})},e.withTextFontFamily=function(t){return this.extend({fontFamily:t,font:""})},e.withTextFontWeight=function(t){return this.extend({fontWeight:t,font:""})},e.withTextFontShape=function(t){return this.extend({fontShape:t,font:""})},e.sizingClasses=function(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]},e.baseSizingClasses=function(){return this.size!==t.BASESIZE?["sizing","reset-size"+this.size,"size"+t.BASESIZE]:[]},e.fontMetrics=function(){return this._fontMetrics||(this._fontMetrics=function(t){var e;if(!H[e=t>=5?0:t>=3?1:2]){var i=H[e]={cssEmPerMu:z.quad[e]/18};for(var n in z)z.hasOwnProperty(n)&&(i[n]=z[n][e])}return H[e]}(this.size)),this._fontMetrics},e.getColor=function(){return this.phantom?"transparent":this.color},t}();Tt.BASESIZE=6;var Pt=Tt,It={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},Bt={ex:!0,em:!0,mu:!0},Ot=function(t){return"string"!=typeof t&&(t=t.unit),t in It||t in Bt||"ex"===t},Rt=function(t,e){var i;if(t.unit in It)i=It[t.unit]/e.fontMetrics().ptPerEm/e.sizeMultiplier;else if("mu"===t.unit)i=e.fontMetrics().cssEmPerMu;else{var r;if(r=e.style.isTight()?e.havingStyle(e.style.text()):e,"ex"===t.unit)i=r.fontMetrics().xHeight;else{if("em"!==t.unit)throw new n("Invalid unit: '"+t.unit+"'");i=r.fontMetrics().quad}r!==e&&(i*=r.sizeMultiplier/e.sizeMultiplier)}return Math.min(t.number*i,e.maxSize)},Ft=function(t,e,i){return V[i][t]&&V[i][t].replace&&(t=V[i][t].replace),{value:t,metrics:j(t,e,i)}},zt=function(t,e,i,n,r){var s,o=Ft(t,e,i),a=o.metrics;if(t=o.value,a){var h=a.italic;("text"===i||n&&"mathit"===n.font)&&(h=0),s=new P(t,a.height,a.depth,h,a.skew,a.width,r)}else"undefined"!=typeof console&&console.warn("No character metrics for '"+t+"' in style '"+e+"' and mode '"+i+"'"),s=new P(t,0,0,0,0,0,r);if(n){s.maxFontSize=n.sizeMultiplier,n.style.isTight()&&s.classes.push("mtight");var l=n.getColor();l&&(s.style.color=l)}return s},qt=function(t,e){if(D(t.classes)!==D(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(1===t.classes.length){var i=t.classes[0];if("mbin"===i||"mord"===i)return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var r in e.style)if(e.style.hasOwnProperty(r)&&t.style[r]!==e.style[r])return!1;return!0},jt=function(t){for(var e=0,i=0,n=0,r=0;r<t.children.length;r++){var s=t.children[r];s.height>e&&(e=s.height),s.depth>i&&(i=s.depth),s.maxFontSize>n&&(n=s.maxFontSize)}t.height=e,t.depth=i,t.maxFontSize=n},Ht=function(t,e,i,n){var r=new M(t,e,i,n);return jt(r),r},$t=function(t,e,i,n){return new M(t,e,i,n)},Wt=function(t){var e=new C(t);return jt(e),e},Ut=function(t,e,i){var n="";switch(t){case"amsrm":n="AMS";break;case"textrm":n="Main";break;case"textsf":n="SansSerif";break;case"texttt":n="Typewriter";break;default:n=t}return n+"-"+("textbf"===e&&"textit"===i?"BoldItalic":"textbf"===e?"Bold":"textit"===e?"Italic":"Regular")},Vt={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Gt={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Xt={fontMap:Vt,makeSymbol:zt,mathsym:function(t,e,i,n){return void 0===n&&(n=[]),"boldsymbol"===i.font&&Ft(t,"Main-Bold",e).metrics?zt(t,"Main-Bold",e,i,n.concat(["mathbf"])):"\\"===t||"main"===V[e][t].font?zt(t,"Main-Regular",e,i,n):zt(t,"AMS-Regular",e,i,n.concat(["amsrm"]))},makeSpan:Ht,makeSvgSpan:$t,makeLineSpan:function(t,e,i){var n=Ht([t],[],e);return n.height=Math.max(i||e.fontMetrics().defaultRuleThickness,e.minRuleThickness),n.style.borderBottomWidth=n.height+"em",n.maxFontSize=1,n},makeAnchor:function(t,e,i,n){var r=new A(t,e,i,n);return jt(r),r},makeFragment:Wt,wrapFragment:function(t,e){return t instanceof C?Ht([],[t],e):t},makeVList:function(t,e){for(var i=function(t){if("individualShift"===t.positionType){for(var e=t.children,i=[e[0]],n=-e[0].shift-e[0].elem.depth,r=n,s=1;s<e.length;s++){var o=-e[s].shift-r-e[s].elem.depth,a=o-(e[s-1].elem.height+e[s-1].elem.depth);r+=o,i.push({type:"kern",size:a}),i.push(e[s])}return{children:i,depth:n}}var h;if("top"===t.positionType){for(var l=t.positionData,d=0;d<t.children.length;d++){var c=t.children[d];l-="kern"===c.type?c.size:c.elem.height+c.elem.depth}h=l}else if("bottom"===t.positionType)h=-t.positionData;else{var u=t.children[0];if("elem"!==u.type)throw new Error('First child must have type "elem".');if("shift"===t.positionType)h=-u.elem.depth-t.positionData;else{if("firstBaseline"!==t.positionType)throw new Error("Invalid positionType "+t.positionType+".");h=-u.elem.depth}}return{children:t.children,depth:h}}(t),n=i.children,r=i.depth,s=0,o=0;o<n.length;o++){var a=n[o];if("elem"===a.type){var h=a.elem;s=Math.max(s,h.maxFontSize,h.height)}}s+=2;var l=Ht(["pstrut"],[]);l.style.height=s+"em";for(var d=[],c=r,u=r,p=r,m=0;m<n.length;m++){var f=n[m];if("kern"===f.type)p+=f.size;else{var g=f.elem,v=f.wrapperClasses||[],y=f.wrapperStyle||{},x=Ht(v,[l,g],void 0,y);x.style.top=-s-p-g.depth+"em",f.marginLeft&&(x.style.marginLeft=f.marginLeft),f.marginRight&&(x.style.marginRight=f.marginRight),d.push(x),p+=g.height+g.depth}c=Math.min(c,p),u=Math.max(u,p)}var b,w=Ht(["vlist"],d);if(w.style.height=u+"em",c<0){var k=Ht([],[]),_=Ht(["vlist"],[k]);_.style.height=-c+"em";var C=Ht(["vlist-s"],[new P("​")]);b=[Ht(["vlist-r"],[w,C]),Ht(["vlist-r"],[_])]}else b=[Ht(["vlist-r"],[w])];var D=Ht(["vlist-t"],b);return 2===b.length&&D.classes.push("vlist-t2"),D.height=u,D.depth=-c,D},makeOrd:function(t,e,i){var r=t.mode,s=t.text,o=["mord"],a="math"===r||"text"===r&&e.font,h=a?e.font:e.fontFamily;if(55349===s.charCodeAt(0)){var l=function(t,e){var i=1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536,r="math"===e?0:1;if(119808<=i&&i<120484){var s=Math.floor((i-119808)/26);return[St[s][2],St[s][r]]}if(120782<=i&&i<=120831){var o=Math.floor((i-120782)/10);return[Nt[o][2],Nt[o][r]]}if(120485===i||120486===i)return[St[0][2],St[0][r]];if(120486<i&&i<120782)return["",""];throw new n("Unsupported character: "+t)}(s,r),d=l[0],c=l[1];return zt(s,d,r,e,o.concat(c))}if(h){var u,p;if("boldsymbol"===h){var m=function(t,e,i,n,r){return"textord"!==r&&Ft(t,"Math-BoldItalic",e).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}}(s,r,0,0,i);u=m.fontName,p=[m.fontClass]}else a?(u=Vt[h].fontName,p=[h]):(u=Ut(h,e.fontWeight,e.fontShape),p=[h,e.fontWeight,e.fontShape]);if(Ft(s,u,r).metrics)return zt(s,u,r,e,o.concat(p));if(lt.hasOwnProperty(s)&&"Typewriter"===u.substr(0,10)){for(var f=[],g=0;g<s.length;g++)f.push(zt(s[g],u,r,e,o.concat(p)));return Wt(f)}}if("mathord"===i)return zt(s,"Math-Italic",r,e,o.concat(["mathnormal"]));if("textord"===i){var v=V[r][s]&&V[r][s].font;if("ams"===v){var y=Ut("amsrm",e.fontWeight,e.fontShape);return zt(s,y,r,e,o.concat("amsrm",e.fontWeight,e.fontShape))}if("main"!==v&&v){var x=Ut(v,e.fontWeight,e.fontShape);return zt(s,x,r,e,o.concat(x,e.fontWeight,e.fontShape))}var b=Ut("textrm",e.fontWeight,e.fontShape);return zt(s,b,r,e,o.concat(e.fontWeight,e.fontShape))}throw new Error("unexpected type: "+i+" in makeOrd")},makeGlue:function(t,e){var i=Ht(["mspace"],[],e),n=Rt(t,e);return i.style.marginRight=n+"em",i},staticSvg:function(t,e){var i=Gt[t],n=i[0],r=i[1],s=i[2],o=new B(n),a=new I([o],{width:r+"em",height:s+"em",style:"width:"+r+"em",viewBox:"0 0 "+1e3*r+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),h=$t(["overlay"],[a],e);return h.height=s,h.style.height=s+"em",h.style.width=r+"em",h},svgData:Gt,tryCombineChars:function(t){for(var e=0;e<t.length-1;e++){var i=t[e],n=t[e+1];i instanceof P&&n instanceof P&&qt(i,n)&&(i.text+=n.text,i.height=Math.max(i.height,n.height),i.depth=Math.max(i.depth,n.depth),i.italic=n.italic,t.splice(e+1,1),e--)}return t}},Yt={number:3,unit:"mu"},Zt={number:4,unit:"mu"},Jt={number:5,unit:"mu"},Kt={mord:{mop:Yt,mbin:Zt,mrel:Jt,minner:Yt},mop:{mord:Yt,mop:Yt,mrel:Jt,minner:Yt},mbin:{mord:Zt,mop:Zt,mopen:Zt,minner:Zt},mrel:{mord:Jt,mop:Jt,mopen:Jt,minner:Jt},mopen:{},mclose:{mop:Yt,mbin:Zt,mrel:Jt,minner:Yt},mpunct:{mord:Yt,mop:Yt,mrel:Jt,mopen:Yt,mclose:Yt,mpunct:Yt,minner:Yt},minner:{mord:Yt,mop:Yt,mbin:Zt,mrel:Jt,mopen:Yt,mpunct:Yt,minner:Yt}},Qt={mord:{mop:Yt},mop:{mord:Yt,mop:Yt},mbin:{},mrel:{},mopen:{},mclose:{mop:Yt},mpunct:{},minner:{mop:Yt}},te={},ee={},ie={};function ne(t){for(var e=t.type,i=t.names,n=t.props,r=t.handler,s=t.htmlBuilder,o=t.mathmlBuilder,a={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:void 0===n.allowedInMath||n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:r},h=0;h<i.length;++h)te[i[h]]=a;e&&(s&&(ee[e]=s),o&&(ie[e]=o))}function re(t){ne({type:t.type,names:[],props:{numArgs:0},handler:function(){throw new Error("Should never be called.")},htmlBuilder:t.htmlBuilder,mathmlBuilder:t.mathmlBuilder})}var se=function(t){return"ordgroup"===t.type&&1===t.body.length?t.body[0]:t},oe=function(t){return"ordgroup"===t.type?t.body:[t]},ae=Xt.makeSpan,he=["leftmost","mbin","mopen","mrel","mop","mpunct"],le=["rightmost","mrel","mclose","mpunct"],de={display:y.DISPLAY,text:y.TEXT,script:y.SCRIPT,scriptscript:y.SCRIPTSCRIPT},ce={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ue=function(t,e,i,n){void 0===n&&(n=[null,null]);for(var r=[],s=0;s<t.length;s++){var o=ye(t[s],e);if(o instanceof C){var a=o.children;r.push.apply(r,a)}else r.push(o)}if(Xt.tryCombineChars(r),!i)return r;var l=e;if(1===t.length){var d=t[0];"sizing"===d.type?l=e.havingSize(d.size):"styling"===d.type&&(l=e.havingStyle(de[d.style]))}var c=ae([n[0]||"leftmost"],[],e),u=ae([n[1]||"rightmost"],[],e),p="root"===i;return pe(r,(function(t,e){var i=e.classes[0],n=t.classes[0];"mbin"===i&&h.contains(le,n)?e.classes[0]="mord":"mbin"===n&&h.contains(he,i)&&(t.classes[0]="mord")}),{node:c},u,p),pe(r,(function(t,e){var i=ge(e),n=ge(t),r=i&&n?t.hasClass("mtight")?Qt[i][n]:Kt[i][n]:null;if(r)return Xt.makeGlue(r,l)}),{node:c},u,p),r},pe=function t(e,i,n,r,s){r&&e.push(r);for(var o=0;o<e.length;o++){var a=e[o],h=me(a);if(h)t(h.children,i,n,null,s);else{var l=!a.hasClass("mspace");if(l){var d=i(a,n.node);d&&(n.insertAfter?n.insertAfter(d):(e.unshift(d),o++))}l?n.node=a:s&&a.hasClass("newline")&&(n.node=ae(["leftmost"])),n.insertAfter=function(t){return function(i){e.splice(t+1,0,i),o++}}(o)}}r&&e.pop()},me=function(t){return t instanceof C||t instanceof A||t instanceof M&&t.hasClass("enclosing")?t:null},fe=function t(e,i){var n=me(e);if(n){var r=n.children;if(r.length){if("right"===i)return t(r[r.length-1],"right");if("left"===i)return t(r[0],"left")}}return e},ge=function(t,e){return t?(e&&(t=fe(t,e)),ce[t.classes[0]]||null):null},ve=function(t,e){var i=["nulldelimiter"].concat(t.baseSizingClasses());return ae(e.concat(i))},ye=function(t,e,i){if(!t)return ae();if(ee[t.type]){var r=ee[t.type](t,e);if(i&&e.size!==i.size){r=ae(e.sizingClasses(i),[r],e);var s=e.sizeMultiplier/i.sizeMultiplier;r.height*=s,r.depth*=s}return r}throw new n("Got group of unknown type: '"+t.type+"'")};function xe(t,e){var i=ae(["base"],t,e),n=ae(["strut"]);return n.style.height=i.height+i.depth+"em",n.style.verticalAlign=-i.depth+"em",i.children.unshift(n),i}function be(t,e){var i=null;1===t.length&&"tag"===t[0].type&&(i=t[0].tag,t=t[0].body);var n,r=ue(t,e,"root");2===r.length&&r[1].hasClass("tag")&&(n=r.pop());for(var s,o=[],a=[],h=0;h<r.length;h++)if(a.push(r[h]),r[h].hasClass("mbin")||r[h].hasClass("mrel")||r[h].hasClass("allowbreak")){for(var l=!1;h<r.length-1&&r[h+1].hasClass("mspace")&&!r[h+1].hasClass("newline");)h++,a.push(r[h]),r[h].hasClass("nobreak")&&(l=!0);l||(o.push(xe(a,e)),a=[])}else r[h].hasClass("newline")&&(a.pop(),a.length>0&&(o.push(xe(a,e)),a=[]),o.push(r[h]));a.length>0&&o.push(xe(a,e)),i?((s=xe(ue(i,e,!0))).classes=["tag"],o.push(s)):n&&o.push(n);var d=ae(["katex-html"],o);if(d.setAttribute("aria-hidden","true"),s){var c=s.children[0];c.style.height=d.height+d.depth+"em",c.style.verticalAlign=-d.depth+"em"}return d}function we(t){return new C(t)}var ke=function(){function t(t,e,i){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=e||[],this.classes=i||[]}var e=t.prototype;return e.setAttribute=function(t,e){this.attributes[t]=e},e.getAttribute=function(t){return this.attributes[t]},e.toNode=function(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);this.classes.length>0&&(t.className=D(this.classes));for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t},e.toMarkup=function(){var t="<"+this.type;for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="',t+=h.escape(this.attributes[e]),t+='"');this.classes.length>0&&(t+=' class ="'+h.escape(D(this.classes))+'"'),t+=">";for(var i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t+="</"+this.type+">"},e.toText=function(){return this.children.map((function(t){return t.toText()})).join("")},t}(),_e=function(){function t(t){this.text=void 0,this.text=t}var e=t.prototype;return e.toNode=function(){return document.createTextNode(this.text)},e.toMarkup=function(){return h.escape(this.toText())},e.toText=function(){return this.text},t}(),Ce={MathNode:ke,TextNode:_e,SpaceNode:function(){function t(t){this.width=void 0,this.character=void 0,this.width=t,this.character=t>=.05555&&t<=.05556?" ":t>=.1666&&t<=.1667?" ":t>=.2222&&t<=.2223?" ":t>=.2777&&t<=.2778?"  ":t>=-.05556&&t<=-.05555?" ⁣":t>=-.1667&&t<=-.1666?" ⁣":t>=-.2223&&t<=-.2222?" ⁣":t>=-.2778&&t<=-.2777?" ⁣":null}var e=t.prototype;return e.toNode=function(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",this.width+"em"),t},e.toMarkup=function(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+this.width+'em"/>'},e.toText=function(){return this.character?this.character:" "},t}(),newDocumentFragment:we},De=function(t,e,i){return!V[e][t]||!V[e][t].replace||55349===t.charCodeAt(0)||lt.hasOwnProperty(t)&&i&&(i.fontFamily&&"tt"===i.fontFamily.substr(4,2)||i.font&&"tt"===i.font.substr(4,2))||(t=V[e][t].replace),new Ce.TextNode(t)},Ee=function(t){return 1===t.length?t[0]:new Ce.MathNode("mrow",t)},Se=function(t,e){if("texttt"===e.fontFamily)return"monospace";if("textsf"===e.fontFamily)return"textit"===e.fontShape&&"textbf"===e.fontWeight?"sans-serif-bold-italic":"textit"===e.fontShape?"sans-serif-italic":"textbf"===e.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===e.fontShape&&"textbf"===e.fontWeight)return"bold-italic";if("textit"===e.fontShape)return"italic";if("textbf"===e.fontWeight)return"bold";var i=e.font;if(!i||"mathnormal"===i)return null;var n=t.mode;if("mathit"===i)return"italic";if("boldsymbol"===i)return"textord"===t.type?"bold":"bold-italic";if("mathbf"===i)return"bold";if("mathbb"===i)return"double-struck";if("mathfrak"===i)return"fraktur";if("mathscr"===i||"mathcal"===i)return"script";if("mathsf"===i)return"sans-serif";if("mathtt"===i)return"monospace";var r=t.text;return h.contains(["\\imath","\\jmath"],r)?null:(V[n][r]&&V[n][r].replace&&(r=V[n][r].replace),j(r,Xt.fontMap[i].fontName,n)?Xt.fontMap[i].variant:null)},Ne=function(t,e,i){if(1===t.length){var n=Ae(t[0],e);return i&&n instanceof ke&&"mo"===n.type&&(n.setAttribute("lspace","0em"),n.setAttribute("rspace","0em")),[n]}for(var r,s=[],o=0;o<t.length;o++){var a=Ae(t[o],e);if(a instanceof ke&&r instanceof ke){if("mtext"===a.type&&"mtext"===r.type&&a.getAttribute("mathvariant")===r.getAttribute("mathvariant")){var h;(h=r.children).push.apply(h,a.children);continue}if("mn"===a.type&&"mn"===r.type){var l;(l=r.children).push.apply(l,a.children);continue}if("mi"===a.type&&1===a.children.length&&"mn"===r.type){var d=a.children[0];if(d instanceof _e&&"."===d.text){var c;(c=r.children).push.apply(c,a.children);continue}}else if("mi"===r.type&&1===r.children.length){var u=r.children[0];if(u instanceof _e&&"̸"===u.text&&("mo"===a.type||"mi"===a.type||"mn"===a.type)){var p=a.children[0];p instanceof _e&&p.text.length>0&&(p.text=p.text.slice(0,1)+"̸"+p.text.slice(1),s.pop())}}}s.push(a),r=a}return s},Me=function(t,e,i){return Ee(Ne(t,e,i))},Ae=function(t,e){if(!t)return new Ce.MathNode("mrow");if(ie[t.type])return ie[t.type](t,e);throw new n("Got group of unknown type: '"+t.type+"'")};function Le(t,e,i,n,r){var s,o=Ne(t,i);s=1===o.length&&o[0]instanceof ke&&h.contains(["mrow","mtable"],o[0].type)?o[0]:new Ce.MathNode("mrow",o);var a=new Ce.MathNode("annotation",[new Ce.TextNode(e)]);a.setAttribute("encoding","application/x-tex");var l=new Ce.MathNode("semantics",[s,a]),d=new Ce.MathNode("math",[l]);d.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&d.setAttribute("display","block");var c=r?"katex":"katex-mathml";return Xt.makeSpan([c],[d])}var Te=function(t){return new Pt({style:t.displayMode?y.DISPLAY:y.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},Pe=function(t,e){if(e.displayMode){var i=["katex-display"];e.leqno&&i.push("leqno"),e.fleqn&&i.push("fleqn"),t=Xt.makeSpan(i,[t])}return t},Ie={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},Be={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Oe=function(t,e,i,n,r){var s,o=t.height+t.depth+i+n;if(/fbox|color|angl/.test(e)){if(s=Xt.makeSpan(["stretchy",e],[],r),"fbox"===e){var a=r.color&&r.getColor();a&&(s.style.borderColor=a)}}else{var h=[];/^[bx]cancel$/.test(e)&&h.push(new O({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(e)&&h.push(new O({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var l=new I(h,{width:"100%",height:o+"em"});s=Xt.makeSvgSpan([],[l],r)}return s.height=o,s.style.height=o+"em",s},Re=function(t){var e=new Ce.MathNode("mo",[new Ce.TextNode(Ie[t.replace(/^\\/,"")])]);return e.setAttribute("stretchy","true"),e},Fe=function(t,e){var i=function(){var i=4e5,n=t.label.substr(1);if(h.contains(["widehat","widecheck","widetilde","utilde"],n)){var r,s,o,a="ordgroup"===(m=t.base).type?m.body.length:1;if(a>5)"widehat"===n||"widecheck"===n?(r=420,i=2364,o=.42,s=n+"4"):(r=312,i=2340,o=.34,s="tilde4");else{var l=[1,1,2,2,3,3][a];"widehat"===n||"widecheck"===n?(i=[0,1062,2364,2364,2364][l],r=[0,239,300,360,420][l],o=[0,.24,.3,.3,.36,.42][l],s=n+l):(i=[0,600,1033,2339,2340][l],r=[0,260,286,306,312][l],o=[0,.26,.286,.3,.306,.34][l],s="tilde"+l)}var d=new B(s),c=new I([d],{width:"100%",height:o+"em",viewBox:"0 0 "+i+" "+r,preserveAspectRatio:"none"});return{span:Xt.makeSvgSpan([],[c],e),minWidth:0,height:o}}var u,p,m,f=[],g=Be[n],v=g[0],y=g[1],x=g[2],b=x/1e3,w=v.length;if(1===w)u=["hide-tail"],p=[g[3]];else if(2===w)u=["halfarrow-left","halfarrow-right"],p=["xMinYMin","xMaxYMin"];else{if(3!==w)throw new Error("Correct katexImagesData or update code here to support\n                    "+w+" children.");u=["brace-left","brace-center","brace-right"],p=["xMinYMin","xMidYMin","xMaxYMin"]}for(var k=0;k<w;k++){var _=new B(v[k]),C=new I([_],{width:"400em",height:b+"em",viewBox:"0 0 "+i+" "+x,preserveAspectRatio:p[k]+" slice"}),D=Xt.makeSvgSpan([u[k]],[C],e);if(1===w)return{span:D,minWidth:y,height:b};D.style.height=b+"em",f.push(D)}return{span:Xt.makeSpan(["stretchy"],f,e),minWidth:y,height:b}}(),n=i.span,r=i.minWidth,s=i.height;return n.height=s,n.style.height=s+"em",r>0&&(n.style.minWidth=r+"em"),n};function ze(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function qe(t){var e=je(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function je(t){return t&&("atom"===t.type||W.hasOwnProperty(t.type))?t:null}var He=function(t,e){var i,n,r;t&&"supsub"===t.type?(i=(n=ze(t.base,"accent")).base,t.base=i,r=function(t){if(t instanceof M)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}(ye(t,e)),t.base=n):i=(n=ze(t,"accent")).base;var s=ye(i,e.havingCrampedStyle()),o=0;if(n.isShifty&&h.isCharacterBox(i)){var a=h.getBaseElem(i);o=R(ye(a,e.havingCrampedStyle())).skew}var l,d=Math.min(s.height,e.fontMetrics().xHeight);if(n.isStretchy)l=Fe(n,e),l=Xt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:l,wrapperClasses:["svg-align"],wrapperStyle:o>0?{width:"calc(100% - "+2*o+"em)",marginLeft:2*o+"em"}:void 0}]},e);else{var c,u;"\\vec"===n.label?(c=Xt.staticSvg("vec",e),u=Xt.svgData.vec[1]):((c=R(c=Xt.makeOrd({mode:n.mode,text:n.label},e,"textord"))).italic=0,u=c.width),l=Xt.makeSpan(["accent-body"],[c]);var p="\\textcircled"===n.label;p&&(l.classes.push("accent-full"),d=s.height);var m=o;p||(m-=u/2),l.style.left=m+"em","\\textcircled"===n.label&&(l.style.top=".2em"),l=Xt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-d},{type:"elem",elem:l}]},e)}var f=Xt.makeSpan(["mord","accent"],[l],e);return r?(r.children[0]=f,r.height=Math.max(f.height,r.height),r.classes[0]="mord",r):f},$e=function(t,e){var i=t.isStretchy?Re(t.label):new Ce.MathNode("mo",[De(t.label,t.mode)]),n=new Ce.MathNode("mover",[Ae(t.base,e),i]);return n.setAttribute("accent","true"),n},We=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map((function(t){return"\\"+t})).join("|"));ne({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:function(t,e){var i=se(e[0]),n=!We.test(t.funcName),r=!n||"\\widehat"===t.funcName||"\\widetilde"===t.funcName||"\\widecheck"===t.funcName;return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:r,base:i}},htmlBuilder:He,mathmlBuilder:$e}),ne({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:function(t,e){var i=e[0],n=t.parser.mode;return"math"===n&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:i}},htmlBuilder:He,mathmlBuilder:$e}),ne({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:function(t,e){var i=t.parser,n=t.funcName,r=e[0];return{type:"accentUnder",mode:i.mode,label:n,base:r}},htmlBuilder:function(t,e){var i=ye(t.base,e),n=Fe(t,e),r="\\utilde"===t.label?.12:0,s=Xt.makeVList({positionType:"top",positionData:i.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:r},{type:"elem",elem:i}]},e);return Xt.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:function(t,e){var i=Re(t.label),n=new Ce.MathNode("munder",[Ae(t.base,e),i]);return n.setAttribute("accentunder","true"),n}});var Ue=function(t){var e=new Ce.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};ne({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler:function(t,e,i){var n=t.parser,r=t.funcName;return{type:"xArrow",mode:n.mode,label:r,body:e[0],below:i[0]}},htmlBuilder:function(t,e){var i,n=e.style,r=e.havingStyle(n.sup()),s=Xt.wrapFragment(ye(t.body,r,e),e),o="\\x"===t.label.slice(0,2)?"x":"cd";s.classes.push(o+"-arrow-pad"),t.below&&(r=e.havingStyle(n.sub()),(i=Xt.wrapFragment(ye(t.below,r,e),e)).classes.push(o+"-arrow-pad"));var a,h=Fe(t,e),l=-e.fontMetrics().axisHeight+.5*h.height,d=-e.fontMetrics().axisHeight-.5*h.height-.111;if((s.depth>.25||"\\xleftequilibrium"===t.label)&&(d-=s.depth),i){var c=-e.fontMetrics().axisHeight+i.height+.5*h.height+.111;a=Xt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:d},{type:"elem",elem:h,shift:l},{type:"elem",elem:i,shift:c}]},e)}else a=Xt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:d},{type:"elem",elem:h,shift:l}]},e);return a.children[0].children[0].children[1].classes.push("svg-align"),Xt.makeSpan(["mrel","x-arrow"],[a],e)},mathmlBuilder:function(t,e){var i,n=Re(t.label);if(n.setAttribute("minsize","x"===t.label.charAt(0)?"1.75em":"3.0em"),t.body){var r=Ue(Ae(t.body,e));if(t.below){var s=Ue(Ae(t.below,e));i=new Ce.MathNode("munderover",[n,s,r])}else i=new Ce.MathNode("mover",[n,r])}else if(t.below){var o=Ue(Ae(t.below,e));i=new Ce.MathNode("munder",[n,o])}else i=Ue(),i=new Ce.MathNode("mover",[n,i]);return i}});var Ve={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Ge=function(t){return"textord"===t.type&&"@"===t.text};function Xe(t,e,i){var n=Ve[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return i.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":var r={type:"atom",text:n,mode:"math",family:"rel"},s={type:"ordgroup",mode:"math",body:[i.callFunction("\\\\cdleft",[e[0]],[]),i.callFunction("\\Big",[r],[]),i.callFunction("\\\\cdright",[e[1]],[])]};return i.callFunction("\\\\cdparent",[s],[]);case"\\\\cdlongequal":return i.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":return i.callFunction("\\Big",[{type:"textord",text:"\\Vert",mode:"math"}],[]);default:return{type:"textord",text:" ",mode:"math"}}}ne({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler:function(t,e){var i=t.parser,n=t.funcName;return{type:"cdlabel",mode:i.mode,side:n.slice(4),label:e[0]}},htmlBuilder:function(t,e){var i=e.havingStyle(e.style.sup()),n=Xt.wrapFragment(ye(t.label,i,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=.8-n.depth+"em",n.height=0,n.depth=0,n},mathmlBuilder:function(t,e){var i=new Ce.MathNode("mrow",[Ae(t.label,e)]);return(i=new Ce.MathNode("mpadded",[i])).setAttribute("width","0"),"left"===t.side&&i.setAttribute("lspace","-1width"),i.setAttribute("voffset","0.7em"),(i=new Ce.MathNode("mstyle",[i])).setAttribute("displaystyle","false"),i.setAttribute("scriptlevel","1"),i}}),ne({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler:function(t,e){return{type:"cdlabelparent",mode:t.parser.mode,fragment:e[0]}},htmlBuilder:function(t,e){var i=Xt.wrapFragment(ye(t.fragment,e),e);return i.classes.push("cd-vert-arrow"),i},mathmlBuilder:function(t,e){return new Ce.MathNode("mrow",[Ae(t.fragment,e)])}}),ne({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){for(var i=t.parser,r=ze(e[0],"ordgroup").body,s="",o=0;o<r.length;o++)s+=ze(r[o],"textord").text;var a=parseInt(s);if(isNaN(a))throw new n("\\@char has non-numeric argument "+s);return{type:"textord",mode:i.mode,text:String.fromCharCode(a)}}});var Ye=function(t,e){var i=ue(t.body,e.withColor(t.color),!1);return Xt.makeFragment(i)},Ze=function(t,e){var i=Ne(t.body,e.withColor(t.color)),n=new Ce.MathNode("mstyle",i);return n.setAttribute("mathcolor",t.color),n};ne({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler:function(t,e){var i=t.parser,n=ze(e[0],"color-token").color,r=e[1];return{type:"color",mode:i.mode,color:n,body:oe(r)}},htmlBuilder:Ye,mathmlBuilder:Ze}),ne({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler:function(t,e){var i=t.parser,n=t.breakOnTokenText,r=ze(e[0],"color-token").color;i.gullet.macros.set("\\current@color",r);var s=i.parseExpression(!0,n);return{type:"color",mode:i.mode,color:r,body:s}},htmlBuilder:Ye,mathmlBuilder:Ze}),ne({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:1,argTypes:["size"],allowedInText:!0},handler:function(t,e,i){var n=t.parser,r=i[0],s=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:s,size:r&&ze(r,"size").value}},htmlBuilder:function(t,e){var i=Xt.makeSpan(["mspace"],[],e);return t.newLine&&(i.classes.push("newline"),t.size&&(i.style.marginTop=Rt(t.size,e)+"em")),i},mathmlBuilder:function(t,e){var i=new Ce.MathNode("mspace");return t.newLine&&(i.setAttribute("linebreak","newline"),t.size&&i.setAttribute("height",Rt(t.size,e)+"em")),i}});var Je={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},Ke=function(t){var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new n("Expected a control sequence",t);return e},Qe=function(t,e,i,n){var r=t.gullet.macros.get(i.text);null==r&&(i.noexpand=!0,r={tokens:[i],numArgs:0,unexpandable:!t.gullet.isExpandable(i.text)}),t.gullet.macros.set(e,r,n)};ne({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler:function(t){var e=t.parser,i=t.funcName;e.consumeSpaces();var r=e.fetch();if(Je[r.text])return"\\global"!==i&&"\\\\globallong"!==i||(r.text=Je[r.text]),ze(e.parseFunction(),"internal");throw new n("Invalid token after macro prefix",r)}}),ne({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(t){var e=t.parser,i=t.funcName,r=e.gullet.popToken(),s=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new n("Expected a control sequence",r);for(var o,a=0,h=[[]];"{"!==e.gullet.future().text;)if("#"===(r=e.gullet.popToken()).text){if("{"===e.gullet.future().text){o=e.gullet.future(),h[a].push("{");break}if(r=e.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new n('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==a+1)throw new n('Argument number "'+r.text+'" out of order');a++,h.push([])}else{if("EOF"===r.text)throw new n("Expected a macro definition");h[a].push(r.text)}var l=e.gullet.consumeArg().tokens;return o&&l.unshift(o),"\\edef"!==i&&"\\xdef"!==i||(l=e.gullet.expandTokens(l)).reverse(),e.gullet.macros.set(s,{tokens:l,numArgs:a,delimiters:h},i===Je[i]),{type:"internal",mode:e.mode}}}),ne({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(t){var e=t.parser,i=t.funcName,n=Ke(e.gullet.popToken());e.gullet.consumeSpaces();var r=function(t){var e=t.gullet.popToken();return"="===e.text&&" "===(e=t.gullet.popToken()).text&&(e=t.gullet.popToken()),e}(e);return Qe(e,n,r,"\\\\globallet"===i),{type:"internal",mode:e.mode}}}),ne({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(t){var e=t.parser,i=t.funcName,n=Ke(e.gullet.popToken()),r=e.gullet.popToken(),s=e.gullet.popToken();return Qe(e,n,s,"\\\\globalfuture"===i),e.gullet.pushToken(s),e.gullet.pushToken(r),{type:"internal",mode:e.mode}}});var ti=function(t,e,i){var n=j(V.math[t]&&V.math[t].replace||t,e,i);if(!n)throw new Error("Unsupported symbol "+t+" and font size "+e+".");return n},ei=function(t,e,i,n){var r=i.havingBaseStyle(e),s=Xt.makeSpan(n.concat(r.sizingClasses(i)),[t],i),o=r.sizeMultiplier/i.sizeMultiplier;return s.height*=o,s.depth*=o,s.maxFontSize=r.sizeMultiplier,s},ii=function(t,e,i){var n=e.havingBaseStyle(i),r=(1-e.sizeMultiplier/n.sizeMultiplier)*e.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=r+"em",t.height-=r,t.depth+=r},ni=function(t,e,i,n,r,s){var o=function(t,e,i,n){return Xt.makeSymbol(t,"Size"+e+"-Regular",i,n)}(t,e,r,n),a=ei(Xt.makeSpan(["delimsizing","size"+e],[o],n),y.TEXT,n,s);return i&&ii(a,n,y.TEXT),a},ri=function(t,e,i){var n;return n="Size1-Regular"===e?"delim-size1":"delim-size4",{type:"elem",elem:Xt.makeSpan(["delimsizinginner",n],[Xt.makeSpan([],[Xt.makeSymbol(t,e,i)])])}},si=function(t,e,i){var n=F["Size4-Regular"][t.charCodeAt(0)]?F["Size4-Regular"][t.charCodeAt(0)][4].toFixed(3):F["Size1-Regular"][t.charCodeAt(0)][4].toFixed(3),r=new B("inner",function(t,e){switch(t){case"⎜":return"M291 0 H417 V"+e+" H291z M291 0 H417 V"+e+" H291z";case"∣":return"M145 0 H188 V"+e+" H145z M145 0 H188 V"+e+" H145z";case"∥":return"M145 0 H188 V"+e+" H145z M145 0 H188 V"+e+" H145zM367 0 H410 V"+e+" H367z M367 0 H410 V"+e+" H367z";case"⎟":return"M457 0 H583 V"+e+" H457z M457 0 H583 V"+e+" H457z";case"⎢":return"M319 0 H403 V"+e+" H319z M319 0 H403 V"+e+" H319z";case"⎥":return"M263 0 H347 V"+e+" H263z M263 0 H347 V"+e+" H263z";case"⎪":return"M384 0 H504 V"+e+" H384z M384 0 H504 V"+e+" H384z";case"⏐":return"M312 0 H355 V"+e+" H312z M312 0 H355 V"+e+" H312z";case"‖":return"M257 0 H300 V"+e+" H257z M257 0 H300 V"+e+" H257zM478 0 H521 V"+e+" H478z M478 0 H521 V"+e+" H478z";default:return""}}(t,Math.round(1e3*e))),s=new I([r],{width:n+"em",height:e+"em",style:"width:"+n+"em",viewBox:"0 0 "+1e3*n+" "+Math.round(1e3*e),preserveAspectRatio:"xMinYMin"}),o=Xt.makeSvgSpan([],[s],i);return o.height=e,o.style.height=e+"em",o.style.width=n+"em",{type:"elem",elem:o}},oi={type:"kern",size:-.008},ai=["|","\\lvert","\\rvert","\\vert"],hi=["\\|","\\lVert","\\rVert","\\Vert"],li=function(t,e,i,n,r,s){var o,a,l,d;o=l=d=t,a=null;var c="Size1-Regular";"\\uparrow"===t?l=d="⏐":"\\Uparrow"===t?l=d="‖":"\\downarrow"===t?o=l="⏐":"\\Downarrow"===t?o=l="‖":"\\updownarrow"===t?(o="\\uparrow",l="⏐",d="\\downarrow"):"\\Updownarrow"===t?(o="\\Uparrow",l="‖",d="\\Downarrow"):h.contains(ai,t)?l="∣":h.contains(hi,t)?l="∥":"["===t||"\\lbrack"===t?(o="⎡",l="⎢",d="⎣",c="Size4-Regular"):"]"===t||"\\rbrack"===t?(o="⎤",l="⎥",d="⎦",c="Size4-Regular"):"\\lfloor"===t||"⌊"===t?(l=o="⎢",d="⎣",c="Size4-Regular"):"\\lceil"===t||"⌈"===t?(o="⎡",l=d="⎢",c="Size4-Regular"):"\\rfloor"===t||"⌋"===t?(l=o="⎥",d="⎦",c="Size4-Regular"):"\\rceil"===t||"⌉"===t?(o="⎤",l=d="⎥",c="Size4-Regular"):"("===t||"\\lparen"===t?(o="⎛",l="⎜",d="⎝",c="Size4-Regular"):")"===t||"\\rparen"===t?(o="⎞",l="⎟",d="⎠",c="Size4-Regular"):"\\{"===t||"\\lbrace"===t?(o="⎧",a="⎨",d="⎩",l="⎪",c="Size4-Regular"):"\\}"===t||"\\rbrace"===t?(o="⎫",a="⎬",d="⎭",l="⎪",c="Size4-Regular"):"\\lgroup"===t||"⟮"===t?(o="⎧",d="⎩",l="⎪",c="Size4-Regular"):"\\rgroup"===t||"⟯"===t?(o="⎫",d="⎭",l="⎪",c="Size4-Regular"):"\\lmoustache"===t||"⎰"===t?(o="⎧",d="⎭",l="⎪",c="Size4-Regular"):"\\rmoustache"!==t&&"⎱"!==t||(o="⎫",d="⎩",l="⎪",c="Size4-Regular");var u=ti(o,c,r),p=u.height+u.depth,m=ti(l,c,r),f=m.height+m.depth,g=ti(d,c,r),v=g.height+g.depth,x=0,b=1;if(null!==a){var w=ti(a,c,r);x=w.height+w.depth,b=2}var k=p+v+x,_=k+Math.max(0,Math.ceil((e-k)/(b*f)))*b*f,C=n.fontMetrics().axisHeight;i&&(C*=n.sizeMultiplier);var D=_/2-C,E=[];if(E.push(ri(d,c,r)),E.push(oi),null===a){var S=_-p-v+.016;E.push(si(l,S,n))}else{var N=(_-p-v-x)/2+.016;E.push(si(l,N,n)),E.push(oi),E.push(ri(a,c,r)),E.push(oi),E.push(si(l,N,n))}E.push(oi),E.push(ri(o,c,r));var M=n.havingBaseStyle(y.TEXT),A=Xt.makeVList({positionType:"bottom",positionData:D,children:E},M);return ei(Xt.makeSpan(["delimsizing","mult"],[A],M),y.TEXT,n,s)},di=.08,ci=function(t,e,i,n,r){var s=function(t,e,i){e*=1e3;var n="";switch(t){case"sqrtMain":n=function(t,e){return"M95,"+(622+t+e)+"\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl"+t/2.075+" -"+t+"\nc5.3,-9.3,12,-14,20,-14\nH400000v"+(40+t)+"H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM"+(834+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}(e,k);break;case"sqrtSize1":n=function(t,e){return"M263,"+(601+t+e)+"c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl"+t/2.084+" -"+t+"\nc4.7,-7.3,11,-11,19,-11\nH40000v"+(40+t)+"H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM"+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}(e,k);break;case"sqrtSize2":n=function(t,e){return"M983 "+(10+t+e)+"\nl"+t/3.13+" -"+t+"\nc4,-6.7,10,-10,18,-10 H400000v"+(40+t)+"\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM"+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}(e,k);break;case"sqrtSize3":n=function(t,e){return"M424,"+(2398+t+e)+"\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl"+t/4.223+" -"+t+"c4,-6.7,10,-10,18,-10 H400000\nv"+(40+t)+"H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M"+(1001+t)+" "+e+"\nh400000v"+(40+t)+"h-400000z"}(e,k);break;case"sqrtSize4":n=function(t,e){return"M473,"+(2713+t+e)+"\nc339.3,-1799.3,509.3,-2700,510,-2702 l"+t/5.298+" -"+t+"\nc3.3,-7.3,9.3,-11,18,-11 H400000v"+(40+t)+"H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM"+(1001+t)+" "+e+"h400000v"+(40+t)+"H1017.7z"}(e,k);break;case"sqrtTall":n=function(t,e,i){return"M702 "+(t+e)+"H400000"+(40+t)+"\nH742v"+(i-54-e-t)+"l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1\nh-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170\nc-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667\n219 661 l218 661zM702 "+e+"H400000v"+(40+t)+"H742z"}(e,k,i)}return n}(t,n,i),o=new B(t,s),a=new I([o],{width:"400em",height:e+"em",viewBox:"0 0 400000 "+i,preserveAspectRatio:"xMinYMin slice"});return Xt.makeSvgSpan(["hide-tail"],[a],r)},ui=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],pi=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],mi=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],fi=[0,1.2,1.8,2.4,3],gi=[{type:"small",style:y.SCRIPTSCRIPT},{type:"small",style:y.SCRIPT},{type:"small",style:y.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],vi=[{type:"small",style:y.SCRIPTSCRIPT},{type:"small",style:y.SCRIPT},{type:"small",style:y.TEXT},{type:"stack"}],yi=[{type:"small",style:y.SCRIPTSCRIPT},{type:"small",style:y.SCRIPT},{type:"small",style:y.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],xi=function(t){if("small"===t.type)return"Main-Regular";if("large"===t.type)return"Size"+t.size+"-Regular";if("stack"===t.type)return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},bi=function(t,e,i,n){for(var r=Math.min(2,3-n.style.size);r<i.length&&"stack"!==i[r].type;r++){var s=ti(t,xi(i[r]),"math"),o=s.height+s.depth;if("small"===i[r].type&&(o*=n.havingBaseStyle(i[r].style).sizeMultiplier),o>e)return i[r]}return i[i.length-1]},wi=function(t,e,i,n,r,s){var o;"<"===t||"\\lt"===t||"⟨"===t?t="\\langle":">"!==t&&"\\gt"!==t&&"⟩"!==t||(t="\\rangle"),o=h.contains(mi,t)?gi:h.contains(ui,t)?yi:vi;var a=bi(t,e,o,n);return"small"===a.type?function(t,e,i,n,r,s){var o=Xt.makeSymbol(t,"Main-Regular",r,n),a=ei(o,e,n,s);return i&&ii(a,n,e),a}(t,a.style,i,n,r,s):"large"===a.type?ni(t,a.size,i,n,r,s):li(t,e,i,n,r,s)},ki=function(t,e){var i,n,r=e.havingBaseSizing(),s=bi("\\surd",t*r.sizeMultiplier,yi,r),o=r.sizeMultiplier,a=Math.max(0,e.minRuleThickness-e.fontMetrics().sqrtRuleThickness),h=0,l=0,d=0;return"small"===s.type?(t<1?o=1:t<1.4&&(o=.7),l=(1+a)/o,(i=ci("sqrtMain",h=(1+a+di)/o,d=1e3+1e3*a+80,a,e)).style.minWidth="0.853em",n=.833/o):"large"===s.type?(d=1080*fi[s.size],l=(fi[s.size]+a)/o,h=(fi[s.size]+a+di)/o,(i=ci("sqrtSize"+s.size,h,d,a,e)).style.minWidth="1.02em",n=1/o):(h=t+a+di,l=t+a,d=Math.floor(1e3*t+a)+80,(i=ci("sqrtTall",h,d,a,e)).style.minWidth="0.742em",n=1.056),i.height=l,i.style.height=h+"em",{span:i,advanceWidth:n,ruleWidth:(e.fontMetrics().sqrtRuleThickness+a)*o}},_i=function(t,e,i,r,s){if("<"===t||"\\lt"===t||"⟨"===t?t="\\langle":">"!==t&&"\\gt"!==t&&"⟩"!==t||(t="\\rangle"),h.contains(ui,t)||h.contains(mi,t))return ni(t,e,!1,i,r,s);if(h.contains(pi,t))return li(t,fi[e],!1,i,r,s);throw new n("Illegal delimiter: '"+t+"'")},Ci=fi,Di=wi,Ei=function(t,e,i,n,r,s){var o=n.fontMetrics().axisHeight*n.sizeMultiplier,a=5/n.fontMetrics().ptPerEm,h=Math.max(e-o,i+o),l=Math.max(h/500*901,2*h-a);return wi(t,l,!0,n,r,s)},Si={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Ni=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Mi(t,e){var i=je(t);if(i&&h.contains(Ni,i.text))return i;throw new n(i?"Invalid delimiter '"+i.text+"' after '"+e.funcName+"'":"Invalid delimiter type '"+t.type+"'",t)}function Ai(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}ne({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:function(t,e){var i=Mi(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:Si[t.funcName].size,mclass:Si[t.funcName].mclass,delim:i.text}},htmlBuilder:function(t,e){return"."===t.delim?Xt.makeSpan([t.mclass]):_i(t.delim,t.size,e,t.mode,[t.mclass])},mathmlBuilder:function(t){var e=[];"."!==t.delim&&e.push(De(t.delim,t.mode));var i=new Ce.MathNode("mo",e);return"mopen"===t.mclass||"mclose"===t.mclass?i.setAttribute("fence","true"):i.setAttribute("fence","false"),i.setAttribute("stretchy","true"),i.setAttribute("minsize",Ci[t.size]+"em"),i.setAttribute("maxsize",Ci[t.size]+"em"),i}}),ne({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:function(t,e){var i=t.parser.gullet.macros.get("\\current@color");if(i&&"string"!=typeof i)throw new n("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:Mi(e[0],t).text,color:i}}}),ne({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:function(t,e){var i=Mi(e[0],t),n=t.parser;++n.leftrightDepth;var r=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var s=ze(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:r,left:i.text,right:s.delim,rightColor:s.color}},htmlBuilder:function(t,e){Ai(t);for(var i,n,r=ue(t.body,e,!0,["mopen","mclose"]),s=0,o=0,a=!1,h=0;h<r.length;h++)r[h].isMiddle?a=!0:(s=Math.max(r[h].height,s),o=Math.max(r[h].depth,o));if(s*=e.sizeMultiplier,o*=e.sizeMultiplier,i="."===t.left?ve(e,["mopen"]):Ei(t.left,s,o,e,t.mode,["mopen"]),r.unshift(i),a)for(var l=1;l<r.length;l++){var d=r[l].isMiddle;d&&(r[l]=Ei(d.delim,s,o,d.options,t.mode,[]))}if("."===t.right)n=ve(e,["mclose"]);else{var c=t.rightColor?e.withColor(t.rightColor):e;n=Ei(t.right,s,o,c,t.mode,["mclose"])}return r.push(n),Xt.makeSpan(["minner"],r,e)},mathmlBuilder:function(t,e){Ai(t);var i=Ne(t.body,e);if("."!==t.left){var n=new Ce.MathNode("mo",[De(t.left,t.mode)]);n.setAttribute("fence","true"),i.unshift(n)}if("."!==t.right){var r=new Ce.MathNode("mo",[De(t.right,t.mode)]);r.setAttribute("fence","true"),t.rightColor&&r.setAttribute("mathcolor",t.rightColor),i.push(r)}return Ee(i)}}),ne({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:function(t,e){var i=Mi(e[0],t);if(!t.parser.leftrightDepth)throw new n("\\middle without preceding \\left",i);return{type:"middle",mode:t.parser.mode,delim:i.text}},htmlBuilder:function(t,e){var i;if("."===t.delim)i=ve(e,[]);else{i=_i(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};i.isMiddle=n}return i},mathmlBuilder:function(t,e){var i="\\vert"===t.delim||"|"===t.delim?De("|","text"):De(t.delim,t.mode),n=new Ce.MathNode("mo",[i]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var Li=function(t,e){var i,n,r,s=Xt.wrapFragment(ye(t.body,e),e),o=t.label.substr(1),a=e.sizeMultiplier,l=0,d=h.isCharacterBox(t.body);if("sout"===o)(i=Xt.makeSpan(["stretchy","sout"])).height=e.fontMetrics().defaultRuleThickness/a,l=-.5*e.fontMetrics().xHeight;else if("phase"===o){var c=Rt({number:.6,unit:"pt"},e),u=Rt({number:.35,unit:"ex"},e);a/=e.havingBaseSizing().sizeMultiplier;var p=s.height+s.depth+c+u;s.style.paddingLeft=p/2+c+"em";var m=Math.floor(1e3*p*a),f="M400000 "+(n=m)+" H0 L"+n/2+" 0 l65 45 L145 "+(n-80)+" H400000z",g=new I([new B("phase",f)],{width:"400em",height:m/1e3+"em",viewBox:"0 0 400000 "+m,preserveAspectRatio:"xMinYMin slice"});(i=Xt.makeSvgSpan(["hide-tail"],[g],e)).style.height=p+"em",l=s.depth+c+u}else{/cancel/.test(o)?d||s.classes.push("cancel-pad"):"angl"===o?s.classes.push("anglpad"):s.classes.push("boxpad");var v=0,y=0,x=0;/box/.test(o)?(x=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),y=v=e.fontMetrics().fboxsep+("colorbox"===o?0:x)):"angl"===o?(v=4*(x=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness)),y=Math.max(0,.25-s.depth)):y=v=d?.2:0,i=Oe(s,o,v,y,e),/fbox|boxed|fcolorbox/.test(o)?(i.style.borderStyle="solid",i.style.borderWidth=x+"em"):"angl"===o&&.049!==x&&(i.style.borderTopWidth=x+"em",i.style.borderRightWidth=x+"em"),l=s.depth+y,t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor,t.borderColor&&(i.style.borderColor=t.borderColor))}if(t.backgroundColor)r=Xt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:l},{type:"elem",elem:s,shift:0}]},e);else{var b=/cancel|phase/.test(o)?["svg-align"]:[];r=Xt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:0},{type:"elem",elem:i,shift:l,wrapperClasses:b}]},e)}return/cancel/.test(o)&&(r.height=s.height,r.depth=s.depth),/cancel/.test(o)&&!d?Xt.makeSpan(["mord","cancel-lap"],[r],e):Xt.makeSpan(["mord"],[r],e)},Ti=function(t,e){var i=0,n=new Ce.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Ae(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(i=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*i+"pt"),n.setAttribute("height","+"+2*i+"pt"),n.setAttribute("lspace",i+"pt"),n.setAttribute("voffset",i+"pt"),"\\fcolorbox"===t.label){var r=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+r+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};ne({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler:function(t,e,i){var n=t.parser,r=t.funcName,s=ze(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:n.mode,label:r,backgroundColor:s,body:o}},htmlBuilder:Li,mathmlBuilder:Ti}),ne({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler:function(t,e,i){var n=t.parser,r=t.funcName,s=ze(e[0],"color-token").color,o=ze(e[1],"color-token").color,a=e[2];return{type:"enclose",mode:n.mode,label:r,backgroundColor:o,borderColor:s,body:a}},htmlBuilder:Li,mathmlBuilder:Ti}),ne({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler:function(t,e){return{type:"enclose",mode:t.parser.mode,label:"\\fbox",body:e[0]}}}),ne({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler:function(t,e){var i=t.parser,n=t.funcName,r=e[0];return{type:"enclose",mode:i.mode,label:n,body:r}},htmlBuilder:Li,mathmlBuilder:Ti}),ne({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler:function(t,e){return{type:"enclose",mode:t.parser.mode,label:"\\angl",body:e[0]}}});var Pi={};function Ii(t){for(var e=t.type,i=t.names,n=t.props,r=t.handler,s=t.htmlBuilder,o=t.mathmlBuilder,a={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:r},h=0;h<i.length;++h)Pi[i[h]]=a;s&&(ee[e]=s),o&&(ie[e]=o)}function Bi(t){var e=[];t.consumeSpaces();for(var i=t.fetch().text;"\\hline"===i||"\\hdashline"===i;)t.consume(),e.push("\\hdashline"===i),t.consumeSpaces(),i=t.fetch().text;return e}var Oi=function(t){if(!t.parser.settings.displayMode)throw new n("{"+t.envName+"} can be used only in display mode.")};function Ri(t,e,i){var r=e.hskipBeforeAndAfter,s=e.addJot,o=e.cols,a=e.arraystretch,h=e.colSeparationType,l=e.addEqnNum,d=e.singleRow,c=e.emptySingleRow,u=e.maxNumCols,p=e.leqno;if(t.gullet.beginGroup(),d||t.gullet.macros.set("\\cr","\\\\\\relax"),!a){var m=t.gullet.expandMacroAsText("\\arraystretch");if(null==m)a=1;else if(!(a=parseFloat(m))||a<0)throw new n("Invalid \\arraystretch: "+m)}t.gullet.beginGroup();var f=[],g=[f],v=[],y=[];for(y.push(Bi(t));;){var x=t.parseExpression(!1,d?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),x={type:"ordgroup",mode:t.mode,body:x},i&&(x={type:"styling",mode:t.mode,style:i,body:[x]}),f.push(x);var b=t.fetch().text;if("&"===b){if(u&&f.length===u){if(d||h)throw new n("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else{if("\\end"===b){1===f.length&&"styling"===x.type&&0===x.body[0].body.length&&(g.length>1||!c)&&g.pop(),y.length<g.length+1&&y.push([]);break}if("\\\\"!==b)throw new n("Expected & or \\\\ or \\cr or \\end",t.nextToken);t.consume();var w=void 0;" "!==t.gullet.future().text&&(w=t.parseSizeGroup(!0)),v.push(w?w.value:null),y.push(Bi(t)),f=[],g.push(f)}}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:s,arraystretch:a,body:g,cols:o,rowGaps:v,hskipBeforeAndAfter:r,hLinesBeforeRow:y,colSeparationType:h,addEqnNum:l,leqno:p}}function Fi(t){return"d"===t.substr(0,1)?"display":"text"}var zi=function(t,e){var i,r,s=t.body.length,o=t.hLinesBeforeRow,a=0,l=new Array(s),d=[],c=Math.max(e.fontMetrics().arrayRuleWidth,e.minRuleThickness),u=1/e.fontMetrics().ptPerEm,p=5*u;t.colSeparationType&&"small"===t.colSeparationType&&(p=e.havingStyle(y.SCRIPT).sizeMultiplier/e.sizeMultiplier*.2778);var m="CD"===t.colSeparationType?Rt({number:3,unit:"ex"},e):12*u,f=3*u,g=t.arraystretch*m,v=.7*g,x=.3*g,b=0;function w(t){for(var e=0;e<t.length;++e)e>0&&(b+=.25),d.push({pos:b,isDashed:t[e]})}for(w(o[0]),i=0;i<t.body.length;++i){var k=t.body[i],_=v,C=x;a<k.length&&(a=k.length);var D=new Array(k.length);for(r=0;r<k.length;++r){var E=ye(k[r],e);C<E.depth&&(C=E.depth),_<E.height&&(_=E.height),D[r]=E}var S=t.rowGaps[i],N=0;S&&(N=Rt(S,e))>0&&(C<(N+=x)&&(C=N),N=0),t.addJot&&(C+=f),D.height=_,D.depth=C,b+=_,D.pos=b,b+=C+N,l[i]=D,w(o[i+1])}var M,A,L=b/2+e.fontMetrics().axisHeight,T=t.cols||[],P=[],I=[];if(t.addEqnNum)for(i=0;i<s;++i){var B=l[i],O=B.pos-L,R=Xt.makeSpan(["eqn-num"],[],e);R.depth=B.depth,R.height=B.height,I.push({type:"elem",elem:R,shift:O})}for(r=0,A=0;r<a||A<T.length;++r,++A){for(var F=T[A]||{},z=!0;"separator"===F.type;){if(z||((M=Xt.makeSpan(["arraycolsep"],[])).style.width=e.fontMetrics().doubleRuleSep+"em",P.push(M)),"|"!==F.separator&&":"!==F.separator)throw new n("Invalid separator type: "+F.separator);var q="|"===F.separator?"solid":"dashed",j=Xt.makeSpan(["vertical-separator"],[],e);j.style.height=b+"em",j.style.borderRightWidth=c+"em",j.style.borderRightStyle=q,j.style.margin="0 -"+c/2+"em",j.style.verticalAlign=-(b-L)+"em",P.push(j),F=T[++A]||{},z=!1}if(!(r>=a)){var H=void 0;(r>0||t.hskipBeforeAndAfter)&&0!==(H=h.deflt(F.pregap,p))&&((M=Xt.makeSpan(["arraycolsep"],[])).style.width=H+"em",P.push(M));var $=[];for(i=0;i<s;++i){var W=l[i],U=W[r];if(U){var V=W.pos-L;U.depth=W.depth,U.height=W.height,$.push({type:"elem",elem:U,shift:V})}}$=Xt.makeVList({positionType:"individualShift",children:$},e),$=Xt.makeSpan(["col-align-"+(F.align||"c")],[$]),P.push($),(r<a-1||t.hskipBeforeAndAfter)&&0!==(H=h.deflt(F.postgap,p))&&((M=Xt.makeSpan(["arraycolsep"],[])).style.width=H+"em",P.push(M))}}if(l=Xt.makeSpan(["mtable"],P),d.length>0){for(var G=Xt.makeLineSpan("hline",e,c),X=Xt.makeLineSpan("hdashline",e,c),Y=[{type:"elem",elem:l,shift:0}];d.length>0;){var Z=d.pop(),J=Z.pos-L;Z.isDashed?Y.push({type:"elem",elem:X,shift:J}):Y.push({type:"elem",elem:G,shift:J})}l=Xt.makeVList({positionType:"individualShift",children:Y},e)}if(t.addEqnNum){var K=Xt.makeVList({positionType:"individualShift",children:I},e);return K=Xt.makeSpan(["tag"],[K],e),Xt.makeFragment([l,K])}return Xt.makeSpan(["mord"],[l],e)},qi={c:"center ",l:"left ",r:"right "},ji=function(t,e){for(var i=[],n=new Ce.MathNode("mtd",[],["mtr-glue"]),r=new Ce.MathNode("mtd",[],["mml-eqn-num"]),s=0;s<t.body.length;s++){for(var o=t.body[s],a=[],h=0;h<o.length;h++)a.push(new Ce.MathNode("mtd",[Ae(o[h],e)]));t.addEqnNum&&(a.unshift(n),a.push(n),t.leqno?a.unshift(r):a.push(r)),i.push(new Ce.MathNode("mtr",a))}var l=new Ce.MathNode("mtable",i),d=.5===t.arraystretch?.1:.16+t.arraystretch-1+(t.addJot?.09:0);l.setAttribute("rowspacing",d.toFixed(4)+"em");var c="",u="";if(t.cols&&t.cols.length>0){var p=t.cols,m="",f=!1,g=0,v=p.length;"separator"===p[0].type&&(c+="top ",g=1),"separator"===p[p.length-1].type&&(c+="bottom ",v-=1);for(var y=g;y<v;y++)"align"===p[y].type?(u+=qi[p[y].align],f&&(m+="none "),f=!0):"separator"===p[y].type&&f&&(m+="|"===p[y].separator?"solid ":"dashed ",f=!1);l.setAttribute("columnalign",u.trim()),/[sd]/.test(m)&&l.setAttribute("columnlines",m.trim())}if("align"===t.colSeparationType){for(var x=t.cols||[],b="",w=1;w<x.length;w++)b+=w%2?"0em ":"1em ";l.setAttribute("columnspacing",b.trim())}else"alignat"===t.colSeparationType||"gather"===t.colSeparationType?l.setAttribute("columnspacing","0em"):"small"===t.colSeparationType?l.setAttribute("columnspacing","0.2778em"):"CD"===t.colSeparationType?l.setAttribute("columnspacing","0.5em"):l.setAttribute("columnspacing","1em");var k="",_=t.hLinesBeforeRow;c+=_[0].length>0?"left ":"",c+=_[_.length-1].length>0?"right ":"";for(var C=1;C<_.length-1;C++)k+=0===_[C].length?"none ":_[C][0]?"dashed ":"solid ";return/[sd]/.test(k)&&l.setAttribute("rowlines",k.trim()),""!==c&&(l=new Ce.MathNode("menclose",[l])).setAttribute("notation",c.trim()),t.arraystretch&&t.arraystretch<1&&(l=new Ce.MathNode("mstyle",[l])).setAttribute("scriptlevel","1"),l},Hi=function(t,e){-1===t.envName.indexOf("ed")&&Oi(t);var i,r=[],s=t.envName.indexOf("at")>-1?"alignat":"align",o=Ri(t.parser,{cols:r,addJot:!0,addEqnNum:"align"===t.envName||"alignat"===t.envName,emptySingleRow:!0,colSeparationType:s,maxNumCols:"split"===t.envName?2:void 0,leqno:t.parser.settings.leqno},"display"),a=0,h={type:"ordgroup",mode:t.mode,body:[]};if(e[0]&&"ordgroup"===e[0].type){for(var l="",d=0;d<e[0].body.length;d++)l+=ze(e[0].body[d],"textord").text;i=Number(l),a=2*i}var c=!a;o.body.forEach((function(t){for(var e=1;e<t.length;e+=2){var r=ze(t[e],"styling");ze(r.body[0],"ordgroup").body.unshift(h)}if(c)a<t.length&&(a=t.length);else{var s=t.length/2;if(i<s)throw new n("Too many math in a row: expected "+i+", but got "+s,t[0])}}));for(var u=0;u<a;++u){var p="r",m=0;u%2==1?p="l":u>0&&c&&(m=1),r[u]={type:"align",align:p,pregap:m,postgap:0}}return o.colSeparationType=c?"align":"alignat",o};Ii({type:"array",names:["array","darray"],props:{numArgs:1},handler:function(t,e){var i=(je(e[0])?[e[0]]:ze(e[0],"ordgroup").body).map((function(t){var e=qe(t).text;if(-1!=="lcr".indexOf(e))return{type:"align",align:e};if("|"===e)return{type:"separator",separator:"|"};if(":"===e)return{type:"separator",separator:":"};throw new n("Unknown column alignment: "+e,t)})),r={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return Ri(t.parser,r,Fi(t.envName))},htmlBuilder:zi,mathmlBuilder:ji}),Ii({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler:function(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],i="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:i}]};if("*"===t.envName.charAt(t.envName.length-1)){var s=t.parser;if(s.consumeSpaces(),"["===s.fetch().text){if(s.consume(),s.consumeSpaces(),i=s.fetch().text,-1==="lcr".indexOf(i))throw new n("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),r.cols=[{type:"align",align:i}]}}var o=Ri(t.parser,r,Fi(t.envName)),a=Math.max.apply(Math,[0].concat(o.body.map((function(t){return t.length}))));return o.cols=new Array(a).fill({type:"align",align:i}),e?{type:"leftright",mode:t.mode,body:[o],left:e[0],right:e[1],rightColor:void 0}:o},htmlBuilder:zi,mathmlBuilder:ji}),Ii({type:"array",names:["smallmatrix"],props:{numArgs:0},handler:function(t){var e=Ri(t.parser,{arraystretch:.5},"script");return e.colSeparationType="small",e},htmlBuilder:zi,mathmlBuilder:ji}),Ii({type:"array",names:["subarray"],props:{numArgs:1},handler:function(t,e){var i=(je(e[0])?[e[0]]:ze(e[0],"ordgroup").body).map((function(t){var e=qe(t).text;if(-1!=="lc".indexOf(e))return{type:"align",align:e};throw new n("Unknown column alignment: "+e,t)}));if(i.length>1)throw new n("{subarray} can contain only one column");var r={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if((r=Ri(t.parser,r,"script")).body.length>0&&r.body[0].length>1)throw new n("{subarray} can contain only one column");return r},htmlBuilder:zi,mathmlBuilder:ji}),Ii({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler:function(t){var e=Ri(t.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},Fi(t.envName));return{type:"leftright",mode:t.mode,body:[e],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:zi,mathmlBuilder:ji}),Ii({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Hi,htmlBuilder:zi,mathmlBuilder:ji}),Ii({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler:function(t){h.contains(["gather","gather*"],t.envName)&&Oi(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",addEqnNum:"gather"===t.envName,emptySingleRow:!0,leqno:t.parser.settings.leqno};return Ri(t.parser,e,"display")},htmlBuilder:zi,mathmlBuilder:ji}),Ii({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Hi,htmlBuilder:zi,mathmlBuilder:ji}),Ii({type:"array",names:["equation","equation*"],props:{numArgs:0},handler:function(t){Oi(t);var e={addEqnNum:"equation"===t.envName,emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Ri(t.parser,e,"display")},htmlBuilder:zi,mathmlBuilder:ji}),Ii({type:"array",names:["CD"],props:{numArgs:0},handler:function(t){return Oi(t),function(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var i=t.fetch().text;if("&"!==i&&"\\\\"!==i){if("\\end"===i){0===e[e.length-1].length&&e.pop();break}throw new n("Expected \\\\ or \\cr or \\end",t.nextToken)}t.consume()}for(var r,s,o=[],a=[o],h=0;h<e.length;h++){for(var l=e[h],d={type:"styling",body:[],mode:"math",style:"display"},c=0;c<l.length;c++)if(Ge(l[c])){o.push(d);var u=qe(l[c+=1]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},"=|.".indexOf(u)>-1);else{if(!("<>AV".indexOf(u)>-1))throw new n('Expected one of "<>AV=|." after @',l[c]);for(var m=0;m<2;m++){for(var f=!0,g=c+1;g<l.length;g++){if(s=u,("mathord"===(r=l[g]).type||"atom"===r.type)&&r.text===s){f=!1,c=g;break}if(Ge(l[g]))throw new n("Missing a "+u+" character to complete a CD arrow.",l[g]);p[m].body.push(l[g])}if(f)throw new n("Missing a "+u+" character to complete a CD arrow.",l[c])}}var v={type:"styling",body:[Xe(u,p,t)],mode:"math",style:"display"};o.push(v),d={type:"styling",body:[],mode:"math",style:"display"}}else d.body.push(l[c]);h%2==0?o.push(d):o.shift(),o=[],a.push(o)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:"math",body:a,arraystretch:1,addJot:!0,rowGaps:[null],cols:new Array(a[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25}),colSeparationType:"CD",hLinesBeforeRow:new Array(a.length+1).fill([])}}(t.parser)},htmlBuilder:zi,mathmlBuilder:ji}),ne({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler:function(t,e){throw new n(t.funcName+" valid only within array environment")}});var $i=Pi;ne({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler:function(t,e){var i=t.parser,r=t.funcName,s=e[0];if("ordgroup"!==s.type)throw new n("Invalid environment name",s);for(var o="",a=0;a<s.body.length;++a)o+=ze(s.body[a],"textord").text;if("\\begin"===r){if(!$i.hasOwnProperty(o))throw new n("No such environment: "+o,s);var h=$i[o],l=i.parseArguments("\\begin{"+o+"}",h),d=l.args,c=l.optArgs,u={mode:i.mode,envName:o,parser:i},p=h.handler(u,d,c);i.expect("\\end",!1);var m=i.nextToken,f=ze(i.parseFunction(),"environment");if(f.name!==o)throw new n("Mismatch: \\begin{"+o+"} matched by \\end{"+f.name+"}",m);return p}return{type:"environment",mode:i.mode,name:o,nameGroup:s}}});var Wi=Xt.makeSpan;function Ui(t,e){var i=ue(t.body,e,!0);return Wi([t.mclass],i,e)}function Vi(t,e){var i,n=Ne(t.body,e);return"minner"===t.mclass?Ce.newDocumentFragment(n):("mord"===t.mclass?t.isCharacterBox?(i=n[0]).type="mi":i=new Ce.MathNode("mi",n):(t.isCharacterBox?(i=n[0]).type="mo":i=new Ce.MathNode("mo",n),"mbin"===t.mclass?(i.attributes.lspace="0.22em",i.attributes.rspace="0.22em"):"mpunct"===t.mclass?(i.attributes.lspace="0em",i.attributes.rspace="0.17em"):"mopen"!==t.mclass&&"mclose"!==t.mclass||(i.attributes.lspace="0em",i.attributes.rspace="0em")),i)}ne({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler:function(t,e){var i=t.parser,n=t.funcName,r=e[0];return{type:"mclass",mode:i.mode,mclass:"m"+n.substr(5),body:oe(r),isCharacterBox:h.isCharacterBox(r)}},htmlBuilder:Ui,mathmlBuilder:Vi});var Gi=function(t){var e="ordgroup"===t.type&&t.body.length?t.body[0]:t;return"atom"!==e.type||"bin"!==e.family&&"rel"!==e.family?"mord":"m"+e.family};ne({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler:function(t,e){return{type:"mclass",mode:t.parser.mode,mclass:Gi(e[0]),body:oe(e[1]),isCharacterBox:h.isCharacterBox(e[1])}}}),ne({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler:function(t,e){var i,n=t.parser,r=t.funcName,s=e[1],o=e[0];i="\\stackrel"!==r?Gi(s):"mrel";var a={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==r,body:oe(s)},l={type:"supsub",mode:o.mode,base:a,sup:"\\underset"===r?null:o,sub:"\\underset"===r?o:null};return{type:"mclass",mode:n.mode,mclass:i,body:[l],isCharacterBox:h.isCharacterBox(l)}},htmlBuilder:Ui,mathmlBuilder:Vi});var Xi=function(t,e){var i=t.font,n=e.withFont(i);return ye(t.body,n)},Yi=function(t,e){var i=t.font,n=e.withFont(i);return Ae(t.body,n)},Zi={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};ne({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:function(t,e){var i=t.parser,n=t.funcName,r=se(e[0]),s=n;return s in Zi&&(s=Zi[s]),{type:"font",mode:i.mode,font:s.slice(1),body:r}},htmlBuilder:Xi,mathmlBuilder:Yi}),ne({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:function(t,e){var i=t.parser,n=e[0],r=h.isCharacterBox(n);return{type:"mclass",mode:i.mode,mclass:Gi(n),body:[{type:"font",mode:i.mode,font:"boldsymbol",body:n}],isCharacterBox:r}}}),ne({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:function(t,e){var i=t.parser,n=t.funcName,r=t.breakOnTokenText,s=i.mode,o=i.parseExpression(!0,r);return{type:"font",mode:s,font:"math"+n.slice(1),body:{type:"ordgroup",mode:i.mode,body:o}}},htmlBuilder:Xi,mathmlBuilder:Yi});var Ji=function(t,e){var i=e;return"display"===t?i=i.id>=y.SCRIPT.id?i.text():y.DISPLAY:"text"===t&&i.size===y.DISPLAY.size?i=y.TEXT:"script"===t?i=y.SCRIPT:"scriptscript"===t&&(i=y.SCRIPTSCRIPT),i},Ki=function(t,e){var i,n=Ji(t.size,e.style),r=n.fracNum(),s=n.fracDen();i=e.havingStyle(r);var o=ye(t.numer,i,e);if(t.continued){var a=8.5/e.fontMetrics().ptPerEm,h=3.5/e.fontMetrics().ptPerEm;o.height=o.height<a?a:o.height,o.depth=o.depth<h?h:o.depth}i=e.havingStyle(s);var l,d,c,u,p,m,f,g,v,x,b=ye(t.denom,i,e);if(t.hasBarLine?(t.barSize?(d=Rt(t.barSize,e),l=Xt.makeLineSpan("frac-line",e,d)):l=Xt.makeLineSpan("frac-line",e),d=l.height,c=l.height):(l=null,d=0,c=e.fontMetrics().defaultRuleThickness),n.size===y.DISPLAY.size||"display"===t.size?(u=e.fontMetrics().num1,p=d>0?3*c:7*c,m=e.fontMetrics().denom1):(d>0?(u=e.fontMetrics().num2,p=c):(u=e.fontMetrics().num3,p=3*c),m=e.fontMetrics().denom2),l){var w=e.fontMetrics().axisHeight;u-o.depth-(w+.5*d)<p&&(u+=p-(u-o.depth-(w+.5*d))),w-.5*d-(b.height-m)<p&&(m+=p-(w-.5*d-(b.height-m)));var k=-(w-.5*d);f=Xt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:b,shift:m},{type:"elem",elem:l,shift:k},{type:"elem",elem:o,shift:-u}]},e)}else{var _=u-o.depth-(b.height-m);_<p&&(u+=.5*(p-_),m+=.5*(p-_)),f=Xt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:b,shift:m},{type:"elem",elem:o,shift:-u}]},e)}return i=e.havingStyle(n),f.height*=i.sizeMultiplier/e.sizeMultiplier,f.depth*=i.sizeMultiplier/e.sizeMultiplier,g=n.size===y.DISPLAY.size?e.fontMetrics().delim1:n.size===y.SCRIPTSCRIPT.size?e.havingStyle(y.SCRIPT).fontMetrics().delim2:e.fontMetrics().delim2,v=null==t.leftDelim?ve(e,["mopen"]):Di(t.leftDelim,g,!0,e.havingStyle(n),t.mode,["mopen"]),x=t.continued?Xt.makeSpan([]):null==t.rightDelim?ve(e,["mclose"]):Di(t.rightDelim,g,!0,e.havingStyle(n),t.mode,["mclose"]),Xt.makeSpan(["mord"].concat(i.sizingClasses(e)),[v,Xt.makeSpan(["mfrac"],[f]),x],e)},Qi=function(t,e){var i=new Ce.MathNode("mfrac",[Ae(t.numer,e),Ae(t.denom,e)]);if(t.hasBarLine){if(t.barSize){var n=Rt(t.barSize,e);i.setAttribute("linethickness",n+"em")}}else i.setAttribute("linethickness","0px");var r=Ji(t.size,e.style);if(r.size!==e.style.size){i=new Ce.MathNode("mstyle",[i]);var s=r.size===y.DISPLAY.size?"true":"false";i.setAttribute("displaystyle",s),i.setAttribute("scriptlevel","0")}if(null!=t.leftDelim||null!=t.rightDelim){var o=[];if(null!=t.leftDelim){var a=new Ce.MathNode("mo",[new Ce.TextNode(t.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),o.push(a)}if(o.push(i),null!=t.rightDelim){var h=new Ce.MathNode("mo",[new Ce.TextNode(t.rightDelim.replace("\\",""))]);h.setAttribute("fence","true"),o.push(h)}return Ee(o)}return i};ne({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:function(t,e){var i,n=t.parser,r=t.funcName,s=e[0],o=e[1],a=null,h=null,l="auto";switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":i=!0;break;case"\\\\atopfrac":i=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i=!1,a="(",h=")";break;case"\\\\bracefrac":i=!1,a="\\{",h="\\}";break;case"\\\\brackfrac":i=!1,a="[",h="]";break;default:throw new Error("Unrecognized genfrac command")}switch(r){case"\\dfrac":case"\\dbinom":l="display";break;case"\\tfrac":case"\\tbinom":l="text"}return{type:"genfrac",mode:n.mode,continued:!1,numer:s,denom:o,hasBarLine:i,leftDelim:a,rightDelim:h,size:l,barSize:null}},htmlBuilder:Ki,mathmlBuilder:Qi}),ne({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:function(t,e){var i=t.parser;t.funcName;var n=e[0],r=e[1];return{type:"genfrac",mode:i.mode,continued:!0,numer:n,denom:r,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),ne({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler:function(t){var e,i=t.parser,n=t.funcName,r=t.token;switch(n){case"\\over":e="\\frac";break;case"\\choose":e="\\binom";break;case"\\atop":e="\\\\atopfrac";break;case"\\brace":e="\\\\bracefrac";break;case"\\brack":e="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:i.mode,replaceWith:e,token:r}}});var tn=["display","text","script","scriptscript"],en=function(t){var e=null;return t.length>0&&(e="."===(e=t)?null:e),e};ne({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler:function(t,e){var i,n=t.parser,r=e[4],s=e[5],o=se(e[0]),a="atom"===o.type&&"open"===o.family?en(o.text):null,h=se(e[1]),l="atom"===h.type&&"close"===h.family?en(h.text):null,d=ze(e[2],"size"),c=null;i=!!d.isBlank||(c=d.value).number>0;var u="auto",p=e[3];if("ordgroup"===p.type){if(p.body.length>0){var m=ze(p.body[0],"textord");u=tn[Number(m.text)]}}else p=ze(p,"textord"),u=tn[Number(p.text)];return{type:"genfrac",mode:n.mode,numer:r,denom:s,continued:!1,hasBarLine:i,barSize:c,leftDelim:a,rightDelim:l,size:u}},htmlBuilder:Ki,mathmlBuilder:Qi}),ne({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler:function(t,e){var i=t.parser;t.funcName;var n=t.token;return{type:"infix",mode:i.mode,replaceWith:"\\\\abovefrac",size:ze(e[0],"size").value,token:n}}}),ne({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:function(t,e){var i=t.parser;t.funcName;var n=e[0],r=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t}(ze(e[1],"infix").size),s=e[2],o=r.number>0;return{type:"genfrac",mode:i.mode,numer:n,denom:s,continued:!1,hasBarLine:o,barSize:r,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:Ki,mathmlBuilder:Qi});var nn=function(t,e){var i,n,r=e.style;"supsub"===t.type?(i=t.sup?ye(t.sup,e.havingStyle(r.sup()),e):ye(t.sub,e.havingStyle(r.sub()),e),n=ze(t.base,"horizBrace")):n=ze(t,"horizBrace");var s,o=ye(n.base,e.havingBaseStyle(y.DISPLAY)),a=Fe(n,e);if(n.isOver?(s=Xt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:a}]},e)).children[0].children[0].children[1].classes.push("svg-align"):(s=Xt.makeVList({positionType:"bottom",positionData:o.depth+.1+a.height,children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:o}]},e)).children[0].children[0].children[0].classes.push("svg-align"),i){var h=Xt.makeSpan(["mord",n.isOver?"mover":"munder"],[s],e);s=n.isOver?Xt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:h},{type:"kern",size:.2},{type:"elem",elem:i}]},e):Xt.makeVList({positionType:"bottom",positionData:h.depth+.2+i.height+i.depth,children:[{type:"elem",elem:i},{type:"kern",size:.2},{type:"elem",elem:h}]},e)}return Xt.makeSpan(["mord",n.isOver?"mover":"munder"],[s],e)};ne({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler:function(t,e){var i=t.parser,n=t.funcName;return{type:"horizBrace",mode:i.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:nn,mathmlBuilder:function(t,e){var i=Re(t.label);return new Ce.MathNode(t.isOver?"mover":"munder",[Ae(t.base,e),i])}}),ne({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:function(t,e){var i=t.parser,n=e[1],r=ze(e[0],"url").url;return i.settings.isTrusted({command:"\\href",url:r})?{type:"href",mode:i.mode,href:r,body:oe(n)}:i.formatUnsupportedCmd("\\href")},htmlBuilder:function(t,e){var i=ue(t.body,e,!1);return Xt.makeAnchor(t.href,[],i,e)},mathmlBuilder:function(t,e){var i=Me(t.body,e);return i instanceof ke||(i=new ke("mrow",[i])),i.setAttribute("href",t.href),i}}),ne({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:function(t,e){var i=t.parser,n=ze(e[0],"url").url;if(!i.settings.isTrusted({command:"\\url",url:n}))return i.formatUnsupportedCmd("\\url");for(var r=[],s=0;s<n.length;s++){var o=n[s];"~"===o&&(o="\\textasciitilde"),r.push({type:"textord",mode:"text",text:o})}var a={type:"text",mode:i.mode,font:"\\texttt",body:r};return{type:"href",mode:i.mode,href:n,body:oe(a)}}}),ne({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler:function(t,e){return{type:"hbox",mode:t.parser.mode,body:oe(e[0])}},htmlBuilder:function(t,e){var i=ue(t.body,e,!1);return Xt.makeFragment(i)},mathmlBuilder:function(t,e){return new Ce.MathNode("mrow",Ne(t.body,e))}}),ne({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:function(t,e){var i=t.parser,r=t.funcName;t.token;var s,o=ze(e[0],"raw").string,a=e[1];i.settings.strict&&i.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var h={};switch(r){case"\\htmlClass":h.class=o,s={command:"\\htmlClass",class:o};break;case"\\htmlId":h.id=o,s={command:"\\htmlId",id:o};break;case"\\htmlStyle":h.style=o,s={command:"\\htmlStyle",style:o};break;case"\\htmlData":for(var l=o.split(","),d=0;d<l.length;d++){var c=l[d].split("=");if(2!==c.length)throw new n("Error parsing key-value for \\htmlData");h["data-"+c[0].trim()]=c[1].trim()}s={command:"\\htmlData",attributes:h};break;default:throw new Error("Unrecognized html command")}return i.settings.isTrusted(s)?{type:"html",mode:i.mode,attributes:h,body:oe(a)}:i.formatUnsupportedCmd(r)},htmlBuilder:function(t,e){var i=ue(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push.apply(n,t.attributes.class.trim().split(/\s+/));var r=Xt.makeSpan(n,i,e);for(var s in t.attributes)"class"!==s&&t.attributes.hasOwnProperty(s)&&r.setAttribute(s,t.attributes[s]);return r},mathmlBuilder:function(t,e){return Me(t.body,e)}}),ne({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:function(t,e){return{type:"htmlmathml",mode:t.parser.mode,html:oe(e[0]),mathml:oe(e[1])}},htmlBuilder:function(t,e){var i=ue(t.html,e,!1);return Xt.makeFragment(i)},mathmlBuilder:function(t,e){return Me(t.mathml,e)}});var rn=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var e=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!e)throw new n("Invalid size: '"+t+"' in \\includegraphics");var i={number:+(e[1]+e[2]),unit:e[3]};if(!Ot(i))throw new n("Invalid unit: '"+i.unit+"' in \\includegraphics.");return i};ne({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:function(t,e,i){var r=t.parser,s={number:0,unit:"em"},o={number:.9,unit:"em"},a={number:0,unit:"em"},h="";if(i[0])for(var l=ze(i[0],"raw").string.split(","),d=0;d<l.length;d++){var c=l[d].split("=");if(2===c.length){var u=c[1].trim();switch(c[0].trim()){case"alt":h=u;break;case"width":s=rn(u);break;case"height":o=rn(u);break;case"totalheight":a=rn(u);break;default:throw new n("Invalid key: '"+c[0]+"' in \\includegraphics.")}}}var p=ze(e[0],"url").url;return""===h&&(h=(h=(h=p).replace(/^.*[\\/]/,"")).substring(0,h.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:p})?{type:"includegraphics",mode:r.mode,alt:h,width:s,height:o,totalheight:a,src:p}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:function(t,e){var i=Rt(t.height,e),n=0;t.totalheight.number>0&&(n=Rt(t.totalheight,e)-i,n=Number(n.toFixed(2)));var r=0;t.width.number>0&&(r=Rt(t.width,e));var s={height:i+n+"em"};r>0&&(s.width=r+"em"),n>0&&(s.verticalAlign=-n+"em");var o=new L(t.src,t.alt,s);return o.height=i,o.depth=n,o},mathmlBuilder:function(t,e){var i=new Ce.MathNode("mglyph",[]);i.setAttribute("alt",t.alt);var n=Rt(t.height,e),r=0;if(t.totalheight.number>0&&(r=(r=Rt(t.totalheight,e)-n).toFixed(2),i.setAttribute("valign","-"+r+"em")),i.setAttribute("height",n+r+"em"),t.width.number>0){var s=Rt(t.width,e);i.setAttribute("width",s+"em")}return i.setAttribute("src",t.src),i}}),ne({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler:function(t,e){var i=t.parser,n=t.funcName,r=ze(e[0],"size");if(i.settings.strict){var s="m"===n[1],o="mu"===r.value.unit;s?(o||i.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, not "+r.value.unit+" units"),"math"!==i.mode&&i.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&i.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:i.mode,dimension:r.value}},htmlBuilder:function(t,e){return Xt.makeGlue(t.dimension,e)},mathmlBuilder:function(t,e){var i=Rt(t.dimension,e);return new Ce.SpaceNode(i)}}),ne({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var i=t.parser,n=t.funcName,r=e[0];return{type:"lap",mode:i.mode,alignment:n.slice(5),body:r}},htmlBuilder:function(t,e){var i;"clap"===t.alignment?(i=Xt.makeSpan([],[ye(t.body,e)]),i=Xt.makeSpan(["inner"],[i],e)):i=Xt.makeSpan(["inner"],[ye(t.body,e)]);var n=Xt.makeSpan(["fix"],[]),r=Xt.makeSpan([t.alignment],[i,n],e),s=Xt.makeSpan(["strut"]);return s.style.height=r.height+r.depth+"em",s.style.verticalAlign=-r.depth+"em",r.children.unshift(s),r=Xt.makeSpan(["thinbox"],[r],e),Xt.makeSpan(["mord","vbox"],[r],e)},mathmlBuilder:function(t,e){var i=new Ce.MathNode("mpadded",[Ae(t.body,e)]);if("rlap"!==t.alignment){var n="llap"===t.alignment?"-1":"-0.5";i.setAttribute("lspace",n+"width")}return i.setAttribute("width","0px"),i}}),ne({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(t,e){var i=t.funcName,n=t.parser,r=n.mode;n.switchMode("math");var s="\\("===i?"\\)":"$",o=n.parseExpression(!1,s);return n.expect(s),n.switchMode(r),{type:"styling",mode:n.mode,style:"text",body:o}}}),ne({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(t,e){throw new n("Mismatched "+t.funcName)}});var sn=function(t,e){switch(e.style.size){case y.DISPLAY.size:return t.display;case y.TEXT.size:return t.text;case y.SCRIPT.size:return t.script;case y.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};ne({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:function(t,e){return{type:"mathchoice",mode:t.parser.mode,display:oe(e[0]),text:oe(e[1]),script:oe(e[2]),scriptscript:oe(e[3])}},htmlBuilder:function(t,e){var i=sn(t,e),n=ue(i,e,!1);return Xt.makeFragment(n)},mathmlBuilder:function(t,e){var i=sn(t,e);return Me(i,e)}});var on=function(t,e,i,n,r,s,o){t=Xt.makeSpan([],[t]);var a,l,d,c=i&&h.isCharacterBox(i);if(e){var u=ye(e,n.havingStyle(r.sup()),n);l={elem:u,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-u.depth)}}if(i){var p=ye(i,n.havingStyle(r.sub()),n);a={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-p.height)}}if(l&&a){var m=n.fontMetrics().bigOpSpacing5+a.elem.height+a.elem.depth+a.kern+t.depth+o;d=Xt.makeVList({positionType:"bottom",positionData:m,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:a.elem,marginLeft:-s+"em"},{type:"kern",size:a.kern},{type:"elem",elem:t},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:s+"em"},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(a){var f=t.height-o;d=Xt.makeVList({positionType:"top",positionData:f,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:a.elem,marginLeft:-s+"em"},{type:"kern",size:a.kern},{type:"elem",elem:t}]},n)}else{if(!l)return t;var g=t.depth+o;d=Xt.makeVList({positionType:"bottom",positionData:g,children:[{type:"elem",elem:t},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:s+"em"},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}var v=[d];if(a&&0!==s&&!c){var y=Xt.makeSpan(["mspace"],[],n);y.style.marginRight=s+"em",v.unshift(y)}return Xt.makeSpan(["mop","op-limits"],v,n)},an=["\\smallint"],hn=function(t,e){var i,n,r,s=!1;"supsub"===t.type?(i=t.sup,n=t.sub,r=ze(t.base,"op"),s=!0):r=ze(t,"op");var o,a=e.style,l=!1;if(a.size===y.DISPLAY.size&&r.symbol&&!h.contains(an,r.name)&&(l=!0),r.symbol){var d=l?"Size2-Regular":"Size1-Regular",c="";if("\\oiint"!==r.name&&"\\oiiint"!==r.name||(c=r.name.substr(1),r.name="oiint"===c?"\\iint":"\\iiint"),o=Xt.makeSymbol(r.name,d,"math",e,["mop","op-symbol",l?"large-op":"small-op"]),c.length>0){var u=o.italic,p=Xt.staticSvg(c+"Size"+(l?"2":"1"),e);o=Xt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:0},{type:"elem",elem:p,shift:l?.08:0}]},e),r.name="\\"+c,o.classes.unshift("mop"),o.italic=u}}else if(r.body){var m=ue(r.body,e,!0);1===m.length&&m[0]instanceof P?(o=m[0]).classes[0]="mop":o=Xt.makeSpan(["mop"],m,e)}else{for(var f=[],g=1;g<r.name.length;g++)f.push(Xt.mathsym(r.name[g],r.mode,e));o=Xt.makeSpan(["mop"],f,e)}var v=0,x=0;return(o instanceof P||"\\oiint"===r.name||"\\oiiint"===r.name)&&!r.suppressBaseShift&&(v=(o.height-o.depth)/2-e.fontMetrics().axisHeight,x=o.italic),s?on(o,i,n,e,a,x,v):(v&&(o.style.position="relative",o.style.top=v+"em"),o)},ln=function(t,e){var i;if(t.symbol)i=new ke("mo",[De(t.name,t.mode)]),h.contains(an,t.name)&&i.setAttribute("largeop","false");else if(t.body)i=new ke("mo",Ne(t.body,e));else{i=new ke("mi",[new _e(t.name.slice(1))]);var n=new ke("mo",[De("⁡","text")]);i=t.parentIsSupSub?new ke("mrow",[i,n]):we([i,n])}return i},dn={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};ne({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:function(t,e){var i=t.parser,n=t.funcName;return 1===n.length&&(n=dn[n]),{type:"op",mode:i.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:hn,mathmlBuilder:ln}),ne({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:function(t,e){var i=t.parser,n=e[0];return{type:"op",mode:i.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:oe(n)}},htmlBuilder:hn,mathmlBuilder:ln});var cn={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};ne({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler:function(t){var e=t.parser,i=t.funcName;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:i}},htmlBuilder:hn,mathmlBuilder:ln}),ne({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler:function(t){var e=t.parser,i=t.funcName;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:i}},htmlBuilder:hn,mathmlBuilder:ln}),ne({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler:function(t){var e=t.parser,i=t.funcName;return 1===i.length&&(i=cn[i]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:hn,mathmlBuilder:ln});var un={},pn=un;function mn(t,e){un[t]=e}mn("\\noexpand",(function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}})),mn("\\expandafter",(function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}})),mn("\\@firstoftwo",(function(t){return{tokens:t.consumeArgs(2)[0],numArgs:0}})),mn("\\@secondoftwo",(function(t){return{tokens:t.consumeArgs(2)[1],numArgs:0}})),mn("\\@ifnextchar",(function(t){var e=t.consumeArgs(3);t.consumeSpaces();var i=t.future();return 1===e[0].length&&e[0][0].text===i.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}})),mn("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),mn("\\TextOrMath",(function(t){var e=t.consumeArgs(2);return"text"===t.mode?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}}));var fn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};mn("\\char",(function(t){var e,i=t.popToken(),r="";if("'"===i.text)e=8,i=t.popToken();else if('"'===i.text)e=16,i=t.popToken();else if("`"===i.text)if("\\"===(i=t.popToken()).text[0])r=i.text.charCodeAt(1);else{if("EOF"===i.text)throw new n("\\char` missing argument");r=i.text.charCodeAt(0)}else e=10;if(e){if(null==(r=fn[i.text])||r>=e)throw new n("Invalid base-"+e+" digit "+i.text);for(var s;null!=(s=fn[t.future().text])&&s<e;)r*=e,r+=s,t.popToken()}return"\\@char{"+r+"}"}));var gn=function(t,e,i){var r=t.consumeArg().tokens;if(1!==r.length)throw new n("\\newcommand's first argument must be a macro name");var s=r[0].text,o=t.isDefined(s);if(o&&!e)throw new n("\\newcommand{"+s+"} attempting to redefine "+s+"; use \\renewcommand");if(!o&&!i)throw new n("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var a=0;if(1===(r=t.consumeArg().tokens).length&&"["===r[0].text){for(var h="",l=t.expandNextToken();"]"!==l.text&&"EOF"!==l.text;)h+=l.text,l=t.expandNextToken();if(!h.match(/^\s*[0-9]+\s*$/))throw new n("Invalid number of arguments: "+h);a=parseInt(h),r=t.consumeArg().tokens}return t.macros.set(s,{tokens:r,numArgs:a}),""};mn("\\newcommand",(function(t){return gn(t,!1,!0)})),mn("\\renewcommand",(function(t){return gn(t,!0,!1)})),mn("\\providecommand",(function(t){return gn(t,!0,!0)})),mn("\\message",(function(t){var e=t.consumeArgs(1)[0];return console.log(e.reverse().map((function(t){return t.text})).join("")),""})),mn("\\errmessage",(function(t){var e=t.consumeArgs(1)[0];return console.error(e.reverse().map((function(t){return t.text})).join("")),""})),mn("\\show",(function(t){var e=t.popToken(),i=e.text;return console.log(e,t.macros.get(i),In[i],V.math[i],V.text[i]),""})),mn("\\bgroup","{"),mn("\\egroup","}"),mn("~","\\nobreakspace"),mn("\\lq","`"),mn("\\rq","'"),mn("\\aa","\\r a"),mn("\\AA","\\r A"),mn("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}"),mn("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),mn("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}"),mn("ℬ","\\mathscr{B}"),mn("ℰ","\\mathscr{E}"),mn("ℱ","\\mathscr{F}"),mn("ℋ","\\mathscr{H}"),mn("ℐ","\\mathscr{I}"),mn("ℒ","\\mathscr{L}"),mn("ℳ","\\mathscr{M}"),mn("ℛ","\\mathscr{R}"),mn("ℭ","\\mathfrak{C}"),mn("ℌ","\\mathfrak{H}"),mn("ℨ","\\mathfrak{Z}"),mn("\\Bbbk","\\Bbb{k}"),mn("·","\\cdotp"),mn("\\llap","\\mathllap{\\textrm{#1}}"),mn("\\rlap","\\mathrlap{\\textrm{#1}}"),mn("\\clap","\\mathclap{\\textrm{#1}}"),mn("\\mathstrut","\\vphantom{(}"),mn("\\underbar","\\underline{\\text{#1}}"),mn("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),mn("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}"),mn("\\ne","\\neq"),mn("≠","\\neq"),mn("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}"),mn("∉","\\notin"),mn("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}"),mn("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}"),mn("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}"),mn("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}"),mn("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}"),mn("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}"),mn("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}"),mn("⟂","\\perp"),mn("‼","\\mathclose{!\\mkern-0.8mu!}"),mn("∌","\\notni"),mn("⌜","\\ulcorner"),mn("⌝","\\urcorner"),mn("⌞","\\llcorner"),mn("⌟","\\lrcorner"),mn("©","\\copyright"),mn("®","\\textregistered"),mn("️","\\textregistered"),mn("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),mn("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),mn("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),mn("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),mn("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),mn("⋮","\\vdots"),mn("\\varGamma","\\mathit{\\Gamma}"),mn("\\varDelta","\\mathit{\\Delta}"),mn("\\varTheta","\\mathit{\\Theta}"),mn("\\varLambda","\\mathit{\\Lambda}"),mn("\\varXi","\\mathit{\\Xi}"),mn("\\varPi","\\mathit{\\Pi}"),mn("\\varSigma","\\mathit{\\Sigma}"),mn("\\varUpsilon","\\mathit{\\Upsilon}"),mn("\\varPhi","\\mathit{\\Phi}"),mn("\\varPsi","\\mathit{\\Psi}"),mn("\\varOmega","\\mathit{\\Omega}"),mn("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),mn("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu"),mn("\\boxed","\\fbox{$\\displaystyle{#1}$}"),mn("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),mn("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),mn("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var vn={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};mn("\\dots",(function(t){var e="\\dotso",i=t.expandAfterFuture().text;return i in vn?e=vn[i]:("\\not"===i.substr(0,4)||i in V.math&&h.contains(["bin","rel"],V.math[i].group))&&(e="\\dotsb"),e}));var yn={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};mn("\\dotso",(function(t){return t.future().text in yn?"\\ldots\\,":"\\ldots"})),mn("\\dotsc",(function(t){var e=t.future().text;return e in yn&&","!==e?"\\ldots\\,":"\\ldots"})),mn("\\cdots",(function(t){return t.future().text in yn?"\\@cdots\\,":"\\@cdots"})),mn("\\dotsb","\\cdots"),mn("\\dotsm","\\cdots"),mn("\\dotsi","\\!\\cdots"),mn("\\dotsx","\\ldots\\,"),mn("\\DOTSI","\\relax"),mn("\\DOTSB","\\relax"),mn("\\DOTSX","\\relax"),mn("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),mn("\\,","\\tmspace+{3mu}{.1667em}"),mn("\\thinspace","\\,"),mn("\\>","\\mskip{4mu}"),mn("\\:","\\tmspace+{4mu}{.2222em}"),mn("\\medspace","\\:"),mn("\\;","\\tmspace+{5mu}{.2777em}"),mn("\\thickspace","\\;"),mn("\\!","\\tmspace-{3mu}{.1667em}"),mn("\\negthinspace","\\!"),mn("\\negmedspace","\\tmspace-{4mu}{.2222em}"),mn("\\negthickspace","\\tmspace-{5mu}{.277em}"),mn("\\enspace","\\kern.5em "),mn("\\enskip","\\hskip.5em\\relax"),mn("\\quad","\\hskip1em\\relax"),mn("\\qquad","\\hskip2em\\relax"),mn("\\tag","\\@ifstar\\tag@literal\\tag@paren"),mn("\\tag@paren","\\tag@literal{({#1})}"),mn("\\tag@literal",(function(t){if(t.macros.get("\\df@tag"))throw new n("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"})),mn("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),mn("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),mn("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),mn("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),mn("\\pmb","\\html@mathml{\\@binrel{#1}{\\mathrlap{#1}\\kern0.5px#1}}{\\mathbf{#1}}"),mn("\\newline","\\\\\\relax"),mn("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var xn=F["Main-Regular"]["T".charCodeAt(0)][1]-.7*F["Main-Regular"]["A".charCodeAt(0)][1]+"em";mn("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+xn+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}"),mn("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+xn+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}"),mn("\\hspace","\\@ifstar\\@hspacer\\@hspace"),mn("\\@hspace","\\hskip #1\\relax"),mn("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),mn("\\ordinarycolon",":"),mn("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),mn("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),mn("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),mn("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),mn("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),mn("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),mn("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),mn("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),mn("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),mn("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),mn("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),mn("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),mn("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),mn("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),mn("∷","\\dblcolon"),mn("∹","\\eqcolon"),mn("≔","\\coloneqq"),mn("≕","\\eqqcolon"),mn("⩴","\\Coloneqq"),mn("\\ratio","\\vcentcolon"),mn("\\coloncolon","\\dblcolon"),mn("\\colonequals","\\coloneqq"),mn("\\coloncolonequals","\\Coloneqq"),mn("\\equalscolon","\\eqqcolon"),mn("\\equalscoloncolon","\\Eqqcolon"),mn("\\colonminus","\\coloneq"),mn("\\coloncolonminus","\\Coloneq"),mn("\\minuscolon","\\eqcolon"),mn("\\minuscoloncolon","\\Eqcolon"),mn("\\coloncolonapprox","\\Colonapprox"),mn("\\coloncolonsim","\\Colonsim"),mn("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),mn("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),mn("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),mn("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),mn("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}"),mn("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),mn("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),mn("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),mn("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),mn("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),mn("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),mn("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),mn("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),mn("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}"),mn("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}"),mn("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}"),mn("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}"),mn("\\nleqq","\\html@mathml{\\@nleqq}{≰}"),mn("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}"),mn("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}"),mn("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}"),mn("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}"),mn("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}"),mn("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}"),mn("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}"),mn("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}"),mn("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}"),mn("\\imath","\\html@mathml{\\@imath}{ı}"),mn("\\jmath","\\html@mathml{\\@jmath}{ȷ}"),mn("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}"),mn("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}"),mn("⟦","\\llbracket"),mn("⟧","\\rrbracket"),mn("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}"),mn("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}"),mn("⦃","\\lBrace"),mn("⦄","\\rBrace"),mn("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}"),mn("⦵","\\minuso"),mn("\\darr","\\downarrow"),mn("\\dArr","\\Downarrow"),mn("\\Darr","\\Downarrow"),mn("\\lang","\\langle"),mn("\\rang","\\rangle"),mn("\\uarr","\\uparrow"),mn("\\uArr","\\Uparrow"),mn("\\Uarr","\\Uparrow"),mn("\\N","\\mathbb{N}"),mn("\\R","\\mathbb{R}"),mn("\\Z","\\mathbb{Z}"),mn("\\alef","\\aleph"),mn("\\alefsym","\\aleph"),mn("\\Alpha","\\mathrm{A}"),mn("\\Beta","\\mathrm{B}"),mn("\\bull","\\bullet"),mn("\\Chi","\\mathrm{X}"),mn("\\clubs","\\clubsuit"),mn("\\cnums","\\mathbb{C}"),mn("\\Complex","\\mathbb{C}"),mn("\\Dagger","\\ddagger"),mn("\\diamonds","\\diamondsuit"),mn("\\empty","\\emptyset"),mn("\\Epsilon","\\mathrm{E}"),mn("\\Eta","\\mathrm{H}"),mn("\\exist","\\exists"),mn("\\harr","\\leftrightarrow"),mn("\\hArr","\\Leftrightarrow"),mn("\\Harr","\\Leftrightarrow"),mn("\\hearts","\\heartsuit"),mn("\\image","\\Im"),mn("\\infin","\\infty"),mn("\\Iota","\\mathrm{I}"),mn("\\isin","\\in"),mn("\\Kappa","\\mathrm{K}"),mn("\\larr","\\leftarrow"),mn("\\lArr","\\Leftarrow"),mn("\\Larr","\\Leftarrow"),mn("\\lrarr","\\leftrightarrow"),mn("\\lrArr","\\Leftrightarrow"),mn("\\Lrarr","\\Leftrightarrow"),mn("\\Mu","\\mathrm{M}"),mn("\\natnums","\\mathbb{N}"),mn("\\Nu","\\mathrm{N}"),mn("\\Omicron","\\mathrm{O}"),mn("\\plusmn","\\pm"),mn("\\rarr","\\rightarrow"),mn("\\rArr","\\Rightarrow"),mn("\\Rarr","\\Rightarrow"),mn("\\real","\\Re"),mn("\\reals","\\mathbb{R}"),mn("\\Reals","\\mathbb{R}"),mn("\\Rho","\\mathrm{P}"),mn("\\sdot","\\cdot"),mn("\\sect","\\S"),mn("\\spades","\\spadesuit"),mn("\\sub","\\subset"),mn("\\sube","\\subseteq"),mn("\\supe","\\supseteq"),mn("\\Tau","\\mathrm{T}"),mn("\\thetasym","\\vartheta"),mn("\\weierp","\\wp"),mn("\\Zeta","\\mathrm{Z}"),mn("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),mn("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),mn("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),mn("\\bra","\\mathinner{\\langle{#1}|}"),mn("\\ket","\\mathinner{|{#1}\\rangle}"),mn("\\braket","\\mathinner{\\langle{#1}\\rangle}"),mn("\\Bra","\\left\\langle#1\\right|"),mn("\\Ket","\\left|#1\\right\\rangle"),mn("\\angln","{\\angl n}"),mn("\\blue","\\textcolor{##6495ed}{#1}"),mn("\\orange","\\textcolor{##ffa500}{#1}"),mn("\\pink","\\textcolor{##ff00af}{#1}"),mn("\\red","\\textcolor{##df0030}{#1}"),mn("\\green","\\textcolor{##28ae7b}{#1}"),mn("\\gray","\\textcolor{gray}{#1}"),mn("\\purple","\\textcolor{##9d38bd}{#1}"),mn("\\blueA","\\textcolor{##ccfaff}{#1}"),mn("\\blueB","\\textcolor{##80f6ff}{#1}"),mn("\\blueC","\\textcolor{##63d9ea}{#1}"),mn("\\blueD","\\textcolor{##11accd}{#1}"),mn("\\blueE","\\textcolor{##0c7f99}{#1}"),mn("\\tealA","\\textcolor{##94fff5}{#1}"),mn("\\tealB","\\textcolor{##26edd5}{#1}"),mn("\\tealC","\\textcolor{##01d1c1}{#1}"),mn("\\tealD","\\textcolor{##01a995}{#1}"),mn("\\tealE","\\textcolor{##208170}{#1}"),mn("\\greenA","\\textcolor{##b6ffb0}{#1}"),mn("\\greenB","\\textcolor{##8af281}{#1}"),mn("\\greenC","\\textcolor{##74cf70}{#1}"),mn("\\greenD","\\textcolor{##1fab54}{#1}"),mn("\\greenE","\\textcolor{##0d923f}{#1}"),mn("\\goldA","\\textcolor{##ffd0a9}{#1}"),mn("\\goldB","\\textcolor{##ffbb71}{#1}"),mn("\\goldC","\\textcolor{##ff9c39}{#1}"),mn("\\goldD","\\textcolor{##e07d10}{#1}"),mn("\\goldE","\\textcolor{##a75a05}{#1}"),mn("\\redA","\\textcolor{##fca9a9}{#1}"),mn("\\redB","\\textcolor{##ff8482}{#1}"),mn("\\redC","\\textcolor{##f9685d}{#1}"),mn("\\redD","\\textcolor{##e84d39}{#1}"),mn("\\redE","\\textcolor{##bc2612}{#1}"),mn("\\maroonA","\\textcolor{##ffbde0}{#1}"),mn("\\maroonB","\\textcolor{##ff92c6}{#1}"),mn("\\maroonC","\\textcolor{##ed5fa6}{#1}"),mn("\\maroonD","\\textcolor{##ca337c}{#1}"),mn("\\maroonE","\\textcolor{##9e034e}{#1}"),mn("\\purpleA","\\textcolor{##ddd7ff}{#1}"),mn("\\purpleB","\\textcolor{##c6b9fc}{#1}"),mn("\\purpleC","\\textcolor{##aa87ff}{#1}"),mn("\\purpleD","\\textcolor{##7854ab}{#1}"),mn("\\purpleE","\\textcolor{##543b78}{#1}"),mn("\\mintA","\\textcolor{##f5f9e8}{#1}"),mn("\\mintB","\\textcolor{##edf2df}{#1}"),mn("\\mintC","\\textcolor{##e0e5cc}{#1}"),mn("\\grayA","\\textcolor{##f6f7f7}{#1}"),mn("\\grayB","\\textcolor{##f0f1f2}{#1}"),mn("\\grayC","\\textcolor{##e3e5e6}{#1}"),mn("\\grayD","\\textcolor{##d6d8da}{#1}"),mn("\\grayE","\\textcolor{##babec2}{#1}"),mn("\\grayF","\\textcolor{##888d93}{#1}"),mn("\\grayG","\\textcolor{##626569}{#1}"),mn("\\grayH","\\textcolor{##3b3e40}{#1}"),mn("\\grayI","\\textcolor{##21242c}{#1}"),mn("\\kaBlue","\\textcolor{##314453}{#1}"),mn("\\kaGreen","\\textcolor{##71B307}{#1}");var bn=function(t,e){var i,n,r,s,o=!1;if("supsub"===t.type?(i=t.sup,n=t.sub,r=ze(t.base,"operatorname"),o=!0):r=ze(t,"operatorname"),r.body.length>0){for(var a=r.body.map((function(t){var e=t.text;return"string"==typeof e?{type:"textord",mode:t.mode,text:e}:t})),h=ue(a,e.withFont("mathrm"),!0),l=0;l<h.length;l++){var d=h[l];d instanceof P&&(d.text=d.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=Xt.makeSpan(["mop"],h,e)}else s=Xt.makeSpan(["mop"],[],e);return o?on(s,i,n,e,e.style,0,0):s};function wn(t,e,i){for(var n=ue(t,e,!1),r=e.sizeMultiplier/i.sizeMultiplier,s=0;s<n.length;s++){var o=n[s].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[s].classes,e.sizingClasses(i)):n[s].classes[o+1]==="reset-size"+e.size&&(n[s].classes[o+1]="reset-size"+i.size),n[s].height*=r,n[s].depth*=r}return Xt.makeFragment(n)}ne({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:function(t,e){var i=t.parser,n=t.funcName,r=e[0];return{type:"operatorname",mode:i.mode,body:oe(r),alwaysHandleSupSub:"\\operatornamewithlimits"===n,limits:!1,parentIsSupSub:!1}},htmlBuilder:bn,mathmlBuilder:function(t,e){for(var i=Ne(t.body,e.withFont("mathrm")),n=!0,r=0;r<i.length;r++){var s=i[r];if(s instanceof Ce.SpaceNode);else if(s instanceof Ce.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var o=s.children[0];1===s.children.length&&o instanceof Ce.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break;default:n=!1}else n=!1}if(n){var a=i.map((function(t){return t.toText()})).join("");i=[new Ce.TextNode(a)]}var h=new Ce.MathNode("mi",i);h.setAttribute("mathvariant","normal");var l=new Ce.MathNode("mo",[De("⁡","text")]);return t.parentIsSupSub?new Ce.MathNode("mrow",[h,l]):Ce.newDocumentFragment([h,l])}}),mn("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),re({type:"ordgroup",htmlBuilder:function(t,e){return t.semisimple?Xt.makeFragment(ue(t.body,e,!1)):Xt.makeSpan(["mord"],ue(t.body,e,!0),e)},mathmlBuilder:function(t,e){return Me(t.body,e,!0)}}),ne({type:"overline",names:["\\overline"],props:{numArgs:1},handler:function(t,e){var i=t.parser,n=e[0];return{type:"overline",mode:i.mode,body:n}},htmlBuilder:function(t,e){var i=ye(t.body,e.havingCrampedStyle()),n=Xt.makeLineSpan("overline-line",e),r=e.fontMetrics().defaultRuleThickness,s=Xt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:3*r},{type:"elem",elem:n},{type:"kern",size:r}]},e);return Xt.makeSpan(["mord","overline"],[s],e)},mathmlBuilder:function(t,e){var i=new Ce.MathNode("mo",[new Ce.TextNode("‾")]);i.setAttribute("stretchy","true");var n=new Ce.MathNode("mover",[Ae(t.body,e),i]);return n.setAttribute("accent","true"),n}}),ne({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var i=t.parser,n=e[0];return{type:"phantom",mode:i.mode,body:oe(n)}},htmlBuilder:function(t,e){var i=ue(t.body,e.withPhantom(),!1);return Xt.makeFragment(i)},mathmlBuilder:function(t,e){var i=Ne(t.body,e);return new Ce.MathNode("mphantom",i)}}),ne({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var i=t.parser,n=e[0];return{type:"hphantom",mode:i.mode,body:n}},htmlBuilder:function(t,e){var i=Xt.makeSpan([],[ye(t.body,e.withPhantom())]);if(i.height=0,i.depth=0,i.children)for(var n=0;n<i.children.length;n++)i.children[n].height=0,i.children[n].depth=0;return i=Xt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i}]},e),Xt.makeSpan(["mord"],[i],e)},mathmlBuilder:function(t,e){var i=Ne(oe(t.body),e),n=new Ce.MathNode("mphantom",i),r=new Ce.MathNode("mpadded",[n]);return r.setAttribute("height","0px"),r.setAttribute("depth","0px"),r}}),ne({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var i=t.parser,n=e[0];return{type:"vphantom",mode:i.mode,body:n}},htmlBuilder:function(t,e){var i=Xt.makeSpan(["inner"],[ye(t.body,e.withPhantom())]),n=Xt.makeSpan(["fix"],[]);return Xt.makeSpan(["mord","rlap"],[i,n],e)},mathmlBuilder:function(t,e){var i=Ne(oe(t.body),e),n=new Ce.MathNode("mphantom",i),r=new Ce.MathNode("mpadded",[n]);return r.setAttribute("width","0px"),r}}),ne({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler:function(t,e){var i=t.parser,n=ze(e[0],"size").value,r=e[1];return{type:"raisebox",mode:i.mode,dy:n,body:r}},htmlBuilder:function(t,e){var i=ye(t.body,e),n=Rt(t.dy,e);return Xt.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:i}]},e)},mathmlBuilder:function(t,e){var i=new Ce.MathNode("mpadded",[Ae(t.body,e)]),n=t.dy.number+t.dy.unit;return i.setAttribute("voffset",n),i}}),ne({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler:function(t,e,i){var n=t.parser,r=i[0],s=ze(e[0],"size"),o=ze(e[1],"size");return{type:"rule",mode:n.mode,shift:r&&ze(r,"size").value,width:s.value,height:o.value}},htmlBuilder:function(t,e){var i=Xt.makeSpan(["mord","rule"],[],e),n=Rt(t.width,e),r=Rt(t.height,e),s=t.shift?Rt(t.shift,e):0;return i.style.borderRightWidth=n+"em",i.style.borderTopWidth=r+"em",i.style.bottom=s+"em",i.width=n,i.height=r+s,i.depth=-s,i.maxFontSize=1.125*r*e.sizeMultiplier,i},mathmlBuilder:function(t,e){var i=Rt(t.width,e),n=Rt(t.height,e),r=t.shift?Rt(t.shift,e):0,s=e.color&&e.getColor()||"black",o=new Ce.MathNode("mspace");o.setAttribute("mathbackground",s),o.setAttribute("width",i+"em"),o.setAttribute("height",n+"em");var a=new Ce.MathNode("mpadded",[o]);return r>=0?a.setAttribute("height","+"+r+"em"):(a.setAttribute("height",r+"em"),a.setAttribute("depth","+"+-r+"em")),a.setAttribute("voffset",r+"em"),a}});var kn=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];ne({type:"sizing",names:kn,props:{numArgs:0,allowedInText:!0},handler:function(t,e){var i=t.breakOnTokenText,n=t.funcName,r=t.parser,s=r.parseExpression(!1,i);return{type:"sizing",mode:r.mode,size:kn.indexOf(n)+1,body:s}},htmlBuilder:function(t,e){var i=e.havingSize(t.size);return wn(t.body,i,e)},mathmlBuilder:function(t,e){var i=e.havingSize(t.size),n=Ne(t.body,i),r=new Ce.MathNode("mstyle",n);return r.setAttribute("mathsize",i.sizeMultiplier+"em"),r}}),ne({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:function(t,e,i){var n=t.parser,r=!1,s=!1,o=i[0]&&ze(i[0],"ordgroup");if(o)for(var a="",h=0;h<o.body.length;++h)if("t"===(a=o.body[h].text))r=!0;else{if("b"!==a){r=!1,s=!1;break}s=!0}else r=!0,s=!0;var l=e[0];return{type:"smash",mode:n.mode,body:l,smashHeight:r,smashDepth:s}},htmlBuilder:function(t,e){var i=Xt.makeSpan([],[ye(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return i;if(t.smashHeight&&(i.height=0,i.children))for(var n=0;n<i.children.length;n++)i.children[n].height=0;if(t.smashDepth&&(i.depth=0,i.children))for(var r=0;r<i.children.length;r++)i.children[r].depth=0;var s=Xt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i}]},e);return Xt.makeSpan(["mord"],[s],e)},mathmlBuilder:function(t,e){var i=new Ce.MathNode("mpadded",[Ae(t.body,e)]);return t.smashHeight&&i.setAttribute("height","0px"),t.smashDepth&&i.setAttribute("depth","0px"),i}}),ne({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler:function(t,e,i){var n=t.parser,r=i[0],s=e[0];return{type:"sqrt",mode:n.mode,body:s,index:r}},htmlBuilder:function(t,e){var i=ye(t.body,e.havingCrampedStyle());0===i.height&&(i.height=e.fontMetrics().xHeight),i=Xt.wrapFragment(i,e);var n=e.fontMetrics().defaultRuleThickness,r=n;e.style.id<y.TEXT.id&&(r=e.fontMetrics().xHeight);var s=n+r/4,o=i.height+i.depth+s+n,a=ki(o,e),h=a.span,l=a.ruleWidth,d=a.advanceWidth,c=h.height-l;c>i.height+i.depth+s&&(s=(s+c-i.height-i.depth)/2);var u=h.height-i.height-s-l;i.style.paddingLeft=d+"em";var p=Xt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i,wrapperClasses:["svg-align"]},{type:"kern",size:-(i.height+u)},{type:"elem",elem:h},{type:"kern",size:l}]},e);if(t.index){var m=e.havingStyle(y.SCRIPTSCRIPT),f=ye(t.index,m,e),g=.6*(p.height-p.depth),v=Xt.makeVList({positionType:"shift",positionData:-g,children:[{type:"elem",elem:f}]},e),x=Xt.makeSpan(["root"],[v]);return Xt.makeSpan(["mord","sqrt"],[x,p],e)}return Xt.makeSpan(["mord","sqrt"],[p],e)},mathmlBuilder:function(t,e){var i=t.body,n=t.index;return n?new Ce.MathNode("mroot",[Ae(i,e),Ae(n,e)]):new Ce.MathNode("msqrt",[Ae(i,e)])}});var _n={display:y.DISPLAY,text:y.TEXT,script:y.SCRIPT,scriptscript:y.SCRIPTSCRIPT};ne({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(t,e){var i=t.breakOnTokenText,n=t.funcName,r=t.parser,s=r.parseExpression(!0,i),o=n.slice(1,n.length-5);return{type:"styling",mode:r.mode,style:o,body:s}},htmlBuilder:function(t,e){var i=_n[t.style],n=e.havingStyle(i).withFont("");return wn(t.body,n,e)},mathmlBuilder:function(t,e){var i=_n[t.style],n=e.havingStyle(i),r=Ne(t.body,n),s=new Ce.MathNode("mstyle",r),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[t.style];return s.setAttribute("scriptlevel",o[0]),s.setAttribute("displaystyle",o[1]),s}});var Cn=function(t,e){var i=t.base;return i?"op"===i.type?i.limits&&(e.style.size===y.DISPLAY.size||i.alwaysHandleSupSub)?hn:null:"operatorname"===i.type?i.alwaysHandleSupSub&&(e.style.size===y.DISPLAY.size||i.limits)?bn:null:"accent"===i.type?h.isCharacterBox(i.base)?He:null:"horizBrace"===i.type&&!t.sub===i.isOver?nn:null:null};re({type:"supsub",htmlBuilder:function(t,e){var i=Cn(t,e);if(i)return i(t,e);var n,r,s,o=t.base,a=t.sup,l=t.sub,d=ye(o,e),c=e.fontMetrics(),u=0,p=0,m=o&&h.isCharacterBox(o);if(a){var f=e.havingStyle(e.style.sup());n=ye(a,f,e),m||(u=d.height-f.fontMetrics().supDrop*f.sizeMultiplier/e.sizeMultiplier)}if(l){var g=e.havingStyle(e.style.sub());r=ye(l,g,e),m||(p=d.depth+g.fontMetrics().subDrop*g.sizeMultiplier/e.sizeMultiplier)}s=e.style===y.DISPLAY?c.sup1:e.style.cramped?c.sup3:c.sup2;var v,x=e.sizeMultiplier,b=.5/c.ptPerEm/x+"em",w=null;if(r){var k=t.base&&"op"===t.base.type&&t.base.name&&("\\oiint"===t.base.name||"\\oiiint"===t.base.name);(d instanceof P||k)&&(w=-d.italic+"em")}if(n&&r){u=Math.max(u,s,n.depth+.25*c.xHeight),p=Math.max(p,c.sub2);var _=4*c.defaultRuleThickness;if(u-n.depth-(r.height-p)<_){p=_-(u-n.depth)+r.height;var C=.8*c.xHeight-(u-n.depth);C>0&&(u+=C,p-=C)}var D=[{type:"elem",elem:r,shift:p,marginRight:b,marginLeft:w},{type:"elem",elem:n,shift:-u,marginRight:b}];v=Xt.makeVList({positionType:"individualShift",children:D},e)}else if(r){p=Math.max(p,c.sub1,r.height-.8*c.xHeight);var E=[{type:"elem",elem:r,marginLeft:w,marginRight:b}];v=Xt.makeVList({positionType:"shift",positionData:p,children:E},e)}else{if(!n)throw new Error("supsub must have either sup or sub.");u=Math.max(u,s,n.depth+.25*c.xHeight),v=Xt.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:n,marginRight:b}]},e)}var S=ge(d,"right")||"mord";return Xt.makeSpan([S],[d,Xt.makeSpan(["msupsub"],[v])],e)},mathmlBuilder:function(t,e){var i,n=!1;t.base&&"horizBrace"===t.base.type&&!!t.sup===t.base.isOver&&(n=!0,i=t.base.isOver),!t.base||"op"!==t.base.type&&"operatorname"!==t.base.type||(t.base.parentIsSupSub=!0);var r,s=[Ae(t.base,e)];if(t.sub&&s.push(Ae(t.sub,e)),t.sup&&s.push(Ae(t.sup,e)),n)r=i?"mover":"munder";else if(t.sub)if(t.sup){var o=t.base;r=o&&"op"===o.type&&o.limits&&e.style===y.DISPLAY||o&&"operatorname"===o.type&&o.alwaysHandleSupSub&&(e.style===y.DISPLAY||o.limits)?"munderover":"msubsup"}else{var a=t.base;r=a&&"op"===a.type&&a.limits&&(e.style===y.DISPLAY||a.alwaysHandleSupSub)||a&&"operatorname"===a.type&&a.alwaysHandleSupSub&&(a.limits||e.style===y.DISPLAY)?"munder":"msub"}else{var h=t.base;r=h&&"op"===h.type&&h.limits&&(e.style===y.DISPLAY||h.alwaysHandleSupSub)||h&&"operatorname"===h.type&&h.alwaysHandleSupSub&&(h.limits||e.style===y.DISPLAY)?"mover":"msup"}return new Ce.MathNode(r,s)}}),re({type:"atom",htmlBuilder:function(t,e){return Xt.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder:function(t,e){var i=new Ce.MathNode("mo",[De(t.text,t.mode)]);if("bin"===t.family){var n=Se(t,e);"bold-italic"===n&&i.setAttribute("mathvariant",n)}else"punct"===t.family?i.setAttribute("separator","true"):"open"!==t.family&&"close"!==t.family||i.setAttribute("stretchy","false");return i}});var Dn={mi:"italic",mn:"normal",mtext:"normal"};re({type:"mathord",htmlBuilder:function(t,e){return Xt.makeOrd(t,e,"mathord")},mathmlBuilder:function(t,e){var i=new Ce.MathNode("mi",[De(t.text,t.mode,e)]),n=Se(t,e)||"italic";return n!==Dn[i.type]&&i.setAttribute("mathvariant",n),i}}),re({type:"textord",htmlBuilder:function(t,e){return Xt.makeOrd(t,e,"textord")},mathmlBuilder:function(t,e){var i,n=De(t.text,t.mode,e),r=Se(t,e)||"normal";return i="text"===t.mode?new Ce.MathNode("mtext",[n]):/[0-9]/.test(t.text)?new Ce.MathNode("mn",[n]):"\\prime"===t.text?new Ce.MathNode("mo",[n]):new Ce.MathNode("mi",[n]),r!==Dn[i.type]&&i.setAttribute("mathvariant",r),i}});var En={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Sn={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};re({type:"spacing",htmlBuilder:function(t,e){if(Sn.hasOwnProperty(t.text)){var i=Sn[t.text].className||"";if("text"===t.mode){var r=Xt.makeOrd(t,e,"textord");return r.classes.push(i),r}return Xt.makeSpan(["mspace",i],[Xt.mathsym(t.text,t.mode,e)],e)}if(En.hasOwnProperty(t.text))return Xt.makeSpan(["mspace",En[t.text]],[],e);throw new n('Unknown type of space "'+t.text+'"')},mathmlBuilder:function(t,e){if(!Sn.hasOwnProperty(t.text)){if(En.hasOwnProperty(t.text))return new Ce.MathNode("mspace");throw new n('Unknown type of space "'+t.text+'"')}return new Ce.MathNode("mtext",[new Ce.TextNode(" ")])}});var Nn=function(){var t=new Ce.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};re({type:"tag",mathmlBuilder:function(t,e){var i=new Ce.MathNode("mtable",[new Ce.MathNode("mtr",[Nn(),new Ce.MathNode("mtd",[Me(t.body,e)]),Nn(),new Ce.MathNode("mtd",[Me(t.tag,e)])])]);return i.setAttribute("width","100%"),i}});var Mn={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},An={"\\textbf":"textbf","\\textmd":"textmd"},Ln={"\\textit":"textit","\\textup":"textup"},Tn=function(t,e){var i=t.font;return i?Mn[i]?e.withTextFontFamily(Mn[i]):An[i]?e.withTextFontWeight(An[i]):e.withTextFontShape(Ln[i]):e};ne({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler:function(t,e){var i=t.parser,n=t.funcName,r=e[0];return{type:"text",mode:i.mode,body:oe(r),font:n}},htmlBuilder:function(t,e){var i=Tn(t,e),n=ue(t.body,i,!0);return Xt.makeSpan(["mord","text"],n,i)},mathmlBuilder:function(t,e){var i=Tn(t,e);return Me(t.body,i)}}),ne({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){return{type:"underline",mode:t.parser.mode,body:e[0]}},htmlBuilder:function(t,e){var i=ye(t.body,e),n=Xt.makeLineSpan("underline-line",e),r=e.fontMetrics().defaultRuleThickness,s=Xt.makeVList({positionType:"top",positionData:i.height,children:[{type:"kern",size:r},{type:"elem",elem:n},{type:"kern",size:3*r},{type:"elem",elem:i}]},e);return Xt.makeSpan(["mord","underline"],[s],e)},mathmlBuilder:function(t,e){var i=new Ce.MathNode("mo",[new Ce.TextNode("‾")]);i.setAttribute("stretchy","true");var n=new Ce.MathNode("munder",[Ae(t.body,e),i]);return n.setAttribute("accentunder","true"),n}}),ne({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler:function(t,e){return{type:"vcenter",mode:t.parser.mode,body:e[0]}},htmlBuilder:function(t,e){var i=ye(t.body,e),n=e.fontMetrics().axisHeight,r=.5*(i.height-n-(i.depth+n));return Xt.makeVList({positionType:"shift",positionData:r,children:[{type:"elem",elem:i}]},e)},mathmlBuilder:function(t,e){return new Ce.MathNode("mpadded",[Ae(t.body,e)],["vcenter"])}}),ne({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler:function(t,e,i){throw new n("\\verb ended by end of line instead of matching delimiter")},htmlBuilder:function(t,e){for(var i=Pn(t),n=[],r=e.havingStyle(e.style.text()),s=0;s<i.length;s++){var o=i[s];"~"===o&&(o="\\textasciitilde"),n.push(Xt.makeSymbol(o,"Typewriter-Regular",t.mode,r,["mord","texttt"]))}return Xt.makeSpan(["mord","text"].concat(r.sizingClasses(e)),Xt.tryCombineChars(n),r)},mathmlBuilder:function(t,e){var i=new Ce.TextNode(Pn(t)),n=new Ce.MathNode("mtext",[i]);return n.setAttribute("mathvariant","monospace"),n}});var Pn=function(t){return t.body.replace(/ /g,t.star?"␣":" ")},In=te,Bn=function(){function t(t,e,i){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=e,this.end=i}return t.range=function(e,i){return i?e&&e.loc&&i.loc&&e.loc.lexer===i.loc.lexer?new t(e.loc.lexer,e.loc.start,i.loc.end):null:e&&e.loc},t}(),On=function(){function t(t,e){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=e}return t.prototype.range=function(e,i){return new t(i,Bn.range(this,e))},t}(),Rn=new RegExp("[̀-ͯ]+$"),Fn=function(){function t(t,e){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=e,this.tokenRegex=new RegExp("([ \r\n\t]+)|\\\\(\n|[ \r\t]+\n?)[ \r\t]*|([!-\\[\\]-‧‪-퟿豈-￿][̀-ͯ]*|[\ud800-\udbff][\udc00-\udfff][̀-ͯ]*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|(\\\\[a-zA-Z@]+)[ \r\n\t]*|\\\\[^\ud800-\udfff])","g"),this.catcodes={"%":14,"~":13}}var e=t.prototype;return e.setCatcode=function(t,e){this.catcodes[t]=e},e.lex=function(){var t=this.input,e=this.tokenRegex.lastIndex;if(e===t.length)return new On("EOF",new Bn(this,e,e));var i=this.tokenRegex.exec(t);if(null===i||i.index!==e)throw new n("Unexpected character: '"+t[e]+"'",new On(t[e],new Bn(this,e,e+1)));var r=i[6]||i[3]||(i[2]?"\\ ":" ");if(14===this.catcodes[r]){var s=t.indexOf("\n",this.tokenRegex.lastIndex);return-1===s?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new On(r,new Bn(this,e,this.tokenRegex.lastIndex))},t}(),zn=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=e,this.builtins=t,this.undefStack=[]}var e=t.prototype;return e.beginGroup=function(){this.undefStack.push({})},e.endGroup=function(){if(0===this.undefStack.length)throw new n("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var e in t)t.hasOwnProperty(e)&&(void 0===t[e]?delete this.current[e]:this.current[e]=t[e])},e.has=function(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)},e.get=function(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]},e.set=function(t,e,i){if(void 0===i&&(i=!1),i){for(var n=0;n<this.undefStack.length;n++)delete this.undefStack[n][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=e)}else{var r=this.undefStack[this.undefStack.length-1];r&&!r.hasOwnProperty(t)&&(r[t]=this.current[t])}this.current[t]=e},t}(),qn={"\\relax":!0,"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},jn=function(){function t(t,e,i){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=e,this.expansionCount=0,this.feed(t),this.macros=new zn(pn,e.macros),this.mode=i,this.stack=[]}var e=t.prototype;return e.feed=function(t){this.lexer=new Fn(t,this.settings)},e.switchMode=function(t){this.mode=t},e.beginGroup=function(){this.macros.beginGroup()},e.endGroup=function(){this.macros.endGroup()},e.future=function(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]},e.popToken=function(){return this.future(),this.stack.pop()},e.pushToken=function(t){this.stack.push(t)},e.pushTokens=function(t){var e;(e=this.stack).push.apply(e,t)},e.scanArgument=function(t){var e,i,n;if(t){if(this.consumeSpaces(),"["!==this.future().text)return null;e=this.popToken();var r=this.consumeArg(["]"]);n=r.tokens,i=r.end}else{var s=this.consumeArg();n=s.tokens,e=s.start,i=s.end}return this.pushToken(new On("EOF",i.loc)),this.pushTokens(n),e.range(i,"")},e.consumeSpaces=function(){for(;" "===this.future().text;)this.stack.pop()},e.consumeArg=function(t){var e=[],i=t&&t.length>0;i||this.consumeSpaces();var r,s=this.future(),o=0,a=0;do{if(r=this.popToken(),e.push(r),"{"===r.text)++o;else if("}"===r.text){if(-1==--o)throw new n("Extra }",r)}else if("EOF"===r.text)throw new n("Unexpected end of input in a macro argument, expected '"+(t&&i?t[a]:"}")+"'",r);if(t&&i)if((0===o||1===o&&"{"===t[a])&&r.text===t[a]){if(++a===t.length){e.splice(-a,a);break}}else a=0}while(0!==o||i);return"{"===s.text&&"}"===e[e.length-1].text&&(e.pop(),e.shift()),e.reverse(),{tokens:e,start:s,end:r}},e.consumeArgs=function(t,e){if(e){if(e.length!==t+1)throw new n("The length of delimiters doesn't match the number of args!");for(var i=e[0],r=0;r<i.length;r++){var s=this.popToken();if(i[r]!==s.text)throw new n("Use of the macro doesn't match its definition",s)}}for(var o=[],a=0;a<t;a++)o.push(this.consumeArg(e&&e[a+1]).tokens);return o},e.expandOnce=function(t){var e=this.popToken(),i=e.text,r=e.noexpand?null:this._getExpansion(i);if(null==r||t&&r.unexpandable){if(t&&null==r&&"\\"===i[0]&&!this.isDefined(i))throw new n("Undefined control sequence: "+i);return this.pushToken(e),e}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new n("Too many expansions: infinite loop or need to increase maxExpand setting");var s=r.tokens,o=this.consumeArgs(r.numArgs,r.delimiters);if(r.numArgs)for(var a=(s=s.slice()).length-1;a>=0;--a){var h=s[a];if("#"===h.text){if(0===a)throw new n("Incomplete placeholder at end of macro body",h);if("#"===(h=s[--a]).text)s.splice(a+1,1);else{if(!/^[1-9]$/.test(h.text))throw new n("Not a valid argument number",h);var l;(l=s).splice.apply(l,[a,2].concat(o[+h.text-1]))}}}return this.pushTokens(s),s},e.expandAfterFuture=function(){return this.expandOnce(),this.future()},e.expandNextToken=function(){for(;;){var t=this.expandOnce();if(t instanceof On){if("\\relax"!==t.text&&!t.treatAsRelax)return this.stack.pop();this.stack.pop()}}throw new Error},e.expandMacro=function(t){return this.macros.has(t)?this.expandTokens([new On(t)]):void 0},e.expandTokens=function(t){var e=[],i=this.stack.length;for(this.pushTokens(t);this.stack.length>i;){var n=this.expandOnce(!0);n instanceof On&&(n.treatAsRelax&&(n.noexpand=!1,n.treatAsRelax=!1),e.push(this.stack.pop()))}return e},e.expandMacroAsText=function(t){var e=this.expandMacro(t);return e?e.map((function(t){return t.text})).join(""):e},e._getExpansion=function(t){var e=this.macros.get(t);if(null==e)return e;if(1===t.length){var i=this.lexer.catcodes[t];if(null!=i&&13!==i)return}var n="function"==typeof e?e(this):e;if("string"==typeof n){var r=0;if(-1!==n.indexOf("#"))for(var s=n.replace(/##/g,"");-1!==s.indexOf("#"+(r+1));)++r;for(var o=new Fn(n,this.settings),a=[],h=o.lex();"EOF"!==h.text;)a.push(h),h=o.lex();return a.reverse(),{tokens:a,numArgs:r}}return n},e.isDefined=function(t){return this.macros.has(t)||In.hasOwnProperty(t)||V.math.hasOwnProperty(t)||V.text.hasOwnProperty(t)||qn.hasOwnProperty(t)},e.isExpandable=function(t){var e=this.macros.get(t);return null!=e?"string"==typeof e||"function"==typeof e||!e.unexpandable:In.hasOwnProperty(t)&&!In[t].primitive},t}(),Hn={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"}},$n={"á":"á","à":"à","ä":"ä","ǟ":"ǟ","ã":"ã","ā":"ā","ă":"ă","ắ":"ắ","ằ":"ằ","ẵ":"ẵ","ǎ":"ǎ","â":"â","ấ":"ấ","ầ":"ầ","ẫ":"ẫ","ȧ":"ȧ","ǡ":"ǡ","å":"å","ǻ":"ǻ","ḃ":"ḃ","ć":"ć","č":"č","ĉ":"ĉ","ċ":"ċ","ď":"ď","ḋ":"ḋ","é":"é","è":"è","ë":"ë","ẽ":"ẽ","ē":"ē","ḗ":"ḗ","ḕ":"ḕ","ĕ":"ĕ","ě":"ě","ê":"ê","ế":"ế","ề":"ề","ễ":"ễ","ė":"ė","ḟ":"ḟ","ǵ":"ǵ","ḡ":"ḡ","ğ":"ğ","ǧ":"ǧ","ĝ":"ĝ","ġ":"ġ","ḧ":"ḧ","ȟ":"ȟ","ĥ":"ĥ","ḣ":"ḣ","í":"í","ì":"ì","ï":"ï","ḯ":"ḯ","ĩ":"ĩ","ī":"ī","ĭ":"ĭ","ǐ":"ǐ","î":"î","ǰ":"ǰ","ĵ":"ĵ","ḱ":"ḱ","ǩ":"ǩ","ĺ":"ĺ","ľ":"ľ","ḿ":"ḿ","ṁ":"ṁ","ń":"ń","ǹ":"ǹ","ñ":"ñ","ň":"ň","ṅ":"ṅ","ó":"ó","ò":"ò","ö":"ö","ȫ":"ȫ","õ":"õ","ṍ":"ṍ","ṏ":"ṏ","ȭ":"ȭ","ō":"ō","ṓ":"ṓ","ṑ":"ṑ","ŏ":"ŏ","ǒ":"ǒ","ô":"ô","ố":"ố","ồ":"ồ","ỗ":"ỗ","ȯ":"ȯ","ȱ":"ȱ","ő":"ő","ṕ":"ṕ","ṗ":"ṗ","ŕ":"ŕ","ř":"ř","ṙ":"ṙ","ś":"ś","ṥ":"ṥ","š":"š","ṧ":"ṧ","ŝ":"ŝ","ṡ":"ṡ","ẗ":"ẗ","ť":"ť","ṫ":"ṫ","ú":"ú","ù":"ù","ü":"ü","ǘ":"ǘ","ǜ":"ǜ","ǖ":"ǖ","ǚ":"ǚ","ũ":"ũ","ṹ":"ṹ","ū":"ū","ṻ":"ṻ","ŭ":"ŭ","ǔ":"ǔ","û":"û","ů":"ů","ű":"ű","ṽ":"ṽ","ẃ":"ẃ","ẁ":"ẁ","ẅ":"ẅ","ŵ":"ŵ","ẇ":"ẇ","ẘ":"ẘ","ẍ":"ẍ","ẋ":"ẋ","ý":"ý","ỳ":"ỳ","ÿ":"ÿ","ỹ":"ỹ","ȳ":"ȳ","ŷ":"ŷ","ẏ":"ẏ","ẙ":"ẙ","ź":"ź","ž":"ž","ẑ":"ẑ","ż":"ż","Á":"Á","À":"À","Ä":"Ä","Ǟ":"Ǟ","Ã":"Ã","Ā":"Ā","Ă":"Ă","Ắ":"Ắ","Ằ":"Ằ","Ẵ":"Ẵ","Ǎ":"Ǎ","Â":"Â","Ấ":"Ấ","Ầ":"Ầ","Ẫ":"Ẫ","Ȧ":"Ȧ","Ǡ":"Ǡ","Å":"Å","Ǻ":"Ǻ","Ḃ":"Ḃ","Ć":"Ć","Č":"Č","Ĉ":"Ĉ","Ċ":"Ċ","Ď":"Ď","Ḋ":"Ḋ","É":"É","È":"È","Ë":"Ë","Ẽ":"Ẽ","Ē":"Ē","Ḗ":"Ḗ","Ḕ":"Ḕ","Ĕ":"Ĕ","Ě":"Ě","Ê":"Ê","Ế":"Ế","Ề":"Ề","Ễ":"Ễ","Ė":"Ė","Ḟ":"Ḟ","Ǵ":"Ǵ","Ḡ":"Ḡ","Ğ":"Ğ","Ǧ":"Ǧ","Ĝ":"Ĝ","Ġ":"Ġ","Ḧ":"Ḧ","Ȟ":"Ȟ","Ĥ":"Ĥ","Ḣ":"Ḣ","Í":"Í","Ì":"Ì","Ï":"Ï","Ḯ":"Ḯ","Ĩ":"Ĩ","Ī":"Ī","Ĭ":"Ĭ","Ǐ":"Ǐ","Î":"Î","İ":"İ","Ĵ":"Ĵ","Ḱ":"Ḱ","Ǩ":"Ǩ","Ĺ":"Ĺ","Ľ":"Ľ","Ḿ":"Ḿ","Ṁ":"Ṁ","Ń":"Ń","Ǹ":"Ǹ","Ñ":"Ñ","Ň":"Ň","Ṅ":"Ṅ","Ó":"Ó","Ò":"Ò","Ö":"Ö","Ȫ":"Ȫ","Õ":"Õ","Ṍ":"Ṍ","Ṏ":"Ṏ","Ȭ":"Ȭ","Ō":"Ō","Ṓ":"Ṓ","Ṑ":"Ṑ","Ŏ":"Ŏ","Ǒ":"Ǒ","Ô":"Ô","Ố":"Ố","Ồ":"Ồ","Ỗ":"Ỗ","Ȯ":"Ȯ","Ȱ":"Ȱ","Ő":"Ő","Ṕ":"Ṕ","Ṗ":"Ṗ","Ŕ":"Ŕ","Ř":"Ř","Ṙ":"Ṙ","Ś":"Ś","Ṥ":"Ṥ","Š":"Š","Ṧ":"Ṧ","Ŝ":"Ŝ","Ṡ":"Ṡ","Ť":"Ť","Ṫ":"Ṫ","Ú":"Ú","Ù":"Ù","Ü":"Ü","Ǘ":"Ǘ","Ǜ":"Ǜ","Ǖ":"Ǖ","Ǚ":"Ǚ","Ũ":"Ũ","Ṹ":"Ṹ","Ū":"Ū","Ṻ":"Ṻ","Ŭ":"Ŭ","Ǔ":"Ǔ","Û":"Û","Ů":"Ů","Ű":"Ű","Ṽ":"Ṽ","Ẃ":"Ẃ","Ẁ":"Ẁ","Ẅ":"Ẅ","Ŵ":"Ŵ","Ẇ":"Ẇ","Ẍ":"Ẍ","Ẋ":"Ẋ","Ý":"Ý","Ỳ":"Ỳ","Ÿ":"Ÿ","Ỹ":"Ỹ","Ȳ":"Ȳ","Ŷ":"Ŷ","Ẏ":"Ẏ","Ź":"Ź","Ž":"Ž","Ẑ":"Ẑ","Ż":"Ż","ά":"ά","ὰ":"ὰ","ᾱ":"ᾱ","ᾰ":"ᾰ","έ":"έ","ὲ":"ὲ","ή":"ή","ὴ":"ὴ","ί":"ί","ὶ":"ὶ","ϊ":"ϊ","ΐ":"ΐ","ῒ":"ῒ","ῑ":"ῑ","ῐ":"ῐ","ό":"ό","ὸ":"ὸ","ύ":"ύ","ὺ":"ὺ","ϋ":"ϋ","ΰ":"ΰ","ῢ":"ῢ","ῡ":"ῡ","ῠ":"ῠ","ώ":"ώ","ὼ":"ὼ","Ύ":"Ύ","Ὺ":"Ὺ","Ϋ":"Ϋ","Ῡ":"Ῡ","Ῠ":"Ῠ","Ώ":"Ώ","Ὼ":"Ὼ"},Wn=function(){function t(t,e){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new jn(t,e,this.mode),this.settings=e,this.leftrightDepth=0}var e=t.prototype;return e.expect=function(t,e){if(void 0===e&&(e=!0),this.fetch().text!==t)throw new n("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());e&&this.consume()},e.consume=function(){this.nextToken=null},e.fetch=function(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken},e.switchMode=function(t){this.mode=t,this.gullet.switchMode(t)},e.parse=function(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t},e.parseExpression=function(e,i){for(var n=[];;){"math"===this.mode&&this.consumeSpaces();var r=this.fetch();if(-1!==t.endOfExpression.indexOf(r.text))break;if(i&&r.text===i)break;if(e&&In[r.text]&&In[r.text].infix)break;var s=this.parseAtom(i);if(!s)break;"internal"!==s.type&&n.push(s)}return"text"===this.mode&&this.formLigatures(n),this.handleInfixNodes(n)},e.handleInfixNodes=function(t){for(var e,i=-1,r=0;r<t.length;r++)if("infix"===t[r].type){if(-1!==i)throw new n("only one infix operator per group",t[r].token);i=r,e=t[r].replaceWith}if(-1!==i&&e){var s,o,a=t.slice(0,i),h=t.slice(i+1);return s=1===a.length&&"ordgroup"===a[0].type?a[0]:{type:"ordgroup",mode:this.mode,body:a},o=1===h.length&&"ordgroup"===h[0].type?h[0]:{type:"ordgroup",mode:this.mode,body:h},["\\\\abovefrac"===e?this.callFunction(e,[s,t[i],o],[]):this.callFunction(e,[s,o],[])]}return t},e.handleSupSubscript=function(t){var e=this.fetch(),i=e.text;this.consume(),this.consumeSpaces();var r=this.parseGroup(t);if(!r)throw new n("Expected group after '"+i+"'",e);return r},e.formatUnsupportedCmd=function(t){for(var e=[],i=0;i<t.length;i++)e.push({type:"textord",mode:"text",text:t[i]});var n={type:"text",mode:this.mode,body:e};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[n]}},e.parseAtom=function(t){var e,i,r=this.parseGroup("atom",t);if("text"===this.mode)return r;for(;;){this.consumeSpaces();var s=this.fetch();if("\\limits"===s.text||"\\nolimits"===s.text){if(r&&"op"===r.type){var o="\\limits"===s.text;r.limits=o,r.alwaysHandleSupSub=!0}else{if(!r||"operatorname"!==r.type)throw new n("Limit controls must follow a math operator",s);r.alwaysHandleSupSub&&(r.limits="\\limits"===s.text)}this.consume()}else if("^"===s.text){if(e)throw new n("Double superscript",s);e=this.handleSupSubscript("superscript")}else if("_"===s.text){if(i)throw new n("Double subscript",s);i=this.handleSupSubscript("subscript")}else{if("'"!==s.text)break;if(e)throw new n("Double superscript",s);var a={type:"textord",mode:this.mode,text:"\\prime"},h=[a];for(this.consume();"'"===this.fetch().text;)h.push(a),this.consume();"^"===this.fetch().text&&h.push(this.handleSupSubscript("superscript")),e={type:"ordgroup",mode:this.mode,body:h}}}return e||i?{type:"supsub",mode:this.mode,base:r,sup:e,sub:i}:r},e.parseFunction=function(t,e){var i=this.fetch(),r=i.text,s=In[r];if(!s)return null;if(this.consume(),e&&"atom"!==e&&!s.allowedInArgument)throw new n("Got function '"+r+"' with no arguments"+(e?" as "+e:""),i);if("text"===this.mode&&!s.allowedInText)throw new n("Can't use function '"+r+"' in text mode",i);if("math"===this.mode&&!1===s.allowedInMath)throw new n("Can't use function '"+r+"' in math mode",i);var o=this.parseArguments(r,s),a=o.args,h=o.optArgs;return this.callFunction(r,a,h,i,t)},e.callFunction=function(t,e,i,r,s){var o={funcName:t,parser:this,token:r,breakOnTokenText:s},a=In[t];if(a&&a.handler)return a.handler(o,e,i);throw new n("No function handler for "+t)},e.parseArguments=function(t,e){var i=e.numArgs+e.numOptionalArgs;if(0===i)return{args:[],optArgs:[]};for(var r=[],s=[],o=0;o<i;o++){var a=e.argTypes&&e.argTypes[o],h=o<e.numOptionalArgs;(e.primitive&&null==a||"sqrt"===e.type&&1===o&&null==s[0])&&(a="primitive");var l=this.parseGroupOfType("argument to '"+t+"'",a,h);if(h)s.push(l);else{if(null==l)throw new n("Null argument, please report this as a bug");r.push(l)}}return{args:r,optArgs:s}},e.parseGroupOfType=function(t,e,i){switch(e){case"color":return this.parseColorGroup(i);case"size":return this.parseSizeGroup(i);case"url":return this.parseUrlGroup(i);case"math":case"text":return this.parseArgumentGroup(i,e);case"hbox":var r=this.parseArgumentGroup(i,"text");return null!=r?{type:"styling",mode:r.mode,body:[r],style:"text"}:null;case"raw":var s=this.parseStringGroup("raw",i);return null!=s?{type:"raw",mode:"text",string:s.text}:null;case"primitive":if(i)throw new n("A primitive argument cannot be optional");var o=this.parseGroup(t);if(null==o)throw new n("Expected group as "+t,this.fetch());return o;case"original":case null:case void 0:return this.parseArgumentGroup(i);default:throw new n("Unknown group type as "+t,this.fetch())}},e.consumeSpaces=function(){for(;" "===this.fetch().text;)this.consume()},e.parseStringGroup=function(t,e){var i=this.gullet.scanArgument(e);if(null==i)return null;for(var n,r="";"EOF"!==(n=this.fetch()).text;)r+=n.text,this.consume();return this.consume(),i.text=r,i},e.parseRegexGroup=function(t,e){for(var i,r=this.fetch(),s=r,o="";"EOF"!==(i=this.fetch()).text&&t.test(o+i.text);)o+=(s=i).text,this.consume();if(""===o)throw new n("Invalid "+e+": '"+r.text+"'",r);return r.range(s,o)},e.parseColorGroup=function(t){var e=this.parseStringGroup("color",t);if(null==e)return null;var i=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(e.text);if(!i)throw new n("Invalid color: '"+e.text+"'",e);var r=i[0];return/^[0-9a-f]{6}$/i.test(r)&&(r="#"+r),{type:"color-token",mode:this.mode,color:r}},e.parseSizeGroup=function(t){var e,i=!1;if(this.gullet.consumeSpaces(),!(e=t||"{"===this.gullet.future().text?this.parseStringGroup("size",t):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;t||0!==e.text.length||(e.text="0pt",i=!0);var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e.text);if(!r)throw new n("Invalid size: '"+e.text+"'",e);var s={number:+(r[1]+r[2]),unit:r[3]};if(!Ot(s))throw new n("Invalid unit: '"+s.unit+"'",e);return{type:"size",mode:this.mode,value:s,isBlank:i}},e.parseUrlGroup=function(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var e=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),null==e)return null;var i=e.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:i}},e.parseArgumentGroup=function(t,e){var i=this.gullet.scanArgument(t);if(null==i)return null;var n=this.mode;e&&this.switchMode(e),this.gullet.beginGroup();var r=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var s={type:"ordgroup",mode:this.mode,loc:i.loc,body:r};return e&&this.switchMode(n),s},e.parseGroup=function(t,e){var i,r=this.fetch(),s=r.text;if("{"===s||"\\begingroup"===s){this.consume();var o="{"===s?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,o),h=this.fetch();this.expect(o),this.gullet.endGroup(),i={type:"ordgroup",mode:this.mode,loc:Bn.range(r,h),body:a,semisimple:"\\begingroup"===s||void 0}}else if(null==(i=this.parseFunction(e,t)||this.parseSymbol())&&"\\"===s[0]&&!qn.hasOwnProperty(s)){if(this.settings.throwOnError)throw new n("Undefined control sequence: "+s,r);i=this.formatUnsupportedCmd(s),this.consume()}return i},e.formLigatures=function(t){for(var e=t.length-1,i=0;i<e;++i){var n=t[i],r=n.text;"-"===r&&"-"===t[i+1].text&&(i+1<e&&"-"===t[i+2].text?(t.splice(i,3,{type:"textord",mode:"text",loc:Bn.range(n,t[i+2]),text:"---"}),e-=2):(t.splice(i,2,{type:"textord",mode:"text",loc:Bn.range(n,t[i+1]),text:"--"}),e-=1)),"'"!==r&&"`"!==r||t[i+1].text!==r||(t.splice(i,2,{type:"textord",mode:"text",loc:Bn.range(n,t[i+1]),text:r+r}),e-=1)}},e.parseSymbol=function(){var t=this.fetch(),e=t.text;if(/^\\verb[^a-zA-Z]/.test(e)){this.consume();var i=e.slice(5),r="*"===i.charAt(0);if(r&&(i=i.slice(1)),i.length<2||i.charAt(0)!==i.slice(-1))throw new n("\\verb assertion failed --\n                    please report what input caused this bug");return{type:"verb",mode:"text",body:i=i.slice(1,-1),star:r}}$n.hasOwnProperty(e[0])&&!V[this.mode][e[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+e[0]+'" used in math mode',t),e=$n[e[0]]+e.substr(1));var s,o=Rn.exec(e);if(o&&("i"===(e=e.substring(0,o.index))?e="ı":"j"===e&&(e="ȷ")),V[this.mode][e]){this.settings.strict&&"math"===this.mode&&Ct.indexOf(e)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+e[0]+'" used in math mode',t);var a,h=V[this.mode][e].group,l=Bn.range(t);if($.hasOwnProperty(h)){var d=h;a={type:"atom",mode:this.mode,family:d,loc:l,text:e}}else a={type:h,mode:this.mode,loc:l,text:e};s=a}else{if(!(e.charCodeAt(0)>=128))return null;this.settings.strict&&(w(e.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+e[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+e[0]+'" ('+e.charCodeAt(0)+")",t)),s={type:"textord",mode:"text",loc:Bn.range(t),text:e}}if(this.consume(),o)for(var c=0;c<o[0].length;c++){var u=o[0][c];if(!Hn[u])throw new n("Unknown accent ' "+u+"'",t);var p=Hn[u][this.mode];if(!p)throw new n("Accent "+u+" unsupported in "+this.mode+" mode",t);s={type:"accent",mode:this.mode,loc:Bn.range(t),label:p,isStretchy:!1,isShifty:!0,base:s}}return s},t}();Wn.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Un=function(t,e){if(!("string"==typeof t||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var i=new Wn(t,e);delete i.gullet.macros.current["\\df@tag"];var r=i.parse();if(delete i.gullet.macros.current["\\current@color"],delete i.gullet.macros.current["\\color"],i.gullet.macros.get("\\df@tag")){if(!e.displayMode)throw new n("\\tag works only in display equations");i.gullet.feed("\\df@tag"),r=[{type:"tag",mode:"text",body:r,tag:i.parse()}]}return r},Vn=function(t,e,i){e.textContent="";var n=Xn(t,i).toNode();e.appendChild(n)};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!=typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Vn=function(){throw new n("KaTeX doesn't work in quirks mode.")});var Gn=function(t,e,i){if(i.throwOnError||!(t instanceof n))throw t;var r=Xt.makeSpan(["katex-error"],[new P(e)]);return r.setAttribute("title",t.toString()),r.setAttribute("style","color:"+i.errorColor),r},Xn=function(t,e){var i=new l(e);try{return function(t,e,i){var n,r=Te(i);if("mathml"===i.output)return Le(t,e,r,i.displayMode,!0);if("html"===i.output){var s=be(t,r);n=Xt.makeSpan(["katex"],[s])}else{var o=Le(t,e,r,i.displayMode,!1),a=be(t,r);n=Xt.makeSpan(["katex"],[o,a])}return Pe(n,i)}(Un(t,i),t,i)}catch(e){return Gn(e,t,i)}},Yn={version:"0.13.11",render:Vn,renderToString:function(t,e){return Xn(t,e).toMarkup()},ParseError:n,__parse:function(t,e){var i=new l(e);return Un(t,i)},__renderToDomTree:Xn,__renderToHTMLTree:function(t,e){var i=new l(e);try{return function(t,e,i){var n=be(t,Te(i)),r=Xt.makeSpan(["katex"],[n]);return Pe(r,i)}(Un(t,i),0,i)}catch(e){return Gn(e,t,i)}},__setFontMetrics:function(t,e){F[t]=e},__defineSymbol:G,__defineMacro:mn,__domTree:{Span:M,Anchor:A,SymbolNode:P,SvgNode:I,PathNode:B,LineNode:O}};return e=e.default}()},t.exports=i()})),fi=mt((function(t,e){!function(t,e){function i(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var n=i(e);function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}
/*! markmap-common v0.1.5 | MIT License */class s{constructor(){this.listeners=[]}tap(t){return this.listeners.push(t),()=>this.revoke(t)}revoke(t){const e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}revokeAll(){this.listeners.splice(0)}call(...t){for(const e of this.listeners)e(...t)}}function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function a(t){return t.replace(/[&<"]/g,(t=>({"&":"&amp;","<":"&lt;",'"':"&quot;"}[t])))}function h(t){return t.replace(/<(\/script>)/g,"\\x3c$2")}function l(t,e){return`<${t}${e?Object.entries(e).map((([t,e])=>{if(null!=e&&!1!==e)return t=` ${a(t)}`,!0===e?t:`${t}="${a(e)}"`})).filter(Boolean).join(""):""}>`}function d(t){return`</${t}>`}function c(t,e,i){return null==e?l(t,i):l(t,i)+(e||"")+d(t)}function u(t,e){const i=e.map((t=>"function"==typeof t?t.toString():JSON.stringify(null!=t?t:null))).join(",");return`(${t.toString()})(${i})`}function p(t,e){return t.map((t=>{if("script"===t.type)return c("script","",t.data);if("iife"===t.type){const{fn:i,getParams:n}=t.data;return c("script",h(u(i,(null==n?void 0:n(e))||[])))}return""}))}function m(t){return t.map((t=>"stylesheet"===t.type?c("link",null,o({rel:"stylesheet"},t.data)):c("style",t.data)))}function f(t,{before:e,after:i}){return function(...n){const r={args:n};try{e&&e(r)}catch(t){}r.result=t(...n);try{i&&i(r)}catch(t){}return r.result}}function g(t){const e={};return function(...i){const n=`${i[0]}`;let r=e[n];return r||(r={value:t(...i)},e[n]=r),r.value}}function v(t,e,i){const n=document.createElement(t);return e&&Object.entries(e).forEach((([t,e])=>{n[t]=e})),i&&Object.entries(i).forEach((([t,e])=>{n.setAttribute(t,e)})),n}Math.random().toString(36).slice(2,8);const y=g((t=>{document.head.append(v("link",{rel:"preload",as:"script",href:t}))}));function x(t,e){if("script"===t.type)return new Promise(((e,i)=>{var n;document.head.append(v("script",o({},t.data,{onload:e,onerror:i}))),null!=(n=t.data)&&n.src||e()}));if("iife"===t.type){const{fn:i,getParams:n}=t.data;i(...(null==n?void 0:n(e))||[])}}async function b(t,e){const i=t.filter((t=>{var e;return"script"===t.type&&(null==(e=t.data)?void 0:e.src)}));i.length>1&&i.forEach((t=>y(t.data.src))),e=o({getMarkmap:()=>window.markmap},e);for(const i of t)await x(i,e)}const w='<!DOCTYPE html>\n<html>\n<head>\n<meta charset="UTF-8">\n<meta name="viewport" content="width=device-width, initial-scale=1.0">\n<meta http-equiv="X-UA-Compatible" content="ie=edge">\n<title>Markmap</title>\n<style>\n* {\n  margin: 0;\n  padding: 0;\n}\n#mindmap {\n  display: block;\n  width: 100vw;\n  height: 100vh;\n}\n</style>\n\x3c!--CSS--\x3e\n</head>\n<body>\n<svg id="mindmap"></svg>\n\x3c!--JS--\x3e\n</body>\n</html>\n',k=["https://cdn.jsdelivr.net/npm/d3@6.6.0","https://cdn.jsdelivr.net/npm/markmap-view@0.2.6"].map((t=>({type:"script",data:{src:t}})));function _(t,e,i){"function"==typeof i&&(i={getOptions:i}),i=r({baseJs:k},i);const{scripts:n,styles:s}=e,o=[...s?m(s):[]],a={getMarkmap:()=>window.markmap,getOptions:i.getOptions,data:t},h=[...p(i.baseJs),...p([...n||[],{type:"iife",data:{fn:(t,e,i)=>{const{Markmap:n}=t();window.mm=n.create("svg#mindmap",null==e?void 0:e(),i)},getParams:({getMarkmap:t,getOptions:e,data:i})=>[t,e,i]}}],a)];return w.replace("\x3c!--CSS--\x3e",(()=>o.join(""))).replace("\x3c!--JS--\x3e",(()=>h.join("")))}var C={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",GT:">",Gt:"≫",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",LT:"<",Lt:"≪",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"},D=Object.prototype.hasOwnProperty;function E(t,e){return!!t&&D.call(t,e)}function S(t){return E(C,t)?C[t]:t}var N=Object.prototype.hasOwnProperty;function M(t,e){return!!t&&N.call(t,e)}function A(t){return[].slice.call(arguments,1).forEach((function(e){if(e){if("object"!=typeof e)throw new TypeError(e+"must be object");Object.keys(e).forEach((function(i){t[i]=e[i]}))}})),t}var L=/\\([\\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function T(t){return t.indexOf("\\")<0?t:t.replace(L,"$1")}function P(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||65535==(65535&t)||65534==(65535&t)||t>=0&&t<=8||11===t||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function I(t){if(t>65535){var e=55296+((t-=65536)>>10),i=56320+(1023&t);return String.fromCharCode(e,i)}return String.fromCharCode(t)}var B=/&([a-z#][a-z0-9]{1,31});/gi,O=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;function R(t,e){var i=0,n=S(e);return e!==n?n:35===e.charCodeAt(0)&&O.test(e)&&P(i="x"===e[1].toLowerCase()?parseInt(e.slice(2),16):parseInt(e.slice(1),10))?I(i):t}function F(t){return t.indexOf("&")<0?t:t.replace(B,R)}var z=/[&<>"]/,q=/[&<>"]/g,j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function H(t){return j[t]}function $(t){return z.test(t)?t.replace(q,H):t}var W={};function U(t,e){return++e>=t.length-2?e:"paragraph_open"===t[e].type&&t[e].tight&&"inline"===t[e+1].type&&0===t[e+1].content.length&&"paragraph_close"===t[e+2].type&&t[e+2].tight?U(t,e+2):e}W.blockquote_open=function(){return"<blockquote>\n"},W.blockquote_close=function(t,e){return"</blockquote>"+V(t,e)},W.code=function(t,e){return t[e].block?"<pre><code>"+$(t[e].content)+"</code></pre>"+V(t,e):"<code>"+$(t[e].content)+"</code>"},W.fence=function(t,e,i,n,r){var s,o,a=t[e],h="",l=i.langPrefix;if(a.params){if(o=(s=a.params.split(/\s+/g)).join(" "),M(r.rules.fence_custom,s[0]))return r.rules.fence_custom[s[0]](t,e,i,n,r);h=' class="'+l+$(F(T(o)))+'"'}return"<pre><code"+h+">"+(i.highlight&&i.highlight.apply(i.highlight,[a.content].concat(s))||$(a.content))+"</code></pre>"+V(t,e)},W.fence_custom={},W.heading_open=function(t,e){return"<h"+t[e].hLevel+">"},W.heading_close=function(t,e){return"</h"+t[e].hLevel+">\n"},W.hr=function(t,e,i){return(i.xhtmlOut?"<hr />":"<hr>")+V(t,e)},W.bullet_list_open=function(){return"<ul>\n"},W.bullet_list_close=function(t,e){return"</ul>"+V(t,e)},W.list_item_open=function(){return"<li>"},W.list_item_close=function(){return"</li>\n"},W.ordered_list_open=function(t,e){var i=t[e];return"<ol"+(i.order>1?' start="'+i.order+'"':"")+">\n"},W.ordered_list_close=function(t,e){return"</ol>"+V(t,e)},W.paragraph_open=function(t,e){return t[e].tight?"":"<p>"},W.paragraph_close=function(t,e){var i=!(t[e].tight&&e&&"inline"===t[e-1].type&&!t[e-1].content);return(t[e].tight?"":"</p>")+(i?V(t,e):"")},W.link_open=function(t,e,i){var n=t[e].title?' title="'+$(F(t[e].title))+'"':"",r=i.linkTarget?' target="'+i.linkTarget+'"':"";return'<a href="'+$(t[e].href)+'"'+n+r+">"},W.link_close=function(){return"</a>"},W.image=function(t,e,i){var n=' src="'+$(t[e].src)+'"',r=t[e].title?' title="'+$(F(t[e].title))+'"':"";return"<img"+n+' alt="'+(t[e].alt?$(F(T(t[e].alt))):"")+'"'+r+(i.xhtmlOut?" /":"")+">"},W.table_open=function(){return"<table>\n"},W.table_close=function(){return"</table>\n"},W.thead_open=function(){return"<thead>\n"},W.thead_close=function(){return"</thead>\n"},W.tbody_open=function(){return"<tbody>\n"},W.tbody_close=function(){return"</tbody>\n"},W.tr_open=function(){return"<tr>"},W.tr_close=function(){return"</tr>\n"},W.th_open=function(t,e){var i=t[e];return"<th"+(i.align?' style="text-align:'+i.align+'"':"")+">"},W.th_close=function(){return"</th>"},W.td_open=function(t,e){var i=t[e];return"<td"+(i.align?' style="text-align:'+i.align+'"':"")+">"},W.td_close=function(){return"</td>"},W.strong_open=function(){return"<strong>"},W.strong_close=function(){return"</strong>"},W.em_open=function(){return"<em>"},W.em_close=function(){return"</em>"},W.del_open=function(){return"<del>"},W.del_close=function(){return"</del>"},W.ins_open=function(){return"<ins>"},W.ins_close=function(){return"</ins>"},W.mark_open=function(){return"<mark>"},W.mark_close=function(){return"</mark>"},W.sub=function(t,e){return"<sub>"+$(t[e].content)+"</sub>"},W.sup=function(t,e){return"<sup>"+$(t[e].content)+"</sup>"},W.hardbreak=function(t,e,i){return i.xhtmlOut?"<br />\n":"<br>\n"},W.softbreak=function(t,e,i){return i.breaks?i.xhtmlOut?"<br />\n":"<br>\n":"\n"},W.text=function(t,e){return $(t[e].content)},W.htmlblock=function(t,e){return t[e].content},W.htmltag=function(t,e){return t[e].content},W.abbr_open=function(t,e){return'<abbr title="'+$(F(t[e].title))+'">'},W.abbr_close=function(){return"</abbr>"},W.footnote_ref=function(t,e){var i=Number(t[e].id+1).toString(),n="fnref"+i;return t[e].subId>0&&(n+=":"+t[e].subId),'<sup class="footnote-ref"><a href="#fn'+i+'" id="'+n+'">['+i+"]</a></sup>"},W.footnote_block_open=function(t,e,i){return(i.xhtmlOut?'<hr class="footnotes-sep" />\n':'<hr class="footnotes-sep">\n')+'<section class="footnotes">\n<ol class="footnotes-list">\n'},W.footnote_block_close=function(){return"</ol>\n</section>\n"},W.footnote_open=function(t,e){return'<li id="fn'+Number(t[e].id+1).toString()+'"  class="footnote-item">'},W.footnote_close=function(){return"</li>\n"},W.footnote_anchor=function(t,e){var i="fnref"+Number(t[e].id+1).toString();return t[e].subId>0&&(i+=":"+t[e].subId),' <a href="#'+i+'" class="footnote-backref">↩</a>'},W.dl_open=function(){return"<dl>\n"},W.dt_open=function(){return"<dt>"},W.dd_open=function(){return"<dd>"},W.dl_close=function(){return"</dl>\n"},W.dt_close=function(){return"</dt>\n"},W.dd_close=function(){return"</dd>\n"};var V=W.getBreak=function(t,e){return(e=U(t,e))<t.length&&"list_item_close"===t[e].type?"":"\n"};function G(){this.rules=A({},W),this.getBreak=W.getBreak}function X(){this.__rules__=[],this.__cache__=null}function Y(t){t.inlineMode?t.tokens.push({type:"inline",content:t.src.replace(/\n/g," ").trim(),level:0,lines:[0,1],children:[]}):t.block.parse(t.src,t.options,t.env,t.tokens)}function Z(t,e,i,n,r){this.src=t,this.env=n,this.options=i,this.parser=e,this.tokens=r,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache=[],this.isInLabel=!1,this.linkLevel=0,this.linkContent="",this.labelUnmatchedScopes=0}function J(t,e){var i,n,r,s=-1,o=t.posMax,a=t.pos,h=t.isInLabel;if(t.isInLabel)return-1;if(t.labelUnmatchedScopes)return t.labelUnmatchedScopes--,-1;for(t.pos=e+1,t.isInLabel=!0,i=1;t.pos<o;){if(91===(r=t.src.charCodeAt(t.pos)))i++;else if(93===r&&0==--i){n=!0;break}t.parser.skipToken(t)}return n?(s=t.pos,t.labelUnmatchedScopes=0):t.labelUnmatchedScopes=i-1,t.pos=a,t.isInLabel=h,s}function K(t,e,i,n){var r,s,o,a,h,l;if(42!==t.charCodeAt(0))return-1;if(91!==t.charCodeAt(1))return-1;if(-1===t.indexOf("]:"))return-1;if((s=J(r=new Z(t,e,i,n,[]),1))<0||58!==t.charCodeAt(s+1))return-1;for(a=r.posMax,o=s+2;o<a&&10!==r.src.charCodeAt(o);o++);return h=t.slice(2,s),0===(l=t.slice(s+2,o).trim()).length?-1:(n.abbreviations||(n.abbreviations={}),void 0===n.abbreviations[":"+h]&&(n.abbreviations[":"+h]=l),o)}function Q(t){var e,i,n,r,s=t.tokens;if(!t.inlineMode)for(e=1,i=s.length-1;e<i;e++)if("paragraph_open"===s[e-1].type&&"inline"===s[e].type&&"paragraph_close"===s[e+1].type){for(n=s[e].content;n.length&&!((r=K(n,t.inline,t.options,t.env))<0);)n=n.slice(r).trim();s[e].content=n,n.length||(s[e-1].tight=!0,s[e+1].tight=!0)}}function tt(t){var e=F(t);try{e=decodeURI(e)}catch(t){}return encodeURI(e)}function et(t,e){var i,n,r,s=e,o=t.posMax;if(60===t.src.charCodeAt(e)){for(e++;e<o;){if(10===(i=t.src.charCodeAt(e)))return!1;if(62===i)return r=tt(T(t.src.slice(s+1,e))),!!t.parser.validateLink(r)&&(t.pos=e+1,t.linkContent=r,!0);92===i&&e+1<o?e+=2:e++}return!1}for(n=0;e<o&&32!==(i=t.src.charCodeAt(e))&&!(i<32||127===i);)if(92===i&&e+1<o)e+=2;else{if(40===i&&++n>1)break;if(41===i&&--n<0)break;e++}return s!==e&&(r=T(t.src.slice(s,e)),!!t.parser.validateLink(r)&&(t.linkContent=r,t.pos=e,!0))}function it(t,e){var i,n=e,r=t.posMax,s=t.src.charCodeAt(e);if(34!==s&&39!==s&&40!==s)return!1;for(e++,40===s&&(s=41);e<r;){if((i=t.src.charCodeAt(e))===s)return t.pos=e+1,t.linkContent=T(t.src.slice(n+1,e)),!0;92===i&&e+1<r?e+=2:e++}return!1}function nt(t){return t.trim().replace(/\s+/g," ").toUpperCase()}function rt(t,e,i,n){var r,s,o,a,h,l,d,c,u;if(91!==t.charCodeAt(0))return-1;if(-1===t.indexOf("]:"))return-1;if((s=J(r=new Z(t,e,i,n,[]),0))<0||58!==t.charCodeAt(s+1))return-1;for(a=r.posMax,o=s+2;o<a&&(32===(h=r.src.charCodeAt(o))||10===h);o++);if(!et(r,o))return-1;for(d=r.linkContent,l=o=r.pos,o+=1;o<a&&(32===(h=r.src.charCodeAt(o))||10===h);o++);for(o<a&&l!==o&&it(r,o)?(c=r.linkContent,o=r.pos):(c="",o=l);o<a&&32===r.src.charCodeAt(o);)o++;return o<a&&10!==r.src.charCodeAt(o)?-1:(u=nt(t.slice(1,s)),void 0===n.references[u]&&(n.references[u]={title:c,href:d}),o)}function st(t){var e,i,n,r,s=t.tokens;if(t.env.references=t.env.references||{},!t.inlineMode)for(e=1,i=s.length-1;e<i;e++)if("inline"===s[e].type&&"paragraph_open"===s[e-1].type&&"paragraph_close"===s[e+1].type){for(n=s[e].content;n.length&&!((r=rt(n,t.inline,t.options,t.env))<0);)n=n.slice(r).trim();s[e].content=n,n.length||(s[e-1].tight=!0,s[e+1].tight=!0)}}function ot(t){var e,i,n,r=t.tokens;for(i=0,n=r.length;i<n;i++)"inline"===(e=r[i]).type&&t.inline.parse(e.content,t.options,t.env,e.children)}function at(t){var e,i,n,r,s,o,a,h,l,d=0,c=!1,u={};if(t.env.footnotes&&(t.tokens=t.tokens.filter((function(t){return"footnote_reference_open"===t.type?(c=!0,h=[],l=t.label,!1):"footnote_reference_close"===t.type?(c=!1,u[":"+l]=h,!1):(c&&h.push(t),!c)})),t.env.footnotes.list)){for(o=t.env.footnotes.list,t.tokens.push({type:"footnote_block_open",level:d++}),e=0,i=o.length;e<i;e++){for(t.tokens.push({type:"footnote_open",id:e,level:d++}),o[e].tokens?((a=[]).push({type:"paragraph_open",tight:!1,level:d++}),a.push({type:"inline",content:"",level:d,children:o[e].tokens}),a.push({type:"paragraph_close",tight:!1,level:--d})):o[e].label&&(a=u[":"+o[e].label]),t.tokens=t.tokens.concat(a),s="paragraph_close"===t.tokens[t.tokens.length-1].type?t.tokens.pop():null,r=o[e].count>0?o[e].count:1,n=0;n<r;n++)t.tokens.push({type:"footnote_anchor",id:e,subId:n,level:d});s&&t.tokens.push(s),t.tokens.push({type:"footnote_close",level:--d})}t.tokens.push({type:"footnote_block_close",level:--d})}}G.prototype.renderInline=function(t,e,i){for(var n=this.rules,r=t.length,s=0,o="";r--;)o+=n[t[s].type](t,s++,e,i,this);return o},G.prototype.render=function(t,e,i){for(var n=this.rules,r=t.length,s=-1,o="";++s<r;)"inline"===t[s].type?o+=this.renderInline(t[s].children,e,i):o+=n[t[s].type](t,s,e,i,this);return o},X.prototype.__find__=function(t){for(var e=this.__rules__.length,i=-1;e--;)if(this.__rules__[++i].name===t)return i;return-1},X.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach((function(t){t.enabled&&t.alt.forEach((function(t){e.indexOf(t)<0&&e.push(t)}))})),t.__cache__={},e.forEach((function(e){t.__cache__[e]=[],t.__rules__.forEach((function(i){i.enabled&&(e&&i.alt.indexOf(e)<0||t.__cache__[e].push(i.fn))}))}))},X.prototype.at=function(t,e,i){var n=this.__find__(t),r=i||{};if(-1===n)throw new Error("Parser rule not found: "+t);this.__rules__[n].fn=e,this.__rules__[n].alt=r.alt||[],this.__cache__=null},X.prototype.before=function(t,e,i,n){var r=this.__find__(t),s=n||{};if(-1===r)throw new Error("Parser rule not found: "+t);this.__rules__.splice(r,0,{name:e,enabled:!0,fn:i,alt:s.alt||[]}),this.__cache__=null},X.prototype.after=function(t,e,i,n){var r=this.__find__(t),s=n||{};if(-1===r)throw new Error("Parser rule not found: "+t);this.__rules__.splice(r+1,0,{name:e,enabled:!0,fn:i,alt:s.alt||[]}),this.__cache__=null},X.prototype.push=function(t,e,i){var n=i||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:n.alt||[]}),this.__cache__=null},X.prototype.enable=function(t,e){t=Array.isArray(t)?t:[t],e&&this.__rules__.forEach((function(t){t.enabled=!1})),t.forEach((function(t){var e=this.__find__(t);if(e<0)throw new Error("Rules manager: invalid rule name "+t);this.__rules__[e].enabled=!0}),this),this.__cache__=null},X.prototype.disable=function(t){(t=Array.isArray(t)?t:[t]).forEach((function(t){var e=this.__find__(t);if(e<0)throw new Error("Rules manager: invalid rule name "+t);this.__rules__[e].enabled=!1}),this),this.__cache__=null},X.prototype.getRules=function(t){return null===this.__cache__&&this.__compile__(),this.__cache__[t]||[]},Z.prototype.pushPending=function(){this.tokens.push({type:"text",content:this.pending,level:this.pendingLevel}),this.pending=""},Z.prototype.push=function(t){this.pending&&this.pushPending(),this.tokens.push(t),this.pendingLevel=this.level},Z.prototype.cacheSet=function(t,e){for(var i=this.cache.length;i<=t;i++)this.cache.push(0);this.cache[t]=e},Z.prototype.cacheGet=function(t){return t<this.cache.length?this.cache[t]:0};var ht=" \n()[]'\".,!?-";function lt(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}function dt(t){var e,i,n,r,s,o,a,h,l,d,c,u,p=t.tokens;if(t.env.abbreviations)for(t.env.abbrRegExp||(u="(^|["+ht.split("").map(lt).join("")+"])("+Object.keys(t.env.abbreviations).map((function(t){return t.substr(1)})).sort((function(t,e){return e.length-t.length})).map(lt).join("|")+")($|["+ht.split("").map(lt).join("")+"])",t.env.abbrRegExp=new RegExp(u,"g")),d=t.env.abbrRegExp,i=0,n=p.length;i<n;i++)if("inline"===p[i].type)for(e=(r=p[i].children).length-1;e>=0;e--)if("text"===(s=r[e]).type){for(h=0,o=s.content,d.lastIndex=0,l=s.level,a=[];c=d.exec(o);)d.lastIndex>h&&a.push({type:"text",content:o.slice(h,c.index+c[1].length),level:l}),a.push({type:"abbr_open",title:t.env.abbreviations[":"+c[2]],level:l++}),a.push({type:"text",content:c[2],level:l}),a.push({type:"abbr_close",level:--l}),h=d.lastIndex-c[3].length;a.length&&(h<o.length&&a.push({type:"text",content:o.slice(h),level:l}),p[i].children=r=[].concat(r.slice(0,e),a,r.slice(e+1)))}}var ct=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,ut=/\((c|tm|r|p)\)/gi,pt={c:"©",r:"®",p:"§",tm:"™"};function mt(t){return t.indexOf("(")<0?t:t.replace(ut,(function(t,e){return pt[e.toLowerCase()]}))}function ft(t){var e,i,n,r,s;if(t.options.typographer)for(s=t.tokens.length-1;s>=0;s--)if("inline"===t.tokens[s].type)for(e=(r=t.tokens[s].children).length-1;e>=0;e--)"text"===(i=r[e]).type&&(n=mt(n=i.content),ct.test(n)&&(n=n.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1—$2").replace(/(^|\s)--(\s|$)/gm,"$1–$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1–$2")),i.content=n)}var gt=/['"]/,vt=/['"]/g,yt=/[-\s()\[\]]/,xt="’";function bt(t,e){return!(e<0||e>=t.length||yt.test(t[e]))}function wt(t,e,i){return t.substr(0,e)+i+t.substr(e+1)}function kt(t){var e,i,n,r,s,o,a,h,l,d,c,u,p,m,f,g,v;if(t.options.typographer)for(v=[],f=t.tokens.length-1;f>=0;f--)if("inline"===t.tokens[f].type)for(g=t.tokens[f].children,v.length=0,e=0;e<g.length;e++)if("text"===(i=g[e]).type&&!gt.test(i.text)){for(a=g[e].level,p=v.length-1;p>=0&&!(v[p].level<=a);p--);v.length=p+1,s=0,o=(n=i.content).length;t:for(;s<o&&(vt.lastIndex=s,r=vt.exec(n));)if(h=!bt(n,r.index-1),s=r.index+1,m="'"===r[0],(l=!bt(n,s))||h){if(c=!l,u=!h)for(p=v.length-1;p>=0&&(d=v[p],!(v[p].level<a));p--)if(d.single===m&&v[p].level===a){d=v[p],m?(g[d.token].content=wt(g[d.token].content,d.pos,t.options.quotes[2]),i.content=wt(i.content,r.index,t.options.quotes[3])):(g[d.token].content=wt(g[d.token].content,d.pos,t.options.quotes[0]),i.content=wt(i.content,r.index,t.options.quotes[1])),v.length=p;continue t}c?v.push({token:e,pos:r.index,single:m,level:a}):u&&m&&(i.content=wt(i.content,r.index,xt))}else m&&(i.content=wt(i.content,r.index,xt))}}var _t=[["block",Y],["abbr",Q],["references",st],["inline",ot],["footnote_tail",at],["abbr2",dt],["replacements",ft],["smartquotes",kt]];function Ct(){this.options={},this.ruler=new X;for(var t=0;t<_t.length;t++)this.ruler.push(_t[t][0],_t[t][1])}function Dt(t,e,i,n,r){var s,o,a,h,l,d,c;for(this.src=t,this.parser=e,this.options=i,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.parentType="root",this.ddIndent=-1,this.level=0,this.result="",d=0,c=!1,a=h=d=0,l=(o=this.src).length;h<l;h++){if(s=o.charCodeAt(h),!c){if(32===s){d++;continue}c=!0}10!==s&&h!==l-1||(10!==s&&h++,this.bMarks.push(a),this.eMarks.push(h),this.tShift.push(d),c=!1,d=0,a=h+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.lineMax=this.bMarks.length-1}function Et(t,e,i){var n,r;if(t.tShift[e]-t.blkIndent<4)return!1;for(r=n=e+1;n<i;)if(t.isEmpty(n))n++;else{if(!(t.tShift[n]-t.blkIndent>=4))break;r=++n}return t.line=n,t.tokens.push({type:"code",content:t.getLines(e,r,4+t.blkIndent,!0),block:!0,lines:[e,t.line],level:t.level}),!0}function St(t,e,i,n){var r,s,o,a,h,l=!1,d=t.bMarks[e]+t.tShift[e],c=t.eMarks[e];if(d+3>c)return!1;if(126!==(r=t.src.charCodeAt(d))&&96!==r)return!1;if(h=d,(s=(d=t.skipChars(d,r))-h)<3)return!1;if((o=t.src.slice(d,c).trim()).indexOf("`")>=0)return!1;if(n)return!0;for(a=e;!(++a>=i||(d=h=t.bMarks[a]+t.tShift[a])<(c=t.eMarks[a])&&t.tShift[a]<t.blkIndent);)if(t.src.charCodeAt(d)===r&&!(t.tShift[a]-t.blkIndent>=4||(d=t.skipChars(d,r))-h<s||(d=t.skipSpaces(d))<c)){l=!0;break}return s=t.tShift[e],t.line=a+(l?1:0),t.tokens.push({type:"fence",params:o,content:t.getLines(e+1,a,s,!0),lines:[e,t.line],level:t.level}),!0}function Nt(t,e,i,n){var r,s,o,a,h,l,d,c,u,p,m,f=t.bMarks[e]+t.tShift[e],g=t.eMarks[e];if(f>g)return!1;if(62!==t.src.charCodeAt(f++))return!1;if(t.level>=t.options.maxNesting)return!1;if(n)return!0;for(32===t.src.charCodeAt(f)&&f++,h=t.blkIndent,t.blkIndent=0,a=[t.bMarks[e]],t.bMarks[e]=f,s=(f=f<g?t.skipSpaces(f):f)>=g,o=[t.tShift[e]],t.tShift[e]=f-t.bMarks[e],c=t.parser.ruler.getRules("blockquote"),r=e+1;r<i&&!((f=t.bMarks[r]+t.tShift[r])>=(g=t.eMarks[r]));r++)if(62!==t.src.charCodeAt(f++)){if(s)break;for(m=!1,u=0,p=c.length;u<p;u++)if(c[u](t,r,i,!0)){m=!0;break}if(m)break;a.push(t.bMarks[r]),o.push(t.tShift[r]),t.tShift[r]=-1337}else 32===t.src.charCodeAt(f)&&f++,a.push(t.bMarks[r]),t.bMarks[r]=f,s=(f=f<g?t.skipSpaces(f):f)>=g,o.push(t.tShift[r]),t.tShift[r]=f-t.bMarks[r];for(l=t.parentType,t.parentType="blockquote",t.tokens.push({type:"blockquote_open",lines:d=[e,0],level:t.level++}),t.parser.tokenize(t,e,r),t.tokens.push({type:"blockquote_close",level:--t.level}),t.parentType=l,d[1]=t.line,u=0;u<o.length;u++)t.bMarks[u+e]=a[u],t.tShift[u+e]=o[u];return t.blkIndent=h,!0}function Mt(t,e,i,n){var r,s,o,a=t.bMarks[e],h=t.eMarks[e];if((a+=t.tShift[e])>h)return!1;if(42!==(r=t.src.charCodeAt(a++))&&45!==r&&95!==r)return!1;for(s=1;a<h;){if((o=t.src.charCodeAt(a++))!==r&&32!==o)return!1;o===r&&s++}return!(s<3||(n||(t.line=e+1,t.tokens.push({type:"hr",lines:[e,t.line],level:t.level})),0))}function At(t,e){var i,n,r;return(n=t.bMarks[e]+t.tShift[e])>=(r=t.eMarks[e])||42!==(i=t.src.charCodeAt(n++))&&45!==i&&43!==i||n<r&&32!==t.src.charCodeAt(n)?-1:n}function Lt(t,e){var i,n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];if(n+1>=r)return-1;if((i=t.src.charCodeAt(n++))<48||i>57)return-1;for(;;){if(n>=r)return-1;if(!((i=t.src.charCodeAt(n++))>=48&&i<=57)){if(41===i||46===i)break;return-1}}return n<r&&32!==t.src.charCodeAt(n)?-1:n}function Tt(t,e){var i,n,r=t.level+2;for(i=e+2,n=t.tokens.length-2;i<n;i++)t.tokens[i].level===r&&"paragraph_open"===t.tokens[i].type&&(t.tokens[i+2].tight=!0,t.tokens[i].tight=!0,i+=2)}function Pt(t,e,i,n){var r,s,o,a,h,l,d,c,u,p,m,f,g,v,y,x,b,w,k,_,C,D=!0;if((c=Lt(t,e))>=0)f=!0;else{if(!((c=At(t,e))>=0))return!1;f=!1}if(t.level>=t.options.maxNesting)return!1;if(m=t.src.charCodeAt(c-1),n)return!0;for(v=t.tokens.length,f?(d=t.bMarks[e]+t.tShift[e],p=Number(t.src.substr(d,c-d-1)),t.tokens.push({type:"ordered_list_open",order:p,lines:x=[e,0],level:t.level++})):t.tokens.push({type:"bullet_list_open",lines:x=[e,0],level:t.level++}),r=e,y=!1,w=t.parser.ruler.getRules("list");!(!(r<i)||((u=(g=t.skipSpaces(c))>=t.eMarks[r]?1:g-c)>4&&(u=1),u<1&&(u=1),s=c-t.bMarks[r]+u,t.tokens.push({type:"list_item_open",lines:b=[e,0],level:t.level++}),a=t.blkIndent,h=t.tight,o=t.tShift[e],l=t.parentType,t.tShift[e]=g-t.bMarks[e],t.blkIndent=s,t.tight=!0,t.parentType="list",t.parser.tokenize(t,e,i,!0),t.tight&&!y||(D=!1),y=t.line-e>1&&t.isEmpty(t.line-1),t.blkIndent=a,t.tShift[e]=o,t.tight=h,t.parentType=l,t.tokens.push({type:"list_item_close",level:--t.level}),r=e=t.line,b[1]=r,g=t.bMarks[e],r>=i)||t.isEmpty(r)||t.tShift[r]<t.blkIndent);){for(C=!1,k=0,_=w.length;k<_;k++)if(w[k](t,r,i,!0)){C=!0;break}if(C)break;if(f){if((c=Lt(t,r))<0)break}else if((c=At(t,r))<0)break;if(m!==t.src.charCodeAt(c-1))break}return t.tokens.push({type:f?"ordered_list_close":"bullet_list_close",level:--t.level}),x[1]=r,t.line=r,D&&Tt(t,v),!0}function It(t,e,i,n){var r,s,o,a,h,l=t.bMarks[e]+t.tShift[e],d=t.eMarks[e];if(l+4>d)return!1;if(91!==t.src.charCodeAt(l))return!1;if(94!==t.src.charCodeAt(l+1))return!1;if(t.level>=t.options.maxNesting)return!1;for(a=l+2;a<d;a++){if(32===t.src.charCodeAt(a))return!1;if(93===t.src.charCodeAt(a))break}return!(a===l+2||a+1>=d||58!==t.src.charCodeAt(++a)||(n||(a++,t.env.footnotes||(t.env.footnotes={}),t.env.footnotes.refs||(t.env.footnotes.refs={}),h=t.src.slice(l+2,a-2),t.env.footnotes.refs[":"+h]=-1,t.tokens.push({type:"footnote_reference_open",label:h,level:t.level++}),r=t.bMarks[e],s=t.tShift[e],o=t.parentType,t.tShift[e]=t.skipSpaces(a)-a,t.bMarks[e]=a,t.blkIndent+=4,t.parentType="footnote",t.tShift[e]<t.blkIndent&&(t.tShift[e]+=t.blkIndent,t.bMarks[e]-=t.blkIndent),t.parser.tokenize(t,e,i,!0),t.parentType=o,t.blkIndent-=4,t.tShift[e]=s,t.bMarks[e]=r,t.tokens.push({type:"footnote_reference_close",level:--t.level})),0))}function Bt(t,e,i,n){var r,s,o,a=t.bMarks[e]+t.tShift[e],h=t.eMarks[e];if(a>=h)return!1;if(35!==(r=t.src.charCodeAt(a))||a>=h)return!1;for(s=1,r=t.src.charCodeAt(++a);35===r&&a<h&&s<=6;)s++,r=t.src.charCodeAt(++a);return!(s>6||a<h&&32!==r||(n||(h=t.skipCharsBack(h,32,a),(o=t.skipCharsBack(h,35,a))>a&&32===t.src.charCodeAt(o-1)&&(h=o),t.line=e+1,t.tokens.push({type:"heading_open",hLevel:s,lines:[e,t.line],level:t.level}),a<h&&t.tokens.push({type:"inline",content:t.src.slice(a,h).trim(),level:t.level+1,lines:[e,t.line],children:[]}),t.tokens.push({type:"heading_close",hLevel:s,level:t.level})),0))}function Ot(t,e,i){var n,r,s,o=e+1;return!(o>=i||t.tShift[o]<t.blkIndent||t.tShift[o]-t.blkIndent>3||(r=t.bMarks[o]+t.tShift[o])>=(s=t.eMarks[o])||45!==(n=t.src.charCodeAt(r))&&61!==n||(r=t.skipChars(r,n),(r=t.skipSpaces(r))<s||(r=t.bMarks[e]+t.tShift[e],t.line=o+1,t.tokens.push({type:"heading_open",hLevel:61===n?1:2,lines:[e,t.line],level:t.level}),t.tokens.push({type:"inline",content:t.src.slice(r,t.eMarks[e]).trim(),level:t.level+1,lines:[e,t.line-1],children:[]}),t.tokens.push({type:"heading_close",hLevel:61===n?1:2,level:t.level}),0)))}Ct.prototype.process=function(t){var e,i,n;for(e=0,i=(n=this.ruler.getRules("")).length;e<i;e++)n[e](t)},Dt.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]},Dt.prototype.skipEmptyLines=function(t){for(var e=this.lineMax;t<e&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t},Dt.prototype.skipSpaces=function(t){for(var e=this.src.length;t<e&&32===this.src.charCodeAt(t);t++);return t},Dt.prototype.skipChars=function(t,e){for(var i=this.src.length;t<i&&this.src.charCodeAt(t)===e;t++);return t},Dt.prototype.skipCharsBack=function(t,e,i){if(t<=i)return t;for(;t>i;)if(e!==this.src.charCodeAt(--t))return t+1;return t},Dt.prototype.getLines=function(t,e,i,n){var r,s,o,a,h,l=t;if(t>=e)return"";if(l+1===e)return s=this.bMarks[l]+Math.min(this.tShift[l],i),o=n?this.eMarks[l]+1:this.eMarks[l],this.src.slice(s,o);for(a=new Array(e-t),r=0;l<e;l++,r++)(h=this.tShift[l])>i&&(h=i),h<0&&(h=0),s=this.bMarks[l]+h,o=l+1<e||n?this.eMarks[l]+1:this.eMarks[l],a[r]=this.src.slice(s,o);return a.join("")};var Rt={};["article","aside","button","blockquote","body","canvas","caption","col","colgroup","dd","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","li","map","object","ol","output","p","pre","progress","script","section","style","table","tbody","td","textarea","tfoot","th","tr","thead","ul","video"].forEach((function(t){Rt[t]=!0}));var Ft=/^<([a-zA-Z]{1,15})[\s\/>]/,zt=/^<\/([a-zA-Z]{1,15})[\s>]/;function qt(t){var e=32|t;return e>=97&&e<=122}function jt(t,e,i,n){var r,s,o,a=t.bMarks[e],h=t.eMarks[e],l=t.tShift[e];if(a+=l,!t.options.html)return!1;if(l>3||a+2>=h)return!1;if(60!==t.src.charCodeAt(a))return!1;if(33===(r=t.src.charCodeAt(a+1))||63===r){if(n)return!0}else{if(47!==r&&!qt(r))return!1;if(47===r){if(!(s=t.src.slice(a,h).match(zt)))return!1}else if(!(s=t.src.slice(a,h).match(Ft)))return!1;if(!0!==Rt[s[1].toLowerCase()])return!1;if(n)return!0}for(o=e+1;o<t.lineMax&&!t.isEmpty(o);)o++;return t.line=o,t.tokens.push({type:"htmlblock",level:t.level,lines:[e,t.line],content:t.getLines(e,o,0,!0)}),!0}function Ht(t,e){var i=t.bMarks[e]+t.blkIndent,n=t.eMarks[e];return t.src.substr(i,n-i)}function $t(t,e,i,n){var r,s,o,a,h,l,d,c,u,p,m;if(e+2>i)return!1;if(h=e+1,t.tShift[h]<t.blkIndent)return!1;if((o=t.bMarks[h]+t.tShift[h])>=t.eMarks[h])return!1;if(124!==(r=t.src.charCodeAt(o))&&45!==r&&58!==r)return!1;if(s=Ht(t,e+1),!/^[-:| ]+$/.test(s))return!1;if((l=s.split("|"))<=2)return!1;for(c=[],a=0;a<l.length;a++){if(!(u=l[a].trim())){if(0===a||a===l.length-1)continue;return!1}if(!/^:?-+:?$/.test(u))return!1;58===u.charCodeAt(u.length-1)?c.push(58===u.charCodeAt(0)?"center":"right"):58===u.charCodeAt(0)?c.push("left"):c.push("")}if(-1===(s=Ht(t,e).trim()).indexOf("|"))return!1;if(l=s.replace(/^\||\|$/g,"").split("|"),c.length!==l.length)return!1;if(n)return!0;for(t.tokens.push({type:"table_open",lines:p=[e,0],level:t.level++}),t.tokens.push({type:"thead_open",lines:[e,e+1],level:t.level++}),t.tokens.push({type:"tr_open",lines:[e,e+1],level:t.level++}),a=0;a<l.length;a++)t.tokens.push({type:"th_open",align:c[a],lines:[e,e+1],level:t.level++}),t.tokens.push({type:"inline",content:l[a].trim(),lines:[e,e+1],level:t.level,children:[]}),t.tokens.push({type:"th_close",level:--t.level});for(t.tokens.push({type:"tr_close",level:--t.level}),t.tokens.push({type:"thead_close",level:--t.level}),t.tokens.push({type:"tbody_open",lines:m=[e+2,0],level:t.level++}),h=e+2;h<i&&!(t.tShift[h]<t.blkIndent)&&-1!==(s=Ht(t,h).trim()).indexOf("|");h++){for(l=s.replace(/^\||\|$/g,"").split("|"),t.tokens.push({type:"tr_open",level:t.level++}),a=0;a<l.length;a++)t.tokens.push({type:"td_open",align:c[a],level:t.level++}),d=l[a].substring(124===l[a].charCodeAt(0)?1:0,124===l[a].charCodeAt(l[a].length-1)?l[a].length-1:l[a].length).trim(),t.tokens.push({type:"inline",content:d,level:t.level,children:[]}),t.tokens.push({type:"td_close",level:--t.level});t.tokens.push({type:"tr_close",level:--t.level})}return t.tokens.push({type:"tbody_close",level:--t.level}),t.tokens.push({type:"table_close",level:--t.level}),p[1]=m[1]=h,t.line=h,!0}function Wt(t,e){var i,n,r=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];return r>=s||126!==(n=t.src.charCodeAt(r++))&&58!==n||r===(i=t.skipSpaces(r))||i>=s?-1:i}function Ut(t,e){var i,n,r=t.level+2;for(i=e+2,n=t.tokens.length-2;i<n;i++)t.tokens[i].level===r&&"paragraph_open"===t.tokens[i].type&&(t.tokens[i+2].tight=!0,t.tokens[i].tight=!0,i+=2)}function Vt(t,e,i,n){var r,s,o,a,h,l,d,c,u,p,m,f,g,v;if(n)return!(t.ddIndent<0)&&Wt(t,e)>=0;if(d=e+1,t.isEmpty(d)&&++d>i)return!1;if(t.tShift[d]<t.blkIndent)return!1;if((r=Wt(t,d))<0)return!1;if(t.level>=t.options.maxNesting)return!1;l=t.tokens.length,t.tokens.push({type:"dl_open",lines:h=[e,0],level:t.level++}),o=e,s=d;t:for(;;){for(v=!0,g=!1,t.tokens.push({type:"dt_open",lines:[o,o],level:t.level++}),t.tokens.push({type:"inline",content:t.getLines(o,o+1,t.blkIndent,!1).trim(),level:t.level+1,lines:[o,o],children:[]}),t.tokens.push({type:"dt_close",level:--t.level});;){if(t.tokens.push({type:"dd_open",lines:a=[d,0],level:t.level++}),f=t.tight,u=t.ddIndent,c=t.blkIndent,m=t.tShift[s],p=t.parentType,t.blkIndent=t.ddIndent=t.tShift[s]+2,t.tShift[s]=r-t.bMarks[s],t.tight=!0,t.parentType="deflist",t.parser.tokenize(t,s,i,!0),t.tight&&!g||(v=!1),g=t.line-s>1&&t.isEmpty(t.line-1),t.tShift[s]=m,t.tight=f,t.parentType=p,t.blkIndent=c,t.ddIndent=u,t.tokens.push({type:"dd_close",level:--t.level}),a[1]=d=t.line,d>=i)break t;if(t.tShift[d]<t.blkIndent)break t;if((r=Wt(t,d))<0)break;s=d}if(d>=i)break;if(o=d,t.isEmpty(o))break;if(t.tShift[o]<t.blkIndent)break;if((s=o+1)>=i)break;if(t.isEmpty(s)&&s++,s>=i)break;if(t.tShift[s]<t.blkIndent)break;if((r=Wt(t,s))<0)break}return t.tokens.push({type:"dl_close",level:--t.level}),h[1]=d,t.line=d,v&&Ut(t,l),!0}function Gt(t,e){var i,n,r,s,o,a,h=e+1;if(h<(i=t.lineMax)&&!t.isEmpty(h))for(a=t.parser.ruler.getRules("paragraph");h<i&&!t.isEmpty(h);h++)if(!(t.tShift[h]-t.blkIndent>3)){for(r=!1,s=0,o=a.length;s<o;s++)if(a[s](t,h,i,!0)){r=!0;break}if(r)break}return n=t.getLines(e,h,t.blkIndent,!1).trim(),t.line=h,n.length&&(t.tokens.push({type:"paragraph_open",tight:!1,lines:[e,t.line],level:t.level}),t.tokens.push({type:"inline",content:n,level:t.level+1,lines:[e,t.line],children:[]}),t.tokens.push({type:"paragraph_close",tight:!1,level:t.level})),!0}var Xt=[["code",Et],["fences",St,["paragraph","blockquote","list"]],["blockquote",Nt,["paragraph","blockquote","list"]],["hr",Mt,["paragraph","blockquote","list"]],["list",Pt,["paragraph","blockquote"]],["footnote",It,["paragraph"]],["heading",Bt,["paragraph","blockquote"]],["lheading",Ot],["htmlblock",jt,["paragraph","blockquote"]],["table",$t,["paragraph"]],["deflist",Vt,["paragraph"]],["paragraph",Gt]];function Yt(){this.ruler=new X;for(var t=0;t<Xt.length;t++)this.ruler.push(Xt[t][0],Xt[t][1],{alt:(Xt[t][2]||[]).slice()})}Yt.prototype.tokenize=function(t,e,i){for(var n,r=this.ruler.getRules(""),s=r.length,o=e,a=!1;o<i&&(t.line=o=t.skipEmptyLines(o),!(o>=i))&&!(t.tShift[o]<t.blkIndent);){for(n=0;n<s&&!r[n](t,o,i,!1);n++);if(t.tight=!a,t.isEmpty(t.line-1)&&(a=!0),(o=t.line)<i&&t.isEmpty(o)){if(a=!0,++o<i&&"list"===t.parentType&&t.isEmpty(o))break;t.line=o}}};var Zt=/[\n\t]/g,Jt=/\r[\n\u0085]|[\u2424\u2028\u0085]/g,Kt=/\u00a0/g;function Qt(t){switch(t){case 10:case 92:case 96:case 42:case 95:case 94:case 91:case 93:case 33:case 38:case 60:case 62:case 123:case 125:case 36:case 37:case 64:case 126:case 43:case 61:case 58:return!0;default:return!1}}function te(t,e){for(var i=t.pos;i<t.posMax&&!Qt(t.src.charCodeAt(i));)i++;return i!==t.pos&&(e||(t.pending+=t.src.slice(t.pos,i)),t.pos=i,!0)}function ee(t,e){var i,n,r=t.pos;if(10!==t.src.charCodeAt(r))return!1;if(i=t.pending.length-1,n=t.posMax,!e)if(i>=0&&32===t.pending.charCodeAt(i))if(i>=1&&32===t.pending.charCodeAt(i-1)){for(var s=i-2;s>=0;s--)if(32!==t.pending.charCodeAt(s)){t.pending=t.pending.substring(0,s+1);break}t.push({type:"hardbreak",level:t.level})}else t.pending=t.pending.slice(0,-1),t.push({type:"softbreak",level:t.level});else t.push({type:"softbreak",level:t.level});for(r++;r<n&&32===t.src.charCodeAt(r);)r++;return t.pos=r,!0}Yt.prototype.parse=function(t,e,i,n){var r,s=0,o=0;if(!t)return[];(t=(t=t.replace(Kt," ")).replace(Jt,"\n")).indexOf("\t")>=0&&(t=t.replace(Zt,(function(e,i){var n;return 10===t.charCodeAt(i)?(s=i+1,o=0,e):(n="    ".slice((i-s-o)%4),o=i-s+1,n)}))),r=new Dt(t,this,e,i,n),this.tokenize(r,r.line,r.lineMax)};for(var ie=[],ne=0;ne<256;ne++)ie.push(0);function re(t,e){var i,n=t.pos,r=t.posMax;if(92!==t.src.charCodeAt(n))return!1;if(++n<r){if((i=t.src.charCodeAt(n))<256&&0!==ie[i])return e||(t.pending+=t.src[n]),t.pos+=2,!0;if(10===i){for(e||t.push({type:"hardbreak",level:t.level}),n++;n<r&&32===t.src.charCodeAt(n);)n++;return t.pos=n,!0}}return e||(t.pending+="\\"),t.pos++,!0}function se(t,e){var i,n,r,s,o,a=t.pos;if(96!==t.src.charCodeAt(a))return!1;for(i=a,a++,n=t.posMax;a<n&&96===t.src.charCodeAt(a);)a++;for(r=t.src.slice(i,a),s=o=a;-1!==(s=t.src.indexOf("`",o));){for(o=s+1;o<n&&96===t.src.charCodeAt(o);)o++;if(o-s===r.length)return e||t.push({type:"code",content:t.src.slice(a,s).replace(/[ \n]+/g," ").trim(),block:!1,level:t.level}),t.pos=o,!0}return e||(t.pending+=r),t.pos+=r.length,!0}function oe(t,e){var i,n,r,s,o,a=t.posMax,h=t.pos;if(126!==t.src.charCodeAt(h))return!1;if(e)return!1;if(h+4>=a)return!1;if(126!==t.src.charCodeAt(h+1))return!1;if(t.level>=t.options.maxNesting)return!1;if(s=h>0?t.src.charCodeAt(h-1):-1,o=t.src.charCodeAt(h+2),126===s)return!1;if(126===o)return!1;if(32===o||10===o)return!1;for(n=h+2;n<a&&126===t.src.charCodeAt(n);)n++;if(n>h+3)return t.pos+=n-h,e||(t.pending+=t.src.slice(h,n)),!0;for(t.pos=h+2,r=1;t.pos+1<a;){if(126===t.src.charCodeAt(t.pos)&&126===t.src.charCodeAt(t.pos+1)&&(s=t.src.charCodeAt(t.pos-1),126!==(o=t.pos+2<a?t.src.charCodeAt(t.pos+2):-1)&&126!==s&&(32!==s&&10!==s?r--:32!==o&&10!==o&&r++,r<=0))){i=!0;break}t.parser.skipToken(t)}return i?(t.posMax=t.pos,t.pos=h+2,e||(t.push({type:"del_open",level:t.level++}),t.parser.tokenize(t),t.push({type:"del_close",level:--t.level})),t.pos=t.posMax+2,t.posMax=a,!0):(t.pos=h,!1)}function ae(t,e){var i,n,r,s,o,a=t.posMax,h=t.pos;if(43!==t.src.charCodeAt(h))return!1;if(e)return!1;if(h+4>=a)return!1;if(43!==t.src.charCodeAt(h+1))return!1;if(t.level>=t.options.maxNesting)return!1;if(s=h>0?t.src.charCodeAt(h-1):-1,o=t.src.charCodeAt(h+2),43===s)return!1;if(43===o)return!1;if(32===o||10===o)return!1;for(n=h+2;n<a&&43===t.src.charCodeAt(n);)n++;if(n!==h+2)return t.pos+=n-h,e||(t.pending+=t.src.slice(h,n)),!0;for(t.pos=h+2,r=1;t.pos+1<a;){if(43===t.src.charCodeAt(t.pos)&&43===t.src.charCodeAt(t.pos+1)&&(s=t.src.charCodeAt(t.pos-1),43!==(o=t.pos+2<a?t.src.charCodeAt(t.pos+2):-1)&&43!==s&&(32!==s&&10!==s?r--:32!==o&&10!==o&&r++,r<=0))){i=!0;break}t.parser.skipToken(t)}return i?(t.posMax=t.pos,t.pos=h+2,e||(t.push({type:"ins_open",level:t.level++}),t.parser.tokenize(t),t.push({type:"ins_close",level:--t.level})),t.pos=t.posMax+2,t.posMax=a,!0):(t.pos=h,!1)}function he(t,e){var i,n,r,s,o,a=t.posMax,h=t.pos;if(61!==t.src.charCodeAt(h))return!1;if(e)return!1;if(h+4>=a)return!1;if(61!==t.src.charCodeAt(h+1))return!1;if(t.level>=t.options.maxNesting)return!1;if(s=h>0?t.src.charCodeAt(h-1):-1,o=t.src.charCodeAt(h+2),61===s)return!1;if(61===o)return!1;if(32===o||10===o)return!1;for(n=h+2;n<a&&61===t.src.charCodeAt(n);)n++;if(n!==h+2)return t.pos+=n-h,e||(t.pending+=t.src.slice(h,n)),!0;for(t.pos=h+2,r=1;t.pos+1<a;){if(61===t.src.charCodeAt(t.pos)&&61===t.src.charCodeAt(t.pos+1)&&(s=t.src.charCodeAt(t.pos-1),61!==(o=t.pos+2<a?t.src.charCodeAt(t.pos+2):-1)&&61!==s&&(32!==s&&10!==s?r--:32!==o&&10!==o&&r++,r<=0))){i=!0;break}t.parser.skipToken(t)}return i?(t.posMax=t.pos,t.pos=h+2,e||(t.push({type:"mark_open",level:t.level++}),t.parser.tokenize(t),t.push({type:"mark_close",level:--t.level})),t.pos=t.posMax+2,t.posMax=a,!0):(t.pos=h,!1)}function le(t){return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122}function de(t,e){var i,n,r,s=e,o=!0,a=!0,h=t.posMax,l=t.src.charCodeAt(e);for(i=e>0?t.src.charCodeAt(e-1):-1;s<h&&t.src.charCodeAt(s)===l;)s++;return s>=h&&(o=!1),(r=s-e)>=4?o=a=!1:(32!==(n=s<h?t.src.charCodeAt(s):-1)&&10!==n||(o=!1),32!==i&&10!==i||(a=!1),95===l&&(le(i)&&(o=!1),le(n)&&(a=!1))),{can_open:o,can_close:a,delims:r}}function ce(t,e){var i,n,r,s,o,a,h,l=t.posMax,d=t.pos,c=t.src.charCodeAt(d);if(95!==c&&42!==c)return!1;if(e)return!1;if(i=(h=de(t,d)).delims,!h.can_open)return t.pos+=i,e||(t.pending+=t.src.slice(d,t.pos)),!0;if(t.level>=t.options.maxNesting)return!1;for(t.pos=d+i,a=[i];t.pos<l;)if(t.src.charCodeAt(t.pos)!==c)t.parser.skipToken(t);else{if(n=(h=de(t,t.pos)).delims,h.can_close){for(s=a.pop(),o=n;s!==o;){if(o<s){a.push(s-o);break}if(o-=s,0===a.length)break;t.pos+=s,s=a.pop()}if(0===a.length){i=s,r=!0;break}t.pos+=n;continue}h.can_open&&a.push(n),t.pos+=n}return r?(t.posMax=t.pos,t.pos=d+i,e||(2!==i&&3!==i||t.push({type:"strong_open",level:t.level++}),1!==i&&3!==i||t.push({type:"em_open",level:t.level++}),t.parser.tokenize(t),1!==i&&3!==i||t.push({type:"em_close",level:--t.level}),2!==i&&3!==i||t.push({type:"strong_close",level:--t.level})),t.pos=t.posMax+i,t.posMax=l,!0):(t.pos=d,!1)}"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(t){ie[t.charCodeAt(0)]=1}));var ue=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function pe(t,e){var i,n,r=t.posMax,s=t.pos;if(126!==t.src.charCodeAt(s))return!1;if(e)return!1;if(s+2>=r)return!1;if(t.level>=t.options.maxNesting)return!1;for(t.pos=s+1;t.pos<r;){if(126===t.src.charCodeAt(t.pos)){i=!0;break}t.parser.skipToken(t)}return i&&s+1!==t.pos?(n=t.src.slice(s+1,t.pos)).match(/(^|[^\\])(\\\\)*\s/)?(t.pos=s,!1):(t.posMax=t.pos,t.pos=s+1,e||t.push({type:"sub",level:t.level,content:n.replace(ue,"$1")}),t.pos=t.posMax+1,t.posMax=r,!0):(t.pos=s,!1)}var me=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function fe(t,e){var i,n,r=t.posMax,s=t.pos;if(94!==t.src.charCodeAt(s))return!1;if(e)return!1;if(s+2>=r)return!1;if(t.level>=t.options.maxNesting)return!1;for(t.pos=s+1;t.pos<r;){if(94===t.src.charCodeAt(t.pos)){i=!0;break}t.parser.skipToken(t)}return i&&s+1!==t.pos?(n=t.src.slice(s+1,t.pos)).match(/(^|[^\\])(\\\\)*\s/)?(t.pos=s,!1):(t.posMax=t.pos,t.pos=s+1,e||t.push({type:"sup",level:t.level,content:n.replace(me,"$1")}),t.pos=t.posMax+1,t.posMax=r,!0):(t.pos=s,!1)}function ge(t,e){var i,n,r,s,o,a,h,l,d=!1,c=t.pos,u=t.posMax,p=t.pos,m=t.src.charCodeAt(p);if(33===m&&(d=!0,m=t.src.charCodeAt(++p)),91!==m)return!1;if(t.level>=t.options.maxNesting)return!1;if(i=p+1,(n=J(t,p))<0)return!1;if((a=n+1)<u&&40===t.src.charCodeAt(a)){for(a++;a<u&&(32===(l=t.src.charCodeAt(a))||10===l);a++);if(a>=u)return!1;for(p=a,et(t,a)?(s=t.linkContent,a=t.pos):s="",p=a;a<u&&(32===(l=t.src.charCodeAt(a))||10===l);a++);if(a<u&&p!==a&&it(t,a))for(o=t.linkContent,a=t.pos;a<u&&(32===(l=t.src.charCodeAt(a))||10===l);a++);else o="";if(a>=u||41!==t.src.charCodeAt(a))return t.pos=c,!1;a++}else{if(t.linkLevel>0)return!1;for(;a<u&&(32===(l=t.src.charCodeAt(a))||10===l);a++);if(a<u&&91===t.src.charCodeAt(a)&&(p=a+1,(a=J(t,a))>=0?r=t.src.slice(p,a++):a=p-1),r||(void 0===r&&(a=n+1),r=t.src.slice(i,n)),!(h=t.env.references[nt(r)]))return t.pos=c,!1;s=h.href,o=h.title}return e||(t.pos=i,t.posMax=n,d?t.push({type:"image",src:s,title:o,alt:t.src.substr(i,n-i),level:t.level}):(t.push({type:"link_open",href:s,title:o,level:t.level++}),t.linkLevel++,t.parser.tokenize(t),t.linkLevel--,t.push({type:"link_close",level:--t.level}))),t.pos=a,t.posMax=u,!0}function ve(t,e){var i,n,r,s,o=t.posMax,a=t.pos;return!(a+2>=o||94!==t.src.charCodeAt(a)||91!==t.src.charCodeAt(a+1)||t.level>=t.options.maxNesting||(i=a+2,(n=J(t,a+1))<0||(e||(t.env.footnotes||(t.env.footnotes={}),t.env.footnotes.list||(t.env.footnotes.list=[]),r=t.env.footnotes.list.length,t.pos=i,t.posMax=n,t.push({type:"footnote_ref",id:r,level:t.level}),t.linkLevel++,s=t.tokens.length,t.parser.tokenize(t),t.env.footnotes.list[r]={tokens:t.tokens.splice(s)},t.linkLevel--),t.pos=n+1,t.posMax=o,0)))}function ye(t,e){var i,n,r,s,o=t.posMax,a=t.pos;if(a+3>o)return!1;if(!t.env.footnotes||!t.env.footnotes.refs)return!1;if(91!==t.src.charCodeAt(a))return!1;if(94!==t.src.charCodeAt(a+1))return!1;if(t.level>=t.options.maxNesting)return!1;for(n=a+2;n<o;n++){if(32===t.src.charCodeAt(n))return!1;if(10===t.src.charCodeAt(n))return!1;if(93===t.src.charCodeAt(n))break}return!(n===a+2||n>=o||(n++,i=t.src.slice(a+2,n-1),void 0===t.env.footnotes.refs[":"+i]||(e||(t.env.footnotes.list||(t.env.footnotes.list=[]),t.env.footnotes.refs[":"+i]<0?(r=t.env.footnotes.list.length,t.env.footnotes.list[r]={label:i,count:0},t.env.footnotes.refs[":"+i]=r):r=t.env.footnotes.refs[":"+i],s=t.env.footnotes.list[r].count,t.env.footnotes.list[r].count++,t.push({type:"footnote_ref",id:r,subId:s,level:t.level})),t.pos=n,t.posMax=o,0)))}var xe=["coap","doi","javascript","aaa","aaas","about","acap","cap","cid","crid","data","dav","dict","dns","file","ftp","geo","go","gopher","h323","http","https","iax","icap","im","imap","info","ipp","iris","iris.beep","iris.xpc","iris.xpcs","iris.lwz","ldap","mailto","mid","msrp","msrps","mtqp","mupdate","news","nfs","ni","nih","nntp","opaquelocktoken","pop","pres","rtsp","service","session","shttp","sieve","sip","sips","sms","snmp","soap.beep","soap.beeps","tag","tel","telnet","tftp","thismessage","tn3270","tip","tv","urn","vemmi","ws","wss","xcon","xcon-userid","xmlrpc.beep","xmlrpc.beeps","xmpp","z39.50r","z39.50s","adiumxtra","afp","afs","aim","apt","attachment","aw","beshare","bitcoin","bolo","callto","chrome","chrome-extension","com-eventbrite-attendee","content","cvs","dlna-playsingle","dlna-playcontainer","dtn","dvb","ed2k","facetime","feed","finger","fish","gg","git","gizmoproject","gtalk","hcp","icon","ipn","irc","irc6","ircs","itms","jar","jms","keyparc","lastfm","ldaps","magnet","maps","market","message","mms","ms-help","msnim","mumble","mvn","notes","oid","palm","paparazzi","platform","proxy","psyc","query","res","resource","rmi","rsync","rtmp","secondlife","sftp","sgn","skype","smb","soldat","spotify","ssh","steam","svn","teamspeak","things","udp","unreal","ut2004","ventrilo","view-source","webcal","wtai","wyciwyg","xfire","xri","ymsgr"],be=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,we=/^<([a-zA-Z.\-]{1,25}):([^<>\x00-\x20]*)>/;function ke(t,e){var i,n,r,s,o,a=t.pos;return!(60!==t.src.charCodeAt(a)||(i=t.src.slice(a)).indexOf(">")<0||((n=i.match(we))?xe.indexOf(n[1].toLowerCase())<0||(o=tt(s=n[0].slice(1,-1)),!t.parser.validateLink(s)||(e||(t.push({type:"link_open",href:o,level:t.level}),t.push({type:"text",content:s,level:t.level+1}),t.push({type:"link_close",level:t.level})),t.pos+=n[0].length,0)):!(r=i.match(be))||(o=tt("mailto:"+(s=r[0].slice(1,-1))),!t.parser.validateLink(o)||(e||(t.push({type:"link_open",href:o,level:t.level}),t.push({type:"text",content:s,level:t.level+1}),t.push({type:"link_close",level:t.level})),t.pos+=r[0].length,0))))}function _e(t,e){return t=t.source,e=e||"",function i(n,r){return n?(r=r.source||r,t=t.replace(n,r),i):new RegExp(t,e)}}var Ce=/[a-zA-Z_:][a-zA-Z0-9:._-]*/,De=/[^"'=<>`\x00-\x20]+/,Ee=/'[^']*'/,Se=/"[^"]*"/,Ne=_e(/(?:unquoted|single_quoted|double_quoted)/)("unquoted",De)("single_quoted",Ee)("double_quoted",Se)(),Me=_e(/(?:\s+attr_name(?:\s*=\s*attr_value)?)/)("attr_name",Ce)("attr_value",Ne)(),Ae=_e(/<[A-Za-z][A-Za-z0-9]*attribute*\s*\/?>/)("attribute",Me)(),Le=/<\/[A-Za-z][A-Za-z0-9]*\s*>/,Te=/<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->/,Pe=/<[?].*?[?]>/,Ie=/<![A-Z]+\s+[^>]*>/,Be=/<!\[CDATA\[[\s\S]*?\]\]>/,Oe=_e(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)("open_tag",Ae)("close_tag",Le)("comment",Te)("processing",Pe)("declaration",Ie)("cdata",Be)();function Re(t){var e=32|t;return e>=97&&e<=122}function Fe(t,e){var i,n,r,s=t.pos;return!(!t.options.html||(r=t.posMax,60!==t.src.charCodeAt(s)||s+2>=r||33!==(i=t.src.charCodeAt(s+1))&&63!==i&&47!==i&&!Re(i)||!(n=t.src.slice(s).match(Oe))||(e||t.push({type:"htmltag",content:t.src.slice(s,s+n[0].length),level:t.level}),t.pos+=n[0].length,0)))}var ze=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,qe=/^&([a-z][a-z0-9]{1,31});/i;function je(t,e){var i,n,r=t.pos,s=t.posMax;if(38!==t.src.charCodeAt(r))return!1;if(r+1<s)if(35===t.src.charCodeAt(r+1)){if(n=t.src.slice(r).match(ze))return e||(i="x"===n[1][0].toLowerCase()?parseInt(n[1].slice(1),16):parseInt(n[1],10),t.pending+=P(i)?I(i):I(65533)),t.pos+=n[0].length,!0}else if(n=t.src.slice(r).match(qe)){var o=S(n[1]);if(n[1]!==o)return e||(t.pending+=o),t.pos+=n[0].length,!0}return e||(t.pending+="&"),t.pos++,!0}var He=[["text",te],["newline",ee],["escape",re],["backticks",se],["del",oe],["ins",ae],["mark",he],["emphasis",ce],["sub",pe],["sup",fe],["links",ge],["footnote_inline",ve],["footnote_ref",ye],["autolink",ke],["htmltag",Fe],["entity",je]];function $e(){this.ruler=new X;for(var t=0;t<He.length;t++)this.ruler.push(He[t][0],He[t][1]);this.validateLink=We}function We(t){var e=["vbscript","javascript","file","data"],i=t.trim().toLowerCase();return-1===(i=F(i)).indexOf(":")||-1===e.indexOf(i.split(":")[0])}$e.prototype.skipToken=function(t){var e,i,n=this.ruler.getRules(""),r=n.length,s=t.pos;if((i=t.cacheGet(s))>0)t.pos=i;else{for(e=0;e<r;e++)if(n[e](t,!0))return void t.cacheSet(s,t.pos);t.pos++,t.cacheSet(s,t.pos)}},$e.prototype.tokenize=function(t){for(var e,i,n=this.ruler.getRules(""),r=n.length,s=t.posMax;t.pos<s;){for(i=0;i<r&&!(e=n[i](t,!1));i++);if(e){if(t.pos>=s)break}else t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()},$e.prototype.parse=function(t,e,i,n){var r=new Z(t,this,e,i,n);this.tokenize(r)};var Ue={default:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","replacements","smartquotes","references","abbr2","footnote_tail"]},block:{rules:["blockquote","code","fences","footnote","heading","hr","htmlblock","lheading","list","paragraph","table"]},inline:{rules:["autolink","backticks","del","emphasis","entity","escape","footnote_ref","htmltag","links","newline","text"]}}},full:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{},block:{},inline:{}}},commonmark:{options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","abbr2"]},block:{rules:["blockquote","code","fences","heading","hr","htmlblock","lheading","list","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","htmltag","links","newline","text"]}}}};function Ve(t,e,i){this.src=e,this.env=i,this.options=t.options,this.tokens=[],this.inlineMode=!1,this.inline=t.inline,this.block=t.block,this.renderer=t.renderer,this.typographer=t.typographer}function Ge(t,e){"string"!=typeof t&&(e=t,t="default"),e&&null!=e.linkify&&console.warn("linkify option is removed. Use linkify plugin instead:\n\nimport Remarkable from 'remarkable';\nimport linkify from 'remarkable/linkify';\nnew Remarkable().use(linkify)\n"),this.inline=new $e,this.block=new Yt,this.core=new Ct,this.renderer=new G,this.ruler=new X,this.options={},this.configure(Ue[t]),this.set(e||{})}Ge.prototype.set=function(t){A(this.options,t)},Ge.prototype.configure=function(t){var e=this;if(!t)throw new Error("Wrong `remarkable` preset, check name/content");t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach((function(i){t.components[i].rules&&e[i].ruler.enable(t.components[i].rules,!0)}))},Ge.prototype.use=function(t,e){return t(this,e),this},Ge.prototype.parse=function(t,e){var i=new Ve(this,t,e);return this.core.process(i),i.tokens},Ge.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)},Ge.prototype.parseInline=function(t,e){var i=new Ve(this,t,e);return i.inlineMode=!0,this.core.process(i),i.tokens},Ge.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};var Xe=function(t,e){var i="$",r=(e||{}).delimiter||i;if(1!==r.length)throw new Error("invalid delimiter");var s=n,o=function(t,e){return s.renderToString(t,{displayMode:e,throwOnError:!1})},a=function(t,e,i){var n=!1,s=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(s+1>o)return!1;var a=t.src.charAt(s);if(a!==r)return!1;var h=s,l=(s=t.skipChars(s,a))-h;if(2!==l)return!1;for(var d=e;!(++d>=i||(s=h=t.bMarks[d]+t.tShift[d])<(o=t.eMarks[d])&&t.tShift[d]<t.blkIndent);)if(t.src.charAt(s)===r&&!(t.tShift[d]-t.blkIndent>=4||(s=t.skipChars(s,a))-h<l||(s=t.skipSpaces(s))<o)){n=!0;break}l=t.tShift[e],t.line=d+(n?1:0);var c=t.getLines(e+1,d,l,!0).replace(/[ \n]+/g," ").trim();return t.tokens.push({type:"katex",params:null,content:c,lines:[e,t.line],level:t.level,block:!0}),!0},h=function(t,e){var i=t.pos,n=t.posMax,s=i;if(t.src.charAt(s)!==r)return!1;for(++s;s<n&&t.src.charAt(s)===r;)++s;var o=t.src.slice(i,s);if(o.length>2)return!1;for(var a=s,h=0;s<n;){var l=t.src.charAt(s);if("{"===l)h+=1;else if("}"===l){if((h-=1)<0)return!1}else if(l===r&&0===h){for(var d=s,c=s+1;c<n&&t.src.charAt(c)===r;)++c;if(c-d===o.length){if(!e){var u=t.src.slice(a,d).replace(/[ \n]+/g," ").trim();t.push({type:"katex",content:u,block:o.length>1,level:t.level})}return t.pos=c,!0}}s+=1}return e||(t.pending+=o),t.pos+=o.length,!0};t.inline.ruler.push("katex",h,e),t.block.ruler.push("katex",a,e),t.renderer.rules.katex=function(t,e){return o(t[e].content,t[e].block)},t.renderer.rules.katex.delimiter=r};let Ye;const Ze=()=>(Ye=Ye||b([{type:"script",data:{src:"https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"}}]),Ye),Je="katex";function Ke(t){return t.parser.tap(((e,i)=>{e.use(Xe);const n=(e,i)=>{const{katex:n}=window;return n?n.renderToString(e,{displayMode:i,throwOnError:!1}):(Ze().then((()=>{t.retransform.call()})),e)};e.renderer.rules.katex=(t,e)=>{const r=n(t[e].content,t[e].block);return i[Je]=!0,r}})),{styles:[{type:"stylesheet",data:{href:"https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"}}],scripts:[{type:"iife",data:{fn:t=>{window.WebFontConfig={custom:{families:["KaTeX_AMS","KaTeX_Caligraphic:n4,n7","KaTeX_Fraktur:n4,n7","KaTeX_Main:n4,n7,i4,i7","KaTeX_Math:i4,i7","KaTeX_Script","KaTeX_SansSerif:n4,n7,i4","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4","KaTeX_Typewriter"]},active:()=>{t().refreshHook.call()}}},getParams:({getMarkmap:t})=>[t]}},{type:"script",data:{src:"https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.js",defer:!0}}]}}let Qe;const ti=()=>(Qe=Qe||b([{type:"script",data:{src:"https://cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-core.min.js"}},{type:"script",data:{src:"https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"}}]),Qe);function ei(t,e){ti().then((()=>{window.Prism.plugins.autoloader.loadLanguages([t],(()=>{e.retransform.call()}))}))}const ii="prism";function ni(t){return t.parser.tap(((e,i)=>{e.set({highlight:(e,n)=>{var r;i[ii]=!0;const{Prism:s}=window,o=null==s||null==(r=s.languages)?void 0:r[n];return o?s.highlight(e,o,n):(ei(n,t),"")}})})),{styles:[{type:"stylesheet",data:{href:"https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism.css"}}]}}function ri(){return{parser:new s,htmltag:new s,retransform:new s}}const si=[Object.freeze({__proto__:null,name:Je,transform:Ke}),Object.freeze({__proto__:null,name:ii,transform:ni})];function oi(t,e=0){if("heading"===t.t)t.c=t.c.filter((t=>"paragraph"!==t.t));else if("list_item"===t.t){var i;t.c=t.c.filter((e=>!["paragraph","fence"].includes(e.t)||(t.v||(t.v=e.v,t.p=r({},t.p,e.p)),!1))),null!=(null==(i=t.p)?void 0:i.index)&&(t.v=`${t.p.index}. ${t.v}`)}else if("ordered_list"===t.t){var n,s;let e=null!=(n=null==(s=t.p)?void 0:s.start)?n:1;t.c.forEach((t=>{"list_item"===t.t&&(t.p=r({},t.p,{index:e}),e+=1)}))}0===t.c.length?delete t.c:(t.c.forEach((t=>oi(t,e+1))),1!==t.c.length||t.c[0].v||(t.c=t.c[0].c)),t.d=e}class ai{constructor(t=si){this.plugins=void 0,this.hooks=void 0,this.md=void 0,this.assetsMap=void 0,this.plugins=t,this.hooks=ri();const e=new Ge({html:!0,breaks:!0,maxNesting:1/0});e.block.ruler.enable(["deflist"]),e.renderer.rules.htmltag=f(e.renderer.rules.htmltag,{after:t=>{this.hooks.htmltag.call(t)}}),this.md=e;const i={};for(const{name:e,transform:n}of t)i[e]=n(this.hooks);this.assetsMap=i}buildTree(t){const e={t:"root",d:0,v:"",c:[],p:{}},i=[e];let n=0;for(const e of t){let t=i[i.length-1];if(e.type.endsWith("_open")){const o=e.type.slice(0,-5),a={};var r;if(e.lines&&(a.lines=e.lines),"heading"===o)for(n=e.hLevel;(null==(s=t)?void 0:s.d)>=n;){var s;i.pop(),t=i[i.length-1]}else n=Math.max(n,(null==(r=t)?void 0:r.d)||0)+1,"ordered_list"===o&&(a.start=e.order);const h={t:o,d:n,p:a,v:"",c:[]};t.c.push(h),i.push(h)}else{if(!t)continue;if(e.type===`${t.t}_close`)"heading"===t.t?n=t.d:(i.pop(),n=0);else if("inline"===e.type){const i=this.hooks.htmltag.tap((e=>{const i=e.result.match(/^<!--([\s\S]*?)-->$/);"fold"===(null==i?void 0:i[1].trim())&&(t.p.f=!0,e.result="")}));let n="";n=e.children&&1==e.children.length&&e.children[0].type&&"link_open"==e.children[0].type?`[${e.children[1].content}](${e.children[0].href})`:e.content,i(),t.v=`${t.v||""}${n}`}else if("fence"===e.type){let i="```"+e.params+"\n";i+=e.content,i+="```\n",t.c.push({t:e.type,d:n+1,v:i,c:[]})}}}return e}transform(t){var e;const i={};this.hooks.parser.call(this.md,i);const n=this.md.parse(t||"",{});let r=this.buildTree(n);return oi(r),1===(null==(e=r.c)?void 0:e.length)&&(r=r.c[0]),{root:r,features:i}}getAssets(t){const e=[],i=[];null!=t||(t=Object.keys(this.assetsMap));for(const n of t.map((t=>this.assetsMap[t])))n&&(n.styles&&e.push(...n.styles),n.scripts&&i.push(...n.scripts));return{styles:e,scripts:i}}getUsedAssets(t){return this.getAssets(Object.keys(t).filter((e=>t[e])))}}t.Transformer=ai,t.builtInPlugins=si,t.fillTemplate=_}(e,mi)}));
/*! markmap-lib v0.11.6 | MIT License */function gi(t){var e=null,i=t;if(i.liDom.previousSibling){var n=vi(i.liDom.previousSibling);e=n||i.liDom.previousSibling.node}else e=i.parent;return e}function vi(t){var e=t.node;if(e.isExpand&&e.childrenDom){var i=e.childrenDom.lastElementChild;i&&(e=vi(i))}return e}function yi(t,e){var i=e.parentNode;i.lastChild==e?i.appendChild(t):i.insertBefore(t,e.nextSibling)}class xi extends _t{constructor(t,e,i){super("addNode"),this.node=t,this.parent=e,this.index=i}execute(){this.parent.childrenDom.insertBefore(this.node.liDom,this.parent.childrenDom.childNodes[0]),this.parent.addChild(this.node),this.node.list.emit("change")}undo(){this.index=this.parent.removeChild(this.node),this.parent.removeChild(this.node),this.parent.childrenDom.removeChild(this.node.liDom),this.node.list.emit("change")}}class bi extends _t{constructor(t,e,i,n){super("addSameNode"),this.node=t,this.parent=i,this.prevNode=e,this.index=n}execute(){this.parent.addChild(this.node,this.index),yi(this.node.liDom,this.prevNode.liDom),this.parent.list.selecNode(this.node),this.node.keepFocusEnd(),this.node.list.emit("change")}undo(){var t=gi(this.node)||this.parent;this.parent.childrenDom.removeChild(this.node.liDom),this.parent.removeChild(this.node),t.list.selecNode(this.parent),t.keepFocusEnd(),this.node.list.emit("change")}}class wi extends _t{constructor(t,e,i,n){super("tabNode"),this.node=t,this.index=e,this.parent=n,this.oldParent=i}execute(){this.oldParent.removeChild(this.node),this.oldParent.childrenDom.removeChild(this.node.liDom),this.node.list.addNode(this.node,this.parent),this.parent.childrenDom.appendChild(this.node.liDom),this.node.parent=this.parent,this.parent.list.selecNode(this.node),setTimeout((()=>{this.node.keepFocusEnd()}),0),this.refreshClass(),this.node.list.emit("change")}undo(){this.parent.removeChild(this.node),this.parent.childrenDom.removeChild(this.node.liDom),this.oldParent.addChild(this.node,this.index),0==this.index?this.oldParent.childrenDom.insertBefore(this.node.liDom,this.oldParent.childrenDom.childNodes[0]):yi(this.node.liDom,this.oldParent.childrenDom.childNodes[this.index-1]),this.oldParent.list.selecNode(this.node),setTimeout((()=>{this.node.keepFocusEnd()}),0),this.refreshClass(),this.node.list.emit("change")}refreshClass(){this.oldParent.refreshClass(),this.parent.refreshClass(),this.node.refreshClass()}}class ki extends _t{constructor(t,e,i){super("shiftTabNode"),this.node=t,this.oldParent=e,this.newParent=i}execute(){this.index=this.oldParent.children.indexOf(this.node);var t=this.newParent.children.indexOf(this.oldParent);this.oldParent.removeChild(this.node),this.oldParent.childrenDom.removeChild(this.node.liDom),this.node.list.addNode(this.node,this.newParent,t+1),this.node.parent=this.newParent,yi(this.node.liDom,this.oldParent.liDom),this.newParent.list.selecNode(this.node),this.refreshClass(),setTimeout((()=>{this.node.keepFocusEnd()}),0),this.node.list.emit("change")}undo(){this.newParent.removeChild(this.node),this.newParent.childrenDom.removeChild(this.node.liDom),this.oldParent.addChild(this.node,this.index),0==this.index?this.oldParent.childrenDom.insertBefore(this.node.liDom,this.oldParent.childrenDom.childNodes[0]):yi(this.node.liDom,this.oldParent.childrenDom.childNodes[this.index-1]),this.oldParent.list.selecNode(this.node),setTimeout((()=>{this.node.keepFocusEnd()}),0),this.refreshClass(),this.node.list.emit("change")}refreshClass(){this.oldParent.refreshClass(),this.newParent.refreshClass(),this.node.refreshClass()}}class _i extends _t{constructor(t,e,i){super("shiftCtrlTabNode"),this.node=t,this.oldParent=e,this.newParent=i,this.cache=[]}execute(){this.index=this.oldParent.children.indexOf(this.node),this.oldParent.children.forEach(((t,e)=>{e>=this.index&&this.cache.push(t)})),this.cache.forEach((t=>{this.oldParent.removeChild(t),this.oldParent.childrenDom.removeChild(t.liDom)}));var t=this.newParent.children.indexOf(this.oldParent);t++,this.newParent.addChild(this.node,t),yi(this.node.liDom,this.oldParent.liDom),this.cache.forEach(((t,e)=>{if(0!=e){this.node.children.push(t),t.parent=this.node;var i=this.node.children.length;1==i?this.node.childrenDom.insertBefore(t.liDom,this.node.childrenDom.childNodes[0]):yi(t.liDom,this.node.childrenDom.childNodes[i-2])}})),this.refreshClass(),this.node.list.emit("change")}undo(){this.newParent.removeChild(this.node),this.newParent.childrenDom.removeChild(this.node.liDom),this.cache.forEach(((t,e)=>{0!=e&&(this.node.removeChild(t),this.node.childrenDom.removeChild(t.liDom))})),this.oldParent.addChild(this.node,this.index),0==this.index?this.oldParent.childrenDom.insertBefore(this.node.liDom,this.oldParent.childrenDom.childNodes[0]):yi(this.node.liDom,this.oldParent.childrenDom.childNodes[this.index-1]);var t=this.node.liDom;this.index++;var e=this.index;this.cache.forEach(((i,n)=>{0!=n&&(this.oldParent.addChild(i,e),yi(i.liDom,t),e++,t=i.liDom)})),this.refreshClass(),this.node.list.emit("change")}refreshClass(){this.oldParent.refreshClass(),this.newParent.refreshClass(),this.node.refreshClass()}}class Ci extends _t{constructor(t,e,i,n,r){super("dragNode"),this.node=t,this.oldParent=e,this.newParent=i,this.dropNode=n,this.type=r}execute(){if(this.index=this.oldParent.removeChild(this.node),this.oldParent.childrenDom.removeChild(this.node.liDom),"top"==this.type){var t=this.newParent.children.indexOf(this.dropNode);this.newParent.addChild(this.node,t),this.dropNode.liDom.parentNode.insertBefore(this.node.liDom,this.dropNode.liDom)}else{t=this.newParent.children.indexOf(this.dropNode);this.newParent.addChild(this.node,t+1),yi(this.node.liDom,this.dropNode.liDom)}this.refreshClass(),this.node.list.emit("change")}undo(){this.newParent.removeChild(this.node),this.newParent.childrenDom.removeChild(this.node.liDom),this.oldParent.addChild(this.node,this.index),0==this.index?this.oldParent.childrenDom.insertBefore(this.node.liDom,this.oldParent.childrenDom.childNodes[0]):yi(this.node.liDom,this.oldParent.childrenDom.childNodes[this.index-1]),this.refreshClass(),this.node.list.emit("change")}refreshClass(){this.oldParent.refreshClass(),this.newParent.refreshClass(),this.node.refreshClass()}}class Di extends _t{constructor(t,e){super("removeNode"),this.node=t,this.parent=e}execute(){this.index=this.parent.removeChild(this.node),this.parent.childrenDom.removeChild(this.node.liDom),this.refreshClass(),this.node.list.emit("change")}undo(){0==this.index?(this.parent.addChild(this.node),this.parent.childrenDom.insertBefore(this.node.liDom,this.parent.childrenDom.childNodes[0])):(yi(this.node.liDom,this.parent.childrenDom.childNodes[this.index-1]),this.parent.addChild(this.node,this.index)),this.node.list.selecNode(this.node),this.node.keepFocusEnd(),this.refreshClass(),this.node.list.emit("change")}refreshClass(){this.parent.refreshClass()}}class Ei extends _t{constructor(t,e,i){super("changeText"),this.node=t,this.oldText=e,this.newText=i}execute(){this.node.textDom.blur(),this.node.setMdText(this.newText),this.node.list.emit("change")}undo(){this.node.textDom.blur(),this.node.setMdText(this.oldText),this.node.list.emit("change")}}class Si extends _t{constructor(t,e,i){super("changeNode"),this.node=t,this.oldData=e,this.newData=i}execute(){this.node.setPlainData(this.newData),this.node.list.emit("change")}undo(){this.node.setPlainData(this.oldData),this.node.list.emit("change")}}class Ni extends _t{constructor(t){super("expandNode"),this.node=t}execute(){this.node.expand()}undo(){this.node.collapse()}}class Mi extends _t{constructor(t){super("CollapseNode"),this.node=t}execute(){this.node.collapse()}undo(){this.node.expand()}}class Ai extends _t{constructor(t,e,i){super("replaceText"),this.node=t,this.word=e,this.replaceWord=i,this.oldText=this.node.data.mdText}execute(){var t=new RegExp(this.word,"ig"),e=this.node.data.mdText.replace(t,this.replaceWord);this.node.setMdText(e),this.node.list.emit("change")}undo(){this.node.setMdText(this.oldText),this.node.list.emit("change")}}class Li extends _t{constructor(t){super("manyCmd"),this.cmd=t}execute(){this.cmd.forEach((t=>t.execute()))}undo(){this.cmd.forEach((t=>t.undo()))}}class Ti extends _t{constructor(t,e,i,n,r){super("dragNodes"),this.nodes=t,this.oldParent=e,this.newParent=i,this.dropNode=n,this.type=r,this.cache=[]}execute(){var t,e,i,n=this;(this.nodes.forEach(((e,i)=>{if(0==i){var r=n.oldParent.removeChild(e);n.oldParent.childrenDom.removeChild(e.liDom),n.cache.push({index:r,node:e}),t=r}else n.oldParent.removeChild(e),n.oldParent.childrenDom.removeChild(e.liDom),t++,n.cache.push({index:t,node:e})})),"down"==this.type)?this.nodes.forEach(((t,r)=>{0==r?(e=n.newParent.children.indexOf(n.dropNode),e++,n.newParent.addChild(t,e),yi(t.liDom,n.dropNode.liDom)):(e++,n.newParent.addChild(t,e),yi(t.liDom,i.liDom)),i=t})):this.nodes.forEach(((t,r)=>{if(0==r)e=n.newParent.children.indexOf(n.dropNode),n.newParent.addChild(t,e),n.dropNode.liDom.parentNode.insertBefore(t.liDom,n.dropNode.liDom);else{var s=n.newParent.children.indexOf(i);s++,n.newParent.addChild(t,s),yi(t.liDom,i.liDom)}i=t}));this.nodes[0].list.emit("change")}undo(){var t=this;this.nodes.forEach((e=>{t.newParent.removeChild(e),t.newParent.childrenDom.removeChild(e.liDom)}));var e=null;this.cache.forEach(((i,n)=>{t.oldParent.addChild(i.node,i.index),0==n?0==i.index?t.oldParent.childrenDom.insertBefore(i.node.liDom,t.oldParent.childrenDom.childNodes[0]):yi(i.node.liDom,t.oldParent.childrenDom.childNodes[i.index-1]):yi(i.node.liDom,e.liDom),e=i.node})),this.nodes[0].list.emit("change")}}class Pi extends _t{constructor(t,e,i,n){super("tabNodes"),this.nodes=t,this.index=e,this.oldParent=i,this.parent=n}execute(){this.nodes.forEach((t=>{this.oldParent.removeChild(t),this.oldParent.childrenDom.removeChild(t.liDom)}));var t=this.parent.parent.children.indexOf(this.parent);this.nodes.forEach(((e,i)=>{this.parent.addChild(e,t+1+i),this.parent.childrenDom.appendChild(e.liDom)})),this.nodes[0].list.emit("change")}undo(){this.nodes.forEach((t=>{this.parent.removeChild(t),this.parent.childrenDom.removeChild(t.liDom)})),this.nodes.forEach(((t,e)=>{this.oldParent.addChild(t,this.index+e),yi(t.liDom,this.oldParent.childrenDom.childNodes[this.index+e-1])})),this.nodes[0].list.emit("change")}}class Ii extends _t{constructor(t,e,i){super("shiftTabNodes"),this.nodes=t,this.oldParent=e,this.newParent=i}execute(){this.index=this.oldParent.children.indexOf(this.nodes[0]);var t=this.newParent.children.indexOf(this.oldParent);this.nodes.forEach((t=>{this.oldParent.removeChild(t),this.oldParent.childrenDom.removeChild(t.liDom)}));var e=this.oldParent;this.nodes.forEach(((i,n)=>{this.newParent.addChild(i,t+1+n),yi(i.liDom,e.liDom),e=i})),this.nodes[0].list.emit("change")}undo(){this.nodes.forEach((t=>{this.newParent.removeChild(t),this.newParent.childrenDom.removeChild(t.liDom)})),this.nodes.forEach(((t,e)=>{this.oldParent.addChild(t,this.index+e),0==e?0==this.index?this.oldParent.childrenDom.insertBefore(t.liDom,this.oldParent.childrenDom.childNodes[0]):yi(t.liDom,this.oldParent.childrenDom.childNodes[this.index-1]):yi(t.liDom,this.oldParent.childrenDom.childNodes[this.index+e-1])})),this.nodes[0].list.emit("change")}}class Bi extends _t{constructor(t,e,i,n){super("addPdfAnnotate"),this.node=t,this.id=e,this.text=i,this.type=n,this.oldText=this.node.data.pdf||"",this.oldIsPdf=this.node.data.isPDFRefer||0,this.oldData=this.node.getData(),this.isImageNode=this.oldData.isImageNode||0,this.oldImage=this.oldData.image||"",this.oldImageWidth=this.oldData.imageWidth||0,this.oldImageHeight=this.oldData.imageHeight||0}execute(){if("highlight"==this.type)this.node.data.isPDFRefer=1,this.node.data.pdf=this.text,this.node.setPdfAnnotate();else{var t=JSON.parse(this.text);this.node.data.isPDFRefer=1,this.node.data.pdf=this.text,this.node.data.isImageNode=1,this.node.data.image=t.path,this.node.data.imageName="pdf.png",this.node.data.imageWidth=t.width,this.node.data.imageHeight=t.height,this.node.setPdfAnnotate()}this.node.list.emit("change")}undo(){"highlight"==this.type?(this.node.data.isPDFRefer=this.oldIsPdf,this.node.data.pdf=this.oldText,this.node.setPdfAnnotate(this.oldIsPdf)):(this.node.data.isPDFRefer=this.oldIsPdf,this.node.data.pdf=this.oldText,this.node.data.isImageNode=this.isImageNode,this.node.data.image=this.oldImage,this.node.data.imageWidth=this.oldImageWidth,this.node.data.imageHeight=this.oldImageHeight,this.node.setPdfAnnotate(this.oldIsPdf)),this.node.list.emit("change")}}class Oi extends _t{constructor(t){super("deleteNodeAnnotate"),this.node=t,this.isPDFRefer=t.data.isPDFRefer,this.pdf=t.data.pdf}execute(){this.node.data.isPDFRefer=0,this.node.data.pdf="",this.node.setPdfAnnotate(),this.node.list.emit("change")}undo(){this.node.data.isPDFRefer=this.isPDFRefer,this.node.data.pdf=this.pdf,this.node.setPdfAnnotate(),this.node.list.emit("change")}}function Ri(t){var e=t.offsetTop;return null!=t.offsetParent&&(e+=Ri(t.offsetParent)),e}function Fi(t){var e=t.offsetLeft;return null!=t.offsetParent&&(e+=Fi(t.offsetParent)),e}let zi='<svg t="1630199064484" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6068" width="18" height="18" style="margin-top:5px"><path d="M234.88884163 377.47806845l279.65492248 279.65492248 278.8075161-278.8075161z" p-id="6069"></path></svg>';class qi{constructor(t,e,i){this.data=t,this.data.marks||(this.data.marks=[]),this.parent=e||null,this.selected=!1,this.list=i,this.children=[],this.doubleLink=[],this.isExpand=this.data.isExpand||!0,this.shoudRender=!0,this.init(),this.refreshClass(),this.parseText()}getId(){return this.data.id}addChild(t,e){this.children.splice(e,0,t),t.parent=this,t.list=this.list}removeChild(t){var e=this.children.indexOf(t);if(e>-1)return this.children.splice(e,1),e}select(){this.selected=!0,this.liDom.classList.add("select")}shiftSelect(){this.liDom.classList.contains("shiftSelect")||this.liDom.classList.add("shiftSelect")}focus(){this.list&&(this.list.selecNode(this),this.list._editNode&&(this.list._oldEditNode=this.list._editNode),this.list._editNode=this,this.isEdit=!0,window.myListNode=this,this.keepFocusEnd(),this.list.emit("selectNode",{node:this}))}keepFocusEnd(){this.isEdit=!0,function(t){if(window.getSelection){var e=window.getSelection();e.selectAllChildren(t),e.collapseToEnd()}t.focus()}(this.textDom)}unSelect(){this.selected=!1,this.liDom.classList.remove("select")}refreshAssist(){if(this.pdfDom&&this.assistDom.removeChild(this.pdfDom),this.pdfDom&&(this.pdfDom=null),this.data.isPDFRefer){this.pdfDom=document.createElement("span"),this.pdfDom.classList.add("iconfont"),this.pdfDom.classList.add("icon-PDF");var t=JSON.parse(this.data.pdf);this.pdfDom.setAttribute("data-id",t.id),this.pdfDom.setAttribute("data-page",t.page),this.pdfDom.node=this,this.assistDom.appendChild(this.pdfDom),this.pdfDom.style="width:20px;height:20px;margin-top: -2px;margin-right: 4px;line-height:20px;text-align:center;font-size:16px;color:rgb(120 120 125);display:inline-block;"}}initMark(){}_refreshTodo(){this.data.todoDone?this.liDom.classList.contains("node-todo-done")||this.liDom.classList.add("node-todo-done"):this.liDom.classList.contains("node-todo-done")&&this.liDom.classList.remove("node-todo-done")}toggleTodoState(){if(this.data.isTodo){var t=this.getData(),e=Object.assign(Object.assign({},t),{todoDone:!t.todoDone});this.list.execute("changeNode",{node:this,oldData:t,newData:e})}}initRemark(){}removeImageEvent(){}addImageEvent(){}init(){this.liDom=document.createElement("li"),this.liDom.classList.add("li-node"),this.divDom=document.createElement("div"),this.divDom.classList.add("node-control"),this.liDom.appendChild(this.divDom),this.openDom=document.createElement("span"),this.dottDom=document.createElement("span");var t=document.createElement("span");this.dottDom.appendChild(t),this.dottDom.classList.add("icon-dott"),this.editDom=document.createElement("div"),this.divDom.appendChild(this.openDom),this.divDom.appendChild(this.dottDom),this.divDom.appendChild(this.editDom),this.openDom.innerHTML=zi,this.childrenDom=document.createElement("ul"),this.liDom.appendChild(this.childrenDom),this.marksDom=document.createElement("div"),this.marksDom.classList.add("node-markList"),this.divDom.appendChild(this.marksDom),this.assistDom=document.createElement("div"),this.assistDom.classList.add("node-assist"),this.assistDom.setAttribute("contenteditable",!1),this.assistDom.style="float:left",this.editDom.appendChild(this.assistDom),this.textDom=document.createElement("div"),this.textDom.classList.add("text"),this.editDom.appendChild(this.textDom),this.textDom.setAttribute("contenteditable",!0),this.list&&this.list.closeSpellcheck&&this.textDom.setAttribute("spellcheck",!1),this.textDom.setAttribute("tabindex",-1),this.parent&&this.parent.childrenDom.appendChild(this.liDom),this.liDom.node=this,this.refreshAssist(),this.addEvent()}cancelEdit(){var t=this;this.shoudRender&&(this.isEdit=!1,this.data.text=this.textDom.innerText,this._oldMdText!=this.data.text?t.list.execute("changeText",{oldText:t._oldMdText,newText:t.data.text,node:t}):(this.data.text=this._oldMdText,t.parseText()),t.list._editNode=null)}addEvent(){}parseMdText(){this.textDom.innerHTML="";var e="";this.list&&(e=this.list.path),t.MarkdownRenderer.renderMarkdown(this.data.text,this.textDom,e,null).then((()=>{this._delay()}))}isMindmap(t){if(t&&t.frontmatter){var e=t.frontmatter["mindmap-plugin"];return"rich"==e||"basic"==e}return!1}isMindmapRichMode(t){return!!(t&&t.frontmatter&&t.frontmatter["mindmap-plugin"]&&"rich"==t.frontmatter["mindmap-plugin"])}_delay(){this.textDom.findAll(".internal-embed").forEach((i=>e(this,void 0,void 0,(function*(){const e=i.getAttribute("src");if("string"==typeof e){if(i.querySelector(".markdown-embed"))return;var n=t.parseLinktext(e),r="";if(this.list&&this.list.view){var s=this.list.view.app.metadataCache.getFirstLinkpathDest(n.path,this.list.path||"");if(s instanceof t.TFile&&"md"===s.extension){if(this.textDom.querySelector(`.markdown-embed[data-name="${s.path}"]`))return;var o=this.list.view.app.metadataCache.getFileCache(s);if(this.isMindmap(o)){if((l=document.createElement("div")).classList.add("markdown-embed"),l.setAttribute("tabindex","-1"),l.setAttribute("contenteditable","false"),i.appendChild(l),l.setAttribute("data-name",s.path),(u=document.createElement("div")).classList.add("markdown-embed-content"),(p=document.createElement("div")).classList.add("markdown-preview-view"),u.appendChild(p),(m=document.createElement("div")).classList.add("markdown-embed-link"),m.setAttribute("aria-label","Open link"),m.innerHTML=`<a data-href="${e}" href="${e}" class="internal-link" target="_blank" rel="noopener"><svg viewBox="0 0 100 100" class="link" width="20" height="20"><path fill="currentColor" stroke="currentColor" d="M74,8c-4.8,0-9.3,1.9-12.7,5.3l-10,10c-2.9,2.9-4.7,6.6-5.1,10.6C46,34.6,46,35.3,46,36c0,2.7,0.6,5.4,1.8,7.8l3.1-3.1 C50.3,39.2,50,37.6,50,36c0-3.7,1.5-7.3,4.1-9.9l10-10c2.6-2.6,6.2-4.1,9.9-4.1s7.3,1.5,9.9,4.1c2.6,2.6,4.1,6.2,4.1,9.9 s-1.5,7.3-4.1,9.9l-10,10C71.3,48.5,67.7,50,64,50c-1.6,0-3.2-0.3-4.7-0.8l-3.1,3.1c2.4,1.1,5,1.8,7.8,1.8c4.8,0,9.3-1.9,12.7-5.3 l10-10C90.1,35.3,92,30.8,92,26s-1.9-9.3-5.3-12.7C83.3,9.9,78.8,8,74,8L74,8z M62,36c-0.5,0-1,0.2-1.4,0.6l-24,24 c-0.5,0.5-0.7,1.2-0.6,1.9c0.2,0.7,0.7,1.2,1.4,1.4c0.7,0.2,1.4,0,1.9-0.6l24-24c0.6-0.6,0.8-1.5,0.4-2.2C63.5,36.4,62.8,36,62,36 z M36,46c-4.8,0-9.3,1.9-12.7,5.3l-10,10c-3.1,3.1-5,7.2-5.2,11.6c0,0.4,0,0.8,0,1.2c0,4.8,1.9,9.3,5.3,12.7 C16.7,90.1,21.2,92,26,92s9.3-1.9,12.7-5.3l10-10C52.1,73.3,54,68.8,54,64c0-2.7-0.6-5.4-1.8-7.8l-3.1,3.1 c0.5,1.5,0.8,3.1,0.8,4.7c0,3.7-1.5,7.3-4.1,9.9l-10,10C33.3,86.5,29.7,88,26,88s-7.3-1.5-9.9-4.1S12,77.7,12,74 c0-3.7,1.5-7.3,4.1-9.9l10-10c2.6-2.6,6.2-4.1,9.9-4.1c1.6,0,3.2,0.3,4.7,0.8l3.1-3.1C41.4,46.6,38.7,46,36,46L36,46z"></path></svg></a>`,this.textDom.style.overflow="auto",l.appendChild(u),l.appendChild(m),this.isMindmapRichMode(o))yield c(this.list.view.app,s,i,this,this.list.colors,this.list.setting,(t=>{setTimeout((()=>{t.toDiv(!0),t.containerEL.style.visibility="visible",t.center(),t.root.unSelect()}),600)}));else{var a=o&&o.frontmatter;if(a)var h=!!a["display-mode"]&&"table"==a["display-mode"];yield d(this.list.view.app,s,i,this,this.list.colors,this.list.setting,(t=>{setTimeout((()=>{t.toDiv(!0),t.containerEL.style.visibility="visible",t.center(),t.root.unSelect()}),600)}),0,h)}}else{var l,u,p,m;if(r=yield this.list.view.app.vault.adapter.read(s.path),(l=document.createElement("div")).classList.add("markdown-embed"),l.setAttribute("data-name",s.path),(u=document.createElement("div")).classList.add("markdown-embed-content"),(p=document.createElement("div")).classList.add("markdown-preview-view"),u.appendChild(p),(m=document.createElement("div")).classList.add("markdown-embed-link"),m.setAttribute("aria-label","Open link"),m.innerHTML=`<a data-href="${e}" href="${e}" class="internal-link" target="_blank" rel="noopener"><svg viewBox="0 0 100 100" class="link" width="20" height="20"><path fill="currentColor" stroke="currentColor" d="M74,8c-4.8,0-9.3,1.9-12.7,5.3l-10,10c-2.9,2.9-4.7,6.6-5.1,10.6C46,34.6,46,35.3,46,36c0,2.7,0.6,5.4,1.8,7.8l3.1-3.1 C50.3,39.2,50,37.6,50,36c0-3.7,1.5-7.3,4.1-9.9l10-10c2.6-2.6,6.2-4.1,9.9-4.1s7.3,1.5,9.9,4.1c2.6,2.6,4.1,6.2,4.1,9.9 s-1.5,7.3-4.1,9.9l-10,10C71.3,48.5,67.7,50,64,50c-1.6,0-3.2-0.3-4.7-0.8l-3.1,3.1c2.4,1.1,5,1.8,7.8,1.8c4.8,0,9.3-1.9,12.7-5.3 l10-10C90.1,35.3,92,30.8,92,26s-1.9-9.3-5.3-12.7C83.3,9.9,78.8,8,74,8L74,8z M62,36c-0.5,0-1,0.2-1.4,0.6l-24,24 c-0.5,0.5-0.7,1.2-0.6,1.9c0.2,0.7,0.7,1.2,1.4,1.4c0.7,0.2,1.4,0,1.9-0.6l24-24c0.6-0.6,0.8-1.5,0.4-2.2C63.5,36.4,62.8,36,62,36 z M36,46c-4.8,0-9.3,1.9-12.7,5.3l-10,10c-3.1,3.1-5,7.2-5.2,11.6c0,0.4,0,0.8,0,1.2c0,4.8,1.9,9.3,5.3,12.7 C16.7,90.1,21.2,92,26,92s9.3-1.9,12.7-5.3l10-10C52.1,73.3,54,68.8,54,64c0-2.7-0.6-5.4-1.8-7.8l-3.1,3.1 c0.5,1.5,0.8,3.1,0.8,4.7c0,3.7-1.5,7.3-4.1,9.9l-10,10C33.3,86.5,29.7,88,26,88s-7.3-1.5-9.9-4.1S12,77.7,12,74 c0-3.7,1.5-7.3,4.1-9.9l10-10c2.6-2.6,6.2-4.1,9.9-4.1c1.6,0,3.2,0.3,4.7,0.8l3.1-3.1C41.4,46.6,38.7,46,36,46L36,46z"></path></svg></a>`,i.appendChild(l),l.appendChild(u),l.appendChild(m),n.subpath){var f=this.list.view.app.metadataCache.getFileCache(s),g=t.resolveSubpath(f,n.subpath);if(g&&g.start&&g.end)var v=r.substring(g.start.offset,g.end.offset);else if(g&&g.start&&!g.end)v=r.substr(g.start.offset);else v=r||""}else v=r||"";v&&t.MarkdownRenderer.renderMarkdown(v,p,this.list.path||"",null)}}}}})))),setTimeout((()=>{this.textDom.findAll(".internal-embed").forEach((e=>{var i;const n=e.getAttribute("src"),r="string"==typeof n&&this.list&&(null===(i=this.list.view)||void 0===i?void 0:i.app.metadataCache.getFirstLinkpathDest(n,this.list.path));if(r instanceof t.TFile&&"md"!==r.extension&&this.list){e.innerText="";var s=this.list.view.app.vault.getResourcePath(r);e.createEl("img",{attr:{src:s}},(t=>{e.hasAttribute("width")&&t.setAttribute("width",e.getAttribute("width")),e.hasAttribute("alt")&&t.setAttribute("alt",e.getAttribute("alt"))})),e.addClasses(["image-embed","is-loaded"])}})),this.textDom.querySelectorAll("img").forEach((t=>{t.setAttribute("draggble","false")})),this.textDom.querySelectorAll("a").forEach((t=>{t.setAttribute("tabindex",-1),t.style.cursor="pointer",t.setAttribute("contenteditable",!1)})),this.textDom.querySelectorAll("pre").forEach((t=>{t&&t.hasAttribute("tabindex")&&t.removeAttribute("tabindex")}))}),100)}parseText(){this.parseMdText()}renderMdText(){this._oldMdText=this.data.text,this.textDom.innerText=this._oldMdText,this.list._selectNode=this}refreshMdText(){this.data.mdText=this.textDom.innerHTML}removeEvent(){this.dottDom.onmouseenter=null,this.dottDom.onmouseleave=null,this.divDom.ondragstart=null,this.divDom.ondrop=null,this.divDom.ondragover=null,this.divDom.ondragend=null,this.divDom.ondragleave=null,this.textDom.onfocus=null,this.textDom.onblur=null,this.openDom.onclick=null,this.removeImageEvent()}setPdfAnnotate(){this.refreshAssist()}collapse(){this.isExpand=!1,this.childrenDom.style.display="none",this.refreshClass()}expand(){this.isExpand=!0,this.childrenDom.style.display="",this.refreshClass()}getSiblings(){if(this.parent)return this.parent.children.filter((t=>t!=this))}show(){this.liDom.style.display=""}hide(){this.liDom.style.display="none"}showNode(){this.divDom.style.display="block"}hideNode(){this.divDom.style.display="none"}isShow(){return"none"!=this.divDom.style.display&&"none"!=this.liDom.style.display}isLeaf(){return!this.children.length}getLevel(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}remove(){this.parent?this.parent.childrenDom.removeChild(this.liDom):this.list.el.removeChild(this.liDom),this.removeEvent()}refreshClass(){this.isExpand?(this.openDom.classList=[],this.liDom.classList.add("node-expand"),this.openDom.classList.add("node-open"),this.openDom.classList.add("iconfont"),this.openDom.classList.add("icon-min"),this.openDom.innerHTML=zi):(this.openDom.classList=[],this.openDom.classList.add("node-open"),this.openDom.classList.add("iconfont"),this.openDom.classList.add("icon-iconjia"),this.liDom.classList.remove("node-expand"),this.openDom.innerHTML='<svg t="1630198999941" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5923" width="10" height="10" style="margin-top:5px"><path d="M549.2308673 976.3910087l468.65392326-468.65392322-467.23381477-467.23381474z" p-id="5924"></path></svg>'),this.isLeaf()?this.liDom.classList.add("node-leaf"):this.liDom.classList.contains("node-leaf")&&this.liDom.classList.remove("node-leaf")}getPlainData(){var t={color:this.data.color,fontSize:this.data.fontSize,todoDone:this.data.todoDone,isTodo:this.data.isTodo,priority:this.data.priority,percent:this.data.percent,isImageNode:this.data.isImageNode,imageWidth:this.data.imageWidth,imageHeight:this.data.imageHeight,image:this.data.image,link:this.data.link,remark:this.data.remark,marks:this.data.marks.slice()};return Object.assign(Object.assign({},this.data),{data:t})}setPlainData(t){this.data=t,this.refresh()}getText(){return this.data.mdText}setMdText(t){this.data.text=t,this.parseText()}focusLink(){}focusNote(){}refresh(){this.refreshClass(),this.refreshAssist()}offsetTop(t){return Ri(t||this.liDom)}offsetLeft(t){return Fi(t||this.liDom)}getData(t,e){var i=this.data.text,n=Object.assign(Object.assign({},this.data),{text:i.trim(),isExpand:this.isExpand,children:[],isExpanded:this.isExpand});return delete n.mdText,delete n.children,e&&this.removeEvent(),n}getTxt(){return this.textDom.textContent.trim()}getNodeText(){return this.liDom.textContent.trim()}setText(t){this.textDom.innerHTML=t}}function ji(t){var e=t.offsetTop;return null!=t.offsetParent?t.offsetParent.hasClass("mm-app-container")||(e+=ji(t.offsetParent)):e=0,e}function Hi(t){var e=t.offsetLeft;return null!=t.offsetParent?t.offsetParent.hasClass("mm-app-container")||(e+=Hi(t.offsetParent)):e=0,e}function $i(t){var e=null;return 1==t.nodeType?e=$i(t.firstChild):3==t.nodeType&&(e=t),e}function Wi(t){if(t){var e=window.getSelection().getRangeAt(0),i=document.createRange();if(i.selectNodeContents($i(t.textDom.firstChild)),e.compareBoundaryPoints(Range.START_TO_START,i)<=0)return"beginning";if(i.collapsed&&0==i.startOffset)return"beginning";var n=document.createRange();return n.selectNodeContents($i(t.textDom.lastChild)),n.collapsed&&0==n.startOffset||e.compareBoundaryPoints(Range.END_TO_END,n)>=0?"end":void 0}}function Ui(t){if(t.isExpand&&t.childrenDom.children.length)return t.childrenDom.children[0].node;for(var e=null,i=t;i;){if(i.liDom.nextSibling&&i.liDom.nextSibling.node){e=i.liDom.nextSibling.node;break}i=i.parent}return e}function Vi(t){var e=null,i=t;if(i.liDom.previousSibling){var n=Gi(i.liDom.previousSibling);e=n||i.liDom.previousSibling.node}else e=i.parent;return e}function Gi(t){var e=t.node;if(e.isExpand&&e.childrenDom){var i=e.childrenDom.lastElementChild;i&&(e=Gi(i))}return e}class Xi{constructor(t,e){this.el=t,this.data=e,this.routes=[],this.searchNode=[],this.stack=new kt(60),this._doubleMark=0;var i=this.el.parentNode||this.el.parentElement;i&&(this.routeDom=i.querySelector(".mm-router"),this._linkboard=i.querySelector(".mm-link-board")),this._blockDom=document.createElement("div"),this._blockDom.classList.add("mm-block"),this.initEvent(),this.outlineChange=this.outlineChange.bind(this),this.hideFn=this.hideFn.bind(this),this.on("change",this.outlineChange),this.on("hide",this.hideFn)}hideFn(){this.showFilter=!1,this._linkboard.style.display="none"}outlineChange(t){this.view.outlineChange()}dirty(){return this.stack.dirty()}traverseDF(t,e,i){!function e(n){if(n&&n.children){i&&t(n);for(var r=0,s=n.children.length;r<s;r++)e(n.children[r]);i||t(n)}}(e||this.root)}getMarkdown(){var t="",e=this.view.plugin.settings.headLevel;return this.traverseDF((i=>{var n=i.getLevel()+1,r="",s="";if(n>1&&(r="\n"),i.getLevel()<e){for(let t=0;t<n;t++)r+="#";t+=r+" ",t+=i.getData().text.trim()+"\n"}else{for(var o=0;o<i.getLevel()-e;o++)s+="   ";var a=i.getData().text.trim();if(a){var h=a.split("\n"),l=h.length;1==l?t+=`${s}- ${a}\n`:l>1&&(a.startsWith("```")?(t+="\n",t+=`${s}-\n`,h.forEach(((e,i)=>{t+=`${s}  ${e}\n`})),t+="\n"):(t+=`${s}- `,h.forEach(((e,i)=>{t+=i>0?`${s}   ${e.trim()}\n`:`${e.trim()}\n`}))))}else t+="-\n"}}),this.root,!0),t.trim()}renderRoutes(){if(this.routeDom.innerHTML="",this.routes.length){var t=[];this.routes.forEach((e=>{var i=`<span class="mm-route-item" data-id="${e.id}">${e.text}</span> > `;t.push(i)})),this.routeDom&&(this.routeDom.innerHTML=t.join(""))}}save(){this.stack.save(),this.emit("save")}execute(t,e){switch(t){case"deleteNodeAnnotate":var i=e.node;this.stack.execute(new Oi(i));break;case"addPdfNnotate":i=e.node;var n=e.id,r=e.text,s=e.type;this.stack.execute(new Bi(i,n,r,s));break;case"changeText":i=e.node;var o=e.oldText,a=e.newText;this.stack.execute(new Ei(i,o,a));break;case"changeNode":i=e.node;var h=e.oldData,l=e.newData;this.stack.execute(new Si(i,h,l));break;case"expandNode":i=e.node;this.stack.execute(new Ni(i));break;case"collapseNode":i=e.node;this.stack.execute(new Mi(i));break;case"addNode":e.parent,this.stack.execute(new xi(e.node,e.parent,e.index));break;case"removeNode":this.stack.execute(new Di(e.node,e.parent));break;case"addSameNode":e.parent,this.stack.execute(new bi(e.node,e.focusNode,e.parent,e.index));break;case"tabNode":this.stack.execute(new wi(e.node,e.index,e.oldParent,e.parent));break;case"tabNodes":this.stack.execute(new Pi(e.nodes,e.index,e.oldParent,e.parent));break;case"shiftTabNode":this.stack.execute(new ki(e.node,e.oldParent,e.newParent));break;case"shiftTabNodes":this.stack.execute(new Ii(e.nodes,e.oldParent,e.newParent));break;case"shiftCtrlTabNode":this.stack.execute(new _i(e.node,e.oldParent,e.newParent));break;case"dragNode":this.stack.execute(new Ci(e.node,e.oldParent,e.newParent,e.dropNode,e.type));break;case"replaceText":var d=e.nodes;if(d&&d.length){var c=[];d.forEach((t=>{var i=new Ai(t,e.word,e.replaceWord);c.push(i)})),this.stack.execute(new Li(c))}break;case"dragNodes":this.stack.execute(new Ti(e.nodes,e.oldParent,e.newParent,e.dropNode,e.type))}}undo(){this.stack.undo()}redo(){this.stack.redo()}init(t,e){t&&(this.data=t),e&&(e.img||e.image);var i=this,n=[];if(this.data){if(function t(e,n){var r=new qi(e,n,i);e.main&&(i.root=r,i.el.appendChild(r.liDom)),r.parent=n,n&&n.children.push(r)&&n.refreshClass(),r.list=i,e.children&&e.children.forEach((e=>{t(e,r)}))}(this.data,null),this.data.showingNode){var r=this.getNodeById(this.data.showingNode);r&&this.showNode(r)}else this.showNode(this.root);n.length&&n.forEach((t=>{t.collapse()})),this.emit("mounted",{routes:this.routes})}}showRangeNode(t){t||(t=this.root);var e=this.showingNode;if(e){var i=t.getLevel(),n=e.getLevel();i>n?this.traverseBF((e=>{e.getLevel()<i?e.hideNode():e.getLevel()==i&&(e!==t?e.hide():e.isExpand||e.expand())})):this.traverseBF((e=>{var r=e.getLevel();r<i?e.hideNode():r==i?e!=t?e.hide():e.isExpand||e.expand():r>i&&r<=n&&(e.isShow()||(e.show(),e.showNode()))}))}else this.showAllNode(t)}showAllNode(){this.traverseBF((t=>{t.isExpand||t.expand(),t.isShow()||(t.show(),t.showNode(),t.refreshClass()),t.liDom.classList.contains("node-no-border")&&t.liDom.classList.remove("node-no-border"),t.liDom.classList.contains("node-showNode")&&t.liDom.classList.remove("node-showNode")}))}openMindView(t,e){this.view.openMindView(t,e)}openPDFView(t,e){this.view.showAnnotate(t,e)}showNode(t){if(t||(t=this.root),this.showingNode)for(var e=this.showingNode;e;)e.liDom.classList.contains("node-no-border")&&e.liDom.classList.remove("node-no-border"),e.liDom.classList.contains("node-showNode")&&e.liDom.classList.remove("node-showNode"),e=e.parent;this.showRangeNode(t),this.routes=[],this.showingNode=t;var i=t;for(t.showNode(),t.liDom.classList.contains("node-showNode")||t.liDom.classList.add("node-showNode");i;)i&&i!=t&&(this.routes.unshift({text:i.getTxt(),id:i.getId()}),i.hideNode(),i.liDom.classList.contains("node-no-border")||i.liDom.classList.add("node-no-border")),i=i.parent;this.renderRoutes(),this.el.scrollTop=0}getAnnotations(){var t={},e=[];return this.traverseBF((i=>{if(i.data.isPDFRefer){var n=JSON.parse(i.data.pdf);if(t[n.id])return;t[n.id]=1;var r={id:n.id,page:n.page,text:i.data.pdf,type:n.type,pdfName:n.pdfName};"highlight"==n.type&&(r.selectText=n.selectText),e.push(n)}})),e}collapse(){this.traverseBF((t=>{t.collapse()}))}expand(){this.traverseBF((t=>{t.expand()}))}expandLevel(t){this.traverseBF((e=>{e.getLevel()<t?e.expand():e.getLevel()==t&&(e.isLeaf()||e.collapse())}),this.root)}backHistory(){this.searchNode.length&&this.searchNode.forEach((t=>{}))}search(t){var e=this;this.backHistory(),this.showAllNode(),this.searchNode=[],t&&(ei(".li-node .node-control").hide(),ei(".search_key").each(((t,i)=>{var n=ei(i).closest(".li-node");if(n){var r=n.get(0).node;-1==e.searchNode.indexOf(r)&&e.searchNode.push(r)}})),this.searchNode.forEach((t=>{for(var e=t;e;)e.showNode(),e=e.parent})))}clear(){this.removeEvent()}getNodeThemeStyle(t,e){return{}}getRoot(){return this.root}traverseBF(t,e){var i=[];i.push(e||this.root);for(var n=i.shift();n;){for(let t=0,e=n.children.length;t<e;t++)i.push(n.children[t]);t(n),n=i.shift()}}getNodeById(t){var e=null;return this.traverseBF((i=>{i.getId()==t&&(e=i)})),e}getSelectNode(){if(this._selectNode)return this._selectNode;var t=null;return this.traverseBF((e=>{e.selected&&(t=e)})),t}clearSelectNode(){this.traverseBF((t=>{t.unSelect()}))}addNode(t,e,i){i||(i=e.children.length),e.addChild(t,i)}selecNode(t){this.clearSelectNode(),t.select(),this._selectNode=t}getData(t,e,i){var n={},r=this;return function s(o,a){var h=o.getData(e,i);if(h.children=[],o==r.root?n=h:a.push(h),t&&o.data.isImageNode){if(h.image.startsWith("http"))return void(o.data.isImageNode="");var l=h.image.replace(/^data:image\/(\w|\+)+;base64,/,"");t.file(h.id+"-"+h.imageName,l,{base64:!0}),h.image=""}o.children.forEach((t=>{t.isRoot||"induce"==t.nodeType||"induce"==t.rootType||(t.data.pid=o.getId()),s(t,h.children)}))}(this.root),this.showingNode&&(n.showingNode=this.showingNode.getId()),n}census(){var t=0;return this.traverseBF((e=>{t++})),t}remove(){this.traverseBF((t=>{t.remove()})),this.el.innerHTML="",this.root=null}getEditNode(){return this._editNode||null}emit(t,e){var i=new CustomEvent(t,{detail:e});this.el.dispatchEvent(i)}on(t,e){this.el.addEventListener(t,e,!1)}off(t,e){e?this.el.removeEventListener(t,e):this.el.removeEventListener(t)}dragNodes(t,e){var i=e.liDom;if(!ei(i).closest(".shiftSelect").length&&t.length){var n=e.parent;if(n){if("top"==e.dropType)var r="top";else r="down";e.list.execute("dragNodes",{nodes:t,newParent:n,type:r,dropNode:e,oldParent:t[0].parent})}}}moveNode(t,e){if(e){var i=this.getNodeById(t);if(i!=e&&i){for(var n=!1,r=e;r;)r==i&&(n=!0),r=r.parent;if(n)return;if(i.parent){var s,o=i.parent;if("top"==e.dropType)(s=e.parent)&&this.execute("dragNode",{node:i,newParent:s,dropNode:e,oldParent:o,type:"top"});else(s=e.parent)&&this.execute("dragNode",{node:i,newParent:s,oldParent:o,dropNode:e,type:"down"})}}}}_completeFile(t,e){if(this.selectionObj){var i=function(t,e,i){var n=0,r=document.createRange();r.setStart(t,0),r.collapse(!0);for(var s,o=[t],a=!1,h=!1;!h&&(s=o.pop());)if(3==s.nodeType){var l=n+s.length;!a&&e>=n&&e<=l&&(r.setStart(s,e-n),a=!0),a&&i>=n&&i<=l&&(r.setEnd(s,i-n),h=!0),n=l}else for(var d=s.childNodes.length;d--;)o.push(s.childNodes[d]);var c=window.getSelection();return c.removeAllRanges(),c.addRange(r),c}(t.textDom,this.selectionObj.index+2,this.selectionObj.index+2+this.selectionObj.text.length),n=i.getRangeAt(0);n.deleteContents(),n.insertNode(document.createTextNode(e)),i.collapseToEnd(),this.showFilter=!1,this.selectionObj=null,this._linkboard.style.display="none",setTimeout((()=>{i.modify("move","right","character"),i.modify("move","right","character"),t.shoudRender=!0}),0)}}_completeBlock(t){if(this._blockDom.innerHTML="",this._blockDom.style.display="none",this.view&&t){var e=this.view.app.metadataCache.getFirstLinkpathDest(t,this.path||"");if(e&&"md"==e.extension){var i=this.view.app.metadataCache.getFileCache(e);if(i.headings&&i.headings.length){this._blockDom.style.display="block";for(var n=document.createElement("ul"),r=0;r<i.headings.length;r++){var s=document.createElement("li"),o=document.createElement("span");o.classList.add("mm-block-ext"),o.innerText="H"+i.headings[r].level,s.classList.add("mm-block-name");var a=document.createElement("span");a.innerText=i.headings[r].heading,s.setAttribute("data-head",i.headings[r].heading),n.appendChild(s),s.appendChild(o),s.appendChild(a)}this._blockDom.appendChild(n)}}}}_searchFiles(t){if(!t)return;if(this.timeOut&&clearTimeout(this.timeOut),!this.files){var e=this.view.app.vault.getFiles();this.files=e}this.timeOut=setTimeout((()=>{this.files=null}),5e3);var i=new ti(this.files,{keys:["name"]}).search(t);if(this._linkboard.innerHTML="",i.length){i=i.slice(0,20);for(var n=document.createElement("ul"),r=0;r<i.length;r++){var s=document.createElement("li"),o=document.createElement("span");o.classList.add("mm-file-ext"),o.innerText=i[r].item.extension,s.classList.add("mm-file-name"),i[r];var a=i[r].item.extension.length,h=i[r].item.path.substr(0,i[r].item.path.length-(a+1)),l=document.createElement("span");l.innerText=h,s.setAttribute("data-path",i[r].item.path),s.setAttribute("data-name",i[r].item.basename),n.appendChild(s),s.appendChild(o),s.appendChild(l)}this._linkboard.appendChild(n),this._linkboard.appendChild(this._blockDom);var d=this._linkboard.querySelector(".mm-file-name");d.classList.add("active");h=d.getAttribute("data-path");this._completeBlock(h)}}removeEvent(){ei(this.el).off("mouseenter"),ei(this.el).off("mouseleave"),ei(this.el).off("dragstart"),ei(this.el).off("drag"),ei(this.el).off("dragover"),ei(this.el).off("dragend"),ei(this.el).off("dragleave"),ei(this.el).off("drop"),ei(this.el).off("dblclick"),ei(this.el).off("click"),ei(this.el).off("focus"),ei(this.el).off("blur"),ei(this.el).off("mouseover"),ei(this.routeDom).off("click"),ei(document).off("keydown"),ei(document).off("keyup"),this.off("change",this.outlineChange),this.off("hide",this.hideFn),ei(this._linkboard).off("click"),ei(this._linkboard).off("mouseover")}parseQueryString(t){for(var e,i,n,r={},s=t.split("?")[1].split("&"),o=0,a=s.length;o<a;o++)i=(e=s[o].split("="))[0],n=e[1],r[i]=n;return r}initEvent(){var e=this;function i(t){(t.clientX<160||t.clientX>1e3)&&(t.clientY<window.innerHeight/2&&(document.getElementById("cicada-list").scrollTop-=30),t.clientY>window.innerHeight/2&&(document.getElementById("cicada-list").scrollTop+=30))}ei(this.el).off("mouseenter"),ei(this.el).off("mouseleave"),ei(this.el).off("dragstart"),ei(this.el).off("dragover"),ei(this.el).off("dragend"),ei(this.el).off("dragleave"),ei(this.el).off("drop"),ei(this.el).off("dblclick"),ei(this.el).off("click"),ei(this.el).off("drag"),ei(document).off("keydown"),ei(this.el).on("mouseenter",".li-node .icon-dott",(t=>{ei(t.target).closest(".li-node").get(0).node.divDom.setAttribute("draggable",!0)})),ei(this.el).on("dblclick",".li-node .icon-dott",(t=>{var e=ei(t.target).closest(".li-node").get(0).node;e.list.emit("showNode",{node:e}),e.list.showNode(e)})),ei(this.el).on("mouseleave",".li-node .icon-dott",(t=>{ei(t.target).closest(".li-node").get(0).node.divDom.setAttribute("draggable",!1)})),ei(this.el).on("dragstart",".li-node .node-control",(t=>{var e=ei(t.target).closest(".li-node").get(0).node;t.originalEvent.dataTransfer.setData("dragNodeId",e.getId())})),ei(this.el).on("drop",".li-node .node-control",(t=>{t.preventDefault();var i=ei(t.target).closest(".li-node"),n=t.originalEvent.dataTransfer.getData("dragNodeId");if(e.getNodeById(n).liDom.classList.contains("shiftSelect")){var r=e.shiftNodes;(s=i.get(0).node).list.dragNodes(r,s)}else{var s=i.get(0).node;n=t.originalEvent.dataTransfer.getData("dragNodeId");s.list.moveNode(n,s)}s.liDom.classList.contains("node-add-top")&&s.liDom.classList.remove("node-add-top"),s.liDom.classList.contains("node-add-bottom")&&s.liDom.classList.remove("node-add-bottom")})),ei(this.el).on("click",".li-node .node-open",(t=>{t.preventDefault(),t.stopPropagation();var i=ei(t.target).closest(".li-node").get(0).node;i.isExpand?e.execute("collapseNode",{node:i}):e.execute("expandNode",{node:i})})),ei(this.el).off("focus").on("focus",".li-node .text",(t=>{if(t.target&&t.target.closest(".markdown-embed"))return t.stopPropagation(),void t.preventDefault();if("A"==t.target.tagName||t.target.closest("a"))return t.stopPropagation(),void t.preventDefault();var e=ei(t.target).closest(".li-node").get(0).node;e&&!e.isEdit&&(e.renderMdText(),e.focus());var i=this._linkboard.node;i&&i!=e&&(i.shoudRender||(i.shoudRender=!0,i.cancelEdit(),this.hideFn(),this._linkboard.node=null))})),ei(this.el).off("blur").on("blur",".li-node .text",(t=>{if(t.target&&t.target.closest(".markdown-embed"))return t.stopPropagation(),void t.preventDefault();if("A"==t.target.tagName||t.target.closest("a"))t.stopPropagation();else{var e=ei(t.target).closest(".li-node").get(0).node;e&&e.shoudRender&&e.cancelEdit()}})),ei(document).off("keydown").on("keydown",(t=>{var i=t.ctrlKey||t.metaKey,n=t.keyCode||t.which||t.charCode,r=t.shiftKey,s=myListNode||this.getSelectNode();if(8!=n)if(r&&9==n){if(t.preventDefault(),t.stopPropagation(),s){if((g=s.parent)&&g==e.showingNode)return;var o=g.parent;if(o){if(s.list.shiftNodes&&s.list.shiftNodes.length)return void s.list.execute("shiftTabNodes",{nodes:e.list.shiftNodes,newParent:o,oldParent:g});s.shoudRender=!1,s.list.execute("shiftTabNode",{node:s,newParent:o,oldParent:g}),s.list.selecNode(s),s.focus(),s.shoudRender=!0}}}else{if(9==n&&(t.preventDefault(),t.stopPropagation(),s)){g=s.parent;if(s.list.shiftNodes&&s.list.shiftNodes.length){if((v=g.children.indexOf(s.list.shiftNodes[0]))>0){var a=g.children[v-1];s.list.execute("tabNodes",{nodes:this.shiftNodes,index:v,parent:a,oldParent:g})}return}if((v=g.children.indexOf(s))>0){a=g.children[v-1];s.shoudRender=!1,s.list.execute("tabNode",{node:s,index:v,parent:a,oldParent:g}),s.list.selecNode(s),s.refresh(),g.refresh(),a.refresh(),s.focus(),setTimeout((()=>{s.shoudRender=!0}),50)}}if(!i&&!r&&13==n){if(this.showFilter&&s){t.preventDefault(),t.stopPropagation();var h=this._linkboard.querySelector(".mm-file-name.active");if(h){if("md"==h.querySelector(".mm-file-ext").innerText)var l=h.getAttribute("data-name");else l=h.getAttribute("data-path");this._completeFile(s,l)}return}if(t.preventDefault(),s){if(s==e.showingNode)return(p=new qi({id:Fn(),text:""})).list=this,s.list.execute("addNode",{node:p,parent:s}),s.list.selecNode(p),p.focus(),p.refresh(),void s.refresh();if(g=s.parent){v=g.children.indexOf(s);(p=new qi({id:Fn(),text:""})).list=this,s.list.execute("addSameNode",{node:p,focusNode:s,parent:g,index:v+1}),s.list.selecNode(p),p.focus(),s.refresh(),g.refresh()}}}if(i&&221==n&&s&&s.list.showNode(s),i&&219==n&&s.list.showingNode&&s.list.showingNode.parent&&s.list.showNode(e.showingNode.parent),i&&38==n){if(t.preventDefault(),s){var d=s.getId();(y=Vi(s)).dropType="top",s.shoudRender=!1,s.list.moveNode(d,y),s.list.selecNode(s),s.focus(),setTimeout((()=>{s.keepFocusEnd(),s.shoudRender=!0}),0)}}else if(i&&40==n){if(t.preventDefault(),s){d=s.getId();for(var c=Ui(s);c&&c.parent==s;){var u=Ui(c);if(u==c)break;c=u}c.children.length?(c=c.children[0]).dropType="top":c.dropType="down",s.shoudRender=!1,s.list.moveNode(d,c),s.list.selecNode(s),s.focus(),setTimeout((()=>{s.keepFocusEnd(),s.shoudRender=!0}),0)}}else{if(38==n&&s){var p;if(""==s.getTxt())return void((p=Vi(s))&&(s.list.selecNode(p),p.isEdit||(p.renderMdText(),p.focus()),setTimeout((()=>{p.keepFocusEnd()}),0)));if("beginning"==Wi(s))(p=Vi(s))&&(s.list.selecNode(p),p.isEdit||(p.renderMdText(),p.focus()),setTimeout((()=>{p.keepFocusEnd()}),0))}if(40==n&&s){if(""==s.getTxt())return void((c=Ui(s))&&(s.list.selecNode(c),c.isEdit||(c.renderMdText(),c.focus()),setTimeout((()=>{c.keepFocusEnd()}),0)));if("end"==Wi(s))(c=Ui(s))&&(s.list.selecNode(c),c.isEdit||(c.renderMdText(),c.focus()),setTimeout((()=>{c.keepFocusEnd()}),0))}if(i&&"90"==n&&this.undo(),i&&"89"==n&&this.redo(),!i&&!r&&"["==t.key&&this._selectNode)if(this._doubleMark<1)this._doubleMark++;else{this._doubleMark=0;var m=window.getSelection(),f=m.anchorNode;if(f.closest||(f=f.parentElement),f.closest(".li-node")&&f.closest(".li-node")!=this._selectNode.liDom)return;m.getRangeAt(0).insertNode(document.createTextNode("]]")),m.collapseToStart()}38!=n&&"ArrowUp"!=t.key||this.showFilter&&t.preventDefault(),40!=n&&"ArrowDown"!=t.key||this.showFilter&&t.preventDefault()}}else if(s&&!s.getTxt().trim()){var g,v,y=Vi(s);if(0==(v=(g=s.parent).children.indexOf(s))){if(e.showingNode==g)return;s.list.execute("removeNode",{node:s,parent:g})}else v>0&&s.list.execute("removeNode",{node:s,parent:g});t.preventDefault(),s.list.selecNode(y),y&&!y.isEdit&&(y.renderMdText(),y.focus()),setTimeout((()=>{y&&y.keepFocusEnd()}),0)}})),ei(document).on("keyup",(t=>{var e,i=t.keyCode||t.which||t.charCode;if(38!=i&&"ArrowUp"!=t.key||!this.showFilter){if(40!=i&&"ArrowDown"!=t.key||!this.showFilter){if(this._selectNode&&this._selectNode.isEdit){var n=this._selectNode,r=function(t){var e,i=0,n=t.ownerDocument||t.document,r=n.defaultView||n.parentWindow;if(void 0!==r.getSelection){if((e=r.getSelection()).rangeCount>0){var s=r.getSelection().getRangeAt(0),o=s.cloneRange();o.selectNodeContents(t),o.setEnd(s.endContainer,s.endOffset),i=o.toString().length}}else if((e=n.selection)&&"Control"!=e.type){var a=e.createRange(),h=n.body.createTextRange();h.moveToElementText(t),h.setEndPoint("EndToEnd",a),i=h.text.length}return i}(this._selectNode.textDom),s=n.textDom.textContent;n.shoudRender=!0;var o=!1;this._linkboard.style.display="none",this.showFilter=!1;for(var a,h=/\[\[(.+?)\]\]/g,l=0;a=h.exec(s);)if(a.index+2<=r&&a.index+a[1].length+2>=r){o=!0,l=a.index,n.shoudRender=!1,this.showFilter=!0,this._linkboard.style.display="block",this._linkboard.node=n;break}if(o){this.selectionObj={num:r,index:l,text:a[1]},this._searchFiles(a[1]),ei(".mod-left-split").width();var d=Hi(this._selectNode.liDom),c=ji(this._selectNode.liDom),u=ei(this._selectNode.textDom).height(),p=ei(this.el).closest(".mm-mindmap-container").get(0).scrollTop;this._linkboard.style.left=d+"px",this._linkboard.style.top=c+u-p+"px"}else this._searchFiles("")}}else if(t.preventDefault(),e=this._linkboard.querySelector(".mm-file-name.active")){var m=e.nextSibling;if(m)m.classList.add("active"),e.classList.remove("active"),(f=m.getAttribute("data-path"))&&this._completeBlock(f)}}else if(t.preventDefault(),e=this._linkboard.querySelector(".mm-file-name.active")){var f,g=e.previousSibling;if(g)g.classList.add("active"),e.classList.remove("active"),(f=g.getAttribute("data-path"))&&this._completeBlock(f)}})),ei(this._linkboard).on("click","li",(function(){if(ei(this).hasClass("mm-file-name")){var t=ei(this);if(t){if("md"==t.find(".mm-file-ext").text())var i=t.attr("data-name");else i=t.attr("data-path");e._selectNode&&e._selectNode.isEdit&&e._completeFile(e._selectNode,i)}}else if(ei(this).hasClass("mm-block-name")){var n=ei(e._linkboard).find(".mm-file-name.active");if(n){i=n.attr("data-name");var r=ei(this).attr("data-head");e._selectNode&&e._selectNode.isEdit&&e._completeFile(e._selectNode,i+"#"+r)}}})),ei(this.el).off("mouseover").on("mouseover","a",(t=>{var e=t.target;"A"===e.tagName&&e.hasClass("internal-link")&&this.view.app.workspace.trigger("hover-link",{event:t,source:"mindmap-plugin",hoverParent:this.view,targetEl:e,linktext:e.getAttr("href"),sourcePath:this.view.file.path})})),ei(this.el).on("click","a",(function(i){if(i.preventDefault(),ei(this).hasClass("internal-link")||ei(this).hasClass("external-link")){var n=ei(this).attr("href");if(n){if(n.startsWith("obsidian://jump-to-pdf")){var r=e.parseQueryString(n);if(r.pdf&&r.annotate)return void e.openPDFView(decodeURIComponent(r.annotate),decodeURIComponent(r.pdf));if(r.pdf){var s=decodeURIComponent(r.pdf);return void(s.endsWith("pdf")&&e.view.app.workspace.openLinkText(s,e.view.file.path,i.ctrlKey||i.metaKey))}if(r.md&&r.node){var o=decodeURIComponent(r.md),a=decodeURIComponent(r.node);return Object.assign(window,{"show-mindmap-node":a}),void e.openMindView(a,o)}return r.md?void e.view.app.workspace.openLinkText(decodeURIComponent(r.md),e.view.file.path,!0):void 0}if(n.endsWith(".pdf"))return void e.view.openPDF(n);if(ei(this).closest(".markdown-embed").length){const i=t.parseLinktext(n),r=i.subpath.startsWith("#^")?i.subpath.substr(2):null;var h=ei(this).closest(".markdown-embed").data("name");const s=e.view.app.metadataCache.getFirstLinkpathDest(h,e.path||"");var l=e.view.app.metadataCache.getFileCache(s);if(l&&l.frontmatter&&l.frontmatter["annotate-type"]){var d=l.frontmatter["annotate-target"];return void e.openPDFView(r,d)}}e.view.app.workspace.openLinkText(n,e.view.file.path,i.ctrlKey||i.metaKey)}}})),ei(this._linkboard).on("mouseover","li",(function(t){if(ei(this).hasClass("mm-file-name")){var i=ei(e._linkboard).find(".mm-file-name.active");i.length&&i.get(0).classList.remove("active");var n=ei(this).get(0);if(n){n.classList.add("active");var r=n.getAttribute("data-path");r&&e._completeBlock(r)}}})),ei(this.el).on("drag",function(t,e){t.timer=null;let i=Date.now();return n=>{Date.now()-i>=e&&(clearTimeout(t.timer),t.timer=setTimeout(t.bind(this,n),e),i=Date.now())}}(i,10)),ei(this.el).on("dragover",".li-node .node-control",(t=>{t.preventDefault(),i.timer&&clearTimeout(i.timer);var e=ei(t.target).closest(".li-node").get(0).node,n=e.editDom.clientHeight/2;e.list._dropNode=e,t.offsetY<n?(e.dropType="top",e.liDom.classList.add("node-add-top"),e.liDom.classList.contains("node-add-bottom")&&e.liDom.classList.remove("node-add-bottom")):(e.liDom.classList.contains("node-add-top")&&e.liDom.classList.remove("node-add-top"),e.dropType="bottom",e.liDom.classList.add("node-add-bottom"))})),ei(this.el).on("dragend",".li-node .node-control",(t=>{t.preventDefault();var e=ei(t.target).closest(".li-node").get(0).node;e.liDom.classList.contains("node-add-top")&&e.liDom.classList.remove("node-add-top"),e.liDom.classList.contains("node-add-bottom")&&e.liDom.classList.remove("node-add-bottom"),e.divDom.setAttribute("draggable",!1)})),ei(this.el).on("dragleave",".li-node .node-control",(t=>{t.preventDefault();var e=ei(t.target).closest(".li-node").get(0).node;e.liDom.classList.contains("node-add-top")&&e.liDom.classList.remove("node-add-top"),e.liDom.classList.contains("node-add-bottom")&&e.liDom.classList.remove("node-add-bottom")})),ei(this.routeDom).off("click").on("click","span",(function(t){var i=ei(this).attr("data-id"),n=e.getNodeById(i);n&&e.showNode(n)}))}}function Yi(){this._dropEffect="move",this._effectAllowed="all",this._data={}}function Zi(t){if(this._lastClick=0,this.el=t,Zi._instance)throw"DragDropTouch instance already created.";this.ts=this._touchstart.bind(this),this.tm=this._touchmove.bind(this),this.te=this._touchend.bind(this);var e={passive:!1,capture:!1};return this.el.addEventListener("touchstart",this.ts,e),this.el.addEventListener("touchmove",this.tm,e),this.el.addEventListener("touchend",this.te),this.el.addEventListener("touchcancel",this.te),this}Object.defineProperty(Yi.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(t){this._dropEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(Yi.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(t){this._effectAllowed=t},enumerable:!0,configurable:!0}),Object.defineProperty(Yi.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),Yi.prototype.clearData=function(t){null!=t?delete this._data[t.toLowerCase()]:this._data={}},Yi.prototype.getData=function(t){return this._data[t.toLowerCase()]||""},Yi.prototype.setData=function(t,e){this._data[t.toLowerCase()]=e},Yi.prototype.setDragImage=function(t,e,i){var n=DragDropTouch._instance;n._imgCustom=t,n._imgOffset={x:e,y:i}},Zi.prototype._removeEvent=function(){var t={passive:!1,capture:!1};this.el.removeEventListener("touchstart",this.ts,t),this.el.removeEventListener("touchmove",this.tm,t),this.el.removeEventListener("touchend",this.te),this.el.removeEventListener("touchcancel",this.te)},Zi.getInstance=function(){return Zi._instance},Zi.prototype._touchstart=function(t){var e=this;if(this._shouldHandle(t)){if(Date.now()-this._lastClick<Zi._DBLCLICK&&this._dispatchEvent(t,"dblclick",t.target))return t.preventDefault(),void this._reset();this._reset();var i=this._closestDraggable(t.target);i&&(this._dispatchEvent(t,"mousemove",t.target)||this._dispatchEvent(t,"mousedown",t.target)||(this._dragSource=i,this._ptDown=this._getPoint(t),this._lastTouch=t,t.preventDefault(),setTimeout((function(){e._dragSource==i&&null==e._img&&e._dispatchEvent(t,"contextmenu",i)&&e._reset()}),Zi._CTXMENU),Zi._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout((function(){e._isDragEnabled=!0,e._touchmove(t)}),Zi._PRESSHOLDAWAIT))))}},Zi.prototype._touchmove=function(t){if(this._shouldCancelPressHoldMove(t))this._reset();else if(this._shouldHandleMove(t)||this._shouldHandlePressHoldMove(t)){var e=this._getTarget(t);if(this._dispatchEvent(t,"mousemove",e))return this._lastTouch=t,void t.preventDefault();this._dragSource&&!this._img&&this._shouldStartDragging(t)&&(this._dispatchEvent(t,"dragstart",this._dragSource),this._createImage(t),this._dispatchEvent(t,"dragenter",e)),this._img&&(this._lastTouch=t,t.preventDefault(),this._dispatchEvent(t,"drag",this._dragSource),e!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(t,"dragenter",e),this._lastTarget=e),this._moveImage(t),this._isDropZone=this._dispatchEvent(t,"dragover",e))}},Zi.prototype._touchend=function(t){if(this._shouldHandle(t)){if(this._dispatchEvent(this._lastTouch,"mouseup",t.target))return void t.preventDefault();this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",t.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(t.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},Zi.prototype._shouldHandle=function(t){return t&&!t.defaultPrevented&&t.touches&&t.touches.length<2},Zi.prototype._shouldHandleMove=function(t){return!Zi._ISPRESSHOLDMODE&&this._shouldHandle(t)},Zi.prototype._shouldHandlePressHoldMove=function(t){return Zi._ISPRESSHOLDMODE&&this._isDragEnabled&&t&&t.touches&&t.touches.length},Zi.prototype._shouldCancelPressHoldMove=function(t){return Zi._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(t)>Zi._PRESSHOLDMARGIN},Zi.prototype._shouldStartDragging=function(t){var e=this._getDelta(t);return e>Zi._THRESHOLD||Zi._ISPRESSHOLDMODE&&e>=Zi._PRESSHOLDTHRESHOLD},Zi.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new Yi,clearInterval(this._pressHoldInterval)},Zi.prototype._getPoint=function(t,e){return t&&t.touches&&(t=t.touches[0]),{x:e?t.pageX:t.clientX,y:e?t.pageY:t.clientY}},Zi.prototype._getDelta=function(t){if(Zi._ISPRESSHOLDMODE&&!this._ptDown)return 0;var e=this._getPoint(t);return Math.abs(e.x-this._ptDown.x)+Math.abs(e.y-this._ptDown.y)},Zi.prototype._getTarget=function(t){for(var e=this._getPoint(t),i=document.elementFromPoint(e.x,e.y);i&&"none"==getComputedStyle(i).pointerEvents;)i=i.parentElement;return i},Zi.prototype._createImage=function(t){this._img&&this._destroyImage();var e=this._imgCustom||this._dragSource;if(this._img=e.cloneNode(!0),this._copyStyle(e,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var i=e.getBoundingClientRect(),n=this._getPoint(t);this._imgOffset={x:n.x-i.left,y:n.y-i.top},this._img.style.opacity=Zi._OPACITY.toString()}this._moveImage(t),document.body.appendChild(this._img)},Zi.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},Zi.prototype._moveImage=function(t){var e=this;requestAnimationFrame((function(){if(e._img){var i=e._getPoint(t,!0),n=e._img.style;n.position="absolute",n.pointerEvents="none",n.zIndex="999999",n.left=Math.round(i.x-e._imgOffset.x)+"px",n.top=Math.round(i.y-e._imgOffset.y)+"px"}}))},Zi.prototype._copyProps=function(t,e,i){for(var n=0;n<i.length;n++){var r=i[n];t[r]=e[r]}},Zi.prototype._copyStyle=function(t,e){if(Zi._rmvAtts.forEach((function(t){e.removeAttribute(t)})),t instanceof HTMLCanvasElement){var i=t,n=e;n.width=i.width,n.height=i.height,n.getContext("2d").drawImage(i,0,0)}for(var r=getComputedStyle(t),s=0;s<r.length;s++){var o=r[s];o.indexOf("transition")<0&&(e.style[o]=r[o])}e.style.pointerEvents="none";for(s=0;s<t.children.length;s++)this._copyStyle(t.children[s],e.children[s])},Zi.prototype._dispatchEvent=function(t,e,i){if(t&&i){var n=document.createEvent("Event"),r=t.touches?t.touches[0]:t;return n.initEvent(e,!0,!0),n.button=0,n.which=n.buttons=1,this._copyProps(n,t,Zi._kbdProps),this._copyProps(n,r,Zi._ptProps),n.dataTransfer=this._dataTransfer,i.dispatchEvent(n),n.defaultPrevented}return!1},Zi.prototype._closestDraggable=function(t){for(;t;t=t.parentElement)if(t.hasAttribute("draggable")&&t.draggable)return t;return null},Zi._THRESHOLD=5,Zi._OPACITY=.5,Zi._DBLCLICK=200,Zi._CTXMENU=900,Zi._ISPRESSHOLDMODE=!1,Zi._PRESSHOLDAWAIT=400,Zi._PRESSHOLDMARGIN=25,Zi._PRESSHOLDTHRESHOLD=0,Zi._rmvAtts="id,class,style,draggable".split(","),Zi._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),Zi._ptProps="pageX,pageY,clientX,clientY,screenX,screenY,offsetX,offsetY".split(",");var Ji=mt((function(t){!function(e){var i=function(){return{escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:e,mimeType:function(t){var i=e(t).toLowerCase();return(n="application/font-woff",r="image/jpeg",{woff:n,woff2:n,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:r,jpeg:r,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[i]||"";var n,r},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(t){return t.toBlob?new Promise((function(e){t.toBlob(e)})):function(t){return new Promise((function(e){for(var i=window.atob(t.toDataURL().split(",")[1]),n=i.length,r=new Uint8Array(n),s=0;s<n;s++)r[s]=i.charCodeAt(s);e(new Blob([r],{type:"image/png"}))}))}(t)},resolveUrl:function(t,e){var i=document.implementation.createHTMLDocument(),n=i.createElement("base");i.head.appendChild(n);var r=i.createElement("a");return i.body.appendChild(r),n.href=e,r.href=t,r.href},getAndEncode:function(t){var e=3e4;a.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());return new Promise((function(i){var n,r=new XMLHttpRequest;if(r.onreadystatechange=o,r.ontimeout=h,r.responseType="blob",r.timeout=e,r.open("GET",t,!0),r.send(),a.impl.options.imagePlaceholder){var s=a.impl.options.imagePlaceholder.split(/,/);s&&s[1]&&(n=s[1])}function o(){if(4===r.readyState)if(200===r.status){var e=new FileReader;e.onloadend=function(){var t=e.result.split(/,/)[1];i(t)},e.readAsDataURL(r.response)}else n?i(n):l("cannot fetch resource: "+t+", status: "+r.status)}function h(){n?i(n):l("timeout of "+e+"ms occured while fetching resource: "+t)}function l(t){console.error(t),i("")}}))},uid:(t=0,function(){return"u"+e()+t++;function e(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}),delay:function(t){return function(e){return new Promise((function(i){setTimeout((function(){i(e)}),t)}))}},asArray:function(t){for(var e=[],i=t.length,n=0;n<i;n++)e.push(t[n]);return e},escapeXhtml:function(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(t){return new Promise((function(e,i){var n=new Image;n.onload=function(){e(n)},n.onerror=i,n.src=t}))},width:function(t){var e=i(t,"border-left-width"),n=i(t,"border-right-width");return t.scrollWidth+e+n},height:function(t){var e=i(t,"border-top-width"),n=i(t,"border-bottom-width");return t.scrollHeight+e+n}};var t;function e(t){var e=/\.([^\.\/]*?)$/g.exec(t);return e?e[1]:""}function i(t,e){var i=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(i.replace("px",""))}}(),n=function(){var t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(t,i,s){return o()?Promise.resolve(t):Promise.resolve(t).then(n).then((function(e){var n=Promise.resolve(t);return e.forEach((function(t){n=n.then((function(e){return r(e,t,i,s)}))})),n}));function o(){return!e(t)}},shouldProcess:e,impl:{readUrls:n,inline:r}};function e(e){return-1!==e.search(t)}function n(e){for(var n,r=[];null!==(n=t.exec(e));)r.push(n[1]);return r.filter((function(t){return!i.isDataUrl(t)}))}function r(t,e,n,r){return Promise.resolve(e).then((function(t){return n?i.resolveUrl(t,n):t})).then(r||i.getAndEncode).then((function(t){return i.dataAsUrl(t,i.mimeType(e))})).then((function(n){return t.replace(function(t){return new RegExp("(url\\(['\"]?)("+i.escape(t)+")(['\"]?\\))","g")}(e),"$1"+n+"$3")}))}}(),r=function(){return{resolveAll:function(){return t().then((function(t){return Promise.all(t.map((function(t){return t.resolve()})))})).then((function(t){return t.join("\n")}))},impl:{readAll:t}};function t(){return Promise.resolve(i.asArray(document.styleSheets)).then((function(t){var e=[];return t.forEach((function(t){try{i.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}})),e})).then((function(t){return t.filter((function(t){return t.type===CSSRule.FONT_FACE_RULE})).filter((function(t){return n.shouldProcess(t.style.getPropertyValue("src"))}))})).then((function(e){return e.map(t)}));function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return n.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}}(),s=function(){return{inlineAll:function e(r){return r instanceof Element?s(r).then((function(){return r instanceof HTMLImageElement?t(r).inline():Promise.all(i.asArray(r.childNodes).map((function(t){return e(t)})))})):Promise.resolve(r);function s(t){if(!t.style)return Promise.resolve(t);var e=t.style.getPropertyValue("background");return e?n.inlineAll(e).then((function(e){t.style&&t.style.setProperty&&t.style.setProperty("background",e,t.style.getPropertyPriority("background"))})).then((function(){return t})):Promise.resolve(t)}},impl:{newImage:t}};function t(t){return{inline:function(e){return i.isDataUrl(t.src)?Promise.resolve():Promise.resolve(t.src).then(e||i.getAndEncode).then((function(e){return i.dataAsUrl(e,i.mimeType(t.src))})).then((function(e){return new Promise((function(i,n){t.onload=i,t.onerror=n,t.src=e}))}))}}}}(),o={imagePlaceholder:void 0,cacheBust:!1},a={toSvg:h,toPng:function(t,e){return l(t,e||{}).then((function(t){return t.toDataURL()}))},toJpeg:function(t,e){return l(t,e=e||{}).then((function(t){return t.toDataURL("image/jpeg",e.quality||1)}))},toBlob:function(t,e){return l(t,e||{}).then(i.canvasToBlob)},toPixelData:function(t,e){return l(t,e||{}).then((function(e){return e.getContext("2d").getImageData(0,0,i.width(t),i.height(t)).data}))},impl:{fontFaces:r,images:s,util:i,inliner:n,options:{}}};function h(t,e){return function(t){void 0===t.imagePlaceholder?a.impl.options.imagePlaceholder=o.imagePlaceholder:a.impl.options.imagePlaceholder=t.imagePlaceholder;void 0===t.cacheBust?a.impl.options.cacheBust=o.cacheBust:a.impl.options.cacheBust=t.cacheBust}(e=e||{}),Promise.resolve(t).then((function(t){return d(t,e.filter,!0)})).then(c).then(u).then((function(t){e.bgcolor&&(t.style.backgroundColor=e.bgcolor);e.width&&(t.style.width=e.width+"px");e.height&&(t.style.height=e.height+"px");e.style&&Object.keys(e.style).forEach((function(i){t.style[i]=e.style[i]}));return t})).then((function(n){return function(t,e,n){return Promise.resolve(t).then((function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)})).then(i.escapeXhtml).then((function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"})).then((function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+n+'">'+t+"</svg>"})).then((function(t){return"data:image/svg+xml;charset=utf-8,"+t}))}(n,e.width||i.width(t),e.height||i.height(t))}))}function l(t,e){return h(t,e).then(i.makeImage).then(i.delay(100)).then((function(n){var r=function(t){var n=document.createElement("canvas");if(n.width=e.width||i.width(t),n.height=e.height||i.height(t),e.bgcolor){var r=n.getContext("2d");r.fillStyle=e.bgcolor,r.fillRect(0,0,n.width,n.height)}return n}(t);return r.getContext("2d").drawImage(n,0,0),r}))}function d(t,e,n){return n||!e||e(t)?Promise.resolve(t).then((function(t){return t instanceof HTMLCanvasElement?i.makeImage(t.toDataURL()):t.cloneNode(!1)})).then((function(n){return function(t,e,n){var r=t.childNodes;return 0===r.length?Promise.resolve(e):s(e,i.asArray(r),n).then((function(){return e}));function s(t,e,i){var n=Promise.resolve();return e.forEach((function(e){n=n.then((function(){return d(e,i)})).then((function(e){e&&t.appendChild(e)}))})),n}}(t,n,e)})).then((function(e){return function(t,e){return e instanceof Element&&e.style?Promise.resolve().then(n).then(r).then(s).then(o).then((function(){return e})):e;function n(){function n(t,e){function n(t,e){e.setProperty&&i.asArray(t).forEach((function(i){t&&e.setProperty(i,t.getPropertyValue(i),t.getPropertyPriority(i))}))}t.cssText?e.cssText=t.cssText:n(t,e)}n(window.getComputedStyle(t),e.style)}function r(){function n(n){var r=window.getComputedStyle(t,n),s=r.getPropertyValue("content");if(""!==s&&"none"!==s){var o=i.uid();e.className=e.className+" "+o;var a=document.createElement("style");a.appendChild(h(o,n,r)),e.appendChild(a)}function h(t,e,n){var r="."+t+":"+e,s=n.cssText?o(n):a(n);return document.createTextNode(r+"{"+s+"}");function o(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}function a(t){return i.asArray(t).map(e).join("; ")+";";function e(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}}}}[":before",":after"].forEach((function(t){n(t)}))}function s(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}function o(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach((function(t){var i=e.getAttribute(t);i&&e.style&&e.style.setProperty&&e.style.setProperty(t,i)})))}}(t,e)})):Promise.resolve()}function c(t){return r.resolveAll().then((function(e){var i=document.createElement("style");return t.appendChild(i),i.appendChild(document.createTextNode(e)),t}))}function u(t){return s.inlineAll(t).then((function(){return t}))}t.exports=a}()}));function Ki(t,e){return Array(e+1).join(t)}var Qi=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function tn(t){return sn(t,Qi)}var en=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function nn(t){return sn(t,en)}var rn=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function sn(t,e){return e.indexOf(t.nodeName)>=0}function on(t,e){return t.getElementsByTagName&&e.some((function(e){return t.getElementsByTagName(e).length}))}var an={};function hn(t){return t?t.replace(/(\n+\s*)+/g,"\n"):""}function ln(t){for(var e in this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[],t.rules)this.array.push(t.rules[e])}function dn(t,e,i){for(var n=0;n<t.length;n++){var r=t[n];if(cn(r,e,i))return r}}function cn(t,e,i){var n=t.filter;if("string"==typeof n){if(n===e.nodeName.toLowerCase())return!0}else if(Array.isArray(n)){if(n.indexOf(e.nodeName.toLowerCase())>-1)return!0}else{if("function"!=typeof n)throw new TypeError("`filter` needs to be a string, array, or function");if(n.call(t,e,i))return!0}}function un(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function pn(t,e,i){return t&&t.parentNode===e||i(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}an.paragraph={filter:"p",replacement:function(t){return"\n\n"+t+"\n\n"}},an.lineBreak={filter:"br",replacement:function(t,e,i){return i.br+"\n"}},an.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e,i){var n=Number(e.nodeName.charAt(1));return"setext"===i.headingStyle&&n<3?"\n\n"+t+"\n"+Ki(1===n?"=":"-",t.length)+"\n\n":"\n\n"+Ki("#",n)+" "+t+"\n\n"}},an.blockquote={filter:"blockquote",replacement:function(t){return"\n\n"+(t=(t=t.replace(/^\n+|\n+$/g,"")).replace(/^/gm,"> "))+"\n\n"}},an.list={filter:["ul","ol"],replacement:function(t,e){var i=e.parentNode;return"LI"===i.nodeName&&i.lastElementChild===e?"\n"+t:"\n\n"+t+"\n\n"}},an.listItem={filter:"li",replacement:function(t,e,i){t=t.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var n=i.bulletListMarker+"   ",r=e.parentNode;if("OL"===r.nodeName){var s=r.getAttribute("start"),o=Array.prototype.indexOf.call(r.children,e);n=(s?Number(s)+o:o+1)+".  "}return n+t+(e.nextSibling&&!/\n$/.test(t)?"\n":"")}},an.indentedCodeBlock={filter:function(t,e){return"indented"===e.codeBlockStyle&&"PRE"===t.nodeName&&t.firstChild&&"CODE"===t.firstChild.nodeName},replacement:function(t,e,i){return"\n\n    "+e.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},an.fencedCodeBlock={filter:function(t,e){return"fenced"===e.codeBlockStyle&&"PRE"===t.nodeName&&t.firstChild&&"CODE"===t.firstChild.nodeName},replacement:function(t,e,i){for(var n,r=((e.firstChild.getAttribute("class")||"").match(/language-(\S+)/)||[null,""])[1],s=e.firstChild.textContent,o=i.fence.charAt(0),a=3,h=new RegExp("^"+o+"{3,}","gm");n=h.exec(s);)n[0].length>=a&&(a=n[0].length+1);var l=Ki(o,a);return"\n\n"+l+r+"\n"+s.replace(/\n$/,"")+"\n"+l+"\n\n"}},an.horizontalRule={filter:"hr",replacement:function(t,e,i){return"\n\n"+i.hr+"\n\n"}},an.inlineLink={filter:function(t,e){return"inlined"===e.linkStyle&&"A"===t.nodeName&&t.getAttribute("href")},replacement:function(t,e){var i=e.getAttribute("href"),n=hn(e.getAttribute("title"));return n&&(n=' "'+n+'"'),"["+t+"]("+i+n+")"}},an.referenceLink={filter:function(t,e){return"referenced"===e.linkStyle&&"A"===t.nodeName&&t.getAttribute("href")},replacement:function(t,e,i){var n,r,s=e.getAttribute("href"),o=hn(e.getAttribute("title"));switch(o&&(o=' "'+o+'"'),i.linkReferenceStyle){case"collapsed":n="["+t+"][]",r="["+t+"]: "+s+o;break;case"shortcut":n="["+t+"]",r="["+t+"]: "+s+o;break;default:var a=this.references.length+1;n="["+t+"]["+a+"]",r="["+a+"]: "+s+o}return this.references.push(r),n},references:[],append:function(t){var e="";return this.references.length&&(e="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),e}},an.emphasis={filter:["em","i"],replacement:function(t,e,i){return t.trim()?i.emDelimiter+t+i.emDelimiter:""}},an.strong={filter:["strong","b"],replacement:function(t,e,i){return t.trim()?i.strongDelimiter+t+i.strongDelimiter:""}},an.code={filter:function(t){var e=t.previousSibling||t.nextSibling,i="PRE"===t.parentNode.nodeName&&!e;return"CODE"===t.nodeName&&!i},replacement:function(t){if(!t)return"";t=t.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(t)?" ":"",i="`",n=t.match(/`+/gm)||[];-1!==n.indexOf(i);)i+="`";return i+e+t+e+i}},an.image={filter:"img",replacement:function(t,e){var i=hn(e.getAttribute("alt")),n=e.getAttribute("src")||"",r=hn(e.getAttribute("title"));return n?"!["+i+"]("+n+(r?' "'+r+'"':"")+")":""}},ln.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){return t.isBlank?this.blankRule:(e=dn(this.array,t,this.options))||(e=dn(this._keep,t,this.options))||(e=dn(this._remove,t,this.options))?e:this.defaultRule;var e},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};var mn="undefined"!=typeof window?window:{};var fn,gn,vn=function(){var t=mn.DOMParser,e=!1;try{(new t).parseFromString("","text/html")&&(e=!0)}catch(t){}return e}()?mn.DOMParser:(fn=function(){},function(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch(e){window.ActiveXObject&&(t=!0)}return t}()?fn.prototype.parseFromString=function(t){var e=new window.ActiveXObject("htmlfile");return e.designMode="on",e.open(),e.write(t),e.close(),e}:fn.prototype.parseFromString=function(t){var e=document.implementation.createHTMLDocument("");return e.open(),e.write(t),e.close(),e},fn);function yn(t,e){var i;"string"==typeof t?i=(gn=gn||new vn).parseFromString('<x-turndown id="turndown-root">'+t+"</x-turndown>","text/html").getElementById("turndown-root"):i=t.cloneNode(!0);return function(t){var e=t.element,i=t.isBlock,n=t.isVoid,r=t.isPre||function(t){return"PRE"===t.nodeName};if(e.firstChild&&!r(e)){for(var s=null,o=!1,a=null,h=pn(a,e,r);h!==e;){if(3===h.nodeType||4===h.nodeType){var l=h.data.replace(/[ \r\n\t]+/g," ");if(s&&!/ $/.test(s.data)||o||" "!==l[0]||(l=l.substr(1)),!l){h=un(h);continue}h.data=l,s=h}else{if(1!==h.nodeType){h=un(h);continue}i(h)||"BR"===h.nodeName?(s&&(s.data=s.data.replace(/ $/,"")),s=null,o=!1):n(h)||r(h)?(s=null,o=!0):s&&(o=!1)}var d=pn(a,h,r);a=h,h=d}s&&(s.data=s.data.replace(/ $/,""),s.data||un(s))}}({element:i,isBlock:tn,isVoid:nn,isPre:e.preformattedCode?xn:null}),i}function xn(t){return"PRE"===t.nodeName||"CODE"===t.nodeName}function bn(t,e){return t.isBlock=tn(t),t.isCode="CODE"===t.nodeName||t.parentNode.isCode,t.isBlank=function(t){return!nn(t)&&!function(t){return sn(t,rn)}(t)&&/^\s*$/i.test(t.textContent)&&!function(t){return on(t,en)}(t)&&!function(t){return on(t,rn)}(t)}(t),t.flankingWhitespace=function(t,e){if(t.isBlock||e.preformattedCode&&t.isCode)return{leading:"",trailing:""};var i=(n=t.textContent,r=n.match(/^(([ \t\r\n]*)(\s*))[\s\S]*?((\s*?)([ \t\r\n]*))$/),{leading:r[1],leadingAscii:r[2],leadingNonAscii:r[3],trailing:r[4],trailingNonAscii:r[5],trailingAscii:r[6]});var n,r;i.leadingAscii&&wn("left",t,e)&&(i.leading=i.leadingNonAscii);i.trailingAscii&&wn("right",t,e)&&(i.trailing=i.trailingNonAscii);return{leading:i.leading,trailing:i.trailing}}(t,e),t}function wn(t,e,i){var n,r,s;return"left"===t?(n=e.previousSibling,r=/ $/):(n=e.nextSibling,r=/^ /),n&&(3===n.nodeType?s=r.test(n.nodeValue):i.preformattedCode&&"CODE"===n.nodeName?s=!1:1!==n.nodeType||tn(n)||(s=r.test(n.textContent))),s}var kn=Array.prototype.reduce,_n=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Cn(t){if(!(this instanceof Cn))return new Cn(t);var e={rules:an,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(t,e){return e.isBlock?"\n\n":""},keepReplacement:function(t,e){return e.isBlock?"\n\n"+e.outerHTML+"\n\n":e.outerHTML},defaultReplacement:function(t,e){return e.isBlock?"\n\n"+t+"\n\n":t}};this.options=function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}return t}({},e,t),this.rules=new ln(this.options)}function Dn(t){var e=this;return kn.call(t.childNodes,(function(t,i){var n="";return 3===(i=new bn(i,e.options)).nodeType?n=i.isCode?i.nodeValue:e.escape(i.nodeValue):1===i.nodeType&&(n=Sn.call(e,i)),Nn(t,n)}),"")}function En(t){var e=this;return this.rules.forEach((function(i){"function"==typeof i.append&&(t=Nn(t,i.append(e.options)))})),t.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function Sn(t){var e=this.rules.forNode(t),i=Dn.call(this,t),n=t.flankingWhitespace;return(n.leading||n.trailing)&&(i=i.trim()),n.leading+e.replacement(i,t,this.options)+n.trailing}function Nn(t,e){var i=function(t){for(var e=t.length;e>0&&"\n"===t[e-1];)e--;return t.substring(0,e)}(t),n=e.replace(/^\n*/,""),r=Math.max(t.length-i.length,e.length-n.length);return i+"\n\n".substring(0,r)+n}Cn.prototype={turndown:function(t){if(!function(t){return null!=t&&("string"==typeof t||t.nodeType&&(1===t.nodeType||9===t.nodeType||11===t.nodeType))}(t))throw new TypeError(t+" is not a string, or an element/document/fragment node.");if(""===t)return"";var e=Dn.call(this,new yn(t,this.options));return En.call(this,e)},use:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.use(t[e]);else{if("function"!=typeof t)throw new TypeError("plugin must be a Function or an Array of Functions");t(this)}return this},addRule:function(t,e){return this.rules.add(t,e),this},keep:function(t){return this.rules.keep(t),this},remove:function(t){return this.rules.remove(t),this},escape:function(t){return _n.reduce((function(t,e){return t.replace(e[0],e[1])}),t)}};var Mn=new Cn,An=Array.prototype.indexOf,Ln=Array.prototype.every,Tn={};function Pn(t){var e,i,n=t.parentNode;return"THEAD"===n.nodeName||n.firstChild===t&&("TABLE"===n.nodeName||(i=(e=n).previousSibling,"TBODY"===e.nodeName&&(!i||"THEAD"===i.nodeName&&/^\s*$/i.test(i.textContent))))&&Ln.call(t.childNodes,(function(t){return"TH"===t.nodeName}))}function In(t,e){var i=" ";return 0===An.call(e.parentNode.childNodes,e)&&(i="| "),i+t+" |"}if(Tn.tableCell={filter:["th","td"],replacement:function(t,e){return In(t,e)}},Tn.tableRow={filter:"tr",replacement:function(t,e){var i="",n={left:":--",right:"--:",center:":-:"};if(Pn(e))for(var r=0;r<e.childNodes.length;r++){var s="---",o=(e.childNodes[r].getAttribute("align")||"").toLowerCase();o&&(s=n[o]||s),i+=In(s,e.childNodes[r])}return"\n"+t+(i?"\n"+i:"")}},Tn.table={filter:function(t){return"TABLE"===t.nodeName&&Pn(t.rows[0])},replacement:function(t){return"\n\n"+(t=t.replace("\n\n","\n"))+"\n\n"}},Tn.tableSection={filter:["thead","tbody","tfoot"],replacement:function(t){return t}},Mn.use([function(t){for(var e in t.keep((function(t){return"TABLE"===t.nodeName&&!Pn(t.rows[0])})),Tn)t.addRule(e,Tn[e])}]),t.Platform.isDesktop)var Bn=require("crypto"),On=require("fs"),Rn=require("path");else Bn=null,On=null,Rn=null;function Fn(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()}function zn(t){for(var e,i,n,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklopqrst",s=r.length,o=r.split(""),a="",h=0;h<t.length;h++)a+=o[(e=((e=((e=t.charCodeAt(h))-(i=e%s))/s)-(n=e%s))/s)%s]+o[n]+o[i];return a}function qn(t){var e,i,n,r,s,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklopqrst",a=o.length,h=0;e=(s=new Array(Math.floor(t.length/3))).length;for(var l=0;l<e;l++)i=o.indexOf(t.charAt(h)),h++,n=o.indexOf(t.charAt(h)),h++,r=o.indexOf(t.charAt(h)),h++,s[l]=i*a*a+n*a+r;e="";for(var d=0;d<s.length;d++)e+=String.fromCharCode(s[d]);return e}function jn(t){var e=!0;"blockquote"==t.t&&(e=!1,(t=t.c[0]).v="> "+t.v);var i={id:Fn(),text:t.v,children:[]};return e&&t.c&&t.c.length&&t.c.forEach((t=>{i.children.push(jn(t))})),i}const Hn=new fi.Transformer;var $n={dark:{name:"dark",stroke:"rgb(115, 154, 163)",summaryStroke:"rgb(253, 241, 107)",relateLinkStroke:"rgb(206, 214, 218)",boundaryStroke:"rgb(206, 214, 218)",boundaryFill:"transparent"},light:{name:"light",stroke:"#383833",summaryStroke:"#333",relateLinkStroke:"#383833",boundaryStroke:"#c31105",boundaryFill:"transparent"},card:{name:"card",stroke:"#636d77",summaryStroke:"#636d77",relateLinkStroke:"#636d77",boundaryStroke:"#636d77",boundaryFill:"transparent"},black:{name:"black",stroke:"#636d77",summaryStroke:"#636d77",relateLinkStroke:"#636d77",boundaryStroke:"#636d77",boundaryFill:"transparent"},warm:{name:"warm",stroke:"#636d77",summaryStroke:"#636d77",relateLinkStroke:"#636d77",boundaryStroke:"#636d77",boundaryFill:"transparent"}};class Wn extends t.TextFileView{constructor(e,i){super(e),this.id=this.leaf.id,this.colors=[],this.timeOut=null,this.firstInit=!0,this.pdf_head=[],this.pdfFactory=null,this.pdfViewer=null,this.localPdfAnnotations=[],this.interval=null,this.annotate_path="",this._haveOpenPdf=!1,this._haveOpenEpub=!1,this._hasAddEpubEvent=!1,this._mode="rich",this.frontmatter="",this.period=!1,this.onlyPdf=!1,this.isShowOutline=!1,this.useMarkdown=null,this.firstExport=1,this.activeCode="",this.firstActive=0,this.iframe=null,this.richFirstSave=!1,this.forceMindMapMode=!1,this.dragDrop=null,this.book=null,this.isShowTable=!1,this._openIframeSrc="",this._extractHighlight=!1,this._useHandDraw=!1,this.plugin=i,this._viewMark=Fn(),this.plugin.settings.strokeArray&&(this.colors=this.plugin.settings.strokeArray.split(","),this.setColors()),"md"==this.plugin.settings.useMarkdownSaveAnnotation&&(this.useMarkdown=!0),this.firstActive=this.plugin.settings.firstActive,this.appContainer=document.createElement("div"),this.appContainer.style.width="100%",this.appContainer.style.height="100%",this.appContainer.style.overflow="hidden",this.appContainer.classList.add("mm-app-container"),t.Platform.isMobileApp&&this.appContainer.classList.add("mm-mobile-app"),this.contentEl.appendChild(this.appContainer),this.pdfContainer=document.createElement("div"),this.pdfContainer.classList.add("mm-pdf-container"),this.mindmapContainer=document.createElement("div"),this.mindmapContainer.classList.add("mm-mindmap-container"),this.appContainer.appendChild(this.mindmapContainer),this.appContainer.appendChild(this.pdfContainer),window.onlyPdf&&(this.onlyPdf=window.onlyPdf,window.onlyPdf=!1),this.setOnlyPdf(),this._judgeTime(),(this.plugin.settings.activeCode||this.plugin.settings.mobileActiveCode)&&(this.activeCode=this.plugin.settings.activeCode,this.checkActive()),this.dragDropTouch(),this.fileCache={frontmatter:{"mindmap-plugin":"basic"}}}getViewType(){return"mindmapview"}getIcon(){return"blocks"}getDisplayText(){var t;return(null===(t=this.file)||void 0===t?void 0:t.basename)||"mindmap"}setColors(){for(var t=0;t<50;t++)this.colors.push(gt())}showNeedNotice(){this.period&&new t.Notice(s("The probation period has ended"))}mindMapChange(){if(this.mindmap){var t=this.mindmap.getMarkdown(),e=this.frontmatter;if("basic"==this.mindmap._mode||"table"==this.mindmap._mode)this.data=e+t;else{var i=this.mindmap.root.getData().text.trim();if(this.richFirstSave)this.data=e+`# ${i}\n\`\`\` json\n`+t+"\n```\n";else{this.data=this.data.replace(/^(\`\`\` json)$.+?^(\`\`\`)$.+?/ims,(()=>"``` json\n"+t+"\n```\n"))}}this.requestSave()}}outlineChange(){if(this.list){var t=this.list.getMarkdown(),e=this.frontmatter;this.data=e+t,this.app.vault.adapter.write(this.list.path,this.data)}}getFrontMatter(){var t="";if(this.fileCache.frontmatter){var e=this.fileCache.frontmatter.position.end.offset;t=this.data.substr(0,e)}return t+="\n\n"}dragDropTouch(){t.Platform.isMobileApp&&!this.dragDrop&&(this.dragDrop=new Zi(this.contentEl))}_activeSoft(e){1==e.plan?(new Date).getTime()>new Date(e.endDate).getTime()?(this.period=!0,new t.Notice(`${s("The probation period has ended")}`)):(this.period=!1,this.firstActive||(new t.Notice(`${s("Active success")}`),this.firstActive=1,this.plugin.settings.firstActive=1,this.plugin.saveData(this.plugin.settings))):2==e.plan?this.period=!1:this.period=!0}exportToPng(){if(this.mindmap){if("table"==this.mindmap._mode){var e=this.mindmap.containerEL.scrollLeft,i=this.mindmap.containerEL.scrollTop,n={x:this.mindmap.tableDom.style.left,y:this.mindmap.tableDom.style.top},r=this.mindmap.tableDom.clientWidth+200,s=this.mindmap.tableDom.clientHeight+200;this.mindmap.tableDom.style.left="100px",this.mindmap.tableDom.style.top="100px"}else{var o=[];this.mindmap.traverseDF((t=>{t.isShow()&&o.push(t)})),this.mindmap.freeNodes.forEach((t=>{this.mindmap.traverseDF((t=>{t.isShow()&&o.push(t)}),t)})),this.mindmap.induces.forEach((t=>{this.mindmap.traverseDF((t=>{t.isShow()&&o.push(t)}),t.root)})),this.mindmap.relateLinks.forEach((t=>{t.textNode&&t.textNode.isShow()&&o.push(t.textNode)}));e=this.mindmap.containerEL.scrollLeft,i=this.mindmap.containerEL.scrollTop;var a=this.mindmap.getBoundingRect(o),h=this.mindmap.root.getPosition();(n={})[this.mindmap.root.getId()]=h,this.mindmap.freeNodes.forEach((t=>{n[t.getId()]=t.getPosition()}));var l=0,d=0;a.x>100&&(l=a.x-100),a.y>100&&(d=a.y-100),this.mindmap.root.setPosition(h.x-l,h.y-d),this.mindmap.freeNodes.forEach((t=>{var e=t.getPosition();t.setPosition(e.x-l,e.y-d),t.layout.refresh()})),this.mindmap.refresh(),this.mindmap.updateAssist(),this.mindmap.refresh(),this.mindmap.updateRelateLink();r=a.width+200,s=a.height+200}this.mindmap.contentEL.style.width=r+"px",this.mindmap.contentEL.style.height=s+"px",(this._useHandDraw||"basic"==this._mode)&&(this.mindmap.root._createHandDrawFill(),this.mindmap.root.children.forEach((t=>{t._createHandDrawFill()}))),setTimeout((()=>{Ji.toPng(this.mindmap.contentEL,{}).then((r=>{var s=new Image;s.src=r;var o=s.outerHTML,a=this.mindmap.path.substr(0,this.mindmap.path.length-2);try{new t.Notice(a+"html"),this.app.vault.adapter.write(a+"html",o),this.restoreMindmap(n,e,i)}catch(r){this.restoreMindmap(n,e,i),new t.Notice(r)}})).catch((r=>{this.restoreMindmap(n,e,i),new t.Notice(r)}))}),400)}}restoreMindmap(t,e,i){var n=this.plugin.settings.canvasSize;if(this.mindmap.contentEL.style.width=n+"px",this.mindmap.contentEL.style.height=n+"px",this.mindmap.containerEL.scrollTop=i,this.mindmap.containerEL.scrollLeft=e,"table"==this.mindmap._mode)this.mindmap.tableDom.style.left=t.x+"px",this.mindmap.tableDom.style.top=t.y+"px",this.mindmap.center();else{var r=this.mindmap.root.getId();this.mindmap.root.setPosition(t[r].x,t[r].y),this.mindmap.freeNodes.forEach((e=>{var i=e.getId();e.setPosition(t[i].x,t[i].y)})),this.mindmap.refresh(),this.mindmap.updateAssist(),this.mindmap.refresh(),this.mindmap.updateRelateLink()}(this._useHandDraw||"basic"==this._mode)&&(this.mindmap.root._createHandDrawFill(),this.mindmap.root.children.forEach((t=>{t._createHandDrawFill()})))}checkActive(){var e=this.activeCode.trim();if(t.Platform.isMobileApp){if(this.plugin.settings.mobileActiveCode)try{var i=qn(this.plugin.settings.mobileActiveCode),n=JSON.parse(i.trim());n&&this._activeSoft(n)}catch(e){new t.Notice(`${s("Active error")}`),console.log(e),this.period=!0}}else if(e&&Bn)try{let t=Bn.createDecipher("aes-192-ctr","1qaz2wsxZX!@3edc4rfvCV#$@qwerasdf12qw3"),i=t.update(e,"hex","utf-8");i+=t.final("utf-8"),this.plugin.settings.mobileActiveCode||(this.plugin.settings.mobileActiveCode=zn(i.trim()),this.plugin.saveData(this.plugin.settings)),(r=JSON.parse(i.trim()))&&this._activeSoft(r)}catch(i){try{let t=Bn.createDecipher("aes-192-ctr","whoisyourdaddy!@qwerasdf"),i=t.update(e,"hex","utf-8");var r;i+=t.final("utf-8"),this.plugin.settings.mobileActiveCode||(this.plugin.settings.mobileActiveCode=zn(i.trim()),this.plugin.saveData(this.plugin.settings)),(r=JSON.parse(i.trim()))&&this._activeSoft(r)}catch(e){this.period=!0,new t.Notice(`${s("Active error")}`)}}}setOnlyPdf(){this.onlyPdf?(this.mindmapContainer.style.display="none",this.pdfContainer.style.width="100%"):(this.mindmapContainer.style.display="",this.mindmapContainer.style.width="100%",this.pdfContainer.style.display="none")}_judgeTime(){this.plugin.settings.uid?(new Date).getTime()>216e7+parseInt(qn(this.plugin.settings.uid))&&(t.Platform.isDesktopApp&&!this.plugin.settings.activeCode&&new t.Notice(s("The probation period has ended")),t.Platform.isMobileApp&&!this.plugin.settings.mobileActiveCode&&new t.Notice(s("The probation period has ended")),this.period=!0):(this.plugin.settings.uid=zn((new Date).getTime()+""),this.plugin.saveData(this.plugin.settings))}_close(){this.pdf_path&&(this.pdf_path=null,this.pdf_real_path=""),this.localPdfAnnotations=[],this.pdfContainer.innerHTML=""}onClose(){return e(this,void 0,void 0,(function*(){this.mindmap&&(this.mindmap.clear(),this.contentEl.innerHTML="",this.mindmap=null),t.Platform.isMobileApp&&this.dragDrop&&(this.dragDrop._removeEvent(),this.dragDrop=null)}))}clear(){}getViewData(){return this.data}setViewData(e){if(this.mindmap&&(this.mindmap.clear(),this.mindmapContainer.innerHTML="",this.mindmap.useHandMode&&(this._useHandDraw=!1),this.mindmap=null),this.list&&(this.list.clear(),this.mindmapContainer.innerHTML="",this.list=null),this.mindmapContainer.style.visibility="hidden",this.data=e,this.firstInit)setTimeout((()=>{var e=this.leaf;if(e){var i=e.view;if(i.file){this.fileCache=this.app.metadataCache.getFileCache(i.file),this.frontmatter=this.getFrontMatter();var n=this.fileCache.frontmatter["annotate-target"];if(n&&(n.toLowerCase().endsWith(".pdf")||n.toLowerCase().startsWith("http")))return this.onlyPdf=!0,this.setOnlyPdf(),void this.setPdfFrame(n);if(n&&n.toLowerCase().endsWith(".epub"))return this.onlyPdf=!0,this.setOnlyPdf(),void this.setEpub(n);if(this.onlyPdf=!1,this._haveOpenPdf=!1,this.pdfContainer.innerHTML="",this.iframe=null,this.pdf_path=null,this.pdf_real_path="",this.setOnlyPdf(),this.fileCache.frontmatter){if(this._mode=this.fileCache.frontmatter["mindmap-plugin"],this.fileCache.frontmatter["mindmap-theme"])var r=this.fileCache.frontmatter["mindmap-theme"],s=$n[this.fileCache.frontmatter["mindmap-theme"]];"outline"==this.fileCache.frontmatter["display-mode"]?(this.isShowOutline=!0,this.isShowTable=!1):"table"==this.fileCache.frontmatter["display-mode"]?(this.isShowOutline=!1,this.isShowTable=!0):(this.isShowOutline=!1,this.isShowTable=!1)}if("basic"==this._mode){if(this.isShowOutline&&!this.forceMindMapMode)return this.showOutline(),void(this.firstInit=!1);if(this.isShowTable&&!this.forceMindMapMode)return this.showTableMode(),void(this.firstInit=!1);var o=this.fileCache.frontmatter["mindmap-layout"],a=this.fileCache.frontmatter["mindmap-layout-direct"],h=this.getMdText(this.data);(l=this.mdToData(h)).useHandMode=this._useHandDraw,l.isRoot=!0,l.useScale=!0,this.mindmap=new pi(l,this.mindmapContainer,this.plugin.settings,!0),o&&(this.mindmap.basicLayoutInfo={layout:o,layoutDirect:a}),this.mindmap.path=null==i?void 0:i.file.path,this.mindmap.colors=this.colors,this.mindmap._mode="basic",this.mindmap.view=this,this.mindmap.isMobile=t.Platform.isMobileApp,this.mindmap.themeConfig=s,s&&(this.mindmap.colors=new Array(150).fill(s.stroke)),this.mindmap.init()}else if("rich"==this._mode){var l;h=this.getMdText(this.data);(l=JSON.parse(h)).useScale=!0,this.mindmap=new pi(l,this.mindmapContainer,this.plugin.settings,!0),this.mindmap.path=null==i?void 0:i.file.path,this.mindmap.colors=this.colors,this.mindmap.view=this,this.mindmap.isMobile=t.Platform.isMobileApp,this.mindmap.themeConfig=s,s&&(this.mindmap.colors=new Array(150).fill(s.stroke)),r&&(this.mindmap.appEl.classList.add(`mm-theme-${r}`),this.mindmap._themeName=r),this.mindmap.initRich(l,{}),this.mindmap._mode="rich"}}}setTimeout((()=>{if(this.mindmap.updateAllAssist(),this.mindmap.center(),this.mindmap.refresh(),this.mindmapContainer.style.visibility="visible",window["show-mindmap-node"]){var t=window["show-mindmap-node"],e=this.mindmap.getNodeById(t);e&&setTimeout((()=>{this.mindmap.showNode(e),this.mindmap.clearSelectNode()}),200),window["show-mindmap-node"]=""}}),0),this.firstInit=!1}),800);else{var i=this.leaf.view;this.fileCache=this.app.metadataCache.getFileCache(i.file),this.frontmatter=this.getFrontMatter();var n=this.fileCache.frontmatter["annotate-target"];if(n&&(n.toLowerCase().endsWith(".pdf")||n.toLowerCase().startsWith("http")))return this.onlyPdf=!0,this.setOnlyPdf(),void this.setPdfFrame(n);if(n&&n.toLowerCase().endsWith(".epub"))return this.onlyPdf=!0,this.setOnlyPdf(),void this.setEpub(n);if(this.onlyPdf=!1,this._haveOpenPdf=!1,this.pdfContainer.innerHTML="",this.iframe=null,this.pdf_path=null,this.pdf_real_path="",this.setOnlyPdf(),this.fileCache.frontmatter){if(this._mode=this.fileCache.frontmatter["mindmap-plugin"],this.fileCache.frontmatter["mindmap-theme"])var r=$n[this.fileCache.frontmatter["mindmap-theme"]],s=this.fileCache.frontmatter["mindmap-theme"];"outline"==this.fileCache.frontmatter["display-mode"]?(this.isShowOutline=!0,this.isShowTable=!1):"table"==this.fileCache.frontmatter["display-mode"]?(this.isShowOutline=!1,this.isShowTable=!0):(this.isShowOutline=!1,this.isShowTable=!1)}if("basic"==this._mode){if(this.isShowOutline&&!this.forceMindMapMode)return void this.showOutline();if(this.isShowTable&&!this.forceMindMapMode)return void this.showTableMode();var o=this.fileCache.frontmatter["mindmap-layout"],a=this.fileCache.frontmatter["mindmap-layout-direct"],h=this.getMdText(this.data);if((d=this.mdToData(h)).isRoot=!0,d.useScale=!0,d.useHandMode=this._useHandDraw,this.mindmap=new pi(d,this.mindmapContainer,this.plugin.settings,!0),this.mindmap.path=null==i?void 0:i.file.path,this.mindmap.colors=this.colors,this.mindmap.view=this,this.mindmap._mode="basic",this.mindmap.isMobile=t.Platform.isMobileApp,this.mindmap.themeConfig=r,r){this.mindmap.colors=[];for(var l=0;l<150;l++)this.mindmap.colors.push(r.stroke)}o&&(this.mindmap.basicLayoutInfo={layout:o,layoutDirect:a}),this.mindmap.init()}else{var d;h=this.getMdText(this.data);if((d=JSON.parse(h)).useScale=!0,this.mindmap=new pi(d,this.mindmapContainer,this.plugin.settings,!0),this.mindmap.path=null==i?void 0:i.file.path,this.mindmap.colors=this.colors,this.mindmap.view=this,this.mindmap.isMobile=t.Platform.isMobileApp,this.mindmap.themeConfig=r,r){this.mindmap.colors=[];for(l=0;l<150;l++)this.mindmap.colors.push(r.stroke)}s&&(this.mindmap.appEl.classList.add(`mm-theme-${s}`),this.mindmap._themeName=s),this.mindmap.initRich(d,{}),this.mindmap._mode="rich"}setTimeout((()=>{if(this.mindmap.updateAllAssist(),this.mindmap.center(),this.mindmap.refresh(),this.mindmapContainer.style.visibility="visible",window["show-mindmap-node"]){var t=window["show-mindmap-node"],e=this.mindmap.getNodeById(t);e&&setTimeout((()=>{this.mindmap.showNode(e),e.select()}),200),window["show-mindmap-node"]=""}}),800)}}basicToRich(){if("basic"==this._mode){var t=this.file,e=t.path;if(e=t.path.substring(0,e.length-3),e+="-rich.md",this.mindmap){var i=JSON.parse(JSON.stringify(this.mindmap.getData()));i.mindData.forEach(((t,e)=>{0==e&&t.forEach(((t,e)=>{0==e&&(t.layout={layoutName:"mindmap2",direct:"mindmap"}),t.children&&delete t.children}))}));var n=this.mindmap.root.getData().text.trim(),r=this.frontmatter.replace("basic","rich")+`# ${n}\n\`\`\` json\n`+JSON.stringify(i)+"\n```\n";this.app.vault.adapter.write(e,r)}}}setPdfFrame(i,n){return e(this,void 0,void 0,(function*(){var e=this;if(t.Platform.isDesktopApp){if(!this.plugin.settings.pdfjsPath&&!this.plugin.settings.pdfjsIosPath)return void new t.Notice(s("Miss PDF Reader Path"))}else if(t.Platform.isAndroidApp){if(!this.plugin.settings.pdfjsAndriodPath)return void new t.Notice(s("Miss PDF Reader Path"))}else if(t.Platform.isIosApp&&!this.plugin.settings.pdfjsIosPath)return void new t.Notice(s("Miss PDF Reader Path"));if(this.period)new t.Notice(s("The probation period has ended"));else{var r=this.leaf.view;if(i.startsWith("file:/")){if(t.Platform.isMobileApp)return void new t.Notice(s("Mobile app not support"));if(!i.endsWith(".pdf"))return void new t.Notice(s("Not support file type"));if(On){var o=i.replace("file://","");if(!On.existsSync(o))return void new t.Notice(s("File Is Not Exist")+":"+i);var a={},h=Rn.basename(i);a.path=i,a.basename=h,a.absolutePath=o;var l=i;if(this.pdf_real_path&&this.pdf_real_path==l)return}}else if(i.startsWith("http:/")||i.startsWith("https:/")){(a={}).path=i,a.basename=i,a.absolutePath=i;l=i;if(this.pdf_real_path&&this.pdf_real_path==l)return}else{if(!(a=this.app.metadataCache.getFirstLinkpathDest(i,null==r?void 0:r.file.path))){var d=t.normalizePath(this.app.vault.adapter.basePath)+"/"+i;return void new t.Notice(s("File Is Not Exist")+":"+i)}l=this.app.vault.getResourcePath(a);if(this.pdf_real_path&&this.pdf_real_path==l)return}this.pdf_real_path=l,this.pdf_path=a;try{d=t.normalizePath(a.path);if(this.useMarkdown||a.path.startsWith("file:/")||a.path.startsWith("http"))var c=this.getAnnotations(this.data);else{var u=d.substr(0,d.length-3)+"annos";if(this.annotate_path=u,yield this.app.vault.adapter.exists(u)){var p=yield this.app.vault.adapter.read(u);if(p.trim())c=JSON.parse(p.trim())}else this.localPdfAnnotations=[],this.app.vault.adapter.write(u,JSON.stringify(this.localPdfAnnotations)),c=[]}}catch(t){return void this.leaf.detach()}if(a.path.startsWith("file:/"))var m=On.readFileSync(a.absolutePath);else if(a.path.startsWith("http")){var f=yield t.requestUrl({url:a.path});if(!f||200!=f.status||!f.arrayBuffer)return void new t.Notice(s("File Is Not Exist")+":"+a.path);m=f.arrayBuffer}else m=yield this.app.vault.adapter.readBinary(d);if(this._haveOpenEpub&&(this._haveOpenPdf=!1,this._haveOpenEpub=!1,this.iframe&&this.pdfContainer.removeChild(this.iframe)),this._haveOpenPdf){if(a.path.startsWith("file://")||a.path.startsWith("http"))b=a.path;else b=t.normalizePath(a.path);this.iframe.contentWindow.postMessage({annotations:c||[],data:m,type:"openPDF",pdfName:b,id:n||window.waitPdfId||"",basename:a.basename,_viewMark:this._viewMark,isMobile:t.Platform.isMobileApp,imageFolder:e.plugin.settings.imageFolder||"",mdPath:e.file.path,language:t.moment.locale()},"*"),Object.assign(window,{waitPdfId:""})}else{this._haveOpenPdf=!0,this.iframe=document.createElement("iframe"),this.pdfContainer.appendChild(this.iframe),this.iframe.style.width="100%",this.iframe.style.height="100%",this.iframe.style.borderWidth="0";var g=this.plugin.settings.viewerTheme||2,v="";if(t.Platform.isDesktopApp){if(t.Platform.isMacOS)var y=this.plugin.settings.pdfjsMacPath||this.plugin.settings.pdfjsPath;else y=this.plugin.settings.pdfjsPath||this.plugin.settings.pdfjsMacPath;this.iframe.src=`app://local/${y}/web/viewer.html?theme=${g}`}else{var x="";t.Platform.isAndroidApp?(x=(v=this.plugin.settings.pdfjsAndriodPath||this.plugin.settings.pdfjsPath).startsWith("http:")?`${v}/web/viewer.html?theme=${g}`:`http://localhost/_capacitor_file_/${v}/web/viewer.html?theme=${g}`,this.iframe.src=x):t.Platform.isIosApp&&(x=(v=this.plugin.settings.pdfjsIosPath||this.plugin.settings.pdfjsPath).startsWith("capacitor:")?`${v}/web/viewer.html?theme=${g}`:`capacitor://localhost/_capacitor_file_/${v}/web/viewer.html?theme=${g}`,this.iframe.src=x)}if(a.path.startsWith("file://"))var b=a.path;else b=a.path.startsWith("http")?a.path:t.normalizePath(a.path);c.forEach((t=>{if(t&&t.type&&"rect"==t.type){var i=JSON.parse(t.text),n=i.path,r=this.app.metadataCache.getFirstLinkpathDest(n,this.file.path);if(r)var s=e.app.vault.getResourcePath(r);i.imageAbsolutePath=s||"",t.text=JSON.stringify(i)}}));var w=e.plugin.settings.imageFolder||"";this.fileCache&&this.fileCache.frontmatter&&this.fileCache.frontmatter["annotate-image-target"]&&(w=this.fileCache.frontmatter["annotate-image-target"]);var k=0;this.plugin.settings.annotateTop&&this.plugin.settings.annotateTop&&(k=this.plugin.settings.annotateTop);var _=0;this.plugin.settings.annotateBottom&&this.plugin.settings.annotateBottom&&(_=this.plugin.settings.annotateBottom),this.iframe.onload=function(){e.iframe.contentWindow.postMessage({annotations:c||[],data:m,type:"openPDF",pdfName:b,id:n||window.waitPdfId||"",basename:a.basename,_viewMark:e._viewMark,isMobile:t.Platform.isMobileApp,imageFolder:w,mdPath:e.file.path,language:t.moment.locale(),top:k,bottom:_},"*"),Object.assign(window,{waitPdfId:""})},this.pdfContainer.style.display="block"}this.addMessageEvent()}}))}setEpub(i,n){return e(this,void 0,void 0,(function*(){var e=this.leaf.view,r=this;if(i){var o={};try{if(i.startsWith("file://")){if(t.Platform.isMobileApp)return void new t.Notice(s("Mobile app not support"));if(t.Platform.isDesktopApp){var a=i.replace("file://","");if(!On.existsSync(a))return void new t.Notice(s("File Is Not Exist")+":"+i);var h=Rn.basename(i);o.path=i,o.basename=h,o.absolutePath=a;var l=i;if(this.pdf_real_path&&this.pdf_real_path==l)return;this.pdf_real_path=l,this.pdf_path=o}}else{if(!(o=this.app.metadataCache.getFirstLinkpathDest(i,null==e?void 0:e.file.path))){var d=t.normalizePath(this.app.vault.adapter.basePath)+"/"+i;return void new t.Notice(s("File Is Not Exist")+":"+i)}l=this.app.vault.getResourcePath(o);if(this.pdf_real_path&&this.pdf_real_path==l)return}this.pdf_real_path=l,this.pdf_path=o;d=t.normalizePath(o.path);if(o.path.startsWith("file:/"))var c=On.readFileSync(o.absolutePath);else c=yield this.app.vault.adapter.readBinary(d);this._haveOpenEpub=!0,this._haveOpenPdf=!0,this.iframe&&this.pdfContainer.removeChild(this.iframe),this.addEpubMessageEvent(),this.iframe=document.createElement("iframe"),this.pdfContainer.appendChild(this.iframe),this.iframe.style.width="100%",this.iframe.style.height="100%",this.iframe.style.borderWidth="0";var u="";t.Platform.isDesktopApp?this.iframe.src=`app://local/${this.plugin.settings.pdfjsPath}/epub/viewer.html`:t.Platform.isAndroidApp?(u=this.plugin.settings.pdfjsAndriodPath||this.plugin.settings.pdfjsPath,this.iframe.src=`http://localhost/_capacitor_file_/${u}/epub/viewer.html`):t.Platform.isIosApp&&(u=this.plugin.settings.pdfjsIosPath||this.plugin.settings.pdfjsPath,this.iframe.src=`capacitor://localhost/_capacitor_file_/${u}/epub/viewer.html`);var p=this.getAnnotations(this.data);this.iframe.onload=function(){setTimeout((()=>{r.iframe.contentWindow.postMessage({annotations:p||[],data:c,type:"openEpub",pdfName:o.path,id:n||window.waitPdfId||"",basename:o.basename,_viewMark:r._viewMark,isMobile:t.Platform.isMobileApp,language:t.moment.locale()},"*"),Object.assign(window,{waitPdfId:""})}),800)},this.pdfContainer.style.display="block"}catch(e){new t.Notice("Open epub file error")}}}))}setPdfjsVersion(t){if(this.iframe){var e="useOldVersion";t&&(e="useNewVersion"),this.iframe.contentWindow.postMessage({type:e},"*")}}addEpubMessageEvent(){var t=this;this.removeMessageEvent(),this.messageEvent=function(e){if(e.data._viewMark==t._viewMark)switch(e.data.type){case"saveAnnotations":var i=e.data.annotations;t.saveEpubAnnotations(i);break;case"showMindmapAnnotate":var n=t.app.workspace.getLeavesOfType("mindmapview"),r=e.data.id;n.length&&n.forEach((t=>{t&&t.view&&t.view.mindmap&&t.view.mindmap.traverseDF((e=>{if(e){if(e.getData().text.indexOf(r)>-1){if(!e.isShow())for(var i=!0,n=e;n;)n.isExpand||n.expand(),n=n.parent||n.belongInduce&&n.belongInduce.node;return i&&t.view.mindmap.refresh(),void t.view.mindmap.showNode(e)}e.getAnnotateId()==r&&t.view.mindmap.showNode(e)}}))}));var s=e.data,o=e.data.annotateType;if(t.plugin.settings.openProtocol&&t.plugin.settings.protocol){if("epub-rect"==o){var a=`obsidian://${t.plugin.settings.protocol}?pdf=${encodeURIComponent(t.pdf_path.path)}&annotate=${encodeURIComponent(s.id)}`;navigator.clipboard.writeText(`![[${s.path}]] [📌](${a})`)}else if("epub-highlight"==o){a=`obsidian://${t.plugin.settings.protocol}?pdf=${encodeURIComponent(t.pdf_path.path)}&annotate=${encodeURIComponent(s.id)}`;if(t.plugin.settings.removeSpace)var h=(s.text||"").replace(/\s/g,"");else h=s.text||"";navigator.clipboard.writeText(`${h} [📌](${a})`)}}else navigator.clipboard.writeText(JSON.stringify(s))}}.bind(this),window.addEventListener("message",this.messageEvent,!1)}_exportHighlights(){return e(this,void 0,void 0,(function*(){var t=this.getAnnotations(this.data),e=this.plugin.settings.highlightFormat,i=this;if(this.useMarkdown&&e&&t&&t.length){var n=[],r="";t.forEach(((t,s)=>{var o=JSON.parse(t.text);0==s&&(r=t.pdfName);var a="",h="",l=new RegExp("{{highlightText}}","ig");if("highlight"==t.type){var d=e.replace(l,t.selectText);a=`${o.color.r},${o.color.g},${o.color.b}`,h=`obsidian://${i.plugin.settings.protocol}?pdf=${encodeURIComponent(o.pdfName)}&annotate=${encodeURIComponent(t.id)}`}else{d=e.replace(l,"![["+o.path+"]]");h=`obsidian://${i.plugin.settings.protocol}?pdf=${encodeURIComponent(o.pdfName)}&annotate=${encodeURIComponent(t.id)}`}var c=new RegExp("{{page}}","ig"),u=new RegExp("{{comment}}","ig"),p=new RegExp("{{id}}","ig"),m=new RegExp("{{color}}","ig"),f=new RegExp("{{link}}","ig");d=(d=(d=(d=(d=d.replace(c,t.page+1)).replace(u,o.contents||"")).replace(p,t.id)).replace(m,a)).replace(f,h),n.push(d)}));var s="[["+r+"]]\n\n"+n.join("\n"),o=this.file.path;o=o.substring(0,o.length-3),o+="-exportHighlight.md",this.app.vault.adapter.write(o,s)}}))}_ectractHighlightOfPdf(){return e(this,void 0,void 0,(function*(){var e=this;if(t.Platform.isDesktopApp){if(this._extractHighlight=!0,this._openIframeSrc=this.iframe.getAttribute("src"),t.Platform.isMacOS)var i=this.plugin.settings.pdfjsMacPath||this.plugin.settings.pdfjsPath;else i=this.plugin.settings.pdfjsPath||this.plugin.settings.pdfjsMacPath;if(this.iframe.src=`app://local/${i}/pdfextract/extract.html`,this.pdf_path.path.startsWith("file:/"))var n=On.readFileSync(this.pdf_path.absolutePath);else n=yield this.app.vault.adapter.readBinary(this.pdf_path.path);setTimeout((()=>{e.iframe.contentWindow.postMessage({data:n,type:"openPDF",_viewMark:e._viewMark,language:t.moment.locale()},"*")}),800)}}))}addMessageEvent(){var i=this;this.removeMessageEvent(),this.messageEvent=function(n){return e(this,void 0,void 0,(function*(){if(n.data._viewMark==i._viewMark)switch(n.data.type){case"touchstart":new t.Notice("touchstart");break;case"showMindmapAnnotate":var r=i.app.workspace.getLeavesOfType("mindmapview"),o=n.data.id;r.length&&r.forEach((t=>{t&&t.view&&t.view.mindmap&&t.view.mindmap.traverseDF((e=>{if(e){if(e.getData().text.indexOf(o)>-1){if(!e.isShow())for(var i=!0,n=e;n;)n.isExpand||n.expand(),n=n.parent||n.belongInduce&&n.belongInduce.node;return i&&t.view.mindmap.refresh(),void t.view.mindmap.showNode(e)}e.getAnnotateId()==o&&t.view.mindmap.showNode(e)}}))}));var a=n.data.data,h=n.data.annotateType;if(i.plugin.settings.openProtocol&&i.plugin.settings.protocol){var l=JSON.parse(a.text);if("rect"==h){var d=`obsidian://${i.plugin.settings.protocol}?pdf=${encodeURIComponent(l.pdfName)}&annotate=${encodeURIComponent(a.id)}`;navigator.clipboard.writeText(`![[${l.path}]] [📌](${d})`)}else{d=`obsidian://${i.plugin.settings.protocol}?pdf=${encodeURIComponent(l.pdfName)}&annotate=${encodeURIComponent(a.id)}`;if(i.plugin.settings.removeSpace)var c=(a.selectText||"").replace(/\s/g,"");else c=a.selectText||"";navigator.clipboard.writeText(`${c} [📌](${d})`)}}else navigator.clipboard.writeText(JSON.stringify(a));break;case"createHighlight":case"updateHighlight":case"deleteAnnotate":var u=n.data.annotations;i.saveAnnotations(u);break;case"create rect annotate":new t.Notice(s("Creating Rect Annotate"));break;case"cancel create rect annotate":new t.Notice(s("Cancel Create Rect Annotate"));break;case"delete mindmap annotate":r=i.app.workspace.getLeavesOfType("mindmapview"),o=n.data.id;r.length&&r.forEach((t=>{t&&t.view&&t.view.mindmap&&t.view.mindmap.traverseDF((t=>{t&&t.getAnnotateId()==o&&t.deleteAnnotate()}))}));break;case"createRect":n.data.isNew;var p=n.data.imagePath,m=n.data.dataBuffer,f=(a=n.data.data,n.data.relateRect),g=n.data.imageOptions;u=n.data.annotations;i.app.vault.adapter.writeBinary(p,m).then((()=>{if(a.relateRect=f||[],a.pdfName=i.pdf_path.path,a.path=p,i.plugin.settings.openProtocol){var t=`obsidian://${i.plugin.settings.protocol}?pdf=${encodeURIComponent(i.pdf_path.path)}&annotate=${encodeURIComponent(a.id)}`;navigator.clipboard.writeText(`![[${a.path}]] [📌](${t})`)}else navigator.clipboard.writeText(JSON.stringify({id:a.id,type:"rect",action:"create pdf annotate",path:p,width:g.width,height:g.height,page:a.page,text:JSON.stringify(a),pdfName:i.pdf_path.path}));var e=this.app.metadataCache.getFirstLinkpathDest(p,this.file.path);i.iframe.contentWindow.postMessage({type:"saveImagePath",_viewMark:i._viewMark,id:a.id,imagePath:i.app.vault.getResourcePath(e)},"*"),i.saveAnnotations(u)})).catch((e=>{new t.Notice(s("Save Image error,Please try again"))}));break;case"comment":u=n.data.annotations;i.saveAnnotations(u);break;case"exportAnnotatePDF":var v=n.data.pdfData;setTimeout((()=>e(this,void 0,void 0,(function*(){var e=i.pdf_path.path,n=e.substr(0,e.length-4);n+="-annotate.pdf";var r=t.normalizePath(n);yield i.app.vault.adapter.writeBinary(r,v),new t.Notice(`${s("Export annotate pdf success")}`)}))),200);break;case"extractHighlight":u=n.data.annotations;var y=n.data.width,x=n.data.height,b=[];u.length&&u.forEach((t=>{var e=Fn(),i={id:e,page:t.page-1,type:"highlight",selectText:t.markup,pdfName:this.pdf_path.path,text:{id:e,page:t.page-1,rect:t.rect,contents:t.content,author:"",color:{r:t.color[0],g:t.color[1],b:t.color[2]},opacity:1,quadPoints:null,selectText:t.markup,relateRect:null,pdfName:this.pdf_path.path}};t.quadPoints&&(i.text.relateRect=[],t.quadPoints.forEach((t=>{i.text.relateRect.push({x:t.x/y,y:(x-t.y-t.height)/y,width:t.width/y,height:t.height/y})}))),i.text=JSON.stringify(i.text),b.push(i)})),i.saveAnnotations(b),new t.Notice(s("extract highlight success")),this.plugin.mindmapFileModes[this.id||this.file.path]="markdown",this.plugin.setMarkdownView(this.leaf),this._extractHighlight=!1;break;case"saveAnnotations":u=n.data.annotations;i.saveAnnotations(u);break;case"copyText":var w=n.data.text;navigator.clipboard.writeText(""),navigator.clipboard.writeText(w)}}))}.bind(this),window.addEventListener("message",this.messageEvent,!1)}removeMessageEvent(){this.messageEvent&&window.removeEventListener("message",this.messageEvent,!1)}saveAnnotations(t){if(this.useMarkdown||this.pdf_path.path.startsWith("file:")||this.pdf_path.path.startsWith("http")){var e=this.getAnnotateMarkdown(t);this.data=e,this.requestSave()}else this.app.vault.adapter.write(this.annotate_path,JSON.stringify(t))}saveEpubAnnotations(t){if(this.useMarkdown||this.pdf_path.path.startsWith("file:")){var e=this.getEpubAnnotationsMarkdown(t);this.data=e,this.requestSave()}else this.app.vault.adapter.write(this.annotate_path,JSON.stringify(t))}showOutline(){var t=this.leaf.view;this.isShowOutline=!0;var e=document.createElement("div");e.classList.add("mm-router"),this.list&&(this.list.clear(),this.mindmapContainer.innerHTML=""),this.mindmapContainer.appendChild(e);var i=document.createElement("div");i.classList.add("mm-link-board"),this.mindmapContainer.appendChild(i),i.style.display="none";var n=document.createElement("ul");if(n.classList.add("mm-list"),this.mindmapContainer.appendChild(n),"basic"==this._mode){var r=this.getMdText(this.data);(s=this.mdToData(r)).isRoot=!0,s.main=!0,this.list=new Xi(n,s),this.list.path=null==t?void 0:t.file.path,this.list.colors=this.colors,this.list._mode="basic",this.list.view=this,this.list.setting=this.plugin.settings,this.list.init()}else{r=this.getMdText(this.data);var s=JSON.parse(r);this.list=new Xi(n,s),this.list.path=null==t?void 0:t.file.path,this.list.colors=this.colors,this.list.view=this,this.list.setting=this.plugin.settings,this.list.initRich(s,{}),this.list._mode="rich"}this.mindmapContainer.style.visibility="visible",this.mindmapContainer.scrollTop=0}showTableMode(){if(this.leaf.view,this.isShowTable=!0,"basic"==this._mode){var e=this.getMdText(this.data),i=this.mdToData(e);i.isRoot=!0,i.main=!0,this.mindmap=new pi(i,this.mindmapContainer,this.plugin.settings,!0),this.mindmap.view=this,this.mindmap.path=this.file.path,this.mindmap.colors=this.colors,this.mindmap._mode="table",this.mindmap.isMobile=t.Platform.isMobileApp,this.mindmap.themeConfig=s,this.mindmap.initTable(i),this.mindmapContainer.style.visibility="visible",this.mindmap.center()}}showTable(t){this.mindmap&&(this.mindmap.initTable(t),this.mindmap.view=this)}onunload(){this.app.workspace.offref("quick-preview"),this.app.workspace.offref("resize"),this.mindmap&&(this.mindmap.clear(),this.contentEl.innerHTML="",this.mindmap=null),this.list&&(this.list.clear(),this.contentEl.innerHTML="",this.list=null),this._haveOpenPdf&&this._close(),Object.assign(window,{onlyPdf:!1}),this.plugin.setMarkdownView(this.leaf)}onload(){super.onload(),this.registerEvent(this.app.workspace.on("quick-preview",(()=>this.onQuickPreview),this)),this.registerEvent(this.app.workspace.on("resize",(()=>{this.mindmap&&t.Platform.isDesktopApp&&(this.mindmap.selectNode||this.mindmap.root)}),this))}onQuickPreview(t,e){}updateMindMap(){this.mindmap&&this.mindmap.center()}onFileRename(t,e){this.mindmap&&this.mindmap.path&&this.mindmap.path==e&&(this.mindmap.path=t.path)}onFileMetadataChange(t){return e(this,void 0,void 0,(function*(){var e=t.path;let i=yield this.app.vault.adapter.read(e);this.onQuickPreview(t,i),this.fileCache=this.app.metadataCache.getFileCache(t)}))}getMdText(t){if("basic"==this._mode)return t.trim().replace(o,"").trim();var e=t.match(/^(\`\`\` json)$.+?^(\`\`\`)$.+?/ims);return e&&e.length>0?(this.richFirstSave=!1,e[0].substring(8,e[0].length-4).trim()):(this.richFirstSave=!0,JSON.stringify({mindData:[[{id:Fn(),text:"Root",isRoot:!0,main:!0,x:this.plugin.settings.canvasSize/2,y:this.plugin.settings.canvasSize/2,isExpand:!0,layout:{layoutName:"mindmap2",direct:"mindmap"}}]]}))}mdToData(t){var e;if(t){const{root:e}=Hn.transform(t);return jn(e)}return{id:Fn(),text:(null===(e=this.app.workspace.getActiveFile())||void 0===e?void 0:e.basename)||`${s("Untitled mindmap")}`}}onMoreOptionsMenu(i){this._haveOpenPdf?(i.addItem((t=>{t.setTitle(`${s("Open as markdown")}`).setIcon("document").onClick((()=>{this.plugin.mindmapFileModes[this.id||this.file.path]="markdown",this.plugin.setMarkdownView(this.leaf)}))})),t.Platform.isDesktopApp&&(i.addItem((i=>{i.setTitle(`${s("Export annotate pdf")}`).setIcon("document").onClick((()=>e(this,void 0,void 0,(function*(){new t.Notice(`${s("Export annotate pdf tip")}`),this.iframe.contentWindow.postMessage({type:"exportAnnotatePDF"},"*")}))))})),i.addItem((t=>{t.setTitle(`${s("Export pdf annotations")}`).setIcon("document").onClick((()=>e(this,void 0,void 0,(function*(){yield this._exportHighlights()}))))})),i.addItem((i=>{i.setTitle(`${s("Get pdf annotations")}`).setIcon("document").onClick((()=>e(this,void 0,void 0,(function*(){new t.Notice(`${s("Export annotate pdf tip")}`),yield this._ectractHighlightOfPdf()}))))})),this.plugin.settings.activeCode)):(i.addItem((t=>{t.setTitle(`${s("Open as markdown")}`).setIcon("document").onClick((()=>{this.plugin.mindmapFileModes[this.id||this.file.path]="markdown",this.plugin.setMarkdownView(this.leaf)}))})),this.mindmap&&"basic"==this._mode&&(i.addItem((t=>{t.setTitle(`${s("Open as outline")}`).setIcon("document").onClick((()=>{this.mindmap.clear(),this.mindmapContainer.innerHTML="",this.mindmap=null,this.forceMindMapMode=!1,this.showOutline()}))})),i.addItem((t=>{t.setTitle(`${s("Open as table")}`).setIcon("document").onClick((()=>{this.forceMindMapMode=!1,this.isShowOutline=!1,this.isShowTable=!0,this.showTable(this.mindmap.data)}))})),i.addItem((t=>{t.setTitle(`${s("Create hand drawn mindmap")}`).setIcon("document").onClick((()=>{this.mindmap&&(this.mindmap.useHandMode&&(this.mindmap.useHandMode=!1),this._useHandDraw=!0,this.setViewData(this.data),setTimeout((()=>{this.mindmap&&this.mindmap.refresh(),this.mindmap&&this.mindmap.clearSelectNode()}),1200))}))})),this.isShowTable&&(i.addItem((t=>{t.setTitle(`${s("Open as mindmap board")}`).setIcon("document").onClick((()=>e(this,void 0,void 0,(function*(){this.mindmapContainer.innerHTML="",this.isShowOutline=!1,this.isShowTable=!1,this.forceMindMapMode=!0,this.setViewData(this.data)}))))})),i.addItem((t=>{t.setTitle(`${s("get table html")}`).setIcon("document").onClick((()=>e(this,void 0,void 0,(function*(){if(this.isShowTable&&this.mindmap){var t=JSON.parse(JSON.stringify(this.mindmap.data)),e=this.mindmap.getTableHtml(t);navigator.clipboard.writeText(""),navigator.clipboard.writeText(e),this.mindmap.initTable()}}))))})),i.addItem((t=>{t.setTitle(`${s("get table markdown")}`).setIcon("document").onClick((()=>e(this,void 0,void 0,(function*(){if(this.isShowTable&&this.mindmap){var t=JSON.parse(JSON.stringify(this.mindmap.data)),e=this.mindmap.getMarkdownOfTable(t);navigator.clipboard.writeText("");try{navigator.clipboard.writeText(Mn.turndown(e))}catch(t){console.log(t)}this.mindmap.initTable()}}))))})))),this.mindmap&&(t.Platform.isDesktopApp&&i.addItem((t=>{t.setTitle(`${s("Toggle search box")}`).setIcon("document").onClick((()=>{this.mindmap._searchDom?this.mindmap.closeSearch():this.mindmap.createSearchDom()}))})),i.addItem((t=>{t.setTitle(`${s("Set mindmap to center")}`).setIcon("document").onClick((()=>{this.mindmap&&this.mindmap.center()}))})),i.addItem((t=>{t.setTitle(`${s("Copy as markdown")}`).setIcon("document").onClick((()=>{var t=this.mindmap.selectNode;if(t)var e=t.getLevel(),i=this.mindmap.getMarkdown(t,!0,e);else i=this.mindmap.getMarkdown();i&&(navigator.clipboard.writeText(""),navigator.clipboard.writeText(i))}))})),i.addItem((t=>{t.setTitle(`${s("Copy node text")}`).setIcon("document").onClick((()=>{var t=this.mindmap.selectNode;if(t){var e=t.getData().text;e&&(navigator.clipboard.writeText(""),navigator.clipboard.writeText(e))}}))}))),this.mindmap&&"rich"==this._mode&&(i.addItem((t=>{t.setTitle(`${s("Copy node link")}`).setIcon("document").onClick((()=>{var t=this.mindmap.selectNode;if(t){const{text:i,id:n}=t.getData();var e=`${i} [🔖](obsidian://jump-to-pdf?md=${encodeURIComponent(this.file.path)}&node=${encodeURIComponent(n)})`;navigator.clipboard.writeText(""),navigator.clipboard.writeText(e)}}))})),i.addItem((t=>{t.setTitle(`${s("Copy node id")}`).setIcon("document").onClick((()=>{var t=this.mindmap.selectNode;if(t){const{text:e,id:i}=t.getData();navigator.clipboard.writeText(""),navigator.clipboard.writeText(i)}}))}))),this.list&&i.addItem((t=>{t.setTitle(`${s("Open as mindmap board")}`).setIcon("document").onClick((()=>e(this,void 0,void 0,(function*(){this.list.clear(),this.mindmapContainer.innerHTML="",this.isShowOutline=!1,this.isShowTable=!1,this.list=null,this.forceMindMapMode=!0,this.setViewData(this.data)}))))}))),super.onMoreOptionsMenu(i)}openPDF(i){return e(this,void 0,void 0,(function*(){if(this.plugin.settings.pdfjsPath){if(this.period)new t.Notice(s("The probation period has ended"));else if(this.setTime&&clearTimeout(this.setTime),!this.pdf_path){if(document.querySelector(".pdfViewer"))return void new t.Notice(s("PDF Cannot Open More Instances"));new t.Notice(s("Open PDF File"))}}else new t.Notice(s("Miss PDF Reader Path"))}))}getAnnotations(t){var e=[],i=t.match(/(\n>\`\`\`annotate-json\n)(.+?)(\n>\`\`\`\n)/gm);return i&&i.length&&i.forEach((t=>{t=t.substring(20,t.length-5);try{var i=JSON.parse(t.trim());e.push(i)}catch(t){console.log(t)}})),e}getEpubAnnotationsMarkdown(t){var e=this,i="",n=this.plugin.settings.removeSpace;return t.forEach((t=>{var r=">%%\n>```annotate-json\n>";(r+=JSON.stringify(t),r+="\n>```\n>%%\n",e.pdf_path.path,"epub-highlight"==t.type)?r+=n?`>*${t.text.replace(/\s/g,"")}*\n`:`>*${t.text}*\n`:r+=`>![[${e.pdf_path.path}]]\n`;r+=`>[[#^${t.id}|${s("Show Annotate")}]]\n>\n^${t.id}\n\n`,i+=r})),`---\n\nannotate-type: epub\nannotate-target: ${this.pdf_path.path}\n\n---\n\n`+i}getAnnotateMarkdown(t){var e="",i=this.plugin.settings.removeSpace;t.forEach((t=>{var n=">%%\n>```annotate-json\n>";n+=JSON.stringify(t),n+="\n>```\n>%%\n";var r=JSON.parse(t.text);"highlight"==t.type?n+=i?`>*${t.selectText.replace(/\s/g,"")}*\n`:`>*${t.selectText}*\n`:n+=`>![[${r.path}]]\n`;n+=`>[[#^${t.id}|${s("Show Annotate")}]]\n>\n^${t.id}\n\n`,e+=n}));var n=`---\n\nannotate-type: pdf\nannotate-target: ${this.pdf_path.path}\n\n---\n\n`;return this.frontmatter&&(n=this.frontmatter),n+e}_closePDF(){this._close(),this.mindmapContainer.style.width="100%",this.pdfContainer.style.display="none",this.mindmap&&this.mindmap.center(),this.removeMessageEvent(),this.onlyPdf&&this.leaf.detach()}openMindView(i,n){return e(this,void 0,void 0,(function*(){var e=this.app.metadataCache.getFirstLinkpathDest(n,null==this?void 0:this.file.path);const r=this.app.workspace.getLeavesOfType("mindmapview");if(r.length){var s=null;if(r.forEach((i=>{i.view&&i.view.mindmap&&t.View.mindmap.path==e.path&&(s=i.view)})),s){var o=s.mindmap,a=o.getNodeById(i);a&&o.showNode(a)}else Object.assign(window,{"show-mindmap-node":i}),this.app.workspace.openLinkText(n,"",!0)}else Object.assign(window,{"show-mindmap-node":i}),this.app.workspace.openLinkText(n,"",!0)}))}showAnnotate(i,n){return e(this,void 0,void 0,(function*(){var e={};if(n.startsWith("file:/")){e.path=n,e.basename=Rn.basename(n),e.absolutePath=n.replace("file://","");var r=n}else if(n.startsWith("http://")||n.startsWith("https://")){e.path=n,e.basename=n,e.absolutePath=n;r=n}else{e=this.app.metadataCache.getFirstLinkpathDest(n,null==this?void 0:this.file.path);r=this.app.vault.getResourcePath(e)}const o=this.app.workspace.getLeavesOfType("mindmapview");if(o.length){var a=null;if(o.forEach((t=>{t.view&&t.view._haveOpenPdf&&t.view.pdf_real_path==r&&(a=t.view)})),a)a.iframe.contentWindow.postMessage({id:i,type:"showAnnotate"},"*");else{if(n.startsWith("file:/")||n.startsWith("http"));else if((c=t.normalizePath(e.path)).endsWith(".pdf"))var h=c.substr(0,c.length-4)+"-annotate.md";else if(c.endsWith(".epub"))h=c.substr(0,c.length-5)+"-annotate.md";var l=yield this.getAnnoate(e.path);if(Object.assign(window,{waitPdfId:i}),l)yield this.app.workspace.openLinkText(l.path,"",!0);else{if(n.startsWith("file:/")||n.startsWith("http"))return void new t.Notice(s("Not find md file"));var d=`---\nannotate-target: ${e.path}\n---\n`;yield this.app.vault.adapter.write(h,d),setTimeout((()=>{this.app.workspace.openLinkText(h,"",!0)}),200)}}}else{var c;h=(c=t.normalizePath(e.path)).substr(0,c.length-4)+"-annotate.md";if(yield this.app.vault.adapter.exists(h))yield this.app.workspace.openLinkText(h,"",!0);else{d=`---\nannotate-target: ${n}\n---\n`;yield this.app.vault.adapter.write(h,d),setTimeout((()=>{this.app.workspace.openLinkText(h,"",!0)}),100)}}}))}getAnnoate(t){var i;return e(this,void 0,void 0,(function*(){var e=null,n=this.app.vault.getMarkdownFiles();for(let s of n){var r=null===(i=this.app.metadataCache.getFileCache(s))||void 0===i?void 0:i.frontmatter;r&&r["annotate-target"]&&r["annotate-target"]==t&&(e=s)}return e}))}}class Un extends t.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){const{containerEl:e}=this;this.plugin.settings.setup||(this.plugin.settings.setup=(new Date).getTime()),this.plugin.settings.firstActive&&(this.plugin.settings.firstActive=0,this.plugin.saveData(this.plugin.settings)),e.empty(),new t.Setting(e).setName(`${s("Canvas size")}`).setDesc(`${s("Canvas size desc")}`).addDropdown((t=>t.addOption("4000","4000").addOption("6000","6000").addOption("8000","8000").addOption("10000","10000").addOption("12000","12000").addOption("16000","16000").addOption("20000","20000").addOption("24000","24000").addOption("30000","30000").addOption("36000","36000").addOption("40000","40000").addOption("50000","50000").addOption("60000","60000").addOption("70000","70000").addOption("80000","80000").addOption("90000","90000").addOption("100000","100000").addOption("110000","110000").addOption("120000","120000").setValue(this.plugin.settings.canvasSize.toString()||"8000").onChange((t=>{var e=Number.parseInt(t);this.plugin.settings.canvasSize=e,this.plugin.saveData(this.plugin.settings);this.app.workspace.getLeavesOfType("mindmapview").forEach((t=>{var i=t.view;i.mindmap.setting.canvasSize=e,i.mindmap.setAppSetting();var n=i.mindmap.root.getBox();i.mindmap.root.setPosition(e/2-n.width/2,e/2-n.height/2),i.mindmap.refresh(),i.mindmap.center()}))})))),new t.Setting(e).setName(`${s("Canvas background")}`).setDesc(`${s("Canvas background desc")}`).addText((t=>t.setValue(this.plugin.settings.background||"transparent").setPlaceholder("Example: black|white|#ccc").onChange((t=>{this.plugin.settings.background=t,this.plugin.saveData(this.plugin.settings);this.app.workspace.getLeavesOfType("mindmapview").forEach((t=>{var e=t.view;e.mindmap.setting.background=this.plugin.settings.background,e.mindmap.setAppSetting()}))})))),new t.Setting(e).setName(`${s("Max level of node to markdown head")}`).setDesc(`${s("Max level of node to markdown head desc")}`).addDropdown((t=>t.addOption("0","0").addOption("1","1").addOption("2","2").addOption("3","3").addOption("4","4").addOption("5","5").addOption("6","6").setValue(this.plugin.settings.headLevel.toString()||"2").onChange((t=>{this.plugin.settings.headLevel=Number.parseInt(t),this.plugin.saveData(this.plugin.settings);this.app.workspace.getLeavesOfType("mindmapview").forEach((t=>{t.view.mindmap.setting.headLevel=this.plugin.settings.headLevel}))})))),new t.Setting(e).setName(`${s("Font size")}`).setDesc(`${s("Font size desc")}`).addText((t=>{var e;return t.setValue((null===(e=this.plugin.settings.fontSize)||void 0===e?void 0:e.toString())||"16").setPlaceholder("Example: 16").onChange((t=>{this.plugin.settings.fontSize=Number.parseInt(t),this.plugin.saveData(this.plugin.settings);this.app.workspace.getLeavesOfType("mindmapview").forEach((t=>{var e=t.view;e.mindmap.setting.fontSize=this.plugin.settings.fontSize,e.mindmap.setAppSetting(),e.mindmap.traverseBF((t=>{t.boundingRect=null,t.refreshBox()})),e.mindmap.refresh()}))}))})),new t.Setting(e).setName(`${s("Mind map layout direct")}`).setDesc(`${s("Mind map layout direct desc")}`).addDropdown((t=>t.addOption("mind map",s("Centered")).addOption("right",s("Right")).addOption("left",s("Left")).setValue(this.plugin.settings.layoutDirect.toString()||"mind map").onChange((t=>{this.plugin.settings.layoutDirect=t,this.plugin.saveData(this.plugin.settings);this.app.workspace.getLeavesOfType("mindmapview").forEach((t=>{var e=t.view;e.mindmap.setting.layoutDirect=this.plugin.settings.layoutDirect,e.mindmap.refresh()}))})))),new t.Setting(e).setName(`${s("Stroke Array")}`).setDesc(`${s("Stroke Array Desc")}`).addText((t=>{var e;return t.setValue((null===(e=this.plugin.settings.strokeArray)||void 0===e?void 0:e.toString())||"").setPlaceholder("Example: red,oragne,blue ...").onChange((t=>{this.plugin.settings.strokeArray=t,this.plugin.saveData(this.plugin.settings);this.app.workspace.getLeavesOfType("mindmapview").forEach((t=>{var e=t.view;e.mindmap.setting.strokeArray=this.plugin.settings.strokeArray.split(","),e.mindmap.traverseBF((t=>{t.boundingRect=null,t.refreshBox()})),e.mindmap.refresh()}))}))})),new t.Setting(e).setName(`${s("PDFJs Plugin Path")}`).setDesc(`${s("PDFJs Plugin Path Desc")}`).addText((t=>{var e;return t.setValue((null===(e=this.plugin.settings.pdfjsPath)||void 0===e?void 0:e.toString())||"").setPlaceholder("Example: D:plugins/pdfjs").onChange((t=>{this.plugin.settings.pdfjsPath=t,this.plugin.saveData(this.plugin.settings),Object.assign(window,{pdf_plugin_path:t})}))})),new t.Setting(e).setName(`${s("Mac pdfjs Plugin Path")}`).setDesc(`${s("PDFJs Plugin Path Desc")}`).addText((t=>{var e;return t.setValue((null===(e=this.plugin.settings.pdfjsMacPath)||void 0===e?void 0:e.toString())||"").setPlaceholder("").onChange((t=>{this.plugin.settings.pdfjsMacPath=t,this.plugin.saveData(this.plugin.settings),Object.assign(window,{pdf_plugin_path:t})}))})),new t.Setting(e).setName(`${s("Andriod pdfjs Plugin Path")}`).setDesc(`${s("PDFJs Plugin Path Desc")}`).addText((t=>{var e;return t.setValue((null===(e=this.plugin.settings.pdfjsAndriodPath)||void 0===e?void 0:e.toString())||"").setPlaceholder("").onChange((t=>{this.plugin.settings.pdfjsAndriodPath=t,this.plugin.saveData(this.plugin.settings),Object.assign(window,{pdf_plugin_path:t})}))})),new t.Setting(e).setName(`${s("Ios pdfjs Plugin Path")}`).setDesc(`${s("PDFJs Plugin Path Desc")}`).addText((t=>{var e;return t.setValue((null===(e=this.plugin.settings.pdfjsIosPath)||void 0===e?void 0:e.toString())||"").setPlaceholder("").onChange((t=>{this.plugin.settings.pdfjsIosPath=t,this.plugin.saveData(this.plugin.settings),Object.assign(window,{pdf_plugin_path:t})}))})),new t.Setting(e).setName(`${s("Open Protocol")}`).setDesc(`${s("Open Protocol Desc")}`).addDropdown((t=>t.addOption("0",s("Close")).addOption("1",s("Open")).setValue(this.plugin.settings.openProtocol||"0").onChange((t=>{this.plugin.settings.openProtocol=Number.parseInt(t),this.plugin.saveData(this.plugin.settings),this.plugin.settings.openProtocol&&this.plugin.settings.protocol&&this.plugin.registerObsidianProtocol()})))),new t.Setting(e).setName(`${s("Annotation save type")}`).setDesc(`${s("Annotation save type desc")}`).addDropdown((t=>t.addOption("annos","annos").addOption("md","markdown").setValue(this.plugin.settings.useMarkdownSaveAnnotation).onChange((t=>{this.plugin.settings.useMarkdownSaveAnnotation=t,this.plugin.saveData(this.plugin.settings);const e=this.app.workspace.getLeavesOfType("mindmapview");"md"==this.plugin.settings.useMarkdownSaveAnnotation?e.forEach((t=>{t.view.useMarkdown=!0})):e.forEach((t=>{t.view.useMarkdown=!1}))})))),new t.Setting(e).setName(`${s("Active Code")}`).setDesc(`${s("Active Code Desc")}`).addTextArea((t=>{var e;return t.setValue((null===(e=this.plugin.settings.activeCode)||void 0===e?void 0:e.toString())||"").setPlaceholder("").onChange((t=>{this.plugin.settings.activeCode=t,this.plugin.saveData(this.plugin.settings);this.app.workspace.getLeavesOfType("mindmapview").forEach((t=>{var e=t.view;e.activeCode=this.plugin.settings.activeCode,e.checkActive()}))}))})),new t.Setting(e).setName(`${s("Mobile Active Code")}`).setDesc(`${s("Mobile Active Code Desc")}`).addTextArea((t=>{var e;return t.setValue((null===(e=this.plugin.settings.mobileActiveCode)||void 0===e?void 0:e.toString())||"").setPlaceholder("").onChange((t=>{this.plugin.settings.mobileActiveCode=t,this.plugin.saveData(this.plugin.settings);this.app.workspace.getLeavesOfType("mindmapview").forEach((t=>{t.view.checkActive()}))}))})),new t.Setting(e).setName(`${s("PDF Viewer Theme")}`).setDesc(`${s("PDF Viewer Theme desc")}`).addDropdown((t=>t.addOption("1","Light").addOption("2","Dark").setValue(this.plugin.settings.viewerTheme.toString()||"2").onChange((t=>{this.plugin.settings.viewerTheme=Number.parseInt(t),this.plugin.saveData(this.plugin.settings)})))),new t.Setting(e).setName(`${s("Mindmap mode")}`).setDesc(`${s("Mindmap mode desc")}`).addDropdown((t=>t.addOption("basic","Basic").addOption("rich","Rich").setValue(this.plugin.settings.mindmapmode.toString()||"basic").onChange((t=>{this.plugin.settings.mindmapmode=t,this.plugin.saveData(this.plugin.settings)})))),new t.Setting(e).setName(`${s("Pdf screen short")}`).setDesc(`${s("Pdf screen short desc")}`).addText((t=>{var e;return t.setValue((null===(e=this.plugin.settings.imageFolder)||void 0===e?void 0:e.toString())||"").setPlaceholder("assets").onChange((t=>{this.plugin.settings.imageFolder=t,this.plugin.saveData(this.plugin.settings)}))})),new t.Setting(e).setName(`${s("Remove annotate space")}`).setDesc(`${s("Remove annotate space desc")}`).addToggle((t=>{t.setValue(this.plugin.settings.removeSpace).onChange((t=>{this.plugin.settings.removeSpace=t,this.plugin.saveData(this.plugin.settings)}))})),new t.Setting(e).setName(`${s("Smooth movement")}`).setDesc(`${s("Smooth movement desc")}`).addToggle((t=>{t.setValue(this.plugin.settings.removeSpace).onChange((t=>{this.plugin.settings.useAnimate=t,this.plugin.saveData(this.plugin.settings);this.app.workspace.getLeavesOfType("mindmapview").forEach((e=>{var i=e.view;i&&i.mindmap&&(i.mindmap.setting.useAnimate=t)}))}))})),new t.Setting(e).setName(`${s("Support code block")}`).setDesc(`${s("Support code block desc")}`).addToggle((t=>{t.setValue(this.plugin.settings.openCodeBlock).onChange((t=>{this.plugin.settings.openCodeBlock=t,this.plugin.saveData(this.plugin.settings)}))})),new t.Setting(e).setName(`${s("nodeColor")}`).setDesc(`${s("nodeColorDesc")}`).addText((t=>{var e;return t.setValue((null===(e=this.plugin.settings.nodeColorArray)||void 0===e?void 0:e.toString())||"").setPlaceholder("Example: red,orange,#ccc").onChange((t=>{this.plugin.settings.nodeColorArray=t,this.plugin.saveData(this.plugin.settings)}))})),new t.Setting(e).setName(`${s("Format of pdf highlight")}`).setDesc(`${s("Format of pdf highlight desc")}`).addTextArea((t=>{var e;return t.setValue((null===(e=this.plugin.settings.highlightFormat)||void 0===e?void 0:e.toString())||"").setPlaceholder("").onChange((t=>{this.plugin.settings.highlightFormat=t,this.plugin.saveData(this.plugin.settings)}))})),new t.Setting(e).setName(`${s("Fine tune height of annotate")}`).setDesc(`${s("Fine tune height of annotate desc")}`).addText((t=>{var e;return t.setValue((null===(e=this.plugin.settings.annotateTop)||void 0===e?void 0:e.toString())||"0").setPlaceholder("Example: 0").onChange((t=>{this.plugin.settings.annotateTop=Number.parseInt(t),this.plugin.saveData(this.plugin.settings)}))})),new t.Setting(e).setName(`${s("Fine tune height of annotate")}`).setDesc(`${s("Fine tune height of annotate desc one")}`).addText((t=>{var e;return t.setValue((null===(e=this.plugin.settings.annotateBottom)||void 0===e?void 0:e.toString())||"0").setPlaceholder("Example: 0").onChange((t=>{this.plugin.settings.annotateBottom=Number.parseInt(t),this.plugin.saveData(this.plugin.settings)}))}))}}class Vn extends t.Plugin{constructor(){super(...arguments),this.mindmapFileModes={},this._loaded=!1,this.timeOut=null,this.colors=[]}onload(){return e(this,void 0,void 0,(function*(){yield this.loadSettings();for(var e=0;e<150;e++)this.colors.push(gt());this.addCommand({id:"Create New MindMap",name:`${s("Create new mindmap")}`,callback:()=>{var t;if(this.app.workspace.activeLeaf){const e=this.app.fileManager.getNewFileParent((null===(t=this.app.workspace.getActiveFile())||void 0===t?void 0:t.path)||"");e&&this.newMindMap(e)}}}),this.addCommand({id:"Create New outline",name:`${s("Create new outline")}`,callback:()=>{var t;if(this.app.workspace.activeLeaf){const e=this.app.fileManager.getNewFileParent((null===(t=this.app.workspace.getActiveFile())||void 0===t?void 0:t.path)||"");e&&this.newOutline(e)}}}),this.addCommand({id:"Copy Node",name:`${s("Copy node")}`,callback:()=>{const t=this.app.workspace.getActiveViewOfType(Wn);if(t){var e=t.mindmap;navigator.clipboard.writeText("");var i=e.selectNode;if(i){var n=e.copyNode(i);navigator.clipboard.writeText(n)}}}}),this.addCommand({id:"Paste Node",name:`${s("Paste node")}`,callback:()=>{const t=this.app.workspace.getActiveViewOfType(Wn);if(t){var e=t.mindmap;navigator.clipboard.readText().then((t=>{e.pasteNode(t)}))}}}),this.addCommand({id:"Change layout to mindmap",name:`${s("Change layout to mindmap")}`,callback:()=>{let t=this.app.workspace.activeLeaf;if("mindmapview"==t.view.getViewType()&&t.view.mindmap){var e=t.view.mindmap.selectNode;e&&"rich"==e.mindmap._mode&&t.view.mindmap.execute("changeLayout",{node:e,direct:"mindmap"})}}}),this.addCommand({id:"Change layout to right",name:`${s("Change layout to right")}`,callback:()=>{let t=this.app.workspace.activeLeaf;if("mindmapview"==t.view.getViewType()&&t.view.mindmap){var e=t.view.mindmap.selectNode;e&&"rich"==e.mindmap._mode&&t.view.mindmap.execute("changeLayout",{node:e,direct:"right"})}}}),this.addCommand({id:"Change layout to left",name:`${s("Change layout to left")}`,callback:()=>{let t=this.app.workspace.activeLeaf;if("mindmapview"==t.view.getViewType()&&t.view.mindmap){var e=t.view.mindmap.selectNode;e&&"rich"==e.mindmap._mode&&t.view.mindmap.execute("changeLayout",{node:e,direct:"left"})}}}),this.addCommand({id:"Change layout to tree",name:`${s("Change layout to tree")}`,callback:()=>{let t=this.app.workspace.activeLeaf;if("mindmapview"==t.view.getViewType()&&t.view.mindmap){var e=t.view.mindmap.selectNode;e&&"rich"==e.mindmap._mode&&t.view.mindmap.execute("changeLayout",{node:e,direct:"down"})}}}),this.addCommand({id:"Change layout to fishRight",name:`${s("Change layout to fishRight")}`,callback:()=>{let t=this.app.workspace.activeLeaf;if("mindmapview"==t.view.getViewType()&&t.view.mindmap){var e=t.view.mindmap.selectNode;e&&"rich"==e.mindmap._mode&&t.view.mindmap.execute("changeLayout",{node:e,direct:"fishRight"})}}}),this.addCommand({id:"Change layout to fishLeft",name:`${s("Change layout to fishLeft")}`,callback:()=>{let t=this.app.workspace.activeLeaf;if("mindmapview"==t.view.getViewType()&&t.view.mindmap){var e=t.view.mindmap.selectNode;e&&"rich"==e.mindmap._mode&&t.view.mindmap.execute("changeLayout",{node:e,direct:"fishLeft"})}}}),this.addCommand({id:"Toggle to markdown or mindmap",name:`${s("Toggle mardkown/mindmap")}`,mobileOnly:!1,callback:()=>{const e=this.app.workspace.getActiveViewOfType(Wn),i=this.app.workspace.getActiveViewOfType(t.MarkdownView);null!=e?(this.mindmapFileModes[e.leaf.id||e.file.path]="markdown",this.setMarkdownView(e.leaf)):null!=i&&(this.mindmapFileModes[i.leaf.id||i.file.path]="mindmapview",this.setMindMapView(i.leaf))}}),this.addCommand({id:"Get vault path",name:`${s("Get path of vault")}`,mobileOnly:!1,callback:()=>{var e=this.app.vault.adapter.basePath;new t.Notice(e),navigator.clipboard.writeText(""),navigator.clipboard.writeText(e)}}),this.addCommand({id:"Set pdf js plugin folder path",name:`${s("Set pdf js path")}`,mobileOnly:!1,callback:()=>{const e=this.app.workspace.getActiveViewOfType(Wn);if(e){var i=this.app.vault.getMarkdownFiles();if(i.length){var n=i[0],r=this.app.vault.getResourcePath(n);r=decodeURIComponent(r);var o=(r=t.normalizePath(r)).split("?")[0];if(o){var a=o.lastIndexOf(n.path);if(a>-1){var h="_capacitor_file_",l=(o=o.substring(0,a)).indexOf(h);o=o.substring(l+h.length),t.Platform.isAndroidApp?(this.settings.pdfjsAndriodPath=o+"andriod/pdfjs",e.plugin.settings.pdfjsAndriodPath=this.settings.pdfjsAndriodPath):t.Platform.isIosApp&&(this.settings.pdfjsIosPath=o+"ios/pdfjs",e.plugin.settings.pdfjsIosPath=this.settings.pdfjsIosPath),e.plugin.saveData(e.plugin.settings),new t.Notice(s("Set up pdf js path success"))}}else console.log("set up pdf js fali",r)}}else new t.Notice(`${s("Please open a mind map")}`)}}),this.addCommand({id:"Change basic mode to rich mode",name:`${s("Change basic mode to rich mode")}`,mobileOnly:!1,callback:()=>{const t=this.app.workspace.getActiveViewOfType(Wn);t&&t.basicToRich()}}),this.addCommand({id:"Export to html",name:`${s("Export to html")}`,callback:()=>{const t=this.app.workspace.getActiveViewOfType(Wn);t&&t.exportToPng()}}),this.addCommand({id:"Use new version of pdfjs",name:`${s("Use new version of pdfjs")}`,mobileOnly:!1,callback:()=>{const t=this.app.workspace.getActiveViewOfType(Wn);t&&t._haveOpenPdf&&t.setPdfjsVersion(!0)}}),this.addCommand({id:"Use old version of pdfjs",name:`${s("Use old version of pdfjs")}`,mobileOnly:!1,callback:()=>{const t=this.app.workspace.getActiveViewOfType(Wn);t&&t._haveOpenPdf&&t.setPdfjsVersion(!1)}}),this.registerView("mindmapview",(t=>new Wn(t,this))),this.registerEvents(),this.addMarkdownPostProcessor(),this.registerMonkeyAround(),this.addSettingTab(new Un(this.app,this)),this.settings.openCodeBlock&&(this.registerMarkdownCodeBlockProcessor("mindmap",this.codeBlockProcessor.bind(this)),this.registerMarkdownCodeBlockProcessor("markmind",this.markmindBlockProcessor.bind(this))),this.settings.openProtocol&&this.settings.openProtocol>0&&this.settings.protocol&&this.registerObsidianProtocol()}))}markmindBlockProcessor(i,n,r){return e(this,void 0,void 0,(function*(){try{var e=JSON.parse(i.trim());if(e.path){const i=t.parseLinktext(e.path);if(!i)return;const h=i.subpath.startsWith("#^")?i.subpath.substr(2):null,l=this.app.metadataCache.getFirstLinkpathDest(i.path,r.sourcePath);if(l&&"md"==l.extension){var s=this.app.metadataCache.getFileCache(l);if(this.isMindmap(s)&&this.isMindmapRichMode(s))c(this.app,l,n,null,this.colors,this.settings,(t=>{if(t&&h){var e=t.getNodeById(h);e&&(t.clearSelectNode(),t.showNode(e))}}));else{var o=s&&s.frontmatter;if(o)var a=!!o["display-mode"]&&"table"==o["display-mode"];d(this.app,l,n,null,this.colors,this.settings,(t=>{if(t&&h){var e=t.getNodeById(h);e&&(t.clearSelectNode(),t.showNode(e))}}),0,a)}}}}catch(t){var h=document.createElement("pre");h.innerText=i,n.appendChild(h)}}))}codeBlockProcessor(t,i,n){return e(this,void 0,void 0,(function*(){try{var e=t.trim();if(!e)throw Error("empty text");const{root:o}=Hn.transform(e),a=jn(o);a.isRoot=!0,a.useScale=!1;var r=document.createElement("div");r.classList.add("mm-mindmap-container"),r.style.visibility="hidden",i.appendChild(r);var s=new pi(a,r,this.settings,!1);s.path=n.sourcePath,s._mode="basic",s.colors=this.colors,s.init(),setTimeout((()=>{s.refresh(),s.center(),r.style.visibility="visible"}),1200)}catch(e){var o=document.createElement("pre");o.innerText=t,i.appendChild(o)}}))}registerObsidianProtocol(){this.registerObsidianProtocolHandler(`${this.settings.protocol}`,(i=>e(this,void 0,void 0,(function*(){var e;const n=i;for(const t in n)n[t]=decodeURIComponent(n[t]);if(n.pdf&&n.annotate){const e=this.app.workspace.getLeavesOfType("mindmapview");if(e.length){var r=null;if(e.forEach((t=>{t.view&&t.view._haveOpenPdf&&(r=t.view)})),r)r.showAnnotate(n.annotate,n.pdf);else{if(n.pdf.startsWith("file://"))var s=n.pdf;else if(n.pdf.startsWith("http"))s=n.pdf;else s=t.normalizePath(n.pdf);this.openPDfView(s,n.annotate)}}else{if(n.pdf.startsWith("file://"))s=n.pdf;else if(n.pdf.startsWith("http"))s=n.pdf;else s=t.normalizePath(n.pdf);this.openPDfView(s,n.annotate)}}else if(n.pdf)n.pdf.endsWith(".pdf")&&this.app.workspace.openLinkText(n.pdf,"");else if(n.md&&n.node){var o=decodeURIComponent(n.md),a=decodeURIComponent(n.node);Object.assign(window,{"show-mindmap-node":a});const t=this.app.workspace.getLeavesOfType("mindmapview");if(t.length){r=null;if(t.forEach((t=>{t.view&&t.view.file&&t.view.file.path==o&&(r=t.view)})),r)if(r.mindmap){var h=r.mindmap.getNodeById(a);r.mindmap.showNode(h),Object.assign(window,{"show-mindmap-node":""})}else r.app.workspace.openLinkText(o,(null===(e=r.file)||void 0===e?void 0:e.path)||"",!0);else(r=t[0].view).app.workspace.openLinkText(o,"",!0)}else this.app.workspace.openLinkText(o,"",!0)}else n.md&&this.app.workspace.openLinkText(decodeURIComponent(n.md),"",!0)}))))}getAnnoate(t){var i;return e(this,void 0,void 0,(function*(){var e=null,n=this.app.vault.getMarkdownFiles();for(let s of n){var r=null===(i=this.app.metadataCache.getFileCache(s))||void 0===i?void 0:i.frontmatter;if(r&&r["annotate-target"]&&r["annotate-target"]==t){e=s;break}}return e}))}openPDfView(t,i){return e(this,void 0,void 0,(function*(){var e=t.substr(0,t.length-4)+"-annotate.md",n=yield this.getAnnoate(t);if(Object.assign(window,{waitPdfId:i||""}),n)yield this.app.workspace.openLinkText(n.path,"",!0);else{var r=`---\nannotate-target: ${t}\n---\n`;Object.assign(window,{waitPdfId:""}),yield this.app.vault.adapter.write(e,r),setTimeout((()=>{this.app.workspace.openLinkText(e,"",!0)}),200)}}))}openMindmapView(t,i){return e(this,void 0,void 0,(function*(){Object.assign(window,{onlyPdf:!0}),t?(yield this.app.workspace.openLinkText(t.basename,"",!0),yield this.setCursor(i)):(yield this.newMindMap(),yield this.setCursor(i))}))}setCursor(t){return e(this,void 0,void 0,(function*(){const e=this.app.workspace.getActiveViewOfType(Wn);e&&setTimeout((()=>{e.onlyPdf=!0,e.setOnlyPdf(),e.showAnnotate(t.annotate,t.pdf)}),800)}))}_getMindmapMd(){var t,e=null,i=this.app.vault.getMarkdownFiles();for(let r of i)if("md"==r.extension){var n=null===(t=this.app.metadataCache.getFileCache(r))||void 0===t?void 0:t.frontmatter;n&&n["mindmap-plugin"]&&(e=r)}return e}onunload(){this.app.workspace.detachLeavesOfType("mindmapview")}newOutline(t){var i;return e(this,void 0,void 0,(function*(){const n=t||this.app.fileManager.getNewFileParent((null===(i=this.app.workspace.getActiveFile())||void 0===i?void 0:i.path)||"");try{const t=yield this.app.fileManager.createNewMarkdownFile(n,`${s("Untitled mindmap")}`);yield this.app.vault.modify(t,l);var r={type:"mindmapview",state:{file:t.path}};setTimeout((()=>e(this,void 0,void 0,(function*(){yield this.app.workspace.getLeaf().setViewState(r)}))),100)}catch(t){console.error("Error creating outline board:",t)}}))}newMindMap(t){var i;return e(this,void 0,void 0,(function*(){const n=t||this.app.fileManager.getNewFileParent((null===(i=this.app.workspace.getActiveFile())||void 0===i?void 0:i.path)||"");try{const t=yield this.app.fileManager.createNewMarkdownFile(n,`${s("Untitled mindmap")}`);"basic"==this.settings.mindmapmode?yield this.app.vault.modify(t,a):yield this.app.vault.modify(t,h);var r={type:"mindmapview",state:{file:t.path}};setTimeout((()=>e(this,void 0,void 0,(function*(){yield this.app.workspace.getLeaf().setViewState(r)}))),100)}catch(t){console.error("Error creating mindmap board:",t)}}))}loadSettings(){return e(this,void 0,void 0,(function*(){this.settings=Object.assign({canvasSize:8e3,headLevel:2,fontSize:16,background:"transparent",layout:"mindmap",layoutDirect:"mindmap",protocol:"jump-to-pdf",registerPdfEvent:!0,viewerTheme:2,mindmapmode:"basic",parseMindMap:!0,annotateTop:0,annotateBottom:0,highlightFormat:'\nPage:{{page}}\n<span style="color:rgb({{color}})">■</span>:{{highlightText}}\nComment:{{comment}}\n[📌]({{link}})\n^{{id}}\n'},yield this.loadData()),this.settings.pdfjsPath&&(t.Platform.isDesktopApp?Object.assign(window,{pdf_plugin_path:this.settings.pdfjsPath}):t.Platform.isAndroidApp?Object.assign(window,{pdf_plugin_path:this.settings.pdfjsAndriodPath||this.settings.pdfjsPath}):t.Platform.isIosApp&&Object.assign(window,{pdf_plugin_path:this.settings.pdfjsIosPath||this.settings.pdfjsPath}))}))}saveSettings(){return e(this,void 0,void 0,(function*(){yield this.saveData(this.settings)}))}setMarkdownView(t){return e(this,void 0,void 0,(function*(){yield t.setViewState({type:"markdown",state:t.view.getState(),popstate:!0},{focus:!0})}))}setMindMapView(t){return e(this,void 0,void 0,(function*(){yield t.setViewState({type:"mindmapview",state:t.view.getState(),popstate:!0})}))}registerEvents(){this.registerEvent(this.app.workspace.on("file-menu",((e,i,n,r)=>{if(i instanceof t.TFolder&&e.addItem((t=>{t.setTitle(`${s("New mindmap board")}`).setIcon("document").onClick((()=>this.newMindMap(i)))})),r&&"markdown"==this.mindmapFileModes[r.id||i.path]){const t=this.app.metadataCache.getFileCache(i);if((null==t?void 0:t.frontmatter)&&t.frontmatter["annotate-target"]){var o=t.frontmatter["annotate-target"];o=o.toLowerCase();var a="";a=o.endsWith(".epub")?`${s("Annotate EPUB")}`:`${s("Annotate PDF")}`,e.addItem((t=>{t.setTitle(a).setIcon("document").onClick((()=>{this.mindmapFileModes[r.id||i.path]="mindmapview",this.setMindMapView(r)}))})).addSeparator()}(null==t?void 0:t.frontmatter)&&t.frontmatter["mindmap-plugin"]&&e.addItem((t=>{t.setTitle(`${s("Open as mindmap board")}`).setIcon("document").onClick((()=>{this.mindmapFileModes[r.id||i.path]="mindmapview",this.setMindMapView(r)}))})).addSeparator()}}))),this.registerEvent(this.app.metadataCache.on("changed",(t=>{this.app.workspace.getLeavesOfType("mindmapview").forEach((e=>{const i=e.view;i instanceof Wn&&i.onFileMetadataChange(t)}))}))),this.registerEvent(this.app.vault.on("rename",((t,e)=>{this.app.workspace.getLeavesOfType("mindmapview").forEach((i=>{const n=i.view;n instanceof Wn&&n.onFileRename(t,e)}))})))}isAnnotationFile(t){return!!(t&&t.frontmatter&&t.frontmatter["annotate-target"])}isMindmap(t){if(t&&t.frontmatter){var e=t.frontmatter["mindmap-plugin"];return"rich"==e||"basic"==e}return!1}isMindmapRichMode(t){return!!(t&&t.frontmatter&&t.frontmatter["mindmap-plugin"]&&"rich"==t.frontmatter["mindmap-plugin"])}addMarkdownPostProcessor(){var i=this;this.registerMarkdownPostProcessor(((n,r)=>e(this,void 0,void 0,(function*(){for(let i of n.querySelectorAll(".internal-embed")){var e=i.getAttribute("src")||"";const h=t.parseLinktext(e);if(!h)return;const l=h.subpath.startsWith("#^")?h.subpath.substr(2):null,u=this.app.metadataCache.getFirstLinkpathDest(h.path,r.sourcePath);if(!u)return;var s=this.app.metadataCache.getFileCache(u);if(this.isMindmap(s))if(this.isMindmapRichMode(s))yield c(this.app,u,n,null,this.colors,this.settings,(t=>{if(t&&l){var e=t.getNodeById(l);e&&(t.clearSelectNode(),t.showNode(e))}}));else{var o=s&&s.frontmatter;if(o)var a=!!o["display-mode"]&&"table"==o["display-mode"];yield d(this.app,u,n,null,this.colors,this.settings,(t=>{if(t&&l){var e=t.getNodeById(l);e&&(t.clearSelectNode(),t.showNode(e))}}),0,a)}}for(let e of n.querySelectorAll("a.internal-link")){const n=e.getAttribute("href"),o=t.parseLinktext(n);if(!o)return;const a=o.subpath.startsWith("#^")?o.subpath.substr(2):null,h=this.app.metadataCache.getFirstLinkpathDest(o.path,r.sourcePath);if(!h)return;s=this.app.metadataCache.getFileCache(h);this.isMindmapRichMode(s)&&(e._file=h,e._metaCache=s,e.onClickEvent((function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();const n=i.app.workspace.getLeavesOfType("mindmapview");if(n.length){var r=null;if(n.forEach((t=>{t.view&&t.view.mindmap&&t.view.file.path==e._file.path&&(r=t.view)})),r){var s=r.mindmap.getNodeById(a);s&&r.mindmap.showNode(s)}else Object.assign(window,{"show-mindmap-node":a}),i.app.workspace.openLinkText(e._file.path,"",!0)}else i.app.workspace.openLinkText(e._file.path,"",!0)}))),(this.isAnnotationFile(s)||o.path.endsWith(".pdf")&&this.settings.registerPdfEvent)&&(e._file=h,e._metaCache=s,e.onClickEvent((function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();const n=i.app.workspace.getLeavesOfType("mindmapview");var r=i.isAnnotationFile(this._metaCache)?this._metaCache.frontmatter["annotate-target"]:this._file.path;if(n.length){var s=null;if(n.forEach((t=>{t.view&&t.view._haveOpenPdf&&(s=t.view)})),s)s.showAnnotate(a,r);else{if(r.startsWith("file://")||r.startsWith("http"))var o=r;else o=t.normalizePath(r);i.openPDfView(o,a)}}else{if(r.startsWith("file://")||r.startsWith("http"))o=r;else o=t.normalizePath(r);i.openPDfView(o,a)}})))}}))))}registerMonkeyAround(){const e=this;this.register(i(t.WorkspaceLeaf.prototype,{detach:t=>function(){var i;const n=null===(i=this.view)||void 0===i?void 0:i.getState();return(null==n?void 0:n.file)&&e.mindmapFileModes[this.id||n.file]&&delete e.mindmapFileModes[this.id||n.file],t.apply(this)},setViewState:t=>function(i,...n){var r;if(e._loaded&&"markdown"===i.type&&(null===(r=i.state)||void 0===r?void 0:r.file)&&"markdown"!==e.mindmapFileModes[this.id||i.state.file]){const r=e.app.metadataCache.getCache(i.state.file);if((null==r?void 0:r.frontmatter)&&(r.frontmatter["mindmap-plugin"]||r.frontmatter["annotate-target"])){const r=Object.assign(Object.assign({},i),{type:"mindmapview"});return e.mindmapFileModes[i.state.file]="mindmapview",t.apply(this,[r,...n])}}return t.apply(this,[i,...n])}}))}}module.exports=Vn;
