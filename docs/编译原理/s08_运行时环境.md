# 第 8 章 运行时环境

## 8.1. 概述

运行时环境包含

- 运行时刻存储空间的管理策略
    - 静态
    - 栈式
    - 堆策略
- 符号表管理
    - 除了便宜过程中需要外，有些符号表信息会保存到运行时，如程序的 DEBUG 版本
- 垃圾回收策略
- 运行支持库

符号表是编译过程中访问最频繁的操作区域。在词法分析阶段，当遇到一个标识符时，会把标识符的名字登记到符号表，当标识符所关联的语法信息有了明确的定义或说明后，就要在符号表中新增加一个条目（或更改一个条目），将该标识符及其相关的语法信息全部登记到符号表中。

==运行时存储空间的管理策略是运行时环境的核心任务之一。==

## 8.2. 符号表

### 8.2.1. 符号表的结构

|            | 名字 | 类型         | 种类 | 大小 | 地址偏移 | 其他信息 |
| ---------- | ---- | ------------ | ---- | ---- | -------- | -------- |
| 第一项入口 | a    | int          | VAR  | 4    | 0        |          |
| 第二项入口 | f1   | float        | VAR  | 8    | 4        |          |
| 第三项入口 | pa   | pointer(int) | VAR  | 4    | 12       |          |

名字栏是符号表的主栏，查找等操作通常是按名字进行的。由于程序中标识符的名字长短不一，因此通常对名字采取一种间接的方式：专门开辟一个存储区域存放长短不一的名字，然后用一对 $(x,y)$ 指明名字的位置和长度。

符号表的种类多，常见有：常量表、变量表、标号表、函数名表、数组内情向量子表等。



